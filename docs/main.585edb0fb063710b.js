"use strict";(self.webpackChunkproject_tracking=self.webpackChunkproject_tracking||[]).push([[179],{2011:(at,Te,R)=>{R.d(Te,{Dh:()=>le,GT:()=>ge,cc:()=>Me,hO:()=>je,on:()=>z,pX:()=>oe,xv:()=>me});var c=R(4650),B=R(127),N=R(5813);at=R.hmd(at);const ie=["ngOnDestroy"],oe=(fe,Qe,We,Ne={})=>new Proxy(fe,{get:(Ae,we)=>We.runOutsideAngular(()=>{var He;if(fe[we])return!(null===(He=Ne?.spy)||void 0===He)&&He.get&&Ne.spy.get(we,fe[we]),fe[we];if(ie.indexOf(we)>-1)return()=>{};const ne=Qe.toPromise().then(ue=>{const ye=ue&&ue[we];return"function"==typeof ye?ye.bind(ue):ye&&ye.then?ye.then(K=>We.run(()=>K)):We.run(()=>ye)});return new Proxy(()=>{},{get:(ue,ye)=>ne[ye],apply:(ue,ye,K)=>ne.then(J=>{var de;const se=J&&J(...K);return!(null===(de=Ne?.spy)||void 0===de)&&de.apply&&Ne.spy.apply(we,K,se),se})})})}),ge=(fe,Qe)=>{Qe.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Ne=>{Object.defineProperty(fe.prototype,Ne,Object.getOwnPropertyDescriptor(We.prototype||We,Ne))})})};class he{constructor(Qe){return Qe}}const le=new c.OlP("angularfire2.app.options"),me=new c.OlP("angularfire2.app.name");function z(fe,Qe,We){const Ae="object"==typeof We&&We||{};Ae.name=Ae.name||"string"==typeof We&&We||"[DEFAULT]";const He=B.Z.apps.filter(ne=>ne&&ne.name===Ae.name)[0]||Qe.runOutsideAngular(()=>B.Z.initializeApp(fe,Ae));try{JSON.stringify(fe)!==JSON.stringify(He.options)&&H("error",`${He.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(He)}const H=(fe,...Qe)=>{(0,c.X6Q)()&&typeof console<"u"&&console[fe](...Qe)},Y={provide:he,useFactory:z,deps:[le,c.R0b,[new c.FiY,me]]};let je=(()=>{class fe{constructor(We){B.Z.registerVersion("angularfire",N.q4.full,"core"),B.Z.registerVersion("angularfire",N.q4.full,"app-compat"),B.Z.registerVersion("angular",c.q4F.full,We.toString())}static initializeApp(We,Ne){return{ngModule:fe,providers:[{provide:le,useValue:We},{provide:me,useValue:Ne}]}}}return fe.\u0275fac=function(We){return new(We||fe)(c.LFG(c.Lbi))},fe.\u0275mod=c.oAB({type:fe}),fe.\u0275inj=c.cJS({providers:[Y]}),fe})();function Me(fe,Qe,We,Ne,Ae){const[,we,He]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===fe)||[];if(we)return function Ee(fe,Qe){try{return fe.toString()===Qe.toString()}catch{return fe===Qe}}(Ae,He)||(_e("error",`${Qe} was already initialized on the ${We} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Ae,was:He})),we;{const ne=Ne();return globalThis.\u0275AngularfireInstanceCache.push([fe,ne,Ae]),ne}}const tt=!!at.hot,_e=(fe,...Qe)=>{(0,c.X6Q)()&&typeof console<"u"&&console[fe](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Te,R)=>{R.d(Te,{q4:()=>qr,iC:()=>es,HU:()=>gs,vb:()=>Ta,JM:()=>No});var c=R(4650),B=R(5867),N=R(5861),ie=R(9681),oe=R(2090),ge=R(4859),he=R(1877),le=R(8766);const me="@firebase/installations",z="0.5.16",Y=`w:${z}`,je="FIS_v2",Qe=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function Ne({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ae(I){return{token:I.token,requestStatus:2,expiresIn:J(I.expiresIn),creationTime:Date.now()}}function we(I,D){return He.apply(this,arguments)}function He(){return(He=(0,N.Z)(function*(I,D){const V=(yield D.json()).error;return Qe.create("request-failed",{requestName:I,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function ne({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ue(I,{refreshToken:D}){const x=ne(I);return x.append("Authorization",function de(I){return`${je} ${I}`}(D)),x}function ye(I){return K.apply(this,arguments)}function K(){return(K=(0,N.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function J(I){return Number(I.replace("s","000"))}function se(I,D){return Le.apply(this,arguments)}function Le(){return(Le=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:x}){const V=Ne(I),Q=ne(I),ae=D.getImmediate({optional:!0});if(ae){const bt=yield ae.getHeartbeatsHeader();bt&&Q.append("x-firebase-client",bt)}const Ge={method:"POST",headers:Q,body:JSON.stringify({fid:x,authVersion:je,appId:I.appId,sdkVersion:Y})},yt=yield ye(()=>fetch(V,Ge));if(yt.ok){const bt=yield yt.json();return{fid:bt.fid||x,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Ae(bt.authToken)}}throw yield we("Create Installation",yt)})).apply(this,arguments)}function Be(I){return new Promise(D=>{setTimeout(D,I)})}const Xt=/^[cdef][\w-]{21}$/;function ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function an(I){return function pt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Xt.test(x)?x:""}catch{return""}}function mn(I){return`${I.appName}!${I.appId}`}const Qt=new Map;function Jt(I,D){const x=mn(I);br(x,D),function Si(I,D){const x=function Mn(){return!Or&&"BroadcastChannel"in self&&(Or=new BroadcastChannel("[Firebase] FID Change"),Or.onmessage=I=>{br(I.data.key,I.data.fid)}),Or}();x&&x.postMessage({key:I,fid:D}),function ji(){0===Qt.size&&Or&&(Or.close(),Or=null)}()}(x,D)}function br(I,D){const x=Qt.get(I);if(x)for(const V of x)V(D)}let Or=null;const Bn="firebase-installations-store";let fi=null;function Hi(){return fi||(fi=(0,le.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Bn)}})),fi}function Ye(I,D){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,N.Z)(function*(I,D){const x=mn(I),Q=(yield Hi()).transaction(Bn,"readwrite"),ae=Q.objectStore(Bn),xe=yield ae.get(x);return yield ae.put(D,x),yield Q.done,(!xe||xe.fid!==D.fid)&&Jt(I,D.fid),D})).apply(this,arguments)}function jn(I){return gn.apply(this,arguments)}function gn(){return(gn=(0,N.Z)(function*(I){const D=mn(I),V=(yield Hi()).transaction(Bn,"readwrite");yield V.objectStore(Bn).delete(D),yield V.done})).apply(this,arguments)}function hr(I,D){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,N.Z)(function*(I,D){const x=mn(I),Q=(yield Hi()).transaction(Bn,"readwrite"),ae=Q.objectStore(Bn),xe=yield ae.get(x),Ge=D(xe);return void 0===Ge?yield ae.delete(x):yield ae.put(Ge,x),yield Q.done,Ge&&(!xe||xe.fid!==Ge.fid)&&Jt(I,Ge.fid),Ge})).apply(this,arguments)}function yn(I){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(I){let D;const x=yield hr(I.appConfig,V=>{const Q=hn(V),ae=ct(I,Q);return D=ae.registrationPromise,ae.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function hn(I){return Et(I||{fid:ze(),registrationStatus:0})}function ct(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Qe.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function lt(I,D){return Dt.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Br(I)}:{installationEntry:D}}function Dt(){return(Dt=(0,N.Z)(function*(I,D){try{const x=yield se(I,D);return Ye(I.appConfig,x)}catch(x){throw We(x)&&409===x.customData.serverCode?yield jn(I.appConfig):yield Ye(I.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Br(I){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,N.Z)(function*(I){let D=yield Ir(I.appConfig);for(;1===D.registrationStatus;)yield Be(100),D=yield Ir(I.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield yn(I);return V||x}return D})).apply(this,arguments)}function Ir(I){return hr(I,D=>{if(!D)throw Qe.create("installation-not-found");return Et(D)})}function Et(I){return function Nr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Pt(I,D){return ni.apply(this,arguments)}function ni(){return(ni=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},x){const V=Zt(I,x),Q=ue(I,x),ae=D.getImmediate({optional:!0});if(ae){const bt=yield ae.getHeartbeatsHeader();bt&&Q.append("x-firebase-client",bt)}const Ge={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:Y,appId:I.appId}})},yt=yield ye(()=>fetch(V,Ge));if(yt.ok)return Ae(yield yt.json());throw yield we("Generate Auth Token",yt)})).apply(this,arguments)}function Zt(I,{fid:D}){return`${Ne(I)}/${D}/authTokens:generate`}function or(I){return bn.apply(this,arguments)}function bn(){return(bn=(0,N.Z)(function*(I,D=!1){let x;const V=yield hr(I.appConfig,ae=>{if(!Wt(ae))throw Qe.create("not-registered");const xe=ae.authToken;if(!D&&G(xe))return ae;if(1===xe.requestStatus)return x=Je(I,D),ae;{if(!navigator.onLine)throw Qe.create("app-offline");const Ge=W(ae);return x=_t(I,Ge),Ge}});return x?yield x:V.authToken})).apply(this,arguments)}function Je(I,D){return be.apply(this,arguments)}function be(){return(be=(0,N.Z)(function*(I,D){let x=yield Xe(I.appConfig);for(;1===x.authToken.requestStatus;)yield Be(100),x=yield Xe(I.appConfig);const V=x.authToken;return 0===V.requestStatus?or(I,D):V})).apply(this,arguments)}function Xe(I){return hr(I,D=>{if(!Wt(D))throw Qe.create("not-registered");return function U(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function _t(I,D){return vt.apply(this,arguments)}function vt(){return(vt=(0,N.Z)(function*(I,D){try{const x=yield Pt(I,D),V=Object.assign(Object.assign({},D),{authToken:x});return yield Ye(I.appConfig,V),x}catch(x){if(!We(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ye(I.appConfig,V)}else yield jn(I.appConfig);throw x}})).apply(this,arguments)}function Wt(I){return void 0!==I&&2===I.registrationStatus}function G(I){return 2===I.requestStatus&&!function j(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function W(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function L(){return(L=(0,N.Z)(function*(I){const D=I,{installationEntry:x,registrationPromise:V}=yield yn(D);return V?V.catch(console.error):or(D).catch(console.error),x.fid})).apply(this,arguments)}function Pe(){return(Pe=(0,N.Z)(function*(I,D=!1){const x=I;return yield nt(x),(yield or(x,D)).token})).apply(this,arguments)}function nt(I){return rt.apply(this,arguments)}function rt(){return(rt=(0,N.Z)(function*(I){const{registrationPromise:D}=yield yn(I);D&&(yield D)})).apply(this,arguments)}function Ns(I){return Qe.create("missing-app-config-values",{valueName:I})}const so="installations",ks=I=>{const D=I.getProvider("app").getImmediate(),x=function vn(I){if(!I||!I.options)throw Ns("App Configuration");if(!I.name)throw Ns("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!I.options[x])throw Ns(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Rs=I=>{const D=I.getProvider("app").getImmediate(),x=(0,ie._getProvider)(D,so).getImmediate();return{getId:()=>function M(I){return L.apply(this,arguments)}(x),getToken:Q=>function ee(I){return Pe.apply(this,arguments)}(x,Q)}};(function eu(){(0,ie._registerComponent)(new ge.wA(so,ks,"PUBLIC")),(0,ie._registerComponent)(new ge.wA("installations-internal",Rs,"PRIVATE"))})(),(0,ie.registerVersion)(me,z),(0,ie.registerVersion)(me,z,"esm2017");const zi="@firebase/remote-config",Hn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class nu{constructor(D,x,V,Q){this.client=D,this.storage=x,this.storageCache=V,this.logger=Q}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,Q=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Q}.`),Q}fetch(D){var x=this;return(0,N.Z)(function*(){const[V,Q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Q&&x.isCachedDataFresh(D.cacheMaxAgeMillis,V))return Q;D.eTag=Q&&Q.eTag;const ae=yield x.client.fetch(D),xe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&xe.push(x.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(xe),ae})()}}function oa(I=navigator){return I.languages&&I.languages[0]||I.language}class Us{constructor(D,x,V,Q,ae,xe){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=V,this.projectId=Q,this.apiKey=ae,this.appId=xe}fetch(D){var x=this;return(0,N.Z)(function*(){var V,Q,ae;const[xe,Ge]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ht={sdk_version:x.sdkVersion,app_instance_id:xe,app_instance_id_token:Ge,app_id:x.appId,language_code:oa()},kn={method:"POST",headers:Ft,body:JSON.stringify(ht)},ar=fetch(bt,kn),Fo=new Promise((Uo,Bo)=>{D.signal.addEventListener(()=>{const lc=new Error("The operation was aborted.");lc.name="AbortError",Bo(lc)})});let ys;try{yield Promise.race([ar,Fo]),ys=yield ar}catch(Uo){let Bo="fetch-client-network";throw"AbortError"===(null===(V=Uo)||void 0===V?void 0:V.name)&&(Bo="fetch-timeout"),Hn.create(Bo,{originalErrorMessage:null===(Q=Uo)||void 0===Q?void 0:Q.message})}let Lo=ys.status;const Vo=ys.headers.get("ETag")||void 0;let _s,Sa;if(200===ys.status){let Uo;try{Uo=yield ys.json()}catch(Bo){throw Hn.create("fetch-client-parse",{originalErrorMessage:null===(ae=Bo)||void 0===ae?void 0:ae.message})}_s=Uo.entries,Sa=Uo.state}if("INSTANCE_STATE_UNSPECIFIED"===Sa?Lo=500:"NO_CHANGE"===Sa?Lo=304:("NO_TEMPLATE"===Sa||"EMPTY_CONFIG"===Sa)&&(_s={}),304!==Lo&&200!==Lo)throw Hn.create("fetch-status",{httpStatus:Lo});return{status:Lo,eTag:Vo,config:_s}})()}}class Zi{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,N.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:V}){var Q=this;return(0,N.Z)(function*(){yield function si(I,D){return new Promise((x,V)=>{const Q=Math.max(D-Date.now(),0),ae=setTimeout(x,Q);I.addEventListener(()=>{clearTimeout(ae),V(Hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const ae=yield Q.client.fetch(D);return yield Q.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function Op(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ae))throw ae;const xe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(V),backoffCount:V+1};return yield Q.storage.setThrottleMetadata(xe),Q.attemptFetch(D,xe)}})()}}class Np{constructor(D,x,V,Q,ae){this.app=D,this._client=x,this._storageCache=V,this._storage=Q,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bs(I,D){var x;const V=I.target.error||void 0;return Hn.create(D,{originalErrorMessage:V&&(null===(x=V)||void 0===x?void 0:x.message)})}const ao="app_namespace_store";class gl{constructor(D,x,V,Q=function Rp(){return new Promise((I,D)=>{var x;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=Q=>{D(Bs(Q,"storage-open"))},V.onsuccess=Q=>{I(Q.target.result)},V.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(ao,{keyPath:"compositeKey"})}}catch(V){D(Hn.create("storage-open",{originalErrorMessage:null===(x=V)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=V,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,N.Z)(function*(){const V=yield x.openDbPromise;return new Promise((Q,ae)=>{var xe;const yt=V.transaction([ao],"readonly").objectStore(ao),bt=x.createCompositeKey(D);try{const Ft=yt.get(bt);Ft.onerror=ht=>{ae(Bs(ht,"storage-get"))},Ft.onsuccess=ht=>{const kn=ht.target.result;Q(kn?kn.value:void 0)}}catch(Ft){ae(Hn.create("storage-get",{originalErrorMessage:null===(xe=Ft)||void 0===xe?void 0:xe.message}))}})})()}set(D,x){var V=this;return(0,N.Z)(function*(){const Q=yield V.openDbPromise;return new Promise((ae,xe)=>{var Ge;const bt=Q.transaction([ao],"readwrite").objectStore(ao),Ft=V.createCompositeKey(D);try{const ht=bt.put({compositeKey:Ft,value:x});ht.onerror=kn=>{xe(Bs(kn,"storage-set"))},ht.onsuccess=()=>{ae()}}catch(ht){xe(Hn.create("storage-set",{originalErrorMessage:null===(Ge=ht)||void 0===Ge?void 0:Ge.message}))}})})()}delete(D){var x=this;return(0,N.Z)(function*(){const V=yield x.openDbPromise;return new Promise((Q,ae)=>{var xe;const yt=V.transaction([ao],"readwrite").objectStore(ao),bt=x.createCompositeKey(D);try{const Ft=yt.delete(bt);Ft.onerror=ht=>{ae(Bs(ht,"storage-delete"))},Ft.onsuccess=()=>{Q()}}catch(Ft){ae(Hn.create("storage-delete",{originalErrorMessage:null===(xe=Ft)||void 0===xe?void 0:xe.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class uo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const x=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),Q=D.storage.getActiveConfig(),ae=yield x;ae&&(D.lastFetchStatus=ae);const xe=yield V;xe&&(D.lastSuccessfulFetchTimestampMillis=xe);const Ge=yield Q;Ge&&(D.activeConfig=Ge)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Jm(){return ru.apply(this,arguments)}function ru(){return(ru=(0,N.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function ml(){(0,ie._registerComponent)(new ge.wA("remote-config",function I(D,{instanceIdentifier:x}){const V=D.getProvider("app").getImmediate(),Q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Hn.create("registration-window");if(!(0,oe.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:ae,apiKey:xe,appId:Ge}=V.options;if(!ae)throw Hn.create("registration-project-id");if(!xe)throw Hn.create("registration-api-key");if(!Ge)throw Hn.create("registration-app-id");const yt=new gl(Ge,V.name,x=x||"firebase"),bt=new uo(yt),Ft=new he.Yd(zi);Ft.logLevel=he.in.ERROR;const ht=new Us(Q,ie.SDK_VERSION,x,ae,xe,Ge),kn=new Zi(ht,yt),ar=new nu(kn,yt,bt,Ft),Fo=new Np(V,ar,bt,yt,Ft);return function fn(I){const D=(0,oe.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Fo),Fo},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(zi,"0.3.15"),(0,ie.registerVersion)(zi,"0.3.15","esm2017")}();const yr="/firebase-messaging-sw.js",js="/firebase-cloud-messaging-push-scope",cs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",iu="google.c.a.c_id",Gu="google.c.a.c_l",vl="google.c.a.ts",lo="google.c.a.e";var oi=(()=>{return(I=oi||(oi={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",oi;var I})();function Wi(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hr(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),Q=new Uint8Array(V.length);for(let ae=0;ae<V.length;++ae)Q[ae]=V.charCodeAt(ae);return Q}const $s="fcm_token_details_db",ho="fcm_token_object_Store";function Fp(I){return zu.apply(this,arguments)}function zu(){return zu=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes($s))return null;let D=null;return(yield(0,le.X3)($s,5,{upgrade:(V=(0,N.Z)(function*(Q,ae,xe,Ge){var yt;if(ae<2||!Q.objectStoreNames.contains(ho))return;const bt=Ge.objectStore(ho),Ft=yield bt.index("fcmSenderId").get(I);if(yield bt.clear(),Ft)if(2===ae){const ht=Ft;if(!ht.auth||!ht.p256dh||!ht.endpoint)return;D={token:ht.fcmToken,createTime:null!==(yt=ht.createTime)&&void 0!==yt?yt:Date.now(),subscriptionOptions:{auth:ht.auth,p256dh:ht.p256dh,endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:"string"==typeof ht.vapidKey?ht.vapidKey:Wi(ht.vapidKey)}}}else if(3===ae){const ht=Ft;D={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:Wi(ht.auth),p256dh:Wi(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:Wi(ht.vapidKey)}}}else if(4===ae){const ht=Ft;D={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:Wi(ht.auth),p256dh:Wi(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:Wi(ht.vapidKey)}}}}),function(ae,xe,Ge,yt){return V.apply(this,arguments)})})).close(),yield(0,le.Lj)($s),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),On(D)?D:null;var V}),zu.apply(this,arguments)}function On(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const gi="firebase-messaging-store";let _r=null;function su(){return _r||(_r=(0,le.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(gi)}})),_r}function Hs(I){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,N.Z)(function*(I){const D=ai(I),V=yield(yield su()).transaction(gi).objectStore(gi).get(D);if(V)return V;{const Q=yield Fp(I.appConfig.senderId);if(Q)return yield en(I,Q),Q}})).apply(this,arguments)}function en(I,D){return qu.apply(this,arguments)}function qu(){return(qu=(0,N.Z)(function*(I,D){const x=ai(I),Q=(yield su()).transaction(gi,"readwrite");return yield Q.objectStore(gi).put(D,x),yield Q.done,D})).apply(this,arguments)}function ls(I){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,N.Z)(function*(I){const D=ai(I),V=(yield su()).transaction(gi,"readwrite");yield V.objectStore(gi).delete(D),yield V.done})).apply(this,arguments)}function ai({appConfig:I}){return I.appId}const Fn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xt(I,D){return ua.apply(this,arguments)}function ua(){return(ua=(0,N.Z)(function*(I,D){var x;const V=yield da(I),Q=Se(D),ae={method:"POST",headers:V,body:JSON.stringify(Q)};let xe;try{xe=yield(yield fetch(Gs(I.appConfig),ae)).json()}catch(Ge){throw Fn.create("token-subscribe-failed",{errorInfo:null===(x=Ge)||void 0===x?void 0:x.toString()})}if(xe.error)throw Fn.create("token-subscribe-failed",{errorInfo:xe.error.message});if(!xe.token)throw Fn.create("token-subscribe-no-token");return xe.token})).apply(this,arguments)}function Lp(I,D){return ca.apply(this,arguments)}function ca(){return(ca=(0,N.Z)(function*(I,D){var x;const V=yield da(I),Q=Se(D.subscriptionOptions),ae={method:"PATCH",headers:V,body:JSON.stringify(Q)};let xe;try{xe=yield(yield fetch(`${Gs(I.appConfig)}/${D.token}`,ae)).json()}catch(Ge){throw Fn.create("token-update-failed",{errorInfo:null===(x=Ge)||void 0===x?void 0:x.toString()})}if(xe.error)throw Fn.create("token-update-failed",{errorInfo:xe.error.message});if(!xe.token)throw Fn.create("token-update-no-token");return xe.token})).apply(this,arguments)}function Cl(I,D){return la.apply(this,arguments)}function la(){return(la=(0,N.Z)(function*(I,D){var x;const Q={method:"DELETE",headers:yield da(I)};try{const xe=yield(yield fetch(`${Gs(I.appConfig)}/${D}`,Q)).json();if(xe.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:xe.error.message})}catch(ae){throw Fn.create("token-unsubscribe-failed",{errorInfo:null===(x=ae)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Gs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function da(I){return fo.apply(this,arguments)}function fo(){return(fo=(0,N.Z)(function*({appConfig:I,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Se({p256dh:I,auth:D,endpoint:x,vapidKey:V}){const Q={web:{endpoint:x,auth:D,p256dh:I}};return V!==cs&&(Q.web.applicationPubKey=V),Q}const qt=6048e5;function ph(I){return po.apply(this,arguments)}function po(){return(po=(0,N.Z)(function*(I){const D=yield gh(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Wi(D.getKey("auth")),p256dh:Wi(D.getKey("p256dh"))},V=yield Hs(I.firebaseDependencies);if(V){if(Vp(V.subscriptionOptions,x))return Date.now()>=V.createTime+qt?ou(I,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield Cl(I.firebaseDependencies,V.token)}catch(Q){console.warn(Q)}return au(I.firebaseDependencies,x)}return au(I.firebaseDependencies,x)})).apply(this,arguments)}function Yn(I){return go.apply(this,arguments)}function go(){return(go=(0,N.Z)(function*(I){const D=yield Hs(I.firebaseDependencies);D&&(yield Cl(I.firebaseDependencies,D.token),yield ls(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function ou(I,D){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,N.Z)(function*(I,D){try{const x=yield Lp(I.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield en(I.firebaseDependencies,V),x}catch(x){throw yield Yn(I),x}})).apply(this,arguments)}function au(I,D){return mo.apply(this,arguments)}function mo(){return(mo=(0,N.Z)(function*(I,D){const V={token:yield xt(I,D),createTime:Date.now(),subscriptionOptions:D};return yield en(I,V),V.token})).apply(this,arguments)}function gh(I,D){return ha.apply(this,arguments)}function ha(){return(ha=(0,N.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hr(D)})})).apply(this,arguments)}function Vp(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function zs(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Qn(I,D){if(!D.notification)return;I.notification={};const x=D.notification.title;x&&(I.notification.title=x);const V=D.notification.body;V&&(I.notification.body=V);const Q=D.notification.image;Q&&(I.notification.image=Q);const ae=D.notification.icon;ae&&(I.notification.icon=ae)}(D,I),function xi(I,D){!D.data||(I.data=D.data)}(D,I),function fa(I,D){var x,V,Q,ae,xe;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const Ge=null!==(Q=null===(V=D.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Q?Q:null===(ae=D.notification)||void 0===ae?void 0:ae.click_action;Ge&&(I.fcmOptions.link=Ge);const yt=null===(xe=D.fcmOptions)||void 0===xe?void 0:xe.analytics_label;yt&&(I.fcmOptions.analyticsLabel=yt)}(D,I),D}function pa(I){return"object"==typeof I&&!!I&&iu in I}function Ki(I,D){const x=[];for(let V=0;V<I.length;V++)x.push(I.charAt(V)),V<D.length&&x.push(D.charAt(V));return x.join("")}function Wu(I){return Fn.create("missing-app-config-values",{valueName:I})}Ki("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ki("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class bl{constructor(D,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function El(I){if(!I||!I.options)throw Wu("App Configuration Object");if(!I.name)throw Wu("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const V of D)if(!x[V])throw Wu(V);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Q,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function mh(I){return yo.apply(this,arguments)}function yo(){return(yo=(0,N.Z)(function*(I){var D;try{I.swRegistration=yield navigator.serviceWorker.register(yr,{scope:js}),I.swRegistration.update().catch(()=>{})}catch(x){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Ku(I,D){return ga.apply(this,arguments)}function ga(){return(ga=(0,N.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield mh(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function Yu(I,D){return ma.apply(this,arguments)}function ma(){return(ma=(0,N.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=cs)})).apply(this,arguments)}function _o(){return(_o=(0,N.Z)(function*(I,D){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield Yu(I,D?.vapidKey),yield Ku(I,D?.serviceWorkerRegistration),ph(I)})).apply(this,arguments)}function yh(I,D,x){return ya.apply(this,arguments)}function ya(){return(ya=(0,N.Z)(function*(I,D,x){const V=_h(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[iu],message_name:x[Gu],message_time:x[vl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function _h(I){switch(I){case oi.NOTIFICATION_CLICKED:return"notification_open";case oi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ds(){return(ds=(0,N.Z)(function*(I,D){const x=D.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===oi.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(zs(x)):I.onMessageHandler.next(zs(x)));const V=x.data;pa(V)&&"1"===V[lo]&&(yield yh(I,x.messageType,V))})).apply(this,arguments)}const hs="@firebase/messaging",Dn=I=>{const D=new bl(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Dl(I,D){return ds.apply(this,arguments)}(D,x)),D},Yi=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:V=>function Il(I,D){return _o.apply(this,arguments)}(D,V)}};function Qu(){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,N.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Tn(){(0,ie._registerComponent)(new ge.wA("messaging",Dn,"PUBLIC")),(0,ie._registerComponent)(new ge.wA("messaging-internal",Yi,"PRIVATE")),(0,ie.registerVersion)(hs,"0.11.0"),(0,ie.registerVersion)(hs,"0.11.0","esm2017")}();const wo="analytics",Al="firebase_id",nc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xl="https://www.googletagmanager.com/gtag/js",Ln=new he.Yd("@firebase/analytics");function cu(I){return Promise.all(I.map(D=>D.catch(x=>x)))}function lu(I,D){const x=document.createElement("script");x.src=`${xl}?l=${I}&id=${D}`,x.async=!0,document.head.appendChild(x)}function wh(I,D,x,V,Q,ae){return hu.apply(this,arguments)}function hu(){return(hu=(0,N.Z)(function*(I,D,x,V,Q,ae){const xe=V[Q];try{if(xe)yield D[xe];else{const yt=(yield cu(x)).find(bt=>bt.measurementId===Q);yt&&(yield D[yt.appId])}}catch(Ge){Ln.error(Ge)}I("config",Q,ae)})).apply(this,arguments)}function Qi(I,D,x,V,Q){return _a.apply(this,arguments)}function _a(){return(_a=(0,N.Z)(function*(I,D,x,V,Q){try{let ae=[];if(Q&&Q.send_to){let xe=Q.send_to;Array.isArray(xe)||(xe=[xe]);const Ge=yield cu(x);for(const yt of xe){const bt=Ge.find(ht=>ht.measurementId===yt),Ft=bt&&D[bt.appId];if(!Ft){ae=[];break}ae.push(Ft)}}0===ae.length&&(ae=Object.values(D)),yield Promise.all(ae),I("event",V,Q||{})}catch(ae){Ln.error(ae)}})).apply(this,arguments)}function Ml(I){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(xl)&&x.src.includes(I))return x;return null}const Jn=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wa=new class ic{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Co(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function bh(I){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,N.Z)(function*(I){var D;const{appId:x,apiKey:V}=I,Q={method:"GET",headers:Co(V)},ae=nc.replace("{app-id}",x),xe=yield fetch(ae,Q);if(200!==xe.status&&304!==xe.status){let Ge="";try{const yt=yield xe.json();null!==(D=yt.error)&&void 0!==D&&D.message&&(Ge=yt.error.message)}catch{}throw Jn.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Ge})}return xe.json()})).apply(this,arguments)}function Ol(I){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,N.Z)(function*(I,D=wa,x){const{appId:V,apiKey:Q,measurementId:ae}=I.options;if(!V)throw Jn.create("no-app-id");if(!Q){if(ae)return{measurementId:ae,appId:V};throw Jn.create("no-api-key")}const xe=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new Ca;return setTimeout((0,N.Z)(function*(){Ge.abort()}),void 0!==x?x:6e4),Pl({appId:V,apiKey:Q,measurementId:ae},xe,Ge,D)})).apply(this,arguments)}function Pl(I,D,x){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,N.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:x},V,Q=wa){var ae,xe;const{appId:Ge,measurementId:yt}=I;try{yield sc(V,D)}catch(bt){if(yt)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null===(ae=bt)||void 0===ae?void 0:ae.message}]`),{appId:Ge,measurementId:yt};throw bt}try{const bt=yield bh(I);return Q.deleteThrottleMetadata(Ge),bt}catch(bt){const Ft=bt;if(!fu(Ft)){if(Q.deleteThrottleMetadata(Ge),yt)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:Ge,measurementId:yt};throw bt}const ht=503===Number(null===(xe=Ft?.customData)||void 0===xe?void 0:xe.httpStatus)?(0,oe.$s)(x,Q.intervalMillis,30):(0,oe.$s)(x,Q.intervalMillis),kn={throttleEndTimeMillis:Date.now()+ht,backoffCount:x+1};return Q.setThrottleMetadata(Ge,kn),Ln.debug(`Calling attemptFetch again in ${ht} millis`),Pl(I,kn,V,Q)}})).apply(this,arguments)}function sc(I,D){return new Promise((x,V)=>{const Q=Math.max(D-Date.now(),0),ae=setTimeout(x,Q);I.addEventListener(()=>{clearTimeout(ae),V(Jn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function fu(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ca{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Zs,gu;function Eo(){return(Eo=(0,N.Z)(function*(I,D,x,V,Q){if(Q&&Q.global)I("event",x,V);else{const ae=yield D;I("event",x,Object.assign(Object.assign({},V),{send_to:ae}))}})).apply(this,arguments)}function To(I){gu=I}function oc(I){Zs=I}function ps(){return So.apply(this,arguments)}function So(){return(So=(0,N.Z)(function*(){var I;if(!(0,oe.hl)())return Ln.warn(Jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(D){return Ln.warn(Jn.create("indexeddb-unavailable",{errorInfo:null===(I=D)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Ao(){return(Ao=(0,N.Z)(function*(I,D,x,V,Q,ae,xe){var Ge;const yt=Ol(I);yt.then(ar=>{x[ar.measurementId]=ar.appId,I.options.measurementId&&ar.measurementId!==I.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${ar.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ar=>Ln.error(ar)),D.push(yt);const bt=ps().then(ar=>{if(ar)return V.getId()}),[Ft,ht]=yield Promise.all([yt,bt]);Ml(ae)||lu(ae,Ft.measurementId),gu&&(Q("consent","default",gu),To(void 0)),Q("js",new Date);const kn=null!==(Ge=xe?.config)&&void 0!==Ge?Ge:{};return kn.origin="firebase",kn.update=!0,null!=ht&&(kn[Al]=ht),Q("config",Ft.measurementId,kn),Zs&&(Q("set",Zs),oc(void 0)),Ft.measurementId})).apply(this,arguments)}class mu{constructor(D){this.app=D}_delete(){return delete Dr[this.app.options.appId],Promise.resolve()}}let Dr={},xo=[];const Ws={};let Oo,Oi,Mo="dataLayer",kl=!1;function Th(I,D,x){!function Up(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((V,Q)=>`(${Q+1}) ${V}`).join(" "),x=Jn.create("invalid-analytics-context",{errorInfo:D});Ln.warn(x.message)}}();const V=I.options.appId;if(!V)throw Jn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Jn.create("no-api-key");Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Dr[V])throw Jn.create("already-exists",{id:V});if(!kl){!function du(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Mo);const{wrappedGtag:ae,gtagCore:xe}=function va(I,D,x,V,Q){let ae=function(...xe){window[V].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ae=window[Q]),window[Q]=function rc(I,D,x,V){function ae(){return(ae=(0,N.Z)(function*(xe,Ge,yt){try{"event"===xe?yield Qi(I,D,x,Ge,yt):"config"===xe?yield wh(I,D,x,V,Ge,yt):"consent"===xe?I("consent","update",yt):I("set",Ge)}catch(bt){Ln.error(bt)}})).apply(this,arguments)}return function Q(xe,Ge,yt){return ae.apply(this,arguments)}}(ae,I,D,x),{gtagCore:ae,wrappedGtag:window[Q]}}(Dr,xo,Ws,Mo,"gtag");Oi=ae,Oo=xe,kl=!0}return Dr[V]=function Dh(I,D,x,V,Q,ae,xe){return Ao.apply(this,arguments)}(I,xo,Ws,D,Oo,Mo,x),new mu(I)}function ey(){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,N.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const it="@firebase/analytics";!function sn(){(0,ie._registerComponent)(new ge.wA(wo,(D,{options:x})=>Th(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new ge.wA("analytics-internal",function I(D){try{const x=D.getProvider(wo).getImmediate();return{logEvent:(V,Q,ae)=>function Pi(I,D,x,V){I=(0,oe.m9)(I),function Ea(I,D,x,V,Q){return Eo.apply(this,arguments)}(Oi,Dr[I.app.options.appId],D,x,V).catch(Q=>Ln.error(Q))}(x,V,Q,ae)}}catch(x){throw Jn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(it,"0.8.4"),(0,ie.registerVersion)(it,"0.8.4","esm2017")}();var _i=R(4408),Pn=R(7565);const zr=new class Sn extends Pn.v{}(class vi extends _i.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,x,V):(D.flush(this),0)}});var Rl=R(4986),Ks=R(8505),Ni=R(9468),Ah=R(5363);const qr=new c.GfV("7.4.1"),Ia="__angularfire_symbol__analyticsIsSupportedValue",ki="__angularfire_symbol__analyticsIsSupported",uc="__angularfire_symbol__remoteConfigIsSupportedValue",Da="__angularfire_symbol__remoteConfigIsSupported",Po="__angularfire_symbol__messagingIsSupportedValue",ci="__angularfire_symbol__messagingIsSupported";function No(I,D,x){if(D){if(1===D.length)return D[0];const ae=D.filter(xe=>xe.app===x);if(1===ae.length)return ae[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[ki]||(globalThis[ki]=ey().then(I=>globalThis[Ia]=I).catch(()=>globalThis[Ia]=!1)),globalThis[ci]||(globalThis[ci]=Qu().then(I=>globalThis[Po]=I).catch(()=>globalThis[Po]=!1)),globalThis[Da]||(globalThis[Da]=Jm().then(I=>globalThis[uc]=I).catch(()=>globalThis[uc]=!1));const Ta=(I,D)=>{const x=D?[D]:(0,B.C6)(),V=[];return x.forEach(Q=>{Q.container.getProvider(I).instances.forEach(xe=>{V.includes(xe)||V.push(xe)})}),V};function Xi(){}class Ri{constructor(D,x=zr){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,V){const Q=this.zone;return this.delegate.schedule(function(xe){Q.runGuarded(()=>{D.apply(this,[xe])})},x,V)}}class Nn{constructor(D){this.zone=D,this.task=null}call(D,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xi,{},Xi,Xi)),x.pipe((0,Ks.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gs=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ri(Zone.current)),this.insideAngular=x.run(()=>new Ri(Zone.current,Rl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(c.LFG(c.R0b))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function wi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function es(I){return wi(),function Vl(I){return function(x){return(x=x.lift(new Nn(I.ngZone))).pipe((0,Ni.R)(I.outsideAngular),(0,Ah.Q)(I.insideAngular))}}(wi())(I)}},8247:(at,Te,R)=>{R.d(Te,{$:()=>Gs,A:()=>H,B:()=>Me,G:()=>Rs,H:()=>jr,J:()=>Zi,L:()=>G,M:()=>ru,N:()=>_l,P:()=>Rl,Q:()=>iu,R:()=>ty,T:()=>Gu,U:()=>cs,V:()=>oi,W:()=>Wi,X:()=>Fp,Y:()=>aa,Z:()=>xt,_:()=>Lp,a:()=>fs,a0:()=>ph,a1:()=>Yn,a2:()=>ou,a3:()=>au,a4:()=>gh,a5:()=>Vp,a6:()=>Qn,a7:()=>xi,a8:()=>pa,a9:()=>Ki,aA:()=>j,aB:()=>yt,aC:()=>_u,aD:()=>ms,aE:()=>gt,aI:()=>Co,aL:()=>lo,aa:()=>mh,ab:()=>Ku,ac:()=>Yu,af:()=>yh,ag:()=>_h,ah:()=>Dl,ak:()=>gi,al:()=>Xu,an:()=>xl,ao:()=>hu,ap:()=>ye,aq:()=>Fe,ar:()=>nt,as:()=>We,at:()=>pr,au:()=>Vo,av:()=>Tt,aw:()=>Ne,ax:()=>ne,ay:()=>ar,az:()=>J,b:()=>Jn,c:()=>Po,d:()=>Bp,e:()=>Fl,f:()=>Vl,g:()=>V,h:()=>I,i:()=>So,j:()=>xe,k:()=>Rh,l:()=>yi,m:()=>Xs,n:()=>hy,o:()=>le,r:()=>_i,s:()=>dn,u:()=>zr,v:()=>qs});var c=R(5861),B=R(2090),N=R(9681),ie=R(1877),oe=R(655),ge=R(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function Y(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ee=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fe=new ie.Yd("@firebase/auth");function Qe(v,...p){fe.logLevel<=ie.in.ERROR&&fe.error(`Auth (${N.SDK_VERSION}): ${v}`,...p)}function We(v,...p){throw He(v,...p)}function Ne(v,...p){return He(v,...p)}function Ae(v,p,m){const C=Object.assign(Object.assign({},Ee()),{[p]:m});return new B.LL("auth","Firebase",C).create(p,{appName:v.name})}function we(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&We(v,"argument-error"),Ae(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(v,...p){if("string"!=typeof v){const m=p[0],C=[...p.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(m,...C)}return tt.create(v,...p)}function ne(v,p,...m){if(!v)throw He(p,...m)}function ue(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Qe(p),new Error(p)}function ye(v,p){v||ue(p)}const K=new Map;function J(v){ye(v instanceof Function,"Expected a class definition");let p=K.get(v);return p?(ye(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,K.set(v,p),p)}function Le(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Be(){return"http:"===pt()||"https:"===pt()}function pt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ze{constructor(p,m){this.shortDelay=p,this.longDelay=m,ye(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Xt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Be()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function an(v,p){ye(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class mn{static initialize(p,m,C){this.fetchImpl=p,m&&(this.headersImpl=m),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Jt=new ze(3e4,6e4);function Ht(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function kt(v,p,m,C){return br.apply(this,arguments)}function br(){return(br=(0,c.Z)(function*(v,p,m,C,A={}){return Si(v,A,(0,c.Z)(function*(){let k={},X={};C&&("GET"===p?X=C:k={body:JSON.stringify(C)});const Ie=(0,B.xO)(Object.assign({key:v.config.apiKey},X)).slice(1),et=yield v._getAdditionalHeaders();return et["Content-Type"]="application/json",v.languageCode&&(et["X-Firebase-Locale"]=v.languageCode),mn.fetch()($i(v,v.config.apiHost,m,Ie),Object.assign({method:p,headers:et,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Si(v,p,m){return Or.apply(this,arguments)}function Or(){return(Or=(0,c.Z)(function*(v,p,m){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},Qt),p);try{const A=new Pr(v),k=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const X=yield k.json();if("needConfirmation"in X)throw Bn(v,"account-exists-with-different-credential",X);if(k.ok&&!("errorMessage"in X))return X;{const Ie=k.ok?X.errorMessage:X.error.message,[et,ft]=Ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw Bn(v,"credential-already-in-use",X);if("EMAIL_EXISTS"===et)throw Bn(v,"email-already-in-use",X);if("USER_DISABLED"===et)throw Bn(v,"user-disabled",X);const Gt=C[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(ft)throw Ae(v,Gt,ft);We(v,Gt)}}catch(A){if(A instanceof B.ZR)throw A;We(v,"network-request-failed")}})).apply(this,arguments)}function Mn(v,p,m,C){return ji.apply(this,arguments)}function ji(){return(ji=(0,c.Z)(function*(v,p,m,C,A={}){const k=yield kt(v,p,m,C,A);return"mfaPendingCredential"in k&&We(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function $i(v,p,m,C){const A=`${p}${m}?${C}`;return v.config.emulator?an(v.config,A):`${v.config.apiScheme}://${A}`}class Pr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,C)=>{this.timer=setTimeout(()=>C(Ne(this.auth,"network-request-failed")),Jt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(v,p,m){const C={appName:v.name};m.email&&(C.email=m.email),m.phoneNumber&&(C.phoneNumber=m.phoneNumber);const A=Ne(v,p,C);return A.customData._tokenResponse=m,A}function Hi(){return(Hi=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ye(v,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function jn(v,p){return gn.apply(this,arguments)}function gn(){return(gn=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function hr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function _n(){return(_n=(0,c.Z)(function*(v,p=!1){const m=(0,B.m9)(v),C=yield m.getIdToken(p),A=ct(C);ne(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,X=k?.sign_in_provider;return{claims:A,token:C,authTime:hr(hn(A.auth_time)),issuedAtTime:hr(hn(A.iat)),expirationTime:hr(hn(A.exp)),signInProvider:X||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function hn(v){return 1e3*Number(v)}function ct(v){var p;const[m,C,A]=v.split(".");if(void 0===m||void 0===C||void 0===A)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,B.tV)(C);return k?JSON.parse(k):(Qe("Failed to decode base64 JWT payload"),null)}catch(k){return Qe("Caught error parsing JWT payload as JSON",null===(p=k)||void 0===p?void 0:p.toString()),null}}function Dt(v,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,c.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(C){throw C instanceof B.ZR&&Wn(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function Wn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Ir{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const C=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),C)}iteration(){var p=this;return(0,c.Z)(function*(){var m;try{yield p.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(m=C)||void 0===m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class Et{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nr(v){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,c.Z)(function*(v){var p;const m=v.auth,C=yield v.getIdToken(),A=yield Dt(v,jn(m,{idToken:C}));ne(A?.users.length,m,"internal-error");const k=A.users[0];v._notifyReloadListener(k);const X=null!==(p=k.providerUserInfo)&&void 0!==p&&p.length?bn(k.providerUserInfo):[],Ie=or(v.providerData,X),Gt=!!v.isAnonymous&&!(v.email&&k.passwordHash||Ie?.length),Cn={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Ie,metadata:new Et(k.createdAt,k.lastLoginAt),isAnonymous:Gt};Object.assign(v,Cn)})).apply(this,arguments)}function Zt(){return(Zt=(0,c.Z)(function*(v){const p=(0,B.m9)(v);yield Nr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function or(v,p){return[...v.filter(C=>!p.some(A=>A.providerId===C.providerId)),...p]}function bn(v){return v.map(p=>{var{providerId:m}=p,C=(0,oe._T)(p,["providerId"]);return{providerId:m,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function be(){return(be=(0,c.Z)(function*(v,p){const m=yield Si(v,{},(0,c.Z)(function*(){const C=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:k}=v.config,X=$i(v,A,"/v1/token",`key=${k}`),Ie=yield v._getAdditionalHeaders();return Ie["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(X,{method:"POST",headers:Ie,body:C})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ne(p.idToken,"internal-error"),ne(typeof p.idToken<"u","internal-error"),ne(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function lt(v){const p=ct(v);return ne(p,"internal-error"),ne(typeof p.exp<"u","internal-error"),ne(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var C=this;return(0,c.Z)(function*(){return ne(!C.accessToken||C.refreshToken,p,"user-token-expired"),m||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(p,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var C=this;return(0,c.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:X}=yield function Je(v,p){return be.apply(this,arguments)}(p,m);C.updateTokensAndExpiration(A,k,Number(X))})()}updateTokensAndExpiration(p,m,C){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(p,m){const{refreshToken:C,accessToken:A,expirationTime:k}=m,X=new Xe;return C&&(ne("string"==typeof C,"internal-error",{appName:p}),X.refreshToken=C),A&&(ne("string"==typeof A,"internal-error",{appName:p}),X.accessToken=A),k&&(ne("number"==typeof k,"internal-error",{appName:p}),X.expirationTime=k),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Xe,this.toJSON())}_performRefresh(){return ue("not implemented")}}function _t(v,p){ne("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class vt{constructor(p){var{uid:m,auth:C,stsTokenManager:A}=p,k=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ir(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=C,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Et(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,c.Z)(function*(){const C=yield Dt(m,m.stsTokenManager.getToken(m.auth,p));return ne(C,m.auth,"internal-error"),m.accessToken!==C&&(m.accessToken=C,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),C})()}getIdTokenResult(p){return function yn(v){return _n.apply(this,arguments)}(this,p)}reload(){return function ni(v){return Zt.apply(this,arguments)}(this)}_assign(p){this!==p&&(ne(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new vt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var C=this;return(0,c.Z)(function*(){let A=!1;p.idToken&&p.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield Nr(C)),yield C.auth._persistUserIfCurrent(C),A&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var p=this;return(0,c.Z)(function*(){const m=yield p.getIdToken();return yield Dt(p,function fi(v,p){return Hi.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var C,A,k,X,Ie,et,ft,Gt;const Cn=null!==(C=m.displayName)&&void 0!==C?C:void 0,Ci=null!==(A=m.email)&&void 0!==A?A:void 0,Xn=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,ws=null!==(X=m.photoURL)&&void 0!==X?X:void 0,$l=null!==(Ie=m.tenantId)&&void 0!==Ie?Ie:void 0,Zp=null!==(et=m._redirectEventId)&&void 0!==et?et:void 0,fy=null!==(ft=m.createdAt)&&void 0!==ft?ft:void 0,hc=null!==(Gt=m.lastLoginAt)&&void 0!==Gt?Gt:void 0,{uid:vu,emailVerified:fc,isAnonymous:$o,providerData:Vh,stsTokenManager:wu}=m;ne(vu&&wu,p,"internal-error");const py=Xe.fromJSON(this.name,wu);ne("string"==typeof vu,p,"internal-error"),_t(Cn,p.name),_t(Ci,p.name),ne("boolean"==typeof fc,p,"internal-error"),ne("boolean"==typeof $o,p,"internal-error"),_t(Xn,p.name),_t(ws,p.name),_t($l,p.name),_t(Zp,p.name),_t(fy,p.name),_t(hc,p.name);const er=new vt({uid:vu,auth:p,email:Ci,emailVerified:fc,displayName:Cn,isAnonymous:$o,photoURL:ws,phoneNumber:Xn,tenantId:$l,stsTokenManager:py,createdAt:fy,lastLoginAt:hc});return Vh&&Array.isArray(Vh)&&(er.providerData=Vh.map(gy=>Object.assign({},gy))),Zp&&(er._redirectEventId=Zp),er}static _fromIdTokenResponse(p,m,C=!1){return(0,c.Z)(function*(){const A=new Xe;A.updateFromServerResponse(m);const k=new vt({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:C});return yield Nr(k),k})()}}const G=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,C){var A=this;return(0,c.Z)(function*(){A.storage[m]=C})()}_get(m){var C=this;return(0,c.Z)(function*(){const A=C.storage[m];return void 0===A?null:A})()}_remove(m){var C=this;return(0,c.Z)(function*(){delete C.storage[m]})()}_addListener(m,C){}_removeListener(m,C){}}return v.type="NONE",v})();function j(v,p,m){return`firebase:${v}:${p}:${m}`}class W{constructor(p,m,C){this.persistence=p,this.auth=m,this.userKey=C;const{config:A,name:k}=this.auth;this.fullUserKey=j(this.userKey,A.apiKey,k),this.fullPersistenceKey=j("persistence",A.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?vt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,c.Z)(function*(){if(m.persistence===p)return;const C=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,C?m.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,C="authUser"){return(0,c.Z)(function*(){if(!m.length)return new W(J(G),p,C);const A=(yield Promise.all(m.map(function(){var ft=(0,c.Z)(function*(Gt){if(yield Gt._isAvailable())return Gt});return function(Gt){return ft.apply(this,arguments)}}()))).filter(ft=>ft);let k=A[0]||J(G);const X=j(C,p.config.apiKey,p.name);let Ie=null;for(const ft of m)try{const Gt=yield ft._get(X);if(Gt){const Cn=vt._fromJSON(p,Gt);ft!==k&&(Ie=Cn),k=ft;break}}catch{}const et=A.filter(ft=>ft._shouldAllowMigration);return k._shouldAllowMigration&&et.length?(k=et[0],Ie&&(yield k._set(X,Ie.toJSON())),yield Promise.all(m.map(function(){var ft=(0,c.Z)(function*(Gt){if(Gt!==k)try{yield Gt._remove(X)}catch{}});return function(Gt){return ft.apply(this,arguments)}}())),new W(k,p,C)):new W(k,p,C)})()}}function U(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Pe(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(M(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(rt(p))return"Blackberry";if(De(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||ee(p))&&!p.includes("edge/"))return"Chrome";if(nt(p))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function M(v=(0,B.z$)()){return/firefox\//i.test(v)}function L(v=(0,B.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ee(v=(0,B.z$)()){return/crios\//i.test(v)}function Pe(v=(0,B.z$)()){return/iemobile/i.test(v)}function nt(v=(0,B.z$)()){return/android/i.test(v)}function rt(v=(0,B.z$)()){return/blackberry/i.test(v)}function De(v=(0,B.z$)()){return/webos/i.test(v)}function Fe(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Tt(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function cn(v=(0,B.z$)()){return Fe(v)||nt(v)||De(v)||rt(v)||/windows phone/i.test(v)||Pe(v)}function vn(v,p=[]){let m;switch(v){case"Browser":m=U((0,B.z$)());break;case"Worker":m=`${U((0,B.z$)())}-${v}`;break;default:m=v}const C=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${C}`}class Ns{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const C=k=>new Promise((X,Ie)=>{try{X(p(k))}catch(et){Ie(et)}});C.onAbort=m,this.queue.push(C);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,c.Z)(function*(){var C;if(m.auth.currentUser===p)return;const A=[];try{for(const k of m.queue)yield k(p),k.onAbort&&A.push(k.onAbort)}catch(k){A.reverse();for(const X of A)try{X()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=k)||void 0===C?void 0:C.message})}})()}}class so{constructor(p,m,C){this.app=p,this.heartbeatServiceProvider=m,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ks(this),this.idTokenSubscription=new ks(this),this.beforeStateQueue=new Ns(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(p,m){var C=this;return m&&(this._popupRedirectResolver=J(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var A,k;if(!C._deleted&&(C.persistenceManager=yield W.create(C,p),!C._deleted)){if(null!==(A=C._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(m),C.lastNotifiedUid=(null===(k=C.currentUser)||void 0===k?void 0:k.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,c.Z)(function*(){var C;const A=yield m.assertedPersistence.getCurrentUser();let k=A,X=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ie=null===(C=m.redirectUser)||void 0===C?void 0:C._redirectEventId,et=k?._redirectEventId,ft=yield m.tryRedirectSignIn(p);(!Ie||Ie===et)&&ft?.user&&(k=ft.user,X=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(X)try{yield m.beforeStateQueue.runMiddleware(k)}catch(Ie){k=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ie))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var m=this;return(0,c.Z)(function*(){let C=null;try{C=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,c.Z)(function*(){var C;try{yield Nr(p)}catch(A){if("auth/network-request-failed"!==(null===(C=A)||void 0===C?void 0:C.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Bt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,c.Z)(function*(){const C=p?(0,B.m9)(p):null;return C&&ne(C.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(C&&C._clone(m))})()}_updateCurrentUser(p,m=!1){var C=this;return(0,c.Z)(function*(){if(!C._deleted)return p&&ne(C.tenantId===p.tenantId,C,"tenant-id-mismatch"),m||(yield C.beforeStateQueue.runMiddleware(p)),C.queue((0,c.Z)(function*(){yield C.directlySetCurrentUser(p),C.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(J(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,C){return this.registerStateListener(this.authStateSubscription,p,m,C)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,C){return this.registerStateListener(this.idTokenSubscription,p,m,C)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var C=this;return(0,c.Z)(function*(){const A=yield C.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const C=p&&J(p)||m._popupRedirectResolver;ne(C,m,"argument-error"),m.redirectPersistenceManager=yield W.create(m,[J(C._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,c.Z)(function*(){var C,A;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(C=m._currentUser)||void 0===C?void 0:C._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,c.Z)(function*(){if(p===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,C,A){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),X=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(X,this,"internal-error"),X.then(()=>k(this.currentUser)),"function"==typeof m?p.addObserver(m,C,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=vn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var m;const C={"X-Client-Version":p.clientVersion};p.app.options.appId&&(C["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(C["X-Firebase-Client"]=A),C})()}}function gt(v){return(0,B.m9)(v)}class ks{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Rs(v,p,m){const C=gt(v);ne(C._canInitEmulator,C,"emulator-config-failed"),ne(/^https?:\/\//.test(p),C,"invalid-emulator-scheme");const A=!!m?.disableWarnings,k=eu(p),{host:X,port:Ie}=function zi(v){const p=eu(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const C=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(C);if(A){const k=A[1];return{host:k,port:$n(C.substr(k.length+1))}}{const[k,X]=C.split(":");return{host:k,port:$n(X)}}}(p);C.config.emulator={url:`${k}//${X}${null===Ie?"":`:${Ie}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:X,port:Ie,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Fs(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function eu(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function $n(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class jr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return ue("not implemented")}_getIdTokenResponse(p){return ue("not implemented")}_linkToIdToken(p,m){return ue("not implemented")}_getReauthenticationResolver(p){return ue("not implemented")}}function ri(v,p){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:resetPassword",Ht(v,p))})).apply(this,arguments)}function tu(v,p){return ln.apply(this,arguments)}function ln(){return(ln=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function lh(v,p){return ra.apply(this,arguments)}function ra(){return(ra=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:update",Ht(v,p))})).apply(this,arguments)}function Ls(){return(Ls=(0,c.Z)(function*(v,p){return Mn(v,"POST","/v1/accounts:signInWithPassword",Ht(v,p))})).apply(this,arguments)}function kr(v,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:sendOobCode",Ht(v,p))})).apply(this,arguments)}function qi(v,p){return fn.apply(this,arguments)}function fn(){return(fn=(0,c.Z)(function*(v,p){return kr(v,p)})).apply(this,arguments)}function dh(v,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,c.Z)(function*(v,p){return kr(v,p)})).apply(this,arguments)}function ii(v,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,c.Z)(function*(v,p){return kr(v,p)})).apply(this,arguments)}function ju(v,p){return sa.apply(this,arguments)}function sa(){return(sa=(0,c.Z)(function*(v,p){return kr(v,p)})).apply(this,arguments)}function $u(){return($u=(0,c.Z)(function*(v,p){return Mn(v,"POST","/v1/accounts:signInWithEmailLink",Ht(v,p))})).apply(this,arguments)}function nu(){return(nu=(0,c.Z)(function*(v,p){return Mn(v,"POST","/v1/accounts:signInWithEmailLink",Ht(v,p))})).apply(this,arguments)}class oa extends jr{constructor(p,m,C,A=null){super("password",C),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new oa(p,m,"password")}static _fromEmailAndCode(p,m,C=null){return new oa(p,m,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,c.Z)(function*(){switch(m.signInMethod){case"password":return function ia(v,p){return Ls.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function $r(v,p){return $u.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:We(p,"internal-error")}})()}_linkToIdToken(p,m){var C=this;return(0,c.Z)(function*(){switch(C.signInMethod){case"password":return tu(p,{idToken:m,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Mp(v,p){return nu.apply(this,arguments)}(p,{idToken:m,email:C._email,oobCode:C._password});default:We(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Us(v,p){return si.apply(this,arguments)}function si(){return(si=(0,c.Z)(function*(v,p){return Mn(v,"POST","/v1/accounts:signInWithIdp",Ht(v,p))})).apply(this,arguments)}class Zi extends jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Zi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):We("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:A}=m,k=(0,oe._T)(m,["providerId","signInMethod"]);if(!C||!A)return null;const X=new Zi(C,A);return X.idToken=k.idToken||void 0,X.accessToken=k.accessToken||void 0,X.secret=k.secret,X.nonce=k.nonce,X.pendingToken=k.pendingToken||null,X}_getIdTokenResponse(p){return Us(p,this.buildRequest())}_linkToIdToken(p,m){const C=this.buildRequest();return C.idToken=m,Us(p,C)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Us(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function Pp(v,p){return pl.apply(this,arguments)}function pl(){return(pl=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:sendVerificationCode",Ht(v,p))})).apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(v,p){return Mn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,p))})).apply(this,arguments)}function Hu(){return(Hu=(0,c.Z)(function*(v,p){const m=yield Mn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,p));if(m.temporaryProof)throw Bn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const kp={USER_NOT_FOUND:"user-not-found"};function gl(){return(gl=(0,c.Z)(function*(v,p){return Mn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),kp)})).apply(this,arguments)}class uo extends jr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new uo({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new uo({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Np(v,p){return Bs.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function ao(v,p){return Hu.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Rp(v,p){return gl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:C,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:C,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:C,phoneNumber:A,temporaryProof:k}=p;return C||m||A||k?new uo({verificationId:m,verificationCode:C,phoneNumber:A,temporaryProof:k}):null}}class co{constructor(p){var m,C,A,k,X,Ie;const et=(0,B.zd)((0,B.pd)(p)),ft=null!==(m=et.apiKey)&&void 0!==m?m:null,Gt=null!==(C=et.oobCode)&&void 0!==C?C:null,Cn=function ml(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=et.mode)&&void 0!==A?A:null);ne(ft&&Gt&&Cn,"argument-error"),this.apiKey=ft,this.operation=Cn,this.code=Gt,this.continueUrl=null!==(k=et.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(X=et.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(Ie=et.tenantId)&&void 0!==Ie?Ie:null}static parseLink(p){const m=function yl(v){const p=(0,B.zd)((0,B.pd)(v)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,C=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(C?(0,B.zd)((0,B.pd)(C)).link:null)||C||m||p||v}(p);try{return new co(m)}catch{return null}}}let ru=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,C){return oa._fromEmailAndPassword(m,C)}static credentialWithLink(m,C){const A=co.parseLink(C);return ne(A,"argument-error"),oa._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class yr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class js extends yr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class cs extends js{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),Zi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ne(p.idToken||p.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return cs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return cs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:C,oauthTokenSecret:A,pendingToken:k,nonce:X,providerId:Ie}=p;if(!C&&!A&&!m&&!k||!Ie)return null;try{return new cs(Ie)._credential({idToken:m,accessToken:C,nonce:X,pendingToken:k})}catch{return null}}}let _l=(()=>{class v extends js{constructor(){super("facebook.com")}static credential(m){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),iu=(()=>{class v extends js{constructor(){super("google.com"),this.addScope("profile")}static credential(m,C){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:C})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:C,oauthAccessToken:A}=m;if(!C&&!A)return null;try{return v.credential(C,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Gu=(()=>{class v extends js{constructor(){super("github.com")}static credential(m){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class lo extends jr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Us(p,this.buildRequest())}_linkToIdToken(p,m){const C=this.buildRequest();return C.idToken=m,Us(p,C)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Us(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:A,pendingToken:k}=m;return C&&A&&k&&C===A?new lo(C,k):null}static _create(p,m){return new lo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oi extends yr{constructor(p){ne(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return oi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return oi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=lo.fromJSON(p);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:C}=p;if(!m||!C)return null;try{return lo._create(C,m)}catch{return null}}}let Wi=(()=>{class v extends js{constructor(){super("twitter.com")}static credential(m,C){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:C})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:C,oauthTokenSecret:A}=m;if(!C||!A)return null;try{return v.credential(C,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Hr(v,p){return $s.apply(this,arguments)}function $s(){return($s=(0,c.Z)(function*(v,p){return Mn(v,"POST","/v1/accounts:signUp",Ht(v,p))})).apply(this,arguments)}class pi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,C,A=!1){return(0,c.Z)(function*(){const k=yield vt._fromIdTokenResponse(p,C,A),X=ho(C);return new pi({user:k,providerId:X,_tokenResponse:C,operationType:m})})()}static _forOperation(p,m,C){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(C,!0);const A=ho(C);return new pi({user:p,providerId:A,_tokenResponse:C,operationType:m})})()}}function ho(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Fp(v){return zu.apply(this,arguments)}function zu(){return(zu=(0,c.Z)(function*(v){var p;const m=gt(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new pi({user:m.currentUser,providerId:null,operationType:"signIn"});const C=yield Hr(m,{returnSecureToken:!0}),A=yield pi._fromIdTokenResponse(m,"signIn",C,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class On extends B.ZR{constructor(p,m,C,A){var k;super(m.code,m.message),this.operationType=C,this.user=A,Object.setPrototypeOf(this,On.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(p,m,C,A){return new On(p,m,C,A)}}function wl(v,p,m,C){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?On._fromErrorAndOperation(v,k,p,C):k})}function fh(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function gi(v,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,c.Z)(function*(v,p){const m=(0,B.m9)(v);yield Ai(!0,m,p);const{providerUserInfo:C}=yield Ye(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=fh(C||[]);return m.providerData=m.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function su(v,p){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,c.Z)(function*(v,p,m=!1){const C=yield Dt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return pi._forOperation(v,"link",C)})).apply(this,arguments)}function Ai(v,p,m){return en.apply(this,arguments)}function en(){return(en=(0,c.Z)(function*(v,p,m){yield Nr(p);const A=!1===v?"provider-already-linked":"no-such-provider";ne(fh(p.providerData).has(m)===v,p.auth,A)})).apply(this,arguments)}function qu(v,p){return ls.apply(this,arguments)}function ls(){return(ls=(0,c.Z)(function*(v,p,m=!1){var C;const{auth:A}=v,k="reauthenticate";try{const X=yield Dt(v,wl(A,k,p,v),m);ne(X.idToken,A,"internal-error");const Ie=ct(X.idToken);ne(Ie,A,"internal-error");const{sub:et}=Ie;return ne(v.uid===et,A,"user-mismatch"),pi._forOperation(v,k,X)}catch(X){throw"auth/user-not-found"===(null===(C=X)||void 0===C?void 0:C.code)&&We(A,"user-mismatch"),X}})).apply(this,arguments)}function Zu(v,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,c.Z)(function*(v,p,m=!1){const C="signIn",A=yield wl(v,C,p),k=yield pi._fromIdTokenResponse(v,C,A);return m||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function aa(v,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,c.Z)(function*(v,p){return Zu(gt(v),p)})).apply(this,arguments)}function xt(v,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,c.Z)(function*(v,p){const m=(0,B.m9)(v);return yield Ai(!1,m,p.providerId),su(m,p)})).apply(this,arguments)}function Lp(v,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,c.Z)(function*(v,p){return qu((0,B.m9)(v),p)})).apply(this,arguments)}function Cl(v,p){return la.apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(v,p){return Mn(v,"POST","/v1/accounts:signInWithCustomToken",Ht(v,p))})).apply(this,arguments)}function Gs(v,p){return da.apply(this,arguments)}function da(){return(da=(0,c.Z)(function*(v,p){const m=gt(v),C=yield Cl(m,{token:p,returnSecureToken:!0}),A=yield pi._fromIdTokenResponse(m,"signIn",C);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class fo{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Se._fromServerResponse(p,m):We(p,"internal-error")}}class Se extends fo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Se(m)}}function qt(v,p,m){var C;ne((null===(C=m.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),ne(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function ph(v,p,m){return po.apply(this,arguments)}function po(){return(po=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v),A={requestType:"PASSWORD_RESET",email:p};m&&qt(C,A,m),yield dh(C,A)})).apply(this,arguments)}function Yn(v,p,m){return go.apply(this,arguments)}function go(){return(go=(0,c.Z)(function*(v,p,m){yield ri((0,B.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function ou(v,p){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,c.Z)(function*(v,p){yield lh((0,B.m9)(v),{oobCode:p})})).apply(this,arguments)}function au(v,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,c.Z)(function*(v,p){const m=(0,B.m9)(v),C=yield ri(m,{oobCode:p}),A=C.requestType;switch(ne(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(C.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(C.mfaInfo,m,"internal-error");default:ne(C.email,m,"internal-error")}let k=null;return C.mfaInfo&&(k=fo._fromServerResponse(gt(m),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function gh(v,p){return ha.apply(this,arguments)}function ha(){return(ha=(0,c.Z)(function*(v,p){const{data:m}=yield au((0,B.m9)(v),p);return m.email})).apply(this,arguments)}function Vp(v,p,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,c.Z)(function*(v,p,m){const C=gt(v),A=yield Hr(C,{returnSecureToken:!0,email:p,password:m}),k=yield pi._fromIdTokenResponse(C,"signIn",A);return yield C._updateCurrentUser(k.user),k})).apply(this,arguments)}function Qn(v,p,m){return aa((0,B.m9)(v),ru.credential(p,m))}function xi(v,p,m){return fa.apply(this,arguments)}function fa(){return(fa=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v),A={requestType:"EMAIL_SIGNIN",email:p};ne(m.handleCodeInApp,C,"argument-error"),m&&qt(C,A,m),yield ii(C,A)})).apply(this,arguments)}function pa(v,p){return"EMAIL_SIGNIN"===co.parseLink(p)?.operation}function Ki(v,p,m){return El.apply(this,arguments)}function El(){return(El=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v),A=ru.credentialWithLink(p,m||Le());return ne(A._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),aa(C,A)})).apply(this,arguments)}function Wu(v,p){return bl.apply(this,arguments)}function bl(){return(bl=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:createAuthUri",Ht(v,p))})).apply(this,arguments)}function mh(v,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,c.Z)(function*(v,p){const C={identifier:p,continueUri:Be()?Le():"http://localhost"},{signinMethods:A}=yield Wu((0,B.m9)(v),C);return A||[]})).apply(this,arguments)}function Ku(v,p){return ga.apply(this,arguments)}function ga(){return(ga=(0,c.Z)(function*(v,p){const m=(0,B.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&qt(m.auth,A,p);const{email:k}=yield qi(m.auth,A);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function Yu(v,p,m){return ma.apply(this,arguments)}function ma(){return(ma=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&qt(C.auth,k,m);const{email:X}=yield ju(C.auth,k);X!==v.email&&(yield v.reload())})).apply(this,arguments)}function Il(v,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,c.Z)(function*(v,p){return kt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function yh(v,p){return ya.apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const C=(0,B.m9)(v),k={idToken:yield C.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},X=yield Dt(C,Il(C.auth,k));C.displayName=X.displayName||null,C.photoURL=X.photoUrl||null;const Ie=C.providerData.find(({providerId:et})=>"password"===et);Ie&&(Ie.displayName=C.displayName,Ie.photoURL=C.photoURL),yield C._updateTokensIfNecessary(X)})).apply(this,arguments)}function _h(v,p){return ds((0,B.m9)(v),p,null)}function Dl(v,p){return ds((0,B.m9)(v),null,p)}function ds(v,p,m){return hs.apply(this,arguments)}function hs(){return(hs=(0,c.Z)(function*(v,p,m){const{auth:C}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(k.email=p),m&&(k.password=m);const X=yield Dt(v,tu(C,k));yield v._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class Dn{constructor(p,m,C={}){this.isNewUser=p,this.providerId=m,this.profile=C}}class Yi extends Dn{constructor(p,m,C,A){super(p,m,C),this.username=A}}class Tn extends Dn{constructor(p,m){super(p,"facebook.com",m)}}class Qu extends Yi{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Ju extends Dn{constructor(p,m){super(p,"google.com",m)}}class vh extends Yi{constructor(p,m,C){super(p,"twitter.com",m,C)}}function Xu(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Tl(v){var p,m;if(!v)return null;const{providerId:C}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&v?.idToken){const X=null===(m=null===(p=ct(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(X)return new Dn(k,"anonymous"!==X&&"custom"!==X?X:null)}if(!C)return null;switch(C){case"facebook.com":return new Tn(k,A);case"github.com":return new Qu(k,A);case"google.com":return new Ju(k,A);case"twitter.com":return new vh(k,A,v.screenName||null);case"custom":case"anonymous":return new Dn(k,null);default:return new Dn(k,C,A)}}(m)}function qs(v,p,m,C){return(0,B.m9)(v).onAuthStateChanged(p,m,C)}class ui{constructor(p,m,C){this.type=p,this.credential=m,this.auth=C}static _fromIdtoken(p,m){return new ui("enroll",p,m)}static _fromMfaPendingCredential(p){return new ui("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,C;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ui._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(C=p.multiFactorSession)&&void 0!==C&&C.idToken)return ui._fromIdtoken(p.multiFactorSession.idToken)}return null}}class nc{constructor(p,m,C){this.session=p,this.hints=m,this.signInResolver=C}static _fromError(p,m){const C=gt(p),A=m.customData._serverResponse,k=(A.mfaInfo||[]).map(Ie=>fo._fromServerResponse(C,Ie));ne(A.mfaPendingCredential,C,"internal-error");const X=ui._fromMfaPendingCredential(A.mfaPendingCredential);return new nc(X,k,function(){var Ie=(0,c.Z)(function*(et){const ft=yield et._process(C,X);delete A.mfaInfo,delete A.mfaPendingCredential;const Gt=Object.assign(Object.assign({},A),{idToken:ft.idToken,refreshToken:ft.refreshToken});switch(m.operationType){case"signIn":const Cn=yield pi._fromIdTokenResponse(C,m.operationType,Gt);return yield C._updateCurrentUser(Cn.user),Cn;case"reauthenticate":return ne(m.user,C,"internal-error"),pi._forOperation(m.user,m.operationType,Gt);default:We(C,"internal-error")}});return function(et){return Ie.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,c.Z)(function*(){return m.signInResolver(p)})()}}function xl(v,p){var m;const C=(0,B.m9)(v),A=p;return ne(p.customData.operationType,C,"argument-error"),ne(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,C,"argument-error"),nc._fromError(C,A)}function Ln(v,p){return kt(v,"POST","/v2/accounts/mfaEnrollment:start",Ht(v,p))}class du{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(C=>fo._fromServerResponse(p.auth,C)))})}static _fromUser(p){return new du(p)}getSession(){var p=this;return(0,c.Z)(function*(){return ui._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var C=this;return(0,c.Z)(function*(){const A=p,k=yield C.getSession(),X=yield Dt(C.user,A._process(C.user.auth,k,m));return yield C.user._updateTokensIfNecessary(X),C.user.reload()})()}unenroll(p){var m=this;return(0,c.Z)(function*(){var C;const A="string"==typeof p?p:p.uid,k=yield m.user.getIdToken(),X=yield Dt(m.user,function lu(v,p){return kt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(v,p))}(m.user.auth,{idToken:k,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Ie})=>Ie!==A),yield m.user._updateTokensIfNecessary(X);try{yield m.user.reload()}catch(Ie){if("auth/user-token-expired"!==(null===(C=Ie)||void 0===C?void 0:C.code))throw Ie}})()}}const wh=new WeakMap;function hu(v){const p=(0,B.m9)(v);return wh.has(p)||wh.set(p,du._fromUser(p)),wh.get(p)}const Qi="__sak";class _a{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Qi,"1"),this.storage.removeItem(Qi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jn=(()=>{class v extends _a{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,C)=>this.onStorageEvent(m,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rc(){const v=(0,B.z$)();return L(v)||Fe(v)}()&&function Gi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=cn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const C of Object.keys(this.listeners)){const A=this.storage.getItem(C),k=this.localCache[C];A!==k&&m(C,k,A)}}onStorageEvent(m,C=!1){if(!m.key)return void this.forAllChangedKeys((Ie,et,ft)=>{this.notifyListeners(Ie,ft)});const A=m.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ie=this.storage.getItem(A);if(m.newValue!==Ie)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!C)return}const k=()=>{const Ie=this.storage.getItem(A);!C&&this.localCache[A]===Ie||this.notifyListeners(A,Ie)},X=this.storage.getItem(A);!function Mt(){return(0,B.w1)()&&10===document.documentMode}()||X===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,C){this.localCache[m]=C;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,C,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:C,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(C)}_removeListener(m,C){this.listeners[m]&&(this.listeners[m].delete(C),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,C){var A=()=>super._set,k=this;return(0,c.Z)(function*(){yield A().call(k,m,C),k.localCache[m]=JSON.stringify(C)})()}_get(m){var C=()=>super._get,A=this;return(0,c.Z)(function*(){const k=yield C().call(A,m);return A.localCache[m]=JSON.stringify(k),k})()}_remove(m){var C=()=>super._remove,A=this;return(0,c.Z)(function*(){yield C().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),fs=(()=>{class v extends _a{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,C){}_removeListener(m,C){}}return v.type="SESSION",v})();let wa=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const C=this.receivers.find(k=>k.isListeningto(m));if(C)return C;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var C=this;return(0,c.Z)(function*(){const A=m,{eventId:k,eventType:X,data:Ie}=A.data,et=C.handlersMap[X];if(!et?.size)return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:X});const ft=Array.from(et).map(function(){var Cn=(0,c.Z)(function*(Ci){return Ci(A.origin,Ie)});return function(Ci){return Cn.apply(this,arguments)}}()),Gt=yield function ic(v){return Promise.all(v.map(function(){var p=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(C){return{fulfilled:!1,reason:C}}});return function(m){return p.apply(this,arguments)}}()))}(ft);A.ports[0].postMessage({status:"done",eventId:k,eventType:X,response:Gt})})()}_subscribe(m,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(C)}_unsubscribe(m,C){this.handlersMap[m]&&C&&this.handlersMap[m].delete(C),(!C||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Co(v="",p=10){let m="";for(let C=0;C<p;C++)m+=Math.floor(10*Math.random());return v+m}class bh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,C=50){var A=this;return(0,c.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let X,Ie;return new Promise((et,ft)=>{const Gt=Co("",20);k.port1.start();const Cn=setTimeout(()=>{ft(new Error("unsupported_event"))},C);Ie={messageChannel:k,onMessage(Ci){const Xn=Ci;if(Xn.data.eventId===Gt)switch(Xn.data.status){case"ack":clearTimeout(Cn),X=setTimeout(()=>{ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),et(Xn.data.response);break;default:clearTimeout(Cn),clearTimeout(X),ft(new Error("invalid_response"))}}},A.handlers.add(Ie),k.port1.addEventListener("message",Ie.onMessage),A.target.postMessage({eventType:p,eventId:Gt,data:m},[k.port2])}).finally(()=>{Ie&&A.removeMessageHandler(Ie)})})()}}function Vn(){return window}function Gr(){return typeof Vn().WorkerGlobalScope<"u"&&"function"==typeof Vn().importScripts}function Ji(){return(Ji=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ca="firebaseLocalStorageDb",Ea="firebaseLocalStorage",Eo="fbase_key";class bo{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Io(v,p){return v.transaction([Ea],p?"readwrite":"readonly").objectStore(Ea)}function pu(){const v=indexedDB.open(Ca,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Ea,{keyPath:Eo})}catch(A){m(A)}}),v.addEventListener("success",(0,c.Z)(function*(){const C=v.result;C.objectStoreNames.contains(Ea)?p(C):(C.close(),yield function Nl(){const v=indexedDB.deleteDatabase(Ca);return new bo(v).toPromise()}(),p(yield pu()))}))})}function ba(v,p,m){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,c.Z)(function*(v,p,m){const C=Io(v,!0).put({[Eo]:p,value:m});return new bo(C).toPromise()})).apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(v,p){const m=Io(v,!1).get(p),C=yield new bo(m).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function gu(v,p){const m=Io(v,!0).delete(p);return new bo(m).toPromise()}const So=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield pu()),m.db})()}_withRetries(m){var C=this;return(0,c.Z)(function*(){let A=0;for(;;)try{const k=yield C._openDb();return yield m(k)}catch(k){if(A++>3)throw k;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return Gr()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=wa._getInstance(function fu(){return Gr()?self:null}()),m.receiver._subscribe("keyChanged",function(){var C=(0,c.Z)(function*(A,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(A,k){return C.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var C=(0,c.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return C.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var C,A;if(m.activeServiceWorker=yield function Pl(){return Ji.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new bh(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);!k||(null===(C=k[0])||void 0===C?void 0:C.fulfilled)&&(null===(A=k[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var C=this;return(0,c.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function sc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:m},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield pu();return yield ba(m,Qi,"1"),yield gu(m,Qi),!0}catch{}return!1})()}_withPendingWrite(m){var C=this;return(0,c.Z)(function*(){C.pendingWrites++;try{yield m()}finally{C.pendingWrites--}})()}_set(m,C){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(k=>ba(k,m,C)),A.localCache[m]=C,A.notifyServiceWorker(m)}))})()}_get(m){var C=this;return(0,c.Z)(function*(){const A=yield C._withRetries(k=>function Ih(v,p){return Do.apply(this,arguments)}(k,m));return C.localCache[m]=A,A})()}_remove(m){var C=this;return(0,c.Z)(function*(){return C._withPendingWrite((0,c.Z)(function*(){return yield C._withRetries(A=>gu(A,m)),delete C.localCache[m],C.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const C=yield m._withRetries(X=>{const Ie=Io(X,!1).getAll();return new bo(Ie).toPromise()});if(!C)return[];if(0!==m.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:X,value:Ie}of C)k.add(X),JSON.stringify(m.localCache[X])!==JSON.stringify(Ie)&&(m.notifyListeners(X,Ie),A.push(X));for(const X of Object.keys(m.localCache))m.localCache[X]&&!k.has(X)&&(m.notifyListeners(X,null),A.push(X));return A})()}notifyListeners(m,C){this.localCache[m]=C;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(C)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(C)}_removeListener(m,C){this.listeners[m]&&(this.listeners[m].delete(C),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Dh(v,p){return kt(v,"POST","/v2/accounts/mfaSignIn:start",Ht(v,p))}function Dr(){return(Dr=(0,c.Z)(function*(v){return(yield kt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ws(v){return new Promise((p,m)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=p,C.onerror=A=>{const k=Ne("internal-error");k.customData=A,m(k)},C.type="text/javascript",C.charset="UTF-8",function xo(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(C)})}function Mo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Oi=1e12;class kl{constructor(p){this.auth=p,this.counter=Oi,this._widgets=new Map}render(p,m){const C=this.counter;return this._widgets.set(C,new wn(p,this.auth.name,m||{})),this.counter++,C}reset(p){var m;const C=p||Oi;null===(m=this._widgets.get(C))||void 0===m||m.delete(),this._widgets.delete(C)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Oi))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,c.Z)(function*(){var C;return null===(C=m._widgets.get(p||Oi))||void 0===C||C.execute(),""})()}}class wn{constructor(p,m,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;ne(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Up(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Th=Mo("rcb"),T0=new ze(3e4,6e4);class ey{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Vn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ne(function Sh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Vn().grecaptcha):new Promise((C,A)=>{const k=Vn().setTimeout(()=>{A(Ne(p,"network-request-failed"))},T0.get());Vn()[Th]=()=>{Vn().clearTimeout(k),delete Vn()[Th];const Ie=Vn().grecaptcha;if(!Ie)return void A(Ne(p,"internal-error"));const et=Ie.render;Ie.render=(ft,Gt)=>{const Cn=et(ft,Gt);return this.counter++,Cn},this.hostLanguage=m,C(Ie)},Ws(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Th,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),A(Ne(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Vn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class S0{load(p){return(0,c.Z)(function*(){return new kl(p)})()}clearedOneInstance(){}}const yu="recaptcha",A0={theme:"light",type:"image"};class ty{constructor(p,m=Object.assign({},A0),C){this.parameters=m,this.type=yu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gt(C),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;ne(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new S0:new ey,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),C=p.getAssertedRecaptcha();return C.getResponse(m)||new Promise(k=>{const X=Ie=>{!Ie||(p.tokenChangeListeners.delete(X),k(Ie))};p.tokenChangeListeners.add(X),p.isInvisible&&C.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(C=>C(m)),"function"==typeof p)p(m);else if("string"==typeof p){const C=Vn()[p];"function"==typeof C&&C(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const C=document.createElement("div");m.appendChild(C),m=C}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){ne(Be()&&!Gr(),p.auth,"internal-error"),yield function fr(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function mu(v){return Dr.apply(this,arguments)}(p.auth);ne(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pi{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=uo._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function dn(v,p,m){return it.apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(v,p,m){const C=gt(v),A=yield Pn(C,p,(0,B.m9)(m));return new Pi(A,k=>aa(C,k))})).apply(this,arguments)}function yi(v,p,m){return sn.apply(this,arguments)}function sn(){return(sn=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v);yield Ai(!1,C,"phone");const A=yield Pn(C.auth,p,(0,B.m9)(m));return new Pi(A,k=>xt(C,k))})).apply(this,arguments)}function _i(v,p,m){return vi.apply(this,arguments)}function vi(){return(vi=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v),A=yield Pn(C.auth,p,(0,B.m9)(m));return new Pi(A,k=>Lp(C,k))})).apply(this,arguments)}function Pn(v,p,m){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,c.Z)(function*(v,p,m){var C;const A=yield m.verify();try{let k;if(ne("string"==typeof A,v,"argument-error"),ne(m.type===yu,v,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const X=k.session;if("phoneNumber"in k)return ne("enroll"===X.type,v,"internal-error"),(yield Ln(v,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ne("signin"===X.type,v,"internal-error");const Ie=(null===(C=k.multiFactorHint)||void 0===C?void 0:C.uid)||k.multiFactorUid;return ne(Ie,v,"missing-multi-factor-info"),(yield Dh(v,{mfaPendingCredential:X.credential,mfaEnrollmentId:Ie,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield Pp(v,{phoneNumber:k.phoneNumber,recaptchaToken:A});return X}}finally{m._reset()}})).apply(this,arguments)}function zr(v,p){return mt.apply(this,arguments)}function mt(){return(mt=(0,c.Z)(function*(v,p){yield su((0,B.m9)(v),p)})).apply(this,arguments)}let Rl=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=gt(m)}verifyPhoneNumber(m,C){return Pn(this.auth,m,(0,B.m9)(C))}static credential(m,C){return uo._fromVerification(m,C)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:C,temporaryProof:A}=m;return C&&A?uo._fromTokenResponse(C,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ks(v,p){return p?J(p):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ni extends jr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Us(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Us(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Us(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Ah(v){return Zu(v.auth,new Ni(v),v.bypassAuthState)}function qr(v){const{auth:p,user:m}=v;return ne(m,p,"internal-error"),qu(m,new Ni(v),v.bypassAuthState)}function Ia(v){return ki.apply(this,arguments)}function ki(){return(ki=(0,c.Z)(function*(v){const{auth:p,user:m}=v;return ne(m,p,"internal-error"),su(m,new Ni(v),v.bypassAuthState)})).apply(this,arguments)}class uc{constructor(p,m,C,A,k=!1){this.auth=p,this.resolver=C,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,c.Z)(function*(C,A){p.pendingPromise={resolve:C,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(C,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,c.Z)(function*(){const{urlResponse:C,sessionId:A,postBody:k,tenantId:X,error:Ie,type:et}=p;if(Ie)return void m.reject(Ie);const ft={auth:m.auth,requestUri:C,sessionId:A,tenantId:X||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(et)(ft))}catch(Gt){m.reject(Gt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ah;case"linkViaPopup":case"linkViaRedirect":return Ia;case"reauthViaPopup":case"reauthViaRedirect":return qr;default:We(this.auth,"internal-error")}}resolve(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Da=new ze(2e3,1e4);function Po(v,p,m){return ci.apply(this,arguments)}function ci(){return(ci=(0,c.Z)(function*(v,p,m){const C=gt(v);we(v,p,yr);const A=Ks(C,m);return new No(C,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Fl(v,p,m){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v);we(C.auth,p,yr);const A=Ks(C.auth,m);return new No(C.auth,"reauthViaPopup",p,A,C).executeNotNull()})).apply(this,arguments)}function Bp(v,p,m){return cc.apply(this,arguments)}function cc(){return(cc=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v);we(C.auth,p,yr);const A=Ks(C.auth,m);return new No(C.auth,"linkViaPopup",p,A,C).executeNotNull()})).apply(this,arguments)}let No=(()=>{class v extends uc{constructor(m,C,A,k,X){super(m,C,k,X),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const C=yield m.execute();return ne(C,m.auth,"internal-error"),C})()}onExecution(){var m=this;return(0,c.Z)(function*(){ye(1===m.filter.length,"Popup operations only handle one event");const C=Co();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],C),m.authWindow.associatedEvent=C,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Ne(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var C,A;this.pollId=null!==(A=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Da.get())};m()}}return v.currentPopupAction=null,v})();const Xi=new Map;class Ri extends uc{constructor(p,m,C=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,C),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,c.Z)(function*(){let C=Xi.get(m.auth._key());if(!C){try{const k=(yield function Nn(v,p){return gs.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;C=()=>Promise.resolve(k)}catch(A){C=()=>Promise.reject(A)}Xi.set(m.auth._key(),C)}return m.bypassAuthState||Xi.set(m.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,C=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(C,p);if("unknown"!==p.type){if(p.eventId){const A=yield C.auth._redirectUserForId(p.eventId);if(A)return C.user=A,m().call(C,p);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function gs(){return(gs=(0,c.Z)(function*(v,p){const m=es(p),C=Ro(v);if(!(yield C._isAvailable()))return!1;const A="true"===(yield C._get(m));return yield C._remove(m),A})).apply(this,arguments)}function wi(v,p){return ko.apply(this,arguments)}function ko(){return(ko=(0,c.Z)(function*(v,p){return Ro(v)._set(es(p),"true")})).apply(this,arguments)}function ms(){Xi.clear()}function _u(v,p){Xi.set(v._key(),p)}function Ro(v){return J(v._redirectPersistence)}function es(v){return j("pendingRedirect",v.config.apiKey,v.name)}function Vl(v,p,m){return function Gn(v,p,m){return Ul.apply(this,arguments)}(v,p,m)}function Ul(){return(Ul=(0,c.Z)(function*(v,p,m){const C=gt(v);we(v,p,yr);const A=Ks(C,m);return yield wi(A,C),A._openRedirect(C,p,"signInViaRedirect")})).apply(this,arguments)}function I(v,p,m){return function D(v,p,m){return x.apply(this,arguments)}(v,p,m)}function x(){return(x=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v);we(C.auth,p,yr);const A=Ks(C.auth,m);yield wi(A,C.auth);const k=yield Ft(C);return A._openRedirect(C.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function V(v,p,m){return function Q(v,p,m){return ae.apply(this,arguments)}(v,p,m)}function ae(){return(ae=(0,c.Z)(function*(v,p,m){const C=(0,B.m9)(v);we(C.auth,p,yr);const A=Ks(C.auth,m);yield Ai(!1,C,p.providerId),yield wi(A,C.auth);const k=yield Ft(C);return A._openRedirect(C.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function xe(v,p){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,c.Z)(function*(v,p){return yield gt(v)._initializationPromise,yt(v,p,!1)})).apply(this,arguments)}function yt(v,p){return bt.apply(this,arguments)}function bt(){return(bt=(0,c.Z)(function*(v,p,m=!1){const C=gt(v),A=Ks(C,p),X=yield new Ri(C,A,m).execute();return X&&!m&&(delete X.user._redirectEventId,yield C._persistUserIfCurrent(X.user),yield C._setRedirectUser(null,p)),X})).apply(this,arguments)}function Ft(v){return ht.apply(this,arguments)}function ht(){return(ht=(0,c.Z)(function*(v){const p=Co(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class ar{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(p,C)&&(m=!0,this.sendToConsumer(p,C),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Lo(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ys(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var C;if(p.error&&!ys(p)){const A=(null===(C=p.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";m.onError(Ne(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const C=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&C}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fo(p))}saveEventToCache(p){this.cachedEventUids.add(Fo(p)),this.lastProcessedEventTime=Date.now()}}function Fo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function ys({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Vo(v){return _s.apply(this,arguments)}function _s(){return(_s=(0,c.Z)(function*(v,p={}){return kt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Sa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uo=/^https?/;function lc(){return(lc=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Vo(v);for(const m of p)try{if(x0(m))return}catch{}We(v,"unauthorized-domain")})).apply(this,arguments)}function x0(v){const p=Le(),{protocol:m,hostname:C}=new URL(p);if(v.startsWith("chrome-extension://")){const X=new URL(v);return""===X.hostname&&""===C?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&X.hostname===C}if(!Uo.test(m))return!1;if(Sa.test(v))return C===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(C)}const ny=new ze(3e4,6e4);function jp(){const v=Vn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let jo=null;function $p(v){return jo=jo||function ry(v){return new Promise((p,m)=>{var C,A,k;function X(){jp(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{jp(),m(Ne(v,"network-request-failed"))},timeout:ny.get()})}if(null!==(A=null===(C=Vn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(k=Vn().gapi)||void 0===k||!k.load){const Ie=Mo("iframefcb");return Vn()[Ie]=()=>{gapi.load?X():m(Ne(v,"network-request-failed"))},Ws(`https://apis.google.com/js/api.js?onload=${Ie}`).catch(et=>m(et))}X()}}).catch(p=>{throw jo=null,p})}(v),jo}const dc=new ze(5e3,15e3),xh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mh(v){const p=v.config;ne(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?an(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:p.apiKey,appName:v.name,v:N.SDK_VERSION},A=iy.get(v.config.apiHost);A&&(C.eid=A);const k=v._getFrameworks();return k.length&&(C.fw=k.join(",")),`${m}?${(0,B.xO)(C).slice(1)}`}function vs(){return vs=(0,c.Z)(function*(v){const p=yield $p(v),m=Vn().gapi;return ne(m,v,"internal-error"),p.open({where:document.body,url:Mh(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xh,dontclear:!0},C=>new Promise(function(){var A=(0,c.Z)(function*(k,X){yield C.restyle({setHideOnLeave:!1});const Ie=Ne(v,"network-request-failed"),et=Vn().setTimeout(()=>{X(Ie)},dc.get());function ft(){Vn().clearTimeout(et),k(C)}C.ping(ft).then(ft,()=>{X(Ie)})});return function(k,X){return A.apply(this,arguments)}}()))}),vs.apply(this,arguments)}const li={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ay{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pr(v,p,m,C,A,k){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const X={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:C,v:N.SDK_VERSION,eventId:A};if(p instanceof yr){p.setDefaultLanguage(v.languageCode),X.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(X.customParameters=JSON.stringify(p.getCustomParameters()));for(const[et,ft]of Object.entries(k||{}))X[et]=ft}if(p instanceof js){const et=p.getScopes().filter(ft=>""!==ft);et.length>0&&(X.scopes=et.join(","))}v.tenantId&&(X.tid=v.tenantId);const Ie=X;for(const et of Object.keys(Ie))void 0===Ie[et]&&delete Ie[et];return`${function Js({config:v}){return v.emulator?an(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(Ie).slice(1)}`}const kh="webStorageSupport",Rh=class xa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fs,this._completeRedirectFn=yt,this._overrideRedirectResult=_u}_openPopup(p,m,C,A){var k=this;return(0,c.Z)(function*(){var X;ye(null===(X=k.eventManagers[p._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const Ie=pr(p,m,C,Le(),A);return function Ys(v,p,m,C=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),X=Math.max((window.screen.availWidth-C)/2,0).toString();let Ie="";const et=Object.assign(Object.assign({},li),{width:C.toString(),height:A.toString(),top:k,left:X}),ft=(0,B.z$)().toLowerCase();m&&(Ie=ee(ft)?"_blank":m),M(ft)&&(p=p||"http://localhost",et.scrollbars="yes");const Gt=Object.entries(et).reduce((Ci,[Xn,ws])=>`${Ci}${Xn}=${ws},`,"");if(function un(v=(0,B.z$)()){var p;return Fe(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(ft)&&"_self"!==Ie)return function Ph(v,p){const m=document.createElement("a");m.href=v,m.target=p;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(C)}(p||"",Ie),new ay(null);const Cn=window.open(p||"",Ie,Gt);ne(Cn,v,"popup-blocked");try{Cn.focus()}catch{}return new ay(Cn)}(p,Ie,Co())})()}_openRedirect(p,m,C,A){var k=this;return(0,c.Z)(function*(){return yield k._originValidation(p),function Ol(v){Vn().location.href=v}(pr(p,m,C,Le(),A)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:k}=this.eventManagers[m];return A?Promise.resolve(A):(ye(k,"If manager is not set, promise should be"),k)}const C=this.initAndGetManager(p);return this.eventManagers[m]={promise:C},C.catch(()=>{delete this.eventManagers[m]}),C}initAndGetManager(p){var m=this;return(0,c.Z)(function*(){const C=yield function Gp(v){return vs.apply(this,arguments)}(p),A=new ar(p);return C.register("authEvent",k=>(ne(k?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=C,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(kh,{type:kh},A=>{var k;const X=null===(k=A?.[0])||void 0===k?void 0:k[kh];void 0!==X&&m(!!X),We(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Bo(v){return lc.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return cn()||L()||Fe()}};class Bl extends class zp{constructor(p){this.factorId=p}_process(p,m,C){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,C);case"signin":return this._finalizeSignIn(p,m.credential);default:return ue("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Bl(p)}_finalizeEnroll(p,m,C){return function cu(v,p){return kt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(v,p))}(p,{idToken:m,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Ao(v,p){return kt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ht(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xs=(()=>{class v{constructor(){}static assertion(m){return Bl._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Ma="@firebase/auth",Fh="0.20.11";class uy{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(C=>{var A;p((null===(A=C)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const dy=(0,B.Pz)("authIdTokenMaxAge")||300;let jl=null;const qp=v=>function(){var p=(0,c.Z)(function*(m){const C=m&&(yield m.getIdTokenResult()),A=C&&((new Date).getTime()-Date.parse(C.issuedAtTime))/1e3;if(A&&A>dy)return;const k=C?.token;jl!==k&&(jl=k,yield fetch(v,{method:k?"POST":"DELETE",headers:k?{Authorization:`Bearer ${k}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function hy(v=(0,N.getApp)()){const p=(0,N._getProvider)(v,"auth");if(p.isInitialized())return p.getImmediate();const m=function de(v,p){const m=(0,N._getProvider)(v,"auth");if(m.isInitialized()){const A=m.getImmediate(),k=m.getOptions();if((0,B.vZ)(k,p??{}))return A;We(A,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:Rh,persistence:[So,Jn,fs]}),C=(0,B.Pz)("authTokenSyncURL");if(C){const k=qp(C);(function uu(v,p,m){(0,B.m9)(v).beforeAuthStateChanged(p,m)})(m,k,()=>k(m.currentUser)),function tc(v,p,m,C){(0,B.m9)(v).onIdTokenChanged(p,m,C)}(m,X=>k(X))}const A=(0,B.q4)("auth");return A&&Rs(m,`http://${A}`),m}!function Lh(v){(0,N._registerComponent)(new ge.wA("auth",(p,{options:m})=>{const C=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:k,authDomain:X}=C.options;return((Ie,et)=>{ne(k&&!k.includes(":"),"invalid-api-key",{appName:Ie.name}),ne(!X?.includes(":"),"argument-error",{appName:Ie.name});const ft={apiKey:k,authDomain:X,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vn(v)},Gt=new so(Ie,et,ft);return function se(v,p){const m=p?.persistence||[],C=(Array.isArray(m)?m:[m]).map(J);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(C,p?.popupRedirectResolver)}(Gt,m),Gt})(C,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,C)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ge.wA("auth-internal",p=>{const m=gt(p.getProvider("auth").getImmediate());return new uy(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Ma,Fh,function cy(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(Ma,Fh,"esm2017")}("Browser")},2090:(at,Te,R)=>{R.d(Te,{$s:()=>Xe,BH:()=>Bt,G6:()=>we,L:()=>le,LL:()=>Qt,Pz:()=>Xt,Sg:()=>ze,UG:()=>Ee,US:()=>ge,ZB:()=>H,ZR:()=>mn,aH:()=>pt,b$:()=>fe,eu:()=>ne,hl:()=>He,jU:()=>tt,m9:()=>Wt,ne:()=>_n,pd:()=>Ps,q4:()=>Le,r3:()=>Pr,ru:()=>_e,tV:()=>me,uI:()=>Me,vZ:()=>Ye,w1:()=>We,xO:()=>gn,xb:()=>fi,z$:()=>je,zI:()=>ue,zd:()=>hr});const ie=function(G){const j=[];let W=0;for(let U=0;U<G.length;U++){let M=G.charCodeAt(U);M<128?j[W++]=M:M<2048?(j[W++]=M>>6|192,j[W++]=63&M|128):55296==(64512&M)&&U+1<G.length&&56320==(64512&G.charCodeAt(U+1))?(M=65536+((1023&M)<<10)+(1023&G.charCodeAt(++U)),j[W++]=M>>18|240,j[W++]=M>>12&63|128,j[W++]=M>>6&63|128,j[W++]=63&M|128):(j[W++]=M>>12|224,j[W++]=M>>6&63|128,j[W++]=63&M|128)}return j},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,j){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let M=0;M<G.length;M+=3){const L=G[M],ee=M+1<G.length,Pe=ee?G[M+1]:0,nt=M+2<G.length,rt=nt?G[M+2]:0;let Tt=(15&Pe)<<2|rt>>6,un=63&rt;nt||(un=64,ee||(Tt=64)),U.push(W[L>>2],W[(3&L)<<4|Pe>>4],W[Tt],W[un])}return U.join("")},encodeString(G,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(G):this.encodeByteArray(ie(G),j)},decodeString(G,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(G):function(G){const j=[];let W=0,U=0;for(;W<G.length;){const M=G[W++];if(M<128)j[U++]=String.fromCharCode(M);else if(M>191&&M<224){const L=G[W++];j[U++]=String.fromCharCode((31&M)<<6|63&L)}else if(M>239&&M<365){const nt=((7&M)<<18|(63&G[W++])<<12|(63&G[W++])<<6|63&G[W++])-65536;j[U++]=String.fromCharCode(55296+(nt>>10)),j[U++]=String.fromCharCode(56320+(1023&nt))}else{const L=G[W++],ee=G[W++];j[U++]=String.fromCharCode((15&M)<<12|(63&L)<<6|63&ee)}}return j.join("")}(this.decodeStringToByteArray(G,j))},decodeStringToByteArray(G,j){this.init_();const W=j?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let M=0;M<G.length;){const L=W[G.charAt(M++)],Pe=M<G.length?W[G.charAt(M)]:0;++M;const rt=M<G.length?W[G.charAt(M)]:64;++M;const Fe=M<G.length?W[G.charAt(M)]:64;if(++M,null==L||null==Pe||null==rt||null==Fe)throw Error();U.push(L<<2|Pe>>4),64!==rt&&(U.push(Pe<<4&240|rt>>2),64!==Fe&&U.push(rt<<6&192|Fe))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},le=function(G){return function(G){const j=ie(G);return ge.encodeByteArray(j,!0)}(G).replace(/\./g,"")},me=function(G){try{return ge.decodeString(G,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function H(G,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return j}for(const W in j)!j.hasOwnProperty(W)||!Y(W)||(G[W]=H(G[W],j[W]));return G}function Y(G){return"__proto__"!==G}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function _e(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function We(){const G=je();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function we(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){return"object"==typeof indexedDB}function ne(){return new Promise((G,j)=>{try{let W=!0;const U="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(U);M.onsuccess=()=>{M.result.close(),W||self.indexedDB.deleteDatabase(U),G(!0)},M.onupgradeneeded=()=>{W=!1},M.onerror=()=>{var L;j((null===(L=M.error)||void 0===L?void 0:L.message)||"")}}catch(W){j(W)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const se=()=>{try{return function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=G&&me(G[1]);return j&&JSON.parse(j)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},Le=G=>{var j,W;return null===(W=null===(j=se())||void 0===j?void 0:j.emulatorHosts)||void 0===W?void 0:W[G]},pt=()=>{var G;return null===(G=se())||void 0===G?void 0:G.config},Xt=G=>{var j;return null===(j=se())||void 0===j?void 0:j[`_${G}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,W)=>{this.resolve=j,this.reject=W})}wrapCallback(j){return(W,U)=>{W?this.reject(W):this.resolve(U),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(W):j(W,U))}}}function ze(G,j){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=j||"demo-project",M=G.iat||0,L=G.sub||G.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ee=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:M,exp:M+3600,auth_time:M,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},G);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ee)),""].join(".")}class mn extends Error{constructor(j,W,U){super(W),this.code=j,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}}class Qt{constructor(j,W,U){this.service=j,this.serviceName=W,this.errors=U}create(j,...W){const U=W[0]||{},M=`${this.service}/${j}`,L=this.errors[j],ee=L?function Jt(G,j){return G.replace(Ht,(W,U)=>{const M=j[U];return null!=M?String(M):`<${U}?>`})}(L,U):"Error";return new mn(M,`${this.serviceName}: ${ee} (${M}).`,U)}}const Ht=/\{\$([^}]+)}/g;function Pr(G,j){return Object.prototype.hasOwnProperty.call(G,j)}function fi(G){for(const j in G)if(Object.prototype.hasOwnProperty.call(G,j))return!1;return!0}function Ye(G,j){if(G===j)return!0;const W=Object.keys(G),U=Object.keys(j);for(const M of W){if(!U.includes(M))return!1;const L=G[M],ee=j[M];if(Zn(L)&&Zn(ee)){if(!Ye(L,ee))return!1}else if(L!==ee)return!1}for(const M of U)if(!W.includes(M))return!1;return!0}function Zn(G){return null!==G&&"object"==typeof G}function gn(G){const j=[];for(const[W,U]of Object.entries(G))Array.isArray(U)?U.forEach(M=>{j.push(encodeURIComponent(W)+"="+encodeURIComponent(M))}):j.push(encodeURIComponent(W)+"="+encodeURIComponent(U));return j.length?"&"+j.join("&"):""}function hr(G){const j={};return G.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[M,L]=U.split("=");j[decodeURIComponent(M)]=decodeURIComponent(L)}}),j}function Ps(G){const j=G.indexOf("?");if(!j)return"";const W=G.indexOf("#",j);return G.substring(j,W>0?W:void 0)}function _n(G,j){const W=new hn(G,j);return W.subscribe.bind(W)}class hn{constructor(j,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{j(this)}).catch(U=>{this.error(U)})}next(j){this.forEachObserver(W=>{W.next(j)})}error(j){this.forEachObserver(W=>{W.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,W,U){let M;if(void 0===j&&void 0===W&&void 0===U)throw new Error("Missing Observer.");M=function lt(G,j){if("object"!=typeof G||null===G)return!1;for(const W of j)if(W in G&&"function"==typeof G[W])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:W,complete:U},void 0===M.next&&(M.next=Dt),void 0===M.error&&(M.error=Dt),void 0===M.complete&&(M.complete=Dt);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),L}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,j)}sendOne(j,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{W(this.observers[j])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dt(){}function Xe(G,j=1e3,W=2){const U=j*Math.pow(W,G),M=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+M)}function Wt(G){return G&&G._delegate?G._delegate:G}},5740:(at,Te,R)=>{var c=R(4650);let B=null;function N(){return B}const he=new c.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function me(){return(0,c.LFG)(H)}()},providedIn:"platform"}),n})();const z=new c.OlP("Location Initialized");let H=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){Y()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){Y()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function je(){return new H((0,c.LFG)(he))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Qe)},providedIn:"root"}),n})();const fe=new c.OlP("appBaseHref");let Qe=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+tt(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+tt(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(le),c.LFG(fe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),We=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+tt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+tt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(le),c.LFG(fe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ee(He(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Me,n.stripTrailingSlash=Ee,n.\u0275fac=function(t){return new(t||n)(c.LFG(_e))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ae(){return new Ne((0,c.LFG)(_e))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}var ue=(()=>((ue=ue||{})[ue.Decimal=0]="Decimal",ue[ue.Percent=1]="Percent",ue[ue.Currency=2]="Currency",ue[ue.Scientific=3]="Scientific",ue))(),se=(()=>((se=se||{})[se.Decimal=0]="Decimal",se[se.Group=1]="Group",se[se.List=2]="List",se[se.PercentSign=3]="PercentSign",se[se.PlusSign=4]="PlusSign",se[se.MinusSign=5]="MinusSign",se[se.Exponential=6]="Exponential",se[se.SuperscriptingExponent=7]="SuperscriptingExponent",se[se.PerMille=8]="PerMille",se[se.Infinity=9]="Infinity",se[se.NaN=10]="NaN",se[se.TimeSeparator=11]="TimeSeparator",se[se.CurrencyDecimal=12]="CurrencyDecimal",se[se.CurrencyGroup=13]="CurrencyGroup",se))();function kt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===se.CurrencyDecimal)return t[c.wAp.NumberSymbols][se.Decimal];if(e===se.CurrencyGroup)return t[c.wAp.NumberSymbols][se.Group]}return r}const nt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function $n(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function tu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}class Ls{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kr=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Ls(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),Vs(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Vs(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Vs(n,e){n.context.$implicit=e.item}let fn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Kn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Kn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class dh{constructor(){this.$implicit=null,this.ngIf=null}}function Kn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let nu=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,u]=t.split("."),d=-1===s.indexOf("-")?void 0:c.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,u?`${r}${u}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,s,d)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();function si(n,e){return new c.vHH(2100,!1)}let Bs=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw si();return t.toLowerCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"lowercase",type:n,pure:!0,standalone:!0}),n})();const ao=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Hu=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw si();return t.replace(ao,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"titlecase",type:n,pure:!0,standalone:!0}),n})(),js=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function iu(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function gt(n,e,t){return function vn(n,e,t,r,s,u,d=!1){let g="",_=!1;if(isFinite(n)){let b=function eu(n){let r,s,u,d,g,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(g=e.length))r=[0],s=1;else{for(g--;"0"===e.charAt(g);)g--;for(s-=u,r=[],d=0;u<=g;u++,d++)r[d]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);d&&(b=function Rs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let S=e.minInt,P=e.minFrac,$=e.maxFrac;if(u){const Ot=u.match(nt);if(null===Ot)throw new Error(`${u} is not a valid digit info`);const Vt=Ot[1],Ut=Ot[3],$t=Ot[5];null!=Vt&&(S=$n(Vt)),null!=Ut&&(P=$n(Ut)),null!=$t?$=$n($t):null!=Ut&&P>$&&($=P)}!function zi(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let d=u+n.integerLen,g=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let P=d;P<r.length;P++)r[P]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let P=1;P<d;P++)r[P]=0}if(g>=5)if(d-1<0){for(let P=0;P>d;P--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;s<Math.max(0,u);s++)r.push(0);let _=0!==u;const b=e+n.integerLen,S=r.reduceRight(function(P,$,Z,re){return re[Z]=($+=P)<10?$:$-10,_&&(0===re[Z]&&Z>=b?re.pop():_=!1),$>=10?1:0},0);S&&(r.unshift(S),n.integerLen++)}(b,P,$);let Z=b.digits,re=b.integerLen;const Re=b.exponent;let Ue=[];for(_=Z.every(Ot=>!Ot);re<S;re++)Z.unshift(0);for(;re<0;re++)Z.unshift(0);re>0?Ue=Z.splice(re,Z.length):(Ue=Z,Z=[0]);const ut=[];for(Z.length>=e.lgSize&&ut.unshift(Z.splice(-e.lgSize,Z.length).join(""));Z.length>e.gSize;)ut.unshift(Z.splice(-e.gSize,Z.length).join(""));Z.length&&ut.unshift(Z.join("")),g=ut.join(kt(t,r)),Ue.length&&(g+=kt(t,s)+Ue.join("")),Re&&(g+=kt(t,se.Exponential)+"+"+Re)}else g=kt(t,se.Infinity);return g=n<0&&!_?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(n,function ks(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],d=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],g=d[0],_=d[1]||"";t.posPre=g.substring(0,g.indexOf("#"));for(let S=0;S<_.length;S++){const P=_.charAt(S);"0"===P?t.minFrac=t.maxFrac=S+1:"#"===P?t.maxFrac=S+1:t.posSuf+=P}const b=g.split(",");if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,u){const S=s.length-t.posPre.length-t.posSuf.length,P=u.indexOf("#");t.negPre=u.substring(0,P).replace(/'/g,""),t.negSuf=u.slice(P+S).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function br(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,ue.Decimal),kt(e,se.MinusSign)),e,se.Group,se.Decimal,t)}(function Gu(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(u){throw si()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let hh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function ho(n){return"server"===n}let wl=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new fh((0,c.LFG)(he),window)}),n})();class fh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function _r(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gi(this.window.history)||gi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Hs{}class ds extends class Dl extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){B||(B=n)}(new ds)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tl(){return hs=hs||document.querySelector("base"),hs?hs.getAttribute("href"):null}();return null==t?null:function Yi(n){Dn=Dn||document.createElement("a"),Dn.setAttribute("href",n);const e=Dn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tu(document.cookie,e)}}let Dn,hs=null;const Tn=new c.OlP("TRANSITION_ID"),Ju=[{provide:c.ip1,useFactory:function Qu(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=N(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Tn,he,c.zs3],multi:!0}];let Xu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ec=new c.OlP("EventManagerPlugins");let tc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const d=s[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ec),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class uu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=N().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let qs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),vo=(()=>{class n extends qs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,s.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Sl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Sl))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Sl(n){N().remove(n)}const wo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Al=/%COMP%/g;function lu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?lu(n,s,t):(s=s.replace(Al,n),t.push(s))}return t}function du(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hu=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Qi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Ml(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new Ch(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=lu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(tc),c.LFG(vo),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Qi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(va(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(va(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=wo[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=wo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,du(r)):this.eventManager.addEventListener(e,t,du(r))}}function va(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ml extends Qi{constructor(e,t,r,s){super(e),this.component=r;const u=lu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ln(n){return"_ngcontent-%COMP%".replace(Al,n)}(s+"-"+r.id),this.hostAttr=function cu(n){return"_nghost-%COMP%".replace(Al,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ch extends Qi{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=lu(s.id,s.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jn=(()=>{class n extends uu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Eh=["alt","control","meta","shift"],fs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ic={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wa=(()=>{class n extends uu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),d="code."),Eh.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),d+=b+".")}),d+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=d,_}static matchEventFullKeyCode(t,r){let s=fs[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Eh.forEach(d=>{d!==s&&(0,ic[d])(t)&&(u+=d+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ca=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Pl(){ds.makeCurrent()},multi:!0},{provide:he,useFactory:function sc(){return(0,c.RDi)(document),document},deps:[]}]),Zs=new c.OlP(""),Ea=[{provide:c.rWj,useClass:class vh{addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,d=!1;const g=function(_){d=d||_,u--,0==u&&r(d)};s.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Eo=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Ji(){return new c.qLn},deps:[]},{provide:ec,useClass:Jn,multi:!0,deps:[he,c.R0b,c.Lbi]},{provide:ec,useClass:wa,multi:!0,deps:[he]},{provide:hu,useClass:hu,deps:[tc,vo,c.AFp]},{provide:c.FYo,useExisting:hu},{provide:qs,useExisting:vo},{provide:vo,useClass:vo,deps:[he]},{provide:tc,useClass:tc,deps:[ec,c.R0b]},{provide:Hs,useClass:Xu,deps:[]},[]];let bo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Tn,useExisting:c.AFp},Ju]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Zs,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...Eo,...Ea],imports:[hh,c.hGG]}),n})(),Mi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ba(){return new Mi((0,c.LFG)(he))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Pi=R(7669),dn=R(8996);function it(...n){const e=(0,Pi.yG)(n);return(0,dn.D)(n,e)}var yi=R(9751),sn=R(5577),_i=R(576);function vi(n,e){return(0,_i.m)(e)?(0,sn.z)(n,e,1):(0,sn.z)(n,1)}var Pn=R(4482),Sn=R(5403);function zr(n,e){return(0,Pn.e)((t,r)=>{let s=0;t.subscribe((0,Sn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var mt=R(4004);class Rl{}class Ks{}class Ni{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ni?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ni;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ni?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(g=>-1===u.indexOf(g)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class qr{encodeKey(e){return Da(e)}encodeValue(e){return Da(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ki=/%(\d[a-f0-9])/gi,uc={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Da(n){return encodeURIComponent(n).replace(ki,(e,t)=>uc[t]??e)}function Po(n){return`${n}`}class ci{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new qr,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ia(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[d,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],_=t.get(d)||[];_.push(g),t.set(d,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Po):[Po(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ci({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Po(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Po(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ll{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function cc(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function No(n){return typeof Blob<"u"&&n instanceof Blob}function Ta(n){return typeof FormData<"u"&&n instanceof FormData}class Ri{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Bp(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ni),this.context||(this.context=new Ll),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+d}}else this.params=new ci,this.urlWithParams=t}serializeBody(){return null===this.body?null:cc(this.body)||No(this.body)||Ta(this.body)||function Xi(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ci?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ta(this.body)?null:No(this.body)?this.body.type||null:cc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ci?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,b=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((P,$)=>P.set($,e.setHeaders[$]),_)),e.setParams&&(b=Object.keys(e.setParams).reduce((P,$)=>P.set($,e.setParams[$]),b)),new Ri(t,r,u,{params:b,headers:_,context:S,reportProgress:g,responseType:s,withCredentials:d})}}var Nn=(()=>((Nn=Nn||{})[Nn.Sent=0]="Sent",Nn[Nn.UploadProgress=1]="UploadProgress",Nn[Nn.ResponseHeader=2]="ResponseHeader",Nn[Nn.DownloadProgress=3]="DownloadProgress",Nn[Nn.Response=4]="Response",Nn[Nn.User=5]="User",Nn))();class gs{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ni,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wi extends gs{constructor(e={}){super(e),this.type=Nn.ResponseHeader}clone(e={}){return new wi({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ko extends gs{constructor(e={}){super(e),this.type=Nn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ko({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ms extends gs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function _u(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ro=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof Ri)u=t;else{let _,b;_=s.headers instanceof Ni?s.headers:new Ni(s.headers),s.params&&(b=s.params instanceof ci?s.params:new ci({fromObject:s.params})),u=new Ri(t,r,void 0!==s.body?s.body:null,{headers:_,context:s.context,params:b,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const d=it(u).pipe(vi(_=>this.handler.handle(_)));if(t instanceof Ri||"events"===s.observe)return d;const g=d.pipe(zr(_=>_ instanceof ko));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,mt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,mt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,mt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,mt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ci).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,_u(s,r))}post(t,r,s={}){return this.request("POST",t,_u(s,r))}put(t,r,s={}){return this.request("PUT",t,_u(s,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Rl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class es{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Vl=new c.OlP("HTTP_INTERCEPTORS");let Gn=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const yt=/^\)\]\}',?\n/;let Ft=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new yi.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((Z,re)=>s.setRequestHeader(Z,re.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Z=t.detectContentTypeHeader();null!==Z&&s.setRequestHeader("Content-Type",Z)}if(t.responseType){const Z=t.responseType.toLowerCase();s.responseType="json"!==Z?Z:"text"}const u=t.serializeBody();let d=null;const g=()=>{if(null!==d)return d;const Z=s.statusText||"OK",re=new Ni(s.getAllResponseHeaders()),Re=function bt(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return d=new wi({headers:re,status:s.status,statusText:Z,url:Re}),d},_=()=>{let{headers:Z,status:re,statusText:Re,url:Ue}=g(),ut=null;204!==re&&(ut=typeof s.response>"u"?s.responseText:s.response),0===re&&(re=ut?200:0);let Ot=re>=200&&re<300;if("json"===t.responseType&&"string"==typeof ut){const Vt=ut;ut=ut.replace(yt,"");try{ut=""!==ut?JSON.parse(ut):null}catch(Ut){ut=Vt,Ot&&(Ot=!1,ut={error:Ut,text:ut})}}Ot?(r.next(new ko({body:ut,headers:Z,status:re,statusText:Re,url:Ue||void 0})),r.complete()):r.error(new ms({error:ut,headers:Z,status:re,statusText:Re,url:Ue||void 0}))},b=Z=>{const{url:re}=g(),Re=new ms({error:Z,status:s.status||0,statusText:s.statusText||"Unknown Error",url:re||void 0});r.error(Re)};let S=!1;const P=Z=>{S||(r.next(g()),S=!0);let re={type:Nn.DownloadProgress,loaded:Z.loaded};Z.lengthComputable&&(re.total=Z.total),"text"===t.responseType&&!!s.responseText&&(re.partialText=s.responseText),r.next(re)},$=Z=>{let re={type:Nn.UploadProgress,loaded:Z.loaded};Z.lengthComputable&&(re.total=Z.total),r.next(re)};return s.addEventListener("load",_),s.addEventListener("error",b),s.addEventListener("timeout",b),s.addEventListener("abort",b),t.reportProgress&&(s.addEventListener("progress",P),null!==u&&s.upload&&s.upload.addEventListener("progress",$)),s.send(u),r.next({type:Nn.Sent}),()=>{s.removeEventListener("error",b),s.removeEventListener("abort",b),s.removeEventListener("load",_),s.removeEventListener("timeout",b),t.reportProgress&&(s.removeEventListener("progress",P),null!==u&&s.upload&&s.upload.removeEventListener("progress",$)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Hs))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ht=new c.OlP("XSRF_COOKIE_NAME"),kn=new c.OlP("XSRF_HEADER_NAME");class ar{}let Fo=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=tu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he),c.LFG(c.Lbi),c.LFG(ht))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ys=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ar),c.LFG(kn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Lo=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Vl,[]);this.chain=r.reduceRight((s,u)=>new es(s,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ks),c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Sa=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:ys,useClass:Gn}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ht,useValue:t.cookieName}:[],t.headerName?{provide:kn,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ys,{provide:Vl,useExisting:ys,multi:!0},{provide:ar,useClass:Fo},{provide:ht,useValue:"XSRF-TOKEN"},{provide:kn,useValue:"X-XSRF-TOKEN"}]}),n})(),Uo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Ro,{provide:Rl,useClass:Lo},Ft,{provide:Ks,useExisting:Ft}],imports:[Sa.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const{isArray:x0}=Array,{getPrototypeOf:ny,prototype:jp,keys:ry}=Object;function jo(n){if(1===n.length){const e=n[0];if(x0(e))return{args:e,keys:null};if(function $p(n){return n&&"object"==typeof n&&ny(n)===jp}(e)){const t=ry(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var dc=R(8421);const{isArray:Hp}=Array;function xh(n){return(0,mt.U)(e=>function M0(n,e){return Hp(e)?n(...e):n(e)}(n,e))}function iy(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let Gp=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),vs=(()=>{class n extends Gp{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const li=new c.OlP("NgValueAccessor"),sy={provide:li,useExisting:(0,c.Gpc)(()=>Ys),multi:!0},ay=new c.OlP("CompositionEventMode");let Ys=(()=>{class n extends Gp{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function oy(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(ay,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([sy]),c.qOj]}),n})();function Qs(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Nh(n){return null!=n&&"number"==typeof n.length}const pr=new c.OlP("NgValidators"),Js=new c.OlP("NgAsyncValidators"),kh=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class xa{static min(e){return function Rh(n){return e=>{if(Qs(e.value)||Qs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function zp(n){return e=>{if(Qs(e.value)||Qs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Bl(n){return Qs(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Xs(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Ma(n){return Qs(n.value)||kh.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Fh(n){return e=>Qs(e.value)||!Nh(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function uy(n){return e=>Nh(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function cy(n){if(!n)return Lh;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Qs(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return p(e)}static composeAsync(e){return C(e)}}function Lh(n){return null}function ly(n){return null!=n}function dy(n){return(0,c.QGY)(n)?(0,dn.D)(n):n}function jl(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function qp(n,e){return e.map(t=>t(n))}function v(n){return n.map(e=>function hy(n){return!n.validate}(e)?e:t=>e.validate(t))}function p(n){if(!n)return null;const e=n.filter(ly);return 0==e.length?null:function(t){return jl(qp(t,e))}}function m(n){return null!=n?p(v(n)):null}function C(n){if(!n)return null;const e=n.filter(ly);return 0==e.length?null:function(t){return function Mh(...n){const e=(0,Pi.jO)(n),{args:t,keys:r}=jo(n),s=new yi.y(u=>{const{length:d}=t;if(!d)return void u.complete();const g=new Array(d);let _=d,b=d;for(let S=0;S<d;S++){let P=!1;(0,dc.Xf)(t[S]).subscribe((0,Sn.x)(u,$=>{P||(P=!0,b--),g[S]=$},()=>_--,void 0,()=>{(!_||!P)&&(b||u.next(r?iy(r,g):g),u.complete())}))}});return e?s.pipe(xh(e)):s}(qp(t,e).map(dy)).pipe((0,mt.U)(jl))}}function A(n){return null!=n?C(v(n)):null}function k(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function X(n){return n._rawValidators}function Ie(n){return n._rawAsyncValidators}function et(n){return n?Array.isArray(n)?n:[n]:[]}function ft(n,e){return Array.isArray(n)?n.includes(e):n===e}function Gt(n,e){const t=et(e);return et(n).forEach(s=>{ft(t,s)||t.push(s)}),t}function Cn(n,e){return et(e).filter(t=>!ft(n,t))}class Ci{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=m(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=A(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Xn extends Ci{get formDirective(){return null}get path(){return null}}class ws extends Ci{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $l{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hc=(()=>{class n extends $l{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ws,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),vu=(()=>{class n extends $l{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Xn,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();const gc="VALID",Uh="INVALID",mc="PENDING",Hl="DISABLED";function my(n){return(_y(n)?n.validators:n)||null}function yy(n){return Array.isArray(n)?m(n):n||null}function Wp(n,e){return(_y(e)?e.asyncValidators:n)||null}function Kp(n){return Array.isArray(n)?A(n):n||null}function _y(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function N0(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")}function Yp(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new c.vHH(1002,"")})}class Bh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=yy(this._rawValidators),this._composedAsyncValidatorFn=Kp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gc}get invalid(){return this.status===Uh}get pending(){return this.status==mc}get disabled(){return this.status===Hl}get enabled(){return this.status!==Hl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=yy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Kp(e)}addValidators(e){this.setValidators(Gt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Cn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Cn(e,this._rawAsyncValidators))}hasValidator(e){return ft(this._rawValidators,e)}hasAsyncValidator(e){return ft(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=mc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hl,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gc,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gc||this.status===mc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hl:gc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=mc,this._hasOwnPendingAsyncValidator=!0;const t=dy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Hl:this.errors?Uh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mc)?mc:this._anyControlsHaveStatus(Uh)?Uh:gc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_y(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Gl extends Bh{constructor(e,t,r){super(my(t),Wp(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Yp(this,0,e),Object.keys(e).forEach(r=>{N0(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Qp extends Gl{}function yc(n,e){jh(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Vb(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&vc(n,e)})}(n,e),function Ub(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function R0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&vc(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function k0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _c(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Xp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ho(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jh(n,e){const t=X(n);null!==e.validator?n.setValidators(k(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ie(n);null!==e.asyncValidator?n.setAsyncValidators(k(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Ho(e._rawValidators,s),Ho(e._rawAsyncValidators,s)}function Xp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=X(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=Ie(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Ho(e._rawValidators,r),Ho(e._rawAsyncValidators,r),t}function vc(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Hb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Iy(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Hh=class extends Bh{constructor(e=null,t,r){super(my(t),Wp(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_y(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Iy(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Iy(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Sy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const HA={provide:li,useExisting:(0,c.Gpc)(()=>B0),multi:!0};let B0=(()=>{class n extends vs{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([HA]),c.qOj]}),n})(),Ay=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Gh=new c.OlP("NgModelWithFormControlWarning"),zh={provide:Xn,useExisting:(0,c.Gpc)(()=>Zl)};let Zl=(()=>{class n extends Xn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return yc(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){_c(t.control||null,t,!1),function $h(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function $b(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(_c(r||null,t),(n=>n instanceof Hh)(s)&&(yc(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function F0(n,e){jh(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Bb(n,e){return Xp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jh(this.form,this),this._oldForm&&Xp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(pr,10),c.Y36(Js,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([zh]),c.qOj,c.TTD]}),n})();const Yb={provide:ws,useExisting:(0,c.Gpc)(()=>qh)};let qh=(()=>{class n extends ws{constructor(t,r,s,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Ey(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Ys?t=u:function V0(n){return Object.getPrototypeOf(n.constructor)===vs}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Cy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Jp(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Xn,13),c.Y36(pr,10),c.Y36(Js,10),c.Y36(li,10),c.Y36(Gh,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([Yb]),c.qOj,c.TTD]}),n})(),iI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Ay]}),n})(),eo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[iI]}),n})(),Zh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gh,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[iI]}),n})();class ig extends Bh{constructor(e,t,r){super(my(t),Wp(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Yp(this,0,e),e.forEach((r,s)=>{N0(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function rw(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let wc=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let u={};return rw(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Gl(s,u)}record(t,r=null){const s=this._reduceControls(t);return new Qp(s,r)}control(t,r,s){let u={};return this.useNonNullable?(rw(r)?u=r:(u.validators=r,u.asyncValidators=s),new Hh(t,{...u,nonNullable:!0})):new Hh(t,r,s)}array(t,r,s){const u=t.map(d=>this._createControl(d));return new ig(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof Hh||t instanceof Bh?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:Zh}),n})();var In=R(7579);class Fi extends In.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Pa=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Cc=R(4671),sw=R(9672);function Ec(...n){const e=(0,Pi.yG)(n),t=(0,Pi.jO)(n),{args:r,keys:s}=jo(n);if(0===r.length)return(0,dn.D)([],e);const u=new yi.y(function Ly(n,e,t=Cc.y){return r=>{ow(e,()=>{const{length:s}=n,u=new Array(s);let d=s,g=s;for(let _=0;_<s;_++)ow(e,()=>{const b=(0,dn.D)(n[_],e);let S=!1;b.subscribe((0,Sn.x)(r,P=>{u[_]=P,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>iy(s,d):Cc.y));return t?u.pipe(xh(t)):u}function ow(n,e,t){n?(0,sw.f)(t,n,e):e()}var Wh=R(8189);function Vy(...n){return function oI(){return(0,Wh.J)(1)}()((0,dn.D)(n,(0,Pi.yG)(n)))}function aw(n){return new yi.y(e=>{(0,dc.Xf)(n()).subscribe(e)})}var aI=R(9635);function Yl(n,e){const t=(0,_i.m)(n)?n:()=>n,r=s=>s.error(t());return new yi.y(e?s=>e.schedule(r,0,s):r)}var Na=R(515),Uy=R(727);function Kh(){return(0,Pn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Sn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uw extends yi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Pn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Uy.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Sn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Uy.w0.EMPTY)}return e}refCount(){return Kh()(this)}}function tr(n,e){return(0,Pn.e)((t,r)=>{let s=null,u=0,d=!1;const g=()=>d&&!s&&r.complete();t.subscribe((0,Sn.x)(r,_=>{s?.unsubscribe();let b=0;const S=u++;(0,dc.Xf)(n(_,S)).subscribe(s=(0,Sn.x)(r,P=>r.next(e?e(_,P,S,b++):P),()=>{s=null,g()}))},()=>{d=!0,g()}))})}function Ql(n){return n<=0?()=>Na.E:(0,Pn.e)((e,t)=>{let r=0;e.subscribe((0,Sn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Yh(...n){const e=(0,Pi.yG)(n);return(0,Pn.e)((t,r)=>{(e?Vy(n,t,e):Vy(n,t)).subscribe(r)})}function zo(n){return(0,Pn.e)((e,t)=>{let r=!1;e.subscribe((0,Sn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function By(n=cw){return(0,Pn.e)((e,t)=>{let r=!1;e.subscribe((0,Sn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function cw(){return new Pa}function ka(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((s,u)=>n(s,u,r)):Cc.y,Ql(1),t?zo(e):By(()=>new Pa))}var Wr=R(8505);function to(n){return(0,Pn.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Sn.x)(t,void 0,void 0,d=>{u=(0,dc.Xf)(n(d,to(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function uI(n,e,t,r,s){return(u,d)=>{let g=t,_=e,b=0;u.subscribe((0,Sn.x)(d,S=>{const P=b++;_=g?n(_,S,P):(g=!0,S),r&&d.next(_)},s&&(()=>{g&&d.next(_),d.complete()})))}}function Jl(n,e){return(0,Pn.e)(uI(n,e,arguments.length>=2,!0))}function sg(n){return n<=0?()=>Na.E:(0,Pn.e)((e,t)=>{let r=[];e.subscribe((0,Sn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function jy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((s,u)=>n(s,u,r)):Cc.y,sg(1),t?zo(e):By(()=>new Pa))}function Xl(n){return(0,Pn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",ed=Symbol("RouteTitle");class Hy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bc(n){return new Hy(n)}function Gy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))s[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function qo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!zy(n[s],e[s]))return!1;return!0}function zy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function dw(n){return Array.prototype.concat.apply([],n)}function hw(n){return n.length>0?n[n.length-1]:null}function Tr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ra(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,dn.D)(Promise.resolve(n)):it(n)}const lI={exact:function Cs(n,e,t){if(!Dc(n.segments,e.segments)||!og(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Cs(n.children[r],e.children[r],t))return!1;return!0},subset:Zy},qy={exact:function dI(n,e){return qo(n,e)},subset:function hI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zy(n[t],e[t]))},ignored:()=>!0};function gw(n,e,t){return lI[t.paths](n.root,e.root,t.matrixParams)&&qy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Zy(n,e,t){return mw(n,e,e.segments,t)}function mw(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Dc(s,t)||e.hasChildren()||!og(s,t,r))}if(n.segments.length===t.length){if(!Dc(n.segments,t)||!og(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Zy(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Dc(n.segments,s)&&og(n.segments,s,r)&&n.children[zt])&&mw(n.children[zt],e,u,r)}}function og(n,e,t){return e.every((r,s)=>qy[t](n[s].parameters,r.parameters))}class Ic{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bc(this.queryParams)),this._queryParamMap}toString(){return yw.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Tr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jh(this)}}class td{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bc(this.parameters)),this._parameterMap}toString(){return mI(this)}}function Dc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Lt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new ag},providedIn:"root"}),n})();class ag{parse(e){const t=new QA(e);return new Ic(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Xh(e.root,!0)}`,r=function Cw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${ef(t)}=${ef(s)}`).join("&"):`${ef(t)}=${ef(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function gI(n){return encodeURI(n)}(e.fragment)}`:""}`}}const yw=new ag;function Jh(n){return n.segments.map(e=>mI(e)).join("/")}function Xh(n,e){if(!n.hasChildren())return Jh(n);if(e){const t=n.children[zt]?Xh(n.children[zt],!1):"",r=[];return Tr(n.children,(s,u)=>{u!==zt&&r.push(`${u}:${Xh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function pI(n,e){let t=[];return Tr(n.children,(r,s)=>{s===zt&&(t=t.concat(e(r,s)))}),Tr(n.children,(r,s)=>{s!==zt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===zt?[Xh(n.children[zt],!1)]:[`${s}:${Xh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${Jh(n)}/${t[0]}`:`${Jh(n)}/(${t.join("//")})`}}function _w(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ef(n){return _w(n).replace(/%3B/gi,";")}function ug(n){return _w(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cg(n){return decodeURIComponent(n)}function vw(n){return cg(n.replace(/\+/g,"%20"))}function mI(n){return`${ug(n.path)}${function ww(n){return Object.keys(n).map(e=>`;${ug(e)}=${ug(n[e])}`).join("")}(n.parameters)}`}const Tc=/^[^\/()?;=#]+/;function lg(n){const e=n.match(Tc);return e?e[0]:""}const Wy=/^[^=?&#]+/,yI=/^[^&#]+/;class QA{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new Kt(e,t)),r}parseSegment(){const e=lg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new td(cg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=lg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=lg(this.remaining);s&&(r=s,this.capture(r))}e[cg(t)]=cg(r)}parseQueryParam(e){const t=function Ky(n){const e=n.match(Wy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function YA(n){const e=n.match(yI);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=vw(t),u=vw(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=lg(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new c.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=zt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[zt]:new Kt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function Ew(n){return n.segments.length>0?new Kt([],{[zt]:n}):n}function dg(n){const e={};for(const r of Object.keys(n.children)){const u=dg(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function bw(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}function nd(n){return n instanceof Ic}function hg(n,e,t,r,s){if(0===t.length)return id(e.root,e.root,e.root,r,s);const u=function Sw(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Tw(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Tr(u.outlets,(_,b)=>{g[b]="string"==typeof _?_.split("/"):_}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new Tw(t,e,r)}(t);return u.toRoot()?id(e.root,e.root,new Kt([],{}),r,s):function d(_){const b=function vI(n,e,t,r){if(n.isAbsolute)return new sd(e.root,!0,0);if(-1===r)return new sd(t,t===e.root,0);return function Qy(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new c.vHH(4005,!1);s=r.segments.length}return new sd(r,!1,s-u)}(t,r+(nf(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),S=b.processChildren?fg(b.segmentGroup,b.index,u.commands):rf(b.segmentGroup,b.index,u.commands);return id(e.root,b.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function nf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rd(n){return"object"==typeof n&&null!=n&&n.outlets}function id(n,e,t,r,s){let d,u={};r&&Tr(r,(_,b)=>{u[b]=Array.isArray(_)?_.map(S=>`${S}`):`${_}`}),d=n===e?t:Dw(n,e,t);const g=Ew(dg(d));return new Ic(g,u,s)}function Dw(n,e,t){const r={};return Tr(n.children,(s,u)=>{r[u]=s===e?t:Dw(s,e,t)}),new Kt(n.segments,r)}class Tw{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&nf(r[0]))throw new c.vHH(4003,!1);const s=r.find(rd);if(s&&s!==hw(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function rf(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return fg(n,e,t);const r=function Jy(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],g=t[r];if(rd(g))break;const _=`${g}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!e_(_,b,d))return u;r+=2}else{if(!e_(_,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Kt(n.segments.slice(0,r.pathIndex),{});return u.children[zt]=new Kt(n.segments.slice(r.pathIndex),n.children),fg(u,0,s)}return r.match&&0===s.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?Xy(n,e,t):r.match?fg(n,0,s):Xy(n,e,t)}function fg(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function xw(n){return rd(n[0])?n[0].outlets:{[zt]:n}}(t),s={};return Tr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[d]=rf(n.children[d],e,u))}),Tr(n.children,(u,d)=>{void 0===r[d]&&(s[d]=u)}),new Kt(n.segments,s)}}function Xy(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(rd(u)){const _=JA(u.outlets);return new Kt(r,_)}if(0===s&&nf(t[0])){r.push(new td(n.segments[e].path,Sc(t[0]))),s++;continue}const d=rd(u)?u.outlets[zt]:`${u}`,g=s<t.length-1?t[s+1]:null;d&&g&&nf(g)?(r.push(new td(d,Sc(g))),s+=2):(r.push(new td(d,{})),s++)}return new Kt(r,{})}function JA(n){const e={};return Tr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Xy(new Kt([],{}),0,t))}),e}function Sc(n){const e={};return Tr(n,(t,r)=>e[r]=`${t}`),e}function e_(n,e,t){return n==t.path&&qo(e,t.parameters)}class Zo{constructor(e,t){this.id=e,this.url=t}}class od extends Zo{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Kr extends Zo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sf extends Zo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mw extends Zo{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class t_ extends Zo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fa extends Zo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n_ extends Zo{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ow extends Zo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r_ extends Zo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XA{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ex{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gg{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class i_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wI{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=o_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=o_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=a_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return a_(e,this._root).map(t=>t.value)}}function o_(n,e){if(n===e.value)return e;for(const t of e.children){const r=o_(n,t);if(r)return r}return null}function a_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=a_(n,t);if(r.length)return r.unshift(e),r}return[]}class La{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ad(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class u_ extends wI{constructor(e,t){super(e),this.snapshot=t,kw(this,e)}toString(){return this.snapshot.toString()}}function CI(n,e){const t=function EI(n,e){const d=new yg([],{},{},"",{},zt,e,null,n.root,-1,{});return new _g("",new La(d,[]))}(n,e),r=new Fi([new td("",{})]),s=new Fi({}),u=new Fi({}),d=new Fi({}),g=new Fi(""),_=new ud(r,s,d,g,u,zt,e,t.root);return _.snapshot=t.root,new u_(new La(_,[]),t)}class ud{constructor(e,t,r,s,u,d,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.pipe((0,mt.U)(b=>b[ed]))??it(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>bc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>bc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function c_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Nw(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yg{constructor(e,t,r,s,u,d,g,_,b,S,P,$){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.[ed],this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=S,this._correctedLastPathIndex=$??S,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _g extends wI{constructor(e,t){super(t),this.url=e,kw(this,t)}toString(){return bI(this._root)}}function kw(n,e){e.value._routerState=n,e.children.forEach(t=>kw(n,t))}function bI(n){const e=n.children.length>0?` { ${n.children.map(bI).join(", ")} } `:"";return`${n.value}${e}`}function Rw(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),qo(e.params,t.params)||n.params.next(t.params),function Qh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),qo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fw(n,e){const t=qo(n.params,e.params)&&function fI(n,e){return Dc(n,e)&&n.every((t,r)=>qo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fw(n.parent,e.parent))}function vg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function nx(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return vg(n,r,s);return vg(n,r)})}(n,e,t);return new La(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>vg(n,g)),d}}const r=function rx(n){return new ud(new Fi(n.url),new Fi(n.params),new Fi(n.queryParams),new Fi(n.fragment),new Fi(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>vg(n,u));return new La(r,s)}}const Lw="ngNavigationCancelingError";function II(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=nd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Va(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Va(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Lw]=!0,r.cancellationCode=e,t&&(r.url=t),r}function wg(n){return Vw(n)&&nd(n.url)}function Vw(n){return n&&n[Lw]}class Uw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ac,this.attachRef=null}}let Ac=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Uw,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const af=!1;let uf=(()=>{class n{constructor(t,r,s,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,af);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,af);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,af);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,af);this._activatedRoute=t;const s=this.location,d=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new DI(t,g,s.injector);if(r&&function Eu(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(d);this.activated=s.createComponent(b,s.length,_)}else this.activated=s.createComponent(d,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ac),c.Y36(c.s_b),c.$8M("name"),c.Y36(c.sBO),c.Y36(c.lqb))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class DI{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ud?this.route:e===Ac?this.childContexts:this.parent.get(e,t)}}let Cg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[uf],encapsulation:2}),n})();function Bw(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function cf(n){const e=n.children&&n.children.map(cf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=Cg),t}function bi(n){return n.outlet||zt}function d_(n,e){const t=n.filter(r=>bi(r)===e);return t.push(...n.filter(r=>bi(r)!==e)),t}function hd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class f_{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=ad(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),Tr(s,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=ad(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=ad(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=ad(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new i_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new pg(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Rw(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),Rw(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=hd(s.snapshot),_=g?.get(c._Vd)??null;d.attachRef=null,d.route=s,d.resolver=_,d.injector=g,d.outlet&&d.outlet.activateWith(s,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class p_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fd{constructor(e,t){this.component=e,this.route=t}}function SI(n,e,t){const r=n._root;return gd(r,e?e._root:null,t,[r.value])}function pd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function gd(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=ad(e);return n.children.forEach(d=>{(function AI(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const _=function jw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Dc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Dc(n.url,e.url)||!qo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fw(n,e)||!qo(n.queryParams,e.queryParams);default:return!Fw(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new p_(r)):(u.data=d.data,u._resolvedData=d._resolvedData),gd(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new fd(g.outlet.component,d))}else d&&md(e,g,s),s.canActivateChecks.push(new p_(r)),gd(n,null,u.component?g?g.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),Tr(u,(d,g)=>md(d,t.getContext(g),s)),s}function md(n,e,t){const r=ad(n),s=n.value;Tr(r,(u,d)=>{md(u,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new fd(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function lf(n){return"function"==typeof n}function m_(n){return n instanceof Pa||"EmptyError"===n?.name}const Eg=Symbol("INITIAL_VALUE");function xc(){return tr(n=>Ec(n.map(e=>e.pipe(Ql(1),Yh(Eg)))).pipe((0,mt.U)(e=>{for(const t of e)if(!0!==t){if(t===Eg)return Eg;if(!1===t||t instanceof Ic)return t}return!0}),zr(e=>e!==Eg),Ql(1)))}function qw(n){return(0,aI.z)((0,Wr.b)(e=>{if(nd(e))throw II(0,e)}),(0,mt.U)(e=>!0===e))}const Zw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function __(n,e,t,r,s){const u=v_(n,e,t);return u.matched?function LI(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?it(s.map(d=>{const g=pd(d,n);return Ra(function g_(n){return n&&lf(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(xc(),qw()):it(!0)}(r=Bw(e,r),e,t).pipe((0,mt.U)(d=>!0===d?u:{...Zw})):it(u)}function v_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Zw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Gy)(t,n,e);if(!s)return{...Zw};const u={};Tr(s.posParams,(g,_)=>{u[_]=g.path});const d=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:s.posParams??{}}}function bg(n,e,t,r,s="corrected"){if(t.length>0&&function UI(n,e,t){return t.some(r=>Mc(n,e,r)&&bi(r)!==zt)}(n,t,r)){const d=new Kt(e,function w_(n,e,t,r){const s={};s[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&bi(u)!==zt){const d=new Kt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[bi(u)]=d}return s}(n,e,r,new Kt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function BI(n,e,t){return t.some(r=>Mc(n,e,r))}(n,t,r)){const d=new Kt(n.segments,function VI(n,e,t,r,s,u){const d={};for(const g of r)if(Mc(n,t,g)&&!s[bi(g)]){const _=new Kt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[bi(g)]=_}return{...s,...d}}(n,e,t,r,n.children,s));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Kt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Mc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ig(n,e,t,r){return!!(bi(n)===r||r!==zt&&Mc(e,t,n))&&("**"===n.path||v_(e,n,t).matched)}function df(n,e,t){return 0===e.length&&!n.children[t]}const C_=!1;class yd{constructor(e){this.segmentGroup=e||null}}class jI{constructor(e){this.urlTree=e}}function _d(n){return Yl(new yd(n))}function E_(n){return Yl(new jI(n))}class Ua{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=bg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,mt.U)(u=>this.createUrlTree(dg(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(to(u=>{if(u instanceof jI)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof yd?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,mt.U)(s=>this.createUrlTree(dg(s),e.queryParams,e.fragment))).pipe(to(s=>{throw s instanceof yd?this.noMatchError(s):s}))}noMatchError(e){return new c.vHH(4002,C_)}createUrlTree(e,t,r){const s=Ew(e);return new Ic(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,mt.U)(u=>new Kt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,dn.D)(s).pipe(vi(u=>{const d=r.children[u],g=d_(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,mt.U)(_=>({segment:_,outlet:u})))}),Jl((u,d)=>(u[d.outlet]=d.segment,u),{}),jy())}expandSegment(e,t,r,s,u,d){return(0,dn.D)(r).pipe(vi(g=>this.expandSegmentAgainstRoute(e,t,r,g,s,u,d).pipe(to(b=>{if(b instanceof yd)return it(null);throw b}))),ka(g=>!!g),to((g,_)=>{if(m_(g))return df(t,s,u)?it(new Kt([],{})):_d(t);throw g}))}expandSegmentAgainstRoute(e,t,r,s,u,d,g){return Ig(s,t,u,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d):_d(t):_d(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?E_(u):this.lineralizeSegments(r,u).pipe((0,sn.z)(d=>{const g=new Kt(d,{});return this.expandSegment(e,g,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){const{matched:g,consumedSegments:_,remainingSegments:b,positionalParamSegments:S}=v_(t,s,u);if(!g)return _d(t);const P=this.applyRedirectCommands(_,s.redirectTo,S);return s.redirectTo.startsWith("/")?E_(P):this.lineralizeSegments(s,P).pipe((0,sn.z)($=>this.expandSegment(e,t,r,$.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=Bw(r,e),r.loadChildren?(r._loadedRoutes?it({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,mt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Kt(s,{})))):it(new Kt(s,{}))):__(t,r,s,e).pipe(tr(({matched:d,consumedSegments:g,remainingSegments:_})=>d?this.getChildConfig(e=r._injector??e,r,s).pipe((0,sn.z)(S=>{const P=S.injector??e,$=S.routes,{segmentGroup:Z,slicedSegments:re}=bg(t,g,_,$),Re=new Kt(Z.segments,Z.children);if(0===re.length&&Re.hasChildren())return this.expandChildren(P,$,Re).pipe((0,mt.U)(Vt=>new Kt(g,Vt)));if(0===$.length&&0===re.length)return it(new Kt(g,{}));const Ue=bi(r)===u;return this.expandSegment(P,Re,$,re,Ue?zt:u,!0).pipe((0,mt.U)(Ot=>new Kt(g.concat(Ot.segments),Ot.children)))})):_d(t)))}getChildConfig(e,t,r){return t.children?it({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?it({routes:t._loadedRoutes,injector:t._loadedInjector}):function y_(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?it(!0):it(s.map(d=>{const g=pd(d,n);return Ra(function $w(n){return n&&lf(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(xc(),qw())}(e,t,r).pipe((0,sn.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Wr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Kw(n){return Yl(Va(C_,3))}())):it({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return it(r);if(s.numberOfChildren>1||!s.children[zt])return Yl(new c.vHH(4e3,C_));s=s.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Ic(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Tr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const g=s.substring(1);r[u]=t[g]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return Tr(t.children,(g,_)=>{d[_]=this.createSegmentGroup(e,g,r,s)}),new Kt(u,d)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new c.vHH(4001,C_);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class hf{}class Yw{constructor(e,t,r,s,u,d,g,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g,this.urlSerializer=_}recognize(){const e=bg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,mt.U)(t=>{if(null===t)return null;const r=new yg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new La(r,t),u=new _g(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=c_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,dn.D)(Object.keys(r.children)).pipe(vi(s=>{const u=r.children[s],d=d_(t,s);return this.processSegmentGroup(e,d,u,s)}),Jl((s,u)=>s&&u?(s.push(...u),s):null),function $y(n,e=!1){return(0,Pn.e)((t,r)=>{let s=0;t.subscribe((0,Sn.x)(r,u=>{const d=n(u,s++);(d||e)&&r.next(u),!d&&r.complete()}))})}(s=>null!==s),zo(null),jy(),(0,mt.U)(s=>{if(null===s)return null;const u=Qw(s);return function HI(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,dn.D)(t).pipe(vi(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,s,u)),ka(d=>!!d),to(d=>{if(m_(d))return df(r,s,u)?it([]):it(null);throw d}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!Ig(t,r,s,u))return it(null);let d;if("**"===t.path){const g=s.length>0?hw(s).parameters:{},_=zI(r)+s.length;d=it({snapshot:new yg(s,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eC(t),bi(t),t.component??t._loadedComponent??null,t,Jw(r),_,tC(t),_),consumedSegments:[],remainingSegments:[]})}else d=__(r,t,s,e).pipe((0,mt.U)(({matched:g,consumedSegments:_,remainingSegments:b,parameters:S})=>{if(!g)return null;const P=zI(r)+_.length;return{snapshot:new yg(_,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eC(t),bi(t),t.component??t._loadedComponent??null,t,Jw(r),P,tC(t),P),consumedSegments:_,remainingSegments:b}}));return d.pipe(tr(g=>{if(null===g)return it(null);const{snapshot:_,consumedSegments:b,remainingSegments:S}=g;e=t._injector??e;const P=t._loadedInjector??e,$=function GI(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Z,slicedSegments:re}=bg(r,b,S,$.filter(Ue=>void 0===Ue.redirectTo),this.relativeLinkResolution);if(0===re.length&&Z.hasChildren())return this.processChildren(P,$,Z).pipe((0,mt.U)(Ue=>null===Ue?null:[new La(_,Ue)]));if(0===$.length&&0===re.length)return it([new La(_,[])]);const Re=bi(t)===u;return this.processSegment(P,$,Z,re,Re?zt:u).pipe((0,mt.U)(Ue=>null===Ue?null:[new La(_,Ue)]))}))}}function ff(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qw(n){const e=[],t=new Set;for(const r of n){if(!ff(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Qw(r.children);e.push(new La(r.value,s))}return e.filter(r=>!t.has(r))}function Jw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zI(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function eC(n){return n.data||{}}function tC(n){return n.resolve||{}}function rC(n){return"string"==typeof n.title||null===n.title}function S_(n){return tr(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,mt.U)(()=>e)):it(e)})}let iC=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[ed]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(sC)},providedIn:"root"}),n})(),sC=(()=>{class n extends iC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Pc{}class pf extends class lx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Tg=new c.OlP("",{providedIn:"root",factory:()=>({})}),x_=new c.OlP("ROUTES");let Es=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return it(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ra(t.loadComponent()).pipe((0,Wr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Xl(()=>{this.componentLoaders.delete(t)})),s=new uw(r,()=>new In.x).pipe(Kh());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return it({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,mt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b,S=!1;Array.isArray(g)?b=g:(_=g.create(t).injector,b=dw(_.get(x_,[],c.XFs.Self|c.XFs.Optional)));return{routes:b.map(cf),injector:_}}),Xl(()=>{this.childrenLoaders.delete(r)})),d=new uw(u,()=>new In.x).pipe(Kh());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Ra(t()).pipe((0,sn.z)(r=>r instanceof c.YKP||Array.isArray(r)?it(r):(0,dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3),c.LFG(c.Sil))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gf{}class di{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ag(n){throw n}function bs(n,e,t){return e.parse("/")}const M_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Nc(){const n=(0,c.f3M)(Lt),e=(0,c.f3M)(Ac),t=(0,c.f3M)(Ne),r=(0,c.f3M)(c.zs3),s=(0,c.f3M)(c.Sil),u=(0,c.f3M)(x_,{optional:!0})??[],d=(0,c.f3M)(Tg,{optional:!0})??{},g=(0,c.f3M)(sC),_=(0,c.f3M)(iC,{optional:!0}),b=(0,c.f3M)(gf,{optional:!0}),S=(0,c.f3M)(Pc,{optional:!0}),P=new ur(null,n,e,t,r,s,dw(u));return b&&(P.urlHandlingStrategy=b),S&&(P.routeReuseStrategy=S),P.titleStrategy=_??g,function wd(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,P),P}let ur=(()=>{class n{constructor(t,r,s,u,d,g,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new In.x,this.errorHandler=Ag,this.malformedUriErrorHandler=bs,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>it(void 0),this.urlHandlingStrategy=new di,this.routeReuseStrategy=new pf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Es),this.configLoader.onLoadEndListener=$=>this.triggerEvent(new Pw($)),this.configLoader.onLoadStartListener=$=>this.triggerEvent(new XA($)),this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const P=d.get(c.R0b);this.isNgZoneEnabled=P instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function pw(){return new Ic(new Kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=CI(this.currentUrlTree,this.rootComponentType),this.transitions=new Fi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(zr(s=>0!==s.id),(0,mt.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),tr(s=>{let u=!1,d=!1;return it(s).pipe((0,Wr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),tr(g=>{const _=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return kc(g.source)&&(this.browserUrlTree=g.extractedUrl),it(g).pipe(tr(P=>{const $=this.transitions.getValue();return r.next(new od(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),$!==this.transitions.getValue()?Na.E:Promise.resolve(P)}),function Dg(n,e,t,r){return tr(s=>function b_(n,e,t,r,s){return new Ua(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,mt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wr.b)(P=>{this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects},s.urlAfterRedirects=P.urlAfterRedirects}),function nC(n,e,t,r,s,u){return(0,sn.z)(d=>function I_(n,e,t,r,s,u,d="emptyOnly",g="legacy"){return new Yw(n,e,t,r,s,d,g,u).recognize().pipe(tr(_=>null===_?function $I(n){return new yi.y(e=>e.error(n))}(new hf):it(_)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,s,u).pipe((0,mt.U)(g=>({...d,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wr.b)(P=>{if(s.targetSnapshot=P.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!P.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl);this.setBrowserUrl(Z,P)}this.browserUrlTree=P.urlAfterRedirects}const $=new t_(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);r.next($)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:Z,source:re,restoredState:Re,extras:Ue}=g,ut=new od($,this.serializeUrl(Z),re,Re);r.next(ut);const Ot=CI(Z,this.rootComponentType).snapshot;return it(s={...g,targetSnapshot:Ot,urlAfterRedirects:Z,extras:{...Ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),Na.E}),(0,Wr.b)(g=>{const _=new Fa(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),(0,mt.U)(g=>s={...g,guards:SI(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function NI(n,e){return(0,sn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?it({...t,guardsResult:!0}):function Hw(n,e,t,r){return(0,dn.D)(n).pipe((0,sn.z)(s=>function Wo(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?it(u.map(g=>{const _=hd(e)??s,b=pd(g,_);return Ra(function MI(n){return n&&lf(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):_.runInContext(()=>b(n,e,t,r))).pipe(ka())})).pipe(xc()):it(!0)}(s.component,s.route,t,e,r)),ka(s=>!0!==s,!0))}(d,r,s,n).pipe((0,sn.z)(g=>g&&function ts(n){return"boolean"==typeof n}(g)?function kI(n,e,t,r){return(0,dn.D)(e).pipe(vi(s=>Vy(function Gw(n,e){return null!==n&&e&&e(new ex(n)),it(!0)}(s.route.parent,r),function RI(n,e){return null!==n&&e&&e(new gg(n)),it(!0)}(s.route,r),function FI(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function ax(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>aw(()=>it(d.guards.map(_=>{const b=hd(d.node)??t,S=pd(_,b);return Ra(function ux(n){return n&&lf(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(ka())})).pipe(xc())));return it(u).pipe(xc())}(n,s.path,t),function zw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const s=r.map(u=>aw(()=>{const d=hd(e)??t,g=pd(u,d);return Ra(function xI(n){return n&&lf(n.canActivate)}(g)?g.canActivate(e,n):d.runInContext(()=>g(e,n))).pipe(ka())}));return it(s).pipe(xc())}(n,s.route,t))),ka(s=>!0!==s,!0))}(r,u,n,e):it(g)),(0,mt.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Wr.b)(g=>{if(s.guardsResult=g.guardsResult,nd(g.guardsResult))throw II(0,g.guardsResult);const _=new n_(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(_)}),zr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),S_(g=>{if(g.guards.canActivateChecks.length)return it(g).pipe((0,Wr.b)(_=>{const b=new Ow(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),tr(_=>{let b=!1;return it(_).pipe(function D_(n,e){return(0,sn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return it(t);let u=0;return(0,dn.D)(s).pipe(vi(d=>function qI(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!rC(s)&&(u[ed]=s.title),function T_(n,e,t,r){const s=function ZI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return it({});const u={};return(0,dn.D)(s).pipe((0,sn.z)(d=>function WI(n,e,t,r){const s=hd(e)??r,u=pd(n,s);return Ra(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ka(),(0,Wr.b)(g=>{u[d]=g}))),sg(1),function lw(n){return(0,mt.U)(()=>n)}(u),to(d=>m_(d)?Na.E:Yl(d)))}(u,n,e,r).pipe((0,mt.U)(d=>(n._resolvedData=d,n.data=c_(n,t).resolve,s&&rC(s)&&(n.data[ed]=s.title),null)))}(d.route,r,n,e)),(0,Wr.b)(()=>u++),sg(1),(0,sn.z)(d=>u===s.length?it(t):Na.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Wr.b)(_=>{const b=new r_(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),S_(g=>{const _=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Wr.b)(P=>{b.component=P}),(0,mt.U)(()=>{})));for(const P of b.children)S.push(..._(P));return S};return Ec(_(g.targetSnapshot.root)).pipe(zo(),Ql(1))}),S_(()=>this.afterPreactivation()),(0,mt.U)(g=>{const _=function tx(n,e,t){const r=vg(n,e._root,t?t._root:void 0);return new u_(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return s={...g,targetRouterState:_}}),(0,Wr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,mt.U)(r=>(new f_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Wr.b)({next(){u=!0},complete(){u=!0}}),Xl(()=>{u||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),to(g=>{if(d=!0,Vw(g)){wg(g)||(this.navigated=!0,this.restoreHistory(s,!0));const _=new sf(s.id,this.serializeUrl(s.extractedUrl),g.message,g.cancellationCode);if(r.next(_),wg(g)){const b=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),S={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kc(s.source)};this.scheduleNavigation(b,"imperative",null,S,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const _=new Mw(s.id,this.serializeUrl(s.extractedUrl),g,s.targetSnapshot??void 0);r.next(_);try{s.resolve(this.errorHandler(g))}catch(b){s.reject(b)}}return Na.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(cf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:_}=r,b=s||this.routerState.root,S=_?this.currentUrlTree.fragment:d;let P=null;switch(g){case"merge":P={...this.currentUrlTree.queryParams,...u};break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=u||null}return null!==P&&(P=this.removeEmptyProps(P)),hg(b,this.currentUrlTree,t,P,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=nd(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Cd(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...M_}:!1===r?{...vd}:r,nd(t))return gw(this.currentUrlTree,t,s);const u=this.parseUrl(t);return gw(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Kr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,d){if(this.disposed)return Promise.resolve(!1);let g,_,b;d?(g=d.resolve,_=d.reject,b=d.promise):b=new Promise(($,Z)=>{g=$,_=Z});const S=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),P=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):P=0,this.setTransition({id:S,targetPageId:P,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch($=>Promise.reject($))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new sf(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:function(){return Nc()},providedIn:"root"}),n})();function kc(n){return"imperative"!==n}let Ba=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new In.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ur),c.Y36(ud),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})();class O_{}let aC=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(zr(t=>t instanceof Kr),vi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,c.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,g=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,dn.D)(s).pipe((0,Wh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):it(null);const u=s.pipe((0,sn.z)(d=>null===d?it(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,dn.D)([u,d]).pipe((0,Wh.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ur),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(O_),c.LFG(Es))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xg=new c.OlP("");let P_=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof od?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Kr&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new mg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function bd(n,e){return{\u0275kind:n,\u0275providers:e}}function Mg(n){return[{provide:x_,multi:!0,useValue:n}]}function N_(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(ur),s=n.get(Og);1===n.get(yf)&&r.initialNavigation(),n.get(kg,null,c.XFs.Optional)?.setUpPreloading(),n.get(xg,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const Og=new c.OlP("",{factory:()=>new In.x}),yf=new c.OlP("",{providedIn:"root",factory:()=>1});const kg=new c.OlP("");function eD(n){return bd(0,[{provide:kg,useExisting:aC},{provide:O_,useExisting:n}])}const R_=new c.OlP("ROUTER_FORROOT_GUARD"),F_=[Ne,{provide:Lt,useClass:ag},{provide:ur,useFactory:Nc},Ac,{provide:ud,useFactory:function uC(n){return n.routerState.root},deps:[ur]},Es];function cC(){return new c.PXZ("Router",ur)}let L_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[F_,[],Mg(t),{provide:R_,useFactory:dC,deps:[[ur,new c.FiY,new c.tp0]]},{provide:Tg,useValue:r||{}},r?.useHash?{provide:_e,useClass:We}:{provide:_e,useClass:Qe},{provide:xg,useFactory:()=>{const n=(0,c.f3M)(ur),e=(0,c.f3M)(wl),t=(0,c.f3M)(Tg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new P_(n,e,t)}},r?.preloadingStrategy?eD(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:cC},r?.initialNavigation?hC(r):[],[{provide:U_,useFactory:N_},{provide:c.tb,multi:!0,useExisting:U_}]]}}static forChild(t){return{ngModule:n,providers:[Mg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R_,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Cg]}),n})();function dC(n){return"guarded"}function hC(n){return["disabled"===n.initialNavigation?bd(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(ur);return()=>{e.setUpLocationChangeListener()}}},{provide:yf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?bd(2,[{provide:yf,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(ur),g=e.get(Og);(function s(u){e.get(ur).events.pipe(zr(g=>g instanceof Kr||g instanceof sf||g instanceof Mw),(0,mt.U)(g=>g instanceof Kr||g instanceof sf&&(0===g.code||1===g.code)&&null),zr(g=>null!==g),Ql(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||g.closed?it(void 0):g),d.initialNavigation()}))}}]).\u0275providers:[]]}const U_=new c.OlP(""),Is={undefined:"UNDEFINED",new:"NEW",done:"DONE",progress:"PROGRESS",review:"REVIEW",blocked:"BLOCKED"};var B_=R(8247),on=R(2090),Iu=R(9681),ja=R(1877),_f=R(4859),Yo=R(127),gC=R(4986),Yr=R(5813);function mC(){return(0,Pn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Sn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function sD(n,e){return n===e}var dt,Ds=R(2011),Sr=(R(5881),R(3942)),ve=R(5861),oD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$a={},j_=j_||{},Rt=oD||self;function vf(){}function Ha(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Rg="closure_uid_"+(1e9*Math.random()>>>0),uD=0;function yC(n,e,t){return n.call.apply(n.bind,arguments)}function gx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Fr(n,e,t){return(Fr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yC:gx).apply(null,arguments)}function Id(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function An(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[s].apply(r,d)}}function Du(){this.s=this.s,this.o=this.o}Du.prototype.s=!1,Du.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function aD(n){Object.prototype.hasOwnProperty.call(n,Rg)&&n[Rg]||(n[Rg]=++uD)}(this)},Du.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const no=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ns(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ts(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ha(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let d=0;d<u;d++)n[s+d]=r[d]}else n.push(r)}}function Qr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qr.prototype.h=function(){this.defaultPrevented=!0};var vC=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",vf,e),Rt.removeEventListener("test",vf,e)}catch{}return n}();function Fg(n){return/^[\s\xa0]*$/.test(n)}var wC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $_(n,e){return n<e?-1:n>e?1:0}function Lg(){var n=Rt.navigator;return n&&(n=n.userAgent)?n:""}function Ss(n){return-1!=Lg().indexOf(n)}function Fc(n){return Fc[" "](n),n}Fc[" "]=vf;var Ef,n,CC=Ss("Opera"),Dd=Ss("Trident")||Ss("MSIE"),H_=Ss("Edge"),Vg=H_||Dd,Cf=Ss("Gecko")&&!(-1!=Lg().toLowerCase().indexOf("webkit")&&!Ss("Edge"))&&!(Ss("Trident")||Ss("MSIE"))&&!Ss("Edge"),lD=-1!=Lg().toLowerCase().indexOf("webkit")&&!Ss("Edge");function G_(){var n=Rt.document;return n?n.documentMode:void 0}e:{var bf="",Td=(n=Lg(),Cf?/rv:([^\);]+)(\)|;)/.exec(n):H_?/Edge\/([\d\.]+)/.exec(n):Dd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):lD?/WebKit\/(\S+)/.exec(n):CC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Td&&(bf=Td?Td[1]:""),Dd){var If=G_();if(null!=If&&If>parseFloat(bf)){Ef=String(If);break e}}Ef=bf}var z_={};var bC=Rt.document&&Dd&&(G_()||parseInt(Ef,10))||void 0;function Sd(n,e){if(Qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Cf){e:{try{Fc(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sd.X.h.call(this)}}An(Sd,Qr);var IC={2:"touch",3:"pen",4:"mouse"};Sd.prototype.h=function(){Sd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Df="closure_listenable_"+(1e6*Math.random()|0),dD=0;function hD(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++dD,this.ba=this.ea=!1}function Bg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Z_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function DC(n){const e={};for(const t in n)e[t]=n[t];return e}const TC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SC(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<TC.length;u++)t=TC[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function jg(n){this.src=n,this.g={},this.h=0}function W_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=no(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Bg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function K_(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}jg.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=K_(n,e,r,s);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new hD(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var Y_="closure_lm_"+(1e6*Math.random()|0),Q_={};function AC(n,e,t,r,s){if(r&&r.once)return MC(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)AC(n,e[u],t,r,s);return null}return t=zg(t),n&&n[Df]?n.N(e,t,wf(r)?!!r.capture:!!r,s):xC(n,e,t,!1,r,s)}function xC(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var d=wf(s)?!!s.capture:!!s,g=Hg(n);if(g||(n[Y_]=g=new jg(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function fD(){const e=PC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vC||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(J_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function MC(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)MC(n,e[u],t,r,s);return null}return t=zg(t),n&&n[Df]?n.O(e,t,wf(r)?!!r.capture:!!r,s):xC(n,e,t,!0,r,s)}function OC(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)OC(n,e[u],t,r,s);else r=wf(r)?!!r.capture:!!r,t=zg(t),n&&n[Df]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=K_(u=n.g[e],t,r,s))&&(Bg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Hg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=K_(e,t,r,s)),(t=-1<n?e[n]:null)&&$g(t))}function $g(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Df])W_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(J_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hg(e))?(W_(t,n),0==t.h&&(t.src=null,e[Y_]=null)):Bg(n)}}}function J_(n){return n in Q_?Q_[n]:Q_[n]="on"+n}function PC(n,e){if(n.ba)n=!0;else{e=new Sd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&$g(n),n=t.call(r,e)}return n}function Hg(n){return(n=n[Y_])instanceof jg?n:null}var Gg="__closure_events_fn_"+(1e9*Math.random()>>>0);function zg(n){return"function"==typeof n?n:(n[Gg]||(n[Gg]=function(e){return n.handleEvent(e)}),n[Gg])}function Ar(){Du.call(this),this.i=new jg(this),this.P=this,this.I=null}function Lr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Qr(e,n);else if(e instanceof Qr)e.target=e.target||n;else{var s=e;SC(e=new Qr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];s=Tf(d,r,!0,e)&&s}if(s=Tf(d=e.g=n,r,!0,e)&&s,s=Tf(d,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Tf(d=e.g=t[u],r,!1,e)&&s}function Tf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var g=d.listener,_=d.ha||d.src;d.ea&&W_(n.i,d),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}An(Ar,Du),Ar.prototype[Df]=!0,Ar.prototype.removeEventListener=function(n,e,t,r){OC(this,n,e,t,r)},Ar.prototype.M=function(){if(Ar.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Bg(t[r]);delete n.g[e],n.h--}}this.I=null},Ar.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qg=Rt.JSON.stringify;function NC(){var n=X_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Sf,kC=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new pD,n=>n.reset());class pD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ad(n){Rt.setTimeout(()=>{throw n},0)}function gD(n,e){Sf||function mx(){var n=Rt.Promise.resolve(void 0);Sf=function(){n.then(yx)}}(),Zg||(Sf(),Zg=!0),X_.add(n,e)}var Zg=!1,X_=new class Lc{constructor(){this.h=this.g=null}add(e,t){const r=kC.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function yx(){for(var n;n=NC();){try{n.h.call(n.g)}catch(t){Ad(t)}var e=kC;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Zg=!1}function wt(n,e){Ar.call(this),this.h=n||1,this.g=e||Rt,this.j=Fr(this.lb,this),this.l=Date.now()}function ev(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function tv(n,e,t){if("function"==typeof n)t&&(n=Fr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function RC(n){n.g=tv(()=>{n.g=null,n.i&&(n.i=!1,RC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}An(wt,Ar),(dt=wt.prototype).ca=!1,dt.R=null,dt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Lr(this,"tick"),this.ca&&(ev(this),this.start()))}},dt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){wt.X.M.call(this),ev(this),delete this.g};class xd extends Du{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:RC(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Af(n){Du.call(this),this.h=n,this.g={}}An(Af,Du);var xf=[];function Mf(n,e,t,r){Array.isArray(t)||(t&&(xf[0]=t.toString()),t=xf);for(var s=0;s<t.length;s++){var u=AC(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function nr(n){Z_(n.g,function(e,t){this.g.hasOwnProperty(t)&&$g(e)},n),n.g={}}function nv(){this.g=!0}function Md(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function UC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<s.length;d++)s[d]=""}}}return qg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Af.prototype.M=function(){Af.X.M.call(this),nr(this)},Af.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nv.prototype.Aa=function(){this.g=!1},nv.prototype.info=function(){};var Tu={},rv=null;function Wg(){return rv=rv||new Ar}function BC(n){Qr.call(this,Tu.Pa,n)}function Of(n){const e=Wg();Lr(e,new BC(e))}function Od(n,e){Qr.call(this,Tu.STAT_EVENT,n),this.stat=e}function Ii(n){const e=Wg();Lr(e,new Od(e,n))}function jC(n,e){Qr.call(this,Tu.Qa,n),this.size=e}function Pf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}Tu.Pa="serverreachability",An(BC,Qr),Tu.STAT_EVENT="statevent",An(Od,Qr),Tu.Qa="timingevent",An(jC,Qr);var Vc={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},iv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Kg(){}function $C(){}Kg.prototype.h=null;var av,Ga={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Uc(){Qr.call(this,"d")}function ov(){Qr.call(this,"c")}function Yg(){}function Pd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Af(this),this.O=HC,this.T=new wt(n=Vg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new uv}function uv(){this.i=null,this.g="",this.h=!1}An(Uc,Qr),An(ov,Qr),An(Yg,Kg),Yg.prototype.g=function(){return new XMLHttpRequest},Yg.prototype.i=function(){return{}},av=new Yg;var HC=45e3,cv={},Nf={};function lv(n,e,t){n.K=1,n.v=Ff(Qo(e)),n.s=t,n.P=!0,GC(n,null)}function GC(n,e){n.F=Date.now(),Qg(n),n.A=Qo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),tm(t.i,"t",r),n.C=0,t=n.l.H,n.h=new uv,n.g=lE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new xd(Fr(n.La,n,n.g),n.N)),Mf(n.S,n.g,"readystatechange",n.ib),e=n.H?DC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Of(),function FC(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),_=0;_<g.length;_++){var b=g[_].split("=");if(1<b.length){var S=b[0];b=b[1];var P=S.split("_");d=2<=P.length&&"type"==P[1]?d+(S+"=")+b+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function mD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function yD(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=_x(n,t),s==Nf){4==e&&(n.o=4,Ii(14),r=!1),Md(n.j,n.m,null,"[Incomplete Response]");break}if(s==cv){n.o=4,Ii(15),Md(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Md(n.j,n.m,s,null),Jg(n,s)}mD(n)&&s!=Nf&&s!=cv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Cv(e),e.K=!0,Ii(11))):(Md(n.j,n.m,t,"[Invalid Chunked Response]"),jc(n),kf(n))}function _x(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Nf:(t=Number(e.substring(t,r)),isNaN(t)?cv:(r+=1)+t>e.length?Nf:(e=e.substr(r,t),n.C=r+t,e))}function Qg(n){n.V=Date.now()+n.O,dv(n,n.O)}function dv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Pf(Fr(n.gb,n),e)}function Bc(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function kf(n){0==n.l.G||n.I||PD(n.l,n)}function jc(n){Bc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ev(n.T),nr(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Jg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||pv(t.h,n)))if(!n.J&&pv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ev(t),jf(t)}hm(t),Ii(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=Pf(Fr(t.cb,t),6e3));if(1>=XC(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else zc(t,11)}else if((n.J||t.g==n)&&Ev(t),!Fg(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const S=b[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const P=b[4];null!=P&&(t.Ca=P,t.j.info("SVER="+t.Ca));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const re=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(re){var u=r.h;u.g||-1==re.indexOf("spdy")&&-1==re.indexOf("quic")&&-1==re.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(gv(u,u.h),u.h=null))}if(r.D){const Re=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.za=Re,zn(r.F,r.D,Re))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=cE(r,r.H?r.ka:null,r.V),d.J){eE(r.h,d);var g=d,_=r.J;_&&g.setTimeout(_),g.B&&(Bc(g),Qg(g)),r.g=d}else OD(r);0<t.i.length&&dm(t)}else"stop"!=b[0]&&"close"!=b[0]||zc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?zc(t,7):lm(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Of()}catch{}}function zC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ha(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function _D(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ha(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Rf(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ha(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(dt=Pd.prototype).setTimeout=function(n){this.O=n},dt.ib=function(n){n=n.target;const e=this.L;e&&3==za(n)?e.l():this.La(n)},dt.La=function(n){try{if(n==this.g)e:{const S=za(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||Vg||this.g&&(this.h.h||this.g.fa()||um(this.g)))){this.I||4!=S||7==e||Of(),Bc(this);var t=this.g.aa();this.Y=t;t:if(mD(this)){var r=um(this.g);n="";var s=r.length,u=4==za(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){jc(this),kf(this);var d="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function LC(n,e,t,r,s,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fg(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ii(12),jc(this),kf(this);break e}Md(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Jg(this,t)}this.P?(yD(this,S,d),Vg&&this.i&&3==S&&(Mf(this.S,this.T,"tick",this.hb),this.T.start())):(Md(this.j,this.m,d,null),Jg(this,d)),4==S&&jc(this),this.i&&!this.I&&(4==S?PD(this.l,this):(this.i=!1,Qg(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),jc(this),kf(this)}}}catch{}},dt.hb=function(){if(this.g){var n=za(this.g),e=this.g.fa();this.C<e.length&&(Bc(this),yD(this,n,e),this.i&&4!=n&&Qg(this))}},dt.cancel=function(){this.I=!0,jc(this)},dt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function VC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Of(),Ii(17)),jc(this),this.o=2,kf(this)):dv(this,this.V-n)};var qC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $c(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof $c){this.h=void 0!==e?e:n.h,Xg(this,n.j),this.s=n.s,this.g=n.g,em(this,n.m),this.l=n.l,e=n.i;var t=new Rd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Nd(this,t),this.o=n.o}else n&&(t=String(n).match(qC))?(this.h=!!e,Xg(this,t[1]||"",!0),this.s=Lf(t[2]||""),this.g=Lf(t[3]||"",!0),em(this,t[4]),this.l=Lf(t[5]||"",!0),Nd(this,t[6]||"",!0),this.o=Lf(t[7]||"")):(this.h=!!e,this.i=new Rd(null,this.h))}function Qo(n){return new $c(n)}function Xg(n,e,t){n.j=t?Lf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function em(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Nd(n,e,t){e instanceof Rd?(n.i=e,function YC(n,e){e&&!n.j&&(Su(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(WC(this,r),tm(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=kd(e,ED)),n.i=new Rd(e,n.h))}function zn(n,e,t){n.i.set(e,t)}function Ff(n){return zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function kd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,wD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function wD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$c.prototype.toString=function(){var n=[],e=this.j;e&&n.push(kd(e,hv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(kd(e,hv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(kd(t,"/"==t.charAt(0)?fv:CD,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",kd(t,ZC)),n.join("")};var hv=/[#\/\?@]/g,CD=/[#\?:]/g,fv=/[#\?]/g,ED=/[#\?@]/g,ZC=/#/g;function Rd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Su(n){n.g||(n.g=new Map,n.h=0,n.i&&function vD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function WC(n,e){Su(n),e=Fd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function KC(n,e){return Su(n),e=Fd(n,e),n.g.has(e)}function tm(n,e,t){WC(n,e),0<t.length&&(n.i=null,n.g.set(Fd(n,e),ns(t)),n.h+=t.length)}function Fd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function QC(n){this.l=n||ID,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ga&&Rt.g.Ga()&&Rt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=Rd.prototype).add=function(n,e){Su(this),this.i=null,n=Fd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},dt.forEach=function(n,e){Su(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},dt.oa=function(){Su(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},dt.W=function(n){Su(this);let e=[];if("string"==typeof n)KC(this,n)&&(e=e.concat(this.g.get(Fd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},dt.set=function(n,e){return Su(this),this.i=null,KC(this,n=Fd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},dt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var s=u;""!==d[r]&&(s+="="+encodeURIComponent(String(d[r]))),n.push(s)}}return this.i=n.join("&")};var ID=10;function JC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function XC(n){return n.h?1:n.g?n.g.size:0}function pv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gv(n,e){n.g?n.g.add(e):n.h=e}function eE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function mv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ns(n.i)}function nm(){}function DD(){this.g=new nm}function TD(n,e,t){const r=t||"";try{zC(n,function(s,u){let d=s;wf(s)&&(d=qg(s)),e.push(r+u+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function rm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Vf(n){this.l=n.ac||null,this.j=n.jb||!1}function im(n,e){Ar.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Uf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}QC.prototype.cancel=function(){if(this.i=mv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},nm.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},nm.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},An(Vf,Kg),Vf.prototype.g=function(){return new im(this.l,this.j)},Vf.prototype.i=function(n){return function(){return n}}({}),An(im,Ar);var Uf=0;function sm(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Ld(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Hc(n)}function Hc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=im.prototype).open=function(n,e){if(this.readyState!=Uf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Hc(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ld(this)),this.readyState=Uf},dt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Hc(this)),this.g&&(this.readyState=3,Hc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Rt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sm(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},dt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ld(this):Hc(this),3==this.readyState&&sm(this)}},dt.Va=function(n){this.g&&(this.response=this.responseText=n,Ld(this))},dt.Ua=function(n){this.g&&(this.response=n,Ld(this))},dt.ga=function(){this.g&&Ld(this)},dt.setRequestHeader=function(n,e){this.v.append(n,e)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(im.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var SD=Rt.JSON.parse;function cr(n){Ar.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=om,this.K=this.L=!1}An(cr,Ar);var om="",AD=/^https?$/i,nE=["POST","PUT"];function yv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,rE(n),Bf(n)}function rE(n){n.D||(n.D=!0,Lr(n,"complete"),Lr(n,"error"))}function xD(n){if(n.h&&typeof j_<"u"&&(!n.C[1]||4!=za(n)||2!=n.aa()))if(n.v&&4==za(n))tv(n.Ha,0,n);else if(Lr(n,"readystatechange"),4==za(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var s=String(n.H).match(qC)[1]||null;if(!s&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;s=u.substr(0,u.length-1)}r=!AD.test(s?s.toLowerCase():"")}t=r}if(t)Lr(n,"complete"),Lr(n,"success");else{n.m=6;try{var d=2<za(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",rE(n)}}finally{Bf(n)}}}function Bf(n,e){if(n.g){am(n);const t=n.g,r=n.C[0]?vf:null;n.g=null,n.C=null,e||Lr(n,"ready");try{t.onreadystatechange=r}catch{}}}function am(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function za(n){return n.g?n.g.readyState:0}function um(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case om:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function iE(n){let e="";return Z_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function cm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=iE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):zn(n,e,t))}function Gc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function _v(n){this.Ca=0,this.i=[],this.j=new nv,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Gc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Gc("baseRetryDelayMs",5e3,n),this.bb=Gc("retryDelaySeedMs",1e4,n),this.$a=Gc("forwardChannelMaxRetries",2,n),this.ta=Gc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new QC(n&&n.concurrentRequestLimit),this.Fa=new DD,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function lm(n){if(vv(n),3==n.G){var e=n.U++,t=Qo(n.F);zn(t,"SID",n.I),zn(t,"RID",e),zn(t,"TYPE","terminate"),$f(n,t),(e=new Pd(n,n.j,e,void 0)).K=2,e.v=Ff(Qo(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=lE(e.l,null),e.g.da(e.v)),e.F=Date.now(),Qg(e)}uE(n)}function jf(n){n.g&&(Cv(n),n.g.cancel(),n.g=null)}function vv(n){jf(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Ev(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function dm(n){JC(n.h)||n.m||(n.m=!0,gD(n.Ja,n),n.C=0)}function sE(n,e){var t;t=e?e.m:n.U++;const r=Qo(n.F);zn(r,"SID",n.I),zn(r,"RID",t),zn(r,"AID",n.T),$f(n,r),n.o&&n.s&&cm(r,n.o,n.s),t=new Pd(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=wv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),gv(n.h,t),lv(t,r,e)}function $f(n,e){n.ia&&Z_(n.ia,function(t,r){zn(e,r,t)}),n.l&&zC({},function(t,r){zn(e,r,t)})}function wv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Fr(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=s[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let b=s[_].h;const S=s[_].g;if(b-=u,0>b)u=Math.max(0,s[_].h-100),g=!1;else try{TD(S,d,"req"+b+"_")}catch{r&&r(S)}}if(g){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function OD(n){n.g||n.u||(n.Z=1,gD(n.Ia,n),n.A=0)}function hm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Pf(Fr(n.Ia,n),aE(n,n.A)),n.A++,0))}function Cv(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function oE(n){n.g=new Pd(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Qo(n.sa);zn(e,"RID","rpc"),zn(e,"SID",n.I),zn(e,"CI",n.L?"0":"1"),zn(e,"AID",n.T),zn(e,"TYPE","xmlhttp"),$f(n,e),n.o&&n.s&&cm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ff(Qo(e)),t.s=null,t.P=!0,GC(t,n)}function Ev(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function PD(n,e){var t=null;if(n.g==e){Ev(n),Cv(n),n.g=null;var r=2}else{if(!pv(n.h,e))return;t=e.D,eE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Lr(r=Wg(),new jC(r,t)),dm(n)}else OD(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function MD(n,e){return!(XC(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Pf(Fr(n.Ja,n,e),aE(n,n.C)),n.C++,0)))}(n,e)||2==r&&hm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:zc(n,5);break;case 4:zc(n,10);break;case 3:zc(n,6);break;default:zc(n,2)}}function aE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function zc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Fr(n.kb,n);t||(t=new $c("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Xg(t,"https"),Ff(t)),function tE(n,e){const t=new nv;if(Rt.Image){const r=new Image;r.onload=Id(rm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Id(rm,t,r,"TestLoadImage: error",!1,e),r.onabort=Id(rm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Id(rm,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.G=0,n.l&&n.l.va(e),uE(n),vv(n)}function uE(n){if(n.G=0,n.la=[],n.l){const e=mv(n.h);(0!=e.length||0!=n.i.length)&&(Ts(n.la,e),Ts(n.la,n.i),n.h.i.length=0,ns(n.i),n.i.length=0),n.l.ua()}}function cE(n,e,t){var r=t instanceof $c?Qo(t):new $c(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),em(r,r.m);else{var s=Rt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new $c(null,void 0);r&&Xg(u,r),e&&(u.g=e),s&&em(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&zn(r,t,e),zn(r,"VER",n.ma),$f(n,r),r}function lE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Da&&!n.ra?new Vf({jb:!0}):n.ra)).Ka(n.H),e}function dE(){}function fm(){if(Dd&&!(10<=Number(bC)))throw Error("Environmental error: no available transport.")}function rs(n,e){Ar.call(this),this.g=new _v(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Fg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ud(this)}function hE(n){Uc.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fE(){ov.call(this),this.status=1}function Ud(n){this.g=n}(dt=cr.prototype).Ka=function(n){this.L=n},dt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():av.g(),this.C=function sv(n){return n.h||(n.h=n.i())}(this.u?this.u:av),this.g.onreadystatechange=Fr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void yv(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Rt.FormData&&n instanceof Rt.FormData,!(0<=no(nE,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{am(this),0<this.B&&((this.K=function Vd(n){return Dd&&function EC(){return function cD(n){var e=z_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=wC(String(Ef)).split("."),t=wC("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",u=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=$_(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||$_(0==s[2].length,0==u[2].length)||$_(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fr(this.qa,this)):this.A=tv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){yv(this,u)}},dt.qa=function(){typeof j_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lr(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Lr(this,"complete"),Lr(this,"abort"),Bf(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bf(this,!0)),cr.X.M.call(this)},dt.Ha=function(){this.s||(this.F||this.v||this.l?xD(this):this.fb())},dt.fb=function(){xD(this)},dt.aa=function(){try{return 2<za(this)?this.g.status:-1}catch{return-1}},dt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},dt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),SD(e)}},dt.Ea=function(){return this.m},dt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=_v.prototype).ma=8,dt.G=1,dt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Pd(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=DC(u),SC(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=wv(this,s,e),zn(t=Qo(this.F),"RID",n),zn(t,"CVER",22),this.D&&zn(t,"X-HTTP-Session-Id",this.D),$f(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(iE(u)))+"&"+e:this.o&&cm(t,this.o,u)),gv(this.h,s),this.Ya&&zn(t,"TYPE","init"),this.O?(zn(t,"$req",e),zn(t,"SID","null"),s.Z=!0,lv(s,t,null)):lv(s,t,e),this.G=2}}else 3==this.G&&(n?sE(this,n):0==this.i.length||JC(this.h)||sE(this))},dt.Ia=function(){if(this.u=null,oE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Pf(Fr(this.eb,this),n)}},dt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ii(10),jf(this),oE(this))},dt.cb=function(){null!=this.v&&(this.v=null,jf(this),hm(this),Ii(19))},dt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ii(2)):(this.j.info("Failed to ping google.com"),Ii(1))},(dt=dE.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Ra=function(){},fm.prototype.g=function(n,e){return new rs(n,e)},An(rs,Ar),rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ii(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=cE(n,null,n.V),dm(n)},rs.prototype.close=function(){lm(this.g)},rs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qg(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&dm(e)},rs.prototype.M=function(){this.g.l=null,delete this.j,lm(this.g),delete this.g,rs.X.M.call(this)},An(hE,Uc),An(fE,ov),An(Ud,dE),Ud.prototype.xa=function(){Lr(this.g,"a")},Ud.prototype.wa=function(n){Lr(this.g,new hE(n))},Ud.prototype.va=function(n){Lr(this.g,new fE)},Ud.prototype.ua=function(){Lr(this.g,"b")},fm.prototype.createWebChannel=fm.prototype.g,rs.prototype.send=rs.prototype.u,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,Vc.NO_ERROR=0,Vc.TIMEOUT=8,Vc.HTTP_ERROR=6,iv.COMPLETE="complete",$C.EventType=Ga,Ga.OPEN="a",Ga.CLOSE="b",Ga.ERROR="c",Ga.MESSAGE="d",Ar.prototype.listen=Ar.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.Oa,cr.prototype.getLastErrorCode=cr.prototype.Ea,cr.prototype.getStatus=cr.prototype.aa,cr.prototype.getResponseJson=cr.prototype.Sa,cr.prototype.getResponseText=cr.prototype.fa,cr.prototype.send=cr.prototype.da,cr.prototype.setWithCredentials=cr.prototype.Ka;var ND=$a.createWebChannelTransport=function(){return new fm},Hf=$a.getStatEventTarget=function(){return Wg()},pm=$a.ErrorCode=Vc,pE=$a.EventType=iv,gE=$a.Event=Tu,bv=$a.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},mE=$a.FetchXmlHttpFactory=Vf,Gf=$a.WebChannel=$C,kD=$a.XhrIo=cr;const RD="@firebase/firestore";class xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");let qc="9.14.0";const Au=new ja.Yd("@firebase/firestore");function Iv(){return Au.logLevel}function Ve(n,...e){if(Au.logLevel<=ja.in.DEBUG){const t=e.map(As);Au.debug(`Firestore (${qc}): ${n}`,...t)}}function gr(n,...e){if(Au.logLevel<=ja.in.ERROR){const t=e.map(As);Au.error(`Firestore (${qc}): ${n}`,...t)}}function qa(n,...e){if(Au.logLevel<=ja.in.WARN){const t=e.map(As);Au.warn(`Firestore (${qc}): ${n}`,...t)}}function As(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${qc}) INTERNAL ASSERTION FAILED: `+n;throw gr(e),new Error(e)}function It(n,e){n||st()}function Ke(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends on.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xr.UNAUTHENTICATED))}shutdown(){}}class VD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yE{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let d=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new lr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=d;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new lr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new qf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new xr(e)}}class _E{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(It(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Dv{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new _E(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UD{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.A=t.token,new Tv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gm{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=wx(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function Zc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function mm(n){return n+"\0"}class Rn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Rn(0,0))}static max(){return new St(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zf{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Zf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends Zf{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const BD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends Zf{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return BD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new ke(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new ke(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new ke(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(d=!d,s++):"."!==g||d?(r+=g,s++):(u(),s++)}if(u(),d)throw new ke(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(tn.fromString(e))}static fromName(e){return new qe(tn.fromString(e).popFirst(5))}static empty(){return new qe(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new tn(e.slice()))}}class Wf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function ym(n){return n.fields.find(e=>2===e.kind)}function xu(n){return n.fields.filter(e=>2!==e.kind)}Wf.UNKNOWN_ID=-1;class _m{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bd(0,Li.min())}}function CE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=St.fromTimestamp(1e9===r?new Rn(t+1,0):new Rn(t,r));return new Li(s,qe.empty(),e)}function Sv(n){return new Li(n.readTime,n.key,-1)}class Li{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Li(St.min(),qe.empty(),-1)}static max(){return new Li(St.max(),qe.empty(),-1)}}function Jr(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const Wc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Mu(n){return bE.apply(this,arguments)}function bE(){return bE=(0,ve.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==Wc)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),bE.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let s=0,u=0,d=!1;e.forEach(g=>{++s,g.next(()=>{++u,d&&u===s&&t()},_=>r(_))}),d=!0,u===s&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(s=>s?ce.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,s)=>{const u=e.length,d=new Array(u);let g=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(S=>{d[b]=S,++g,g===u&&r(d)},S=>s(S))}})}static doWhile(e,t){return new ce((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Kf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new lr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Qf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=Av(r.target.error);this.P.reject(new Qf(e,s))}}static open(e,t,r,s){try{return new Kf(t,e.transaction(s,r))}catch(u){throw new Qf(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jD(t)}}class xs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===xs.D((0,on.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Ou(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,on.hl)())return!1;if(xs.N())return!0;const e=(0,on.z$)(),t=xs.D(e),r=0<t&&t<10,s=xs.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{s(new Qf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;s("VersionError"===g.name?new ke(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new ke(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Qf(e,g))},u.onupgradeneeded=d=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ve.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const _=Kf.open(u.db,e,d?"readonly":"readwrite",r),b=s(_).next(S=>(_.V(),S)).catch(S=>(_.abort(S),ce.reject(S))).toPromise();return b.catch(()=>{}),yield _.v,b}catch(_){const b=_,S="FirebaseError"!==b.name&&g<3;if(Ve("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Yf{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ou(this.U.delete())}}class Qf extends ke{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Jo(n){return"IndexedDbTransactionError"===n.name}class jD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ou(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Ou(this.store.add(e))}get(e){return Ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Ou(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Ou(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(d,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ce((u,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,d,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new ce((r,s)=>{t.onerror=u=>{const d=Av(u.target.error);s(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}H(e,t){const r=[];return new ce((s,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void s();const _=new Yf(g),b=t(g.primaryKey,g.value,_);if(b instanceof ce){const S=b.catch(P=>(_.done(),ce.reject(P)));r.push(S)}_.isDone?s():null===_.G?g.continue():g.continue(_.G)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ou(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Av(r.target.error);t(s)}})}let IE=!1;function Av(n){const e=xs.D((0,on.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IE||(IE=!0,setTimeout(()=>{throw r},0)),r}}return n}class $D{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Jo(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Mu(r)}yield t.nt(6e4)}))}}class xv{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return ce.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ve("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,s).next(g=>{s-=g,r.add(d)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(s,u)).next(g=>(Ve("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const d=Sv(u);Jr(d,r)>0&&(r=d)}),new Li(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Di{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Mv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Di.at=-1;class mr{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jf(this.root,e,this.comparator,!0)}}class Jf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Xr.RED,this.left=s??Xr.EMPTY,this.right=u??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Xr(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Xr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kc(this.data.getIterator())}getIteratorFrom(e){return new Kc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class Kc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jd(n){return n.hasNext()?n.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new En(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Vr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const HD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yc(n){if(It(!!n),"string"==typeof n){let e=0;const t=HD.exec(n);if(It(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(n.seconds),nanos:dr(n.nanos)}}function dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Qc(n){return"string"==typeof n?Vr.fromBase64String(n):Vr.fromUint8Array(n)}function Pv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Nv(n){const e=n.mapValue.fields.__previous_value__;return Pv(e)?Nv(e):e}function $d(n){const e=Yc(n.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}class GD{constructor(e,t,r,s,u,d,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class Za{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}function Hd(n){return null==n}function Xf(n){return 0===n&&1/n==-1/0}function DE(n){return"number"==typeof n&&Number.isInteger(n)&&!Xf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Wa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wm={nullValue:"NULL_VALUE"};function Pu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pv(n)?4:ZD(n)?9007199254740991:10:st()}function ro(n,e){if(n===e)return!0;const t=Pu(n);if(t!==Pu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $d(n).isEqual($d(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Yc(r.timestampValue),d=Yc(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Qc(n.bytesValue).isEqual(Qc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return dr(r.geoPointValue.latitude)===dr(s.geoPointValue.latitude)&&dr(r.geoPointValue.longitude)===dr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return dr(r.integerValue)===dr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=dr(r.doubleValue),d=dr(s.doubleValue);return u===d?Xf(u)===Xf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Zc(n.arrayValue.values||[],e.arrayValue.values||[],ro);case 10:return function(r,s){const u=r.mapValue.fields||{},d=s.mapValue.fields||{};if(Mv(u)!==Mv(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!ro(u[g],d[g])))return!1;return!0}(n,e);default:return st()}var s}function Gd(n,e){return void 0!==(n.values||[]).find(t=>ro(t,e))}function Ka(n,e){if(n===e)return 0;const t=Pu(n),r=Pu(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=dr(s.integerValue||s.doubleValue),g=dr(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return TE(n.timestampValue,e.timestampValue);case 4:return TE($d(n),$d(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(s,u){const d=Qc(s),g=Qc(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),g=u.split("/");for(let _=0;_<d.length&&_<g.length;_++){const b=Nt(d[_],g[_]);if(0!==b)return b}return Nt(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Nt(dr(s.latitude),dr(u.latitude));return 0!==d?d:Nt(dr(s.longitude),dr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],g=u.values||[];for(let _=0;_<d.length&&_<g.length;++_){const b=Ka(d[_],g[_]);if(b)return b}return Nt(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Wa.mapValue&&u===Wa.mapValue)return 0;if(s===Wa.mapValue)return 1;if(u===Wa.mapValue)return-1;const d=s.fields||{},g=Object.keys(d),_=u.fields||{},b=Object.keys(_);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const P=Nt(g[S],b[S]);if(0!==P)return P;const $=Ka(d[g[S]],_[b[S]]);if(0!==$)return $}return Nt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function TE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Yc(n),r=Yc(e),s=Nt(t.seconds,r.seconds);return 0!==s?s:Nt(t.nanos,r.nanos)}function zd(n){return SE(n)}function SE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Yc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Qc(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=SE(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of s)d?d=!1:u+=",",u+=`${g}:${SE(r.fields[g])}`;return u+"}"}(n.mapValue):st();var e}function Nu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AE(n){return!!n&&"integerValue"in n}function Cm(n){return!!n&&"arrayValue"in n}function zD(n){return!!n&&"nullValue"in n}function qD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kv(n){return!!n&&"mapValue"in n}function Em(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Em(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Em(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ZD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Cx(n){return"nullValue"in n?wm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nu(Za.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function bm(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nu(Za.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wa:st()}function WD(n,e){const t=Ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Rv(n,e){const t=Ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Em(t)}setAll(e){let t=rr.emptyPath(),r={},s=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}d?r[g.lastSegment()]=Em(d):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());kv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ro(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];kv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Xo(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new vr(Em(this.value))}}function Fv(n){const e=[];return Xo(n.fields,(t,r)=>{const s=new rr([t]);if(kv(r)){const u=Fv(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new Vi(e)}class xn{constructor(e,t,r,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,St.min(),St.min(),vr.empty(),0)}static newFoundDocument(e,t,r){return new xn(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new xn(e,2,t,St.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,St.min(),vr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ex{constructor(e,t=null,r=[],s=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=g,this.ht=null}}function Im(n,e=null,t=[],r=[],s=null,u=null,d=null){return new Ex(n,e,t,r,s,u,d)}function ku(n){const e=Ke(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+zd(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zd(r)).join(",")),e.ht=t}return e.ht}function qd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!OE(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!ro(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ms(n.startAt,e.startAt)&&Ms(n.endAt,e.endAt)}function Lv(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Vv(n,e){return n.filters.filter(t=>t instanceof wr&&t.field.isEqual(e))}function xE(n,e,t){let r=wm,s=!0;for(const u of Vv(n,e)){let d=wm,g=!0;switch(u.op){case"<":case"<=":d=Cx(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=wm}WD({value:r,inclusive:s},{value:d,inclusive:g})<0&&(r=d,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];WD({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function ME(n,e,t){let r=Wa,s=!0;for(const u of Vv(n,e)){let d=Wa,g=!0;switch(u.op){case">=":case">":d=bm(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=Wa}Rv({value:r,inclusive:s},{value:d,inclusive:g})>0&&(r=d,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Rv({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new YD(e,t,r):"array-contains"===t?new JD(e,r):"in"===t?new XD(e,r):"not-in"===t?new eT(e,r):"array-contains-any"===t?new Dx(e,r):new wr(e,t,r)}static lt(e,t,r){return"in"===t?new bx(e,r):new Ix(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ka(t,this.value)):null!==t&&Pu(this.value)===Pu(t)&&this.ft(Ka(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class YD extends wr{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.ft(t)}}class bx extends wr{constructor(e,t){super(e,"in",t),this.keys=QD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ix extends wr{constructor(e,t){super(e,"not-in",t),this.keys=QD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function QD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class JD extends wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cm(t)&&Gd(t.arrayValue,this.value)}}class XD extends wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gd(this.value.arrayValue,t)}}class eT extends wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gd(this.value.arrayValue,t)}}class Dx extends wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gd(this.value.arrayValue,r))}}class Ru{constructor(e,t){this.position=e,this.inclusive=t}}class Jc{constructor(e,t="asc"){this.field=e,this.dir=t}}function OE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function tT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(d.referenceValue),t.key):Ka(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Ms(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ro(n.position[t],e.position[t]))return!1;return!0}class Ya{constructor(e,t=null,r=[],s=[],u=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=_,this._t=null,this.wt=null}}function Dm(n,e,t,r,s,u,d,g){return new Ya(n,e,t,r,s,u,d,g)}function Zd(n){return new Ya(n)}function is(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Uv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ep(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Bv(n){return null!==n.collectionGroup}function Wd(n){const e=Ke(n);if(null===e._t){e._t=[];const t=ep(e),r=Uv(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Jc(t)),e._t.push(new Jc(rr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Jc(rr.keyField(),u))}}}return e._t}function ei(n){const e=Ke(n);if(!e.wt)if("F"===e.limitType)e.wt=Im(e.path,e.collectionGroup,Wd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Wd(e))t.push(new Jc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ru(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ru(e.startAt.position,e.startAt.inclusive):null;e.wt=Im(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function tp(n,e,t){return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kd(n,e){return qd(ei(n),ei(e))&&n.limitType===e.limitType}function PE(n){return`${ku(ei(n))}|lt:${n.limitType}`}function Tm(n){return`Query(target=${function KD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${zd(r.value)}`;var r}).join(", ")}]`),Hd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>zd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>zd(t)).join(",")),`Target(${e})`}(ei(n))}; limitType=${n.limitType})`}function Sm(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):qe.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,d){const g=tT(s,u,d);return s.inclusive?g<=0:g<0}(t.startAt,Wd(t),r)||t.endAt&&!function(s,u,d){const g=tT(s,u,d);return s.inclusive?g>=0:g>0}(t.endAt,Wd(t),r)));var t,r}function NE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jv(n){return(e,t)=>{let r=!1;for(const s of Wd(n)){const u=nT(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function nT(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(s,u,d){const g=u.data.field(s),_=d.data.field(s);return null!==g&&null!==_?Ka(g,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function Am(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function Qa(n){return{integerValue:""+n}}function $v(n,e){return DE(e)?Qa(e):Am(n,e)}class Yd{constructor(){this._=void 0}}function Ja(n,e,t){return n instanceof Qd?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Xc?kE(n,e):n instanceof el?Hv(n,e):function(r,s){const u=iT(r,s),d=Gv(u)+Gv(r.yt);return AE(u)&&AE(r.yt)?Qa(d):Am(r.It,d)}(n,e)}function rT(n,e,t){return n instanceof Xc?kE(n,e):n instanceof el?Hv(n,e):t}function iT(n,e){return n instanceof np?AE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qd extends Yd{}class Xc extends Yd{constructor(e){super(),this.elements=e}}function kE(n,e){const t=RE(e);for(const r of n.elements)t.some(s=>ro(s,r))||t.push(r);return{arrayValue:{values:t}}}class el extends Yd{constructor(e){super(),this.elements=e}}function Hv(n,e){let t=RE(e);for(const r of n.elements)t=t.filter(s=>!ro(s,r));return{arrayValue:{values:t}}}class np extends Yd{constructor(e,t){super(),this.It=e,this.yt=t}}function Gv(n){return dr(n.integerValue||n.doubleValue)}function RE(n){return Cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Jd{constructor(e,t){this.field=e,this.transform=t}}class zv{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ip{}function qv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new sp(n.key,Un.none()):new Xd(n.key,n.data,Un.none());{const t=n.data,r=vr.empty();let s=new En(rr.comparator);for(let u of e.fields)if(!s.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),s=s.add(u)}return new ea(n.key,r,new Vi(s.toArray()),Un.none())}}function FE(n,e,t){n instanceof Xd?function(r,s,u){const d=r.value.clone(),g=LE(r.fieldTransforms,s,u.transformResults);d.setAll(g),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ea?function(r,s,u){if(!rp(r.precondition,s))return void s.convertToUnknownDocument(u.version);const d=LE(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(Wv(r)),g.setAll(d),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Fu(n,e,t,r){return n instanceof Xd?function(s,u,d,g){if(!rp(s.precondition,u))return d;const _=s.value.clone(),b=VE(s.fieldTransforms,g,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof ea?function(s,u,d,g){if(!rp(s.precondition,u))return d;const _=VE(s.fieldTransforms,g,u),b=u.data;return b.setAll(Wv(s)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,rp(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function xm(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=iT(r.transform,s||null);null!=u&&(null===t&&(t=vr.empty()),t.set(r.field,u))}return t||null}function Zv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Zc(t,r,(s,u)=>function Tx(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xc&&r instanceof Xc||t instanceof el&&r instanceof el?Zc(t.elements,r.elements,ro):t instanceof np&&r instanceof np?ro(t.yt,r.yt):t instanceof Qd&&r instanceof Qd);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Xd extends ip{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ea extends ip{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Wv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function LE(n,e,t){const r=new Map;It(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,g=e.data.field(u.field);r.set(u.field,rT(d,g,t[s]))}return r}function VE(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,Ja(u,d,e))}return r}class sp extends ip{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UE extends ip{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class BE{constructor(e){this.count=e}}var Cr,nn;function jE(n){switch(n){default:return st();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function sT(n){if(void 0===n)return gr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Cr.OK:return pe.OK;case Cr.CANCELLED:return pe.CANCELLED;case Cr.UNKNOWN:return pe.UNKNOWN;case Cr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Cr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Cr.INTERNAL:return pe.INTERNAL;case Cr.UNAVAILABLE:return pe.UNAVAILABLE;case Cr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Cr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Cr.NOT_FOUND:return pe.NOT_FOUND;case Cr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Cr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Cr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Cr.ABORTED:return pe.ABORTED;case Cr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Cr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Cr.DATA_LOSS:return pe.DATA_LOSS;default:return st()}}(nn=Cr||(Cr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class tl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xo(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return vm(this.inner)}size(){return this.innerSize}}const Sx=new mr(qe.comparator);function ss(){return Sx}const oT=new mr(qe.comparator);function op(...n){let e=oT;for(const t of n)e=e.insert(t.key,t);return e}function ap(n){let e=oT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ta(){return eh()}function $E(){return eh()}function eh(){return new tl(n=>n.toString(),(n,e)=>n.isEqual(e))}const nl=new mr(qe.comparator),HE=new En(qe.comparator);function jt(...n){let e=HE;for(const t of n)e=e.add(t);return e}const Kv=new En(Nt);function Mm(){return Kv}class rl{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rl(St.min(),s,Mm(),ss(),jt())}}class il{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new il(r,t,jt(),jt(),jt())}}class sl{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class aT{constructor(e,t){this.targetId=e,this.At=t}}class uT{constructor(e,t,r=Vr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class cT{constructor(){this.Rt=0,this.bt=GE(),this.Pt=Vr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jt(),t=jt(),r=jt();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:st()}}),new il(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=GE()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Ax{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ss(),this.qt=Yv(),this.Kt=new En(Nt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(Lv(u))if(0===r){const d=new qe(u.path);this.jt(t,d,xn.newNoDocument(d,St.min()))}else It(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const g=this.Xt(d);if(g){if(u.current&&Lv(g.target)){const _=new qe(g.target.path);null!==this.Ut.get(_)||this.ee(d,_)||this.jt(d,_,xn.newNoDocument(_,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=jt();this.qt.forEach((u,d)=>{let g=!0;d.forEachWhile(_=>{const b=this.Xt(_);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const s=new rl(e,t,this.Kt,this.Ut,r);return this.Ut=ss(),this.qt=Yv(),this.Kt=new En(Nt),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new cT,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new En(Nt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new cT),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Yv(){return new mr(qe.comparator)}function GE(){return new mr(qe.comparator)}const lT={asc:"ASCENDING",desc:"DESCENDING"},dT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class hT{constructor(e,t){this.databaseId=e,this.gt=t}}function th(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qv(n,e){return n.gt?e.toBase64():e.toUint8Array()}function zE(n,e){return th(n,e.toTimestamp())}function Ur(n){return It(!!n),St.fromTimestamp(function(e){const t=Yc(e);return new Rn(t.seconds,t.nanos)}(n))}function Jv(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Xv(n){const e=tn.fromString(n);return It(a(e)),e}function ol(n,e){return Jv(n.databaseId,e.path)}function Xa(n,e){const t=Xv(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(qE(t))}function Om(n,e){return Jv(n.databaseId,e)}function Pm(n){const e=Xv(n);return 4===e.length?tn.emptyPath():qE(e)}function up(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qE(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function fT(n,e,t){return{name:ol(n,e),fields:t.value.mapValue.fields}}function pT(n,e,t){const r=Xa(n,e.name),s=Ur(e.updateTime),u=new vr({mapValue:{fields:e.fields}}),d=xn.newFoundDocument(r,s,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function cp(n,e){let t;if(e instanceof Xd)t={update:fT(n,e.key,e.value)};else if(e instanceof sp)t={delete:ol(n,e.key)};else if(e instanceof ea)t={update:fT(n,e.key,e.data),updateMask:o(e.fieldMask)};else{if(!(e instanceof UE))return st();t={verify:ol(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof Qd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Xc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof el)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof np)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:zE(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:st()),t;var s}function ZE(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Un.updateTime(Ur(s.updateTime)):void 0!==s.exists?Un.exists(s.exists):Un.none():Un.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,d){let g=null;"setToServerValue"in d?(It("REQUEST_TIME"===d.setToServerValue),g=new Qd):"appendMissingElements"in d?g=new Xc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new el(d.removeAllFromArray.values||[]):"increment"in d?g=new np(u,d.increment):st();const _=rr.fromServerFormat(d.fieldPath);return new Jd(_,g)}(n,s)):[];var s;if(e.update){const s=Xa(n,e.update.name),u=new vr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Vi((e.updateMask.fieldPaths||[]).map(b=>rr.fromServerFormat(b)));return new ea(s,u,d,t,r)}return new Xd(s,u,t,r)}if(e.delete){const s=Xa(n,e.delete);return new sp(s,t)}if(e.verify){const s=Xa(n,e.verify);return new UE(s,t)}return st()}function yT(n,e){return{documents:[Om(n,e.path)]}}function WE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Om(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Om(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0===_.length)return;const b=_.map(S=>function(P){if("=="===P.op){if(qD(P.value))return{unaryFilter:{field:lp(P.field),op:"IS_NAN"}};if(zD(P.value))return{unaryFilter:{field:lp(P.field),op:"IS_NULL"}}}else if("!="===P.op){if(qD(P.value))return{unaryFilter:{field:lp(P.field),op:"IS_NOT_NAN"}};if(zD(P.value))return{unaryFilter:{field:lp(P.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lp(P.field),op:Ox(P.op),value:P.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:lp((S=b).field),direction:Mx(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.gt||Hd(b)?b:{value:b});var b,g,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function _T(n){let e=Pm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){It(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=wT(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new Jc(dp((P=S).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let g=null;t.limit&&(g=function(S){let P;return P="object"==typeof S?S.value:S,Hd(P)?null:P}(t.limit));let _=null;var S;t.startAt&&(_=new Ru((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Ru(S.values||[],!S.before)}(t.endAt)),Dm(e,s,d,u,g,"F",_,b)}function wT(n){return n?void 0!==n.unaryFilter?[i(n)]:void 0!==n.fieldFilter?[Px(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wT(e)).reduce((e,t)=>e.concat(t)):st():[]}function Mx(n){return lT[n]}function Ox(n){return dT[n]}function lp(n){return{fieldPath:n.canonicalString()}}function dp(n){return rr.fromServerFormat(n.fieldPath)}function Px(n){return wr.create(dp(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function i(n){switch(n.unaryFilter.op){case"IS_NAN":const e=dp(n.unaryFilter.field);return wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=dp(n.unaryFilter.field);return wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dp(n.unaryFilter.field);return wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=dp(n.unaryFilter.field);return wr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function o(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function a(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function l(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=f(e)),e=h(n.get(t),e);return f(e)}function h(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function f(n){return n+"\x01\x01"}function y(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&st(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,d),s+="\0";break;case"\x11":s+=n.substring(u,d+1);break;default:st()}u=d+2}return new tn(r)}const w=["userId","batchId"];function E(n,e){return[n,l(e)]}function T(n,e,t){return[n,l(e),t]}const O={},F=["prefixPath","collectionGroup","readTime","documentId"],q=["prefixPath","collectionGroup","documentId"],te=["collectionGroup","readTime","prefixPath","documentId"],Ce=["canonicalId","targetId"],$e=["targetId","path"],Ze=["path","targetId"],ot=["collectionId","parent"],Ct=["indexId","uid"],Oe=["uid","sequenceNumber"],At=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pn=["indexId","uid","orderedDocumentKey"],qn=["userId","collectionPath","documentId"],al=["userId","collectionPath","largestBatchId"],e0=["userId","collectionGroup","largestBatchId"],Nm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t0=[...Nm,"documentOverlays"],km=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rm=km,n0=[...Rm,"indexConfiguration","indexState","indexEntries"];class hp extends EE{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Er(n,e){const t=Ke(n);return xs.M(t.ie,e)}class fp{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&FE(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$E();return this.mutations.forEach(s=>{const u=e.get(s.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(s.key)?null:g;const _=qv(d,g);null!==_&&r.set(s.key,_),d.isValidDocument()||d.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&Zc(this.mutations,e.mutations,(t,r)=>Zv(t,r))&&Zc(this.baseMutations,e.baseMutations,(t,r)=>Zv(t,r))}}class CT{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){It(e.mutations.length===r.length);let s=nl;const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new CT(e,t,r,s)}}class ET{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nh{constructor(e,t,r,s,u=St.min(),d=St.min(),g=Vr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new nh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Nx{constructor(e){this.re=e}}function kx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:KE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ol(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:th(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:pp(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:pp(e.version)}}var s,u;return r}function KE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function pp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gp(n){const e=new Rn(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function mp(n,e){const t=(e.baseMutations||[]).map(u=>ZE(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ZE(n.re,u)),s=Rn.fromMillis(e.localWriteTimeMs);return new fp(e.batchId,s,t,r)}function r0(n){const e=gp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gp(n.lastLimboFreeSnapshotVersion):St.min();let r;var s;return void 0!==n.query.documents?(It(1===(s=n.query).documents.length),r=ei(Zd(Pm(s.documents[0])))):r=ei(_T(n.query)),new nh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Vr.fromBase64String(n.resumeToken))}function Rx(n,e){const t=pp(e.snapshotVersion),r=pp(e.lastLimboFreeSnapshotVersion);let s;s=Lv(e.target)?yT(n.re,e.target):WE(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ku(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function bT(n){const e=_T({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tp(e,e.limit,"L"):e}function IT(n,e){return new ET(e.largestBatchId,ZE(n.re,e.overlayMutation))}function Fx(n,e){const t=e.path.lastSegment();return[n,l(e.path.popLast()),t]}function Lx(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:pp(r.readTime),documentKey:l(r.documentKey.path),largestBatchId:r.largestBatchId}}class v1{getBundleMetadata(e,t){return Vx(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:gp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Vx(e).put({bundleId:(r=t).id,createTime:pp(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ux(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:bT(s.bundledQuery),readTime:gp(s.readTime)};var s})}saveNamedQuery(e,t){return Ux(e).put({name:(r=t).name,readTime:pp(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Vx(n){return Er(n,"bundles")}function Ux(n){return Er(n,"namedQueries")}class YE{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new YE(e,t.uid||"")}getOverlay(e,t){return s0(e).get(Fx(this.userId,t)).next(r=>r?IT(this.It,r):null)}getOverlays(e,t){const r=ta();return ce.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,d)=>{const g=new ET(t,d);s.push(this.ue(e,g))}),ce.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(l(d.getCollectionPath())));const u=[];return s.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(s0(e).Y("collectionPathOverlayIndex",g))}),ce.waitFor(u)}getOverlaysForCollection(e,t,r){const s=ta(),u=l(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return s0(e).W("collectionPathOverlayIndex",d).next(g=>{for(const _ of g){const b=IT(this.It,_);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=ta();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return s0(e).Z({index:"collectionGroupOverlayIndex",range:g},(_,b,S)=>{const P=IT(this.It,b);u.size()<s||P.largestBatchId===d?(u.set(P.getKey(),P),d=P.largestBatchId):S.done()}).next(()=>u)}ue(e,t){return s0(e).put(function(r,s,u){const[d,g,_]=Fx(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:cp(r.re,u.mutation)}}(this.It,this.userId,t))}}function s0(n){return Er(n,"documentOverlays")}class yp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(dr(e.integerValue));else if("doubleValue"in e){const r=dr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Xf(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Qc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?ZD(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):st()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function w1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Bx(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=w1(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}yp.Te=new yp;class C1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=Bx(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=Bx(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class E1{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class b1{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class o0{constructor(){this.Be=new C1,this.Le=new E1(this.Be),this.Ue=new b1(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class _p{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _p(this.indexId,this.documentKey,this.arrayValue,r)}}function vp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=jx(n.arrayValue,e.arrayValue),0!==t?t:(t=jx(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function jx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class I1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=ym(e);if(void 0!==t&&!this.ze(t))return!1;const r=xu(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const d=r[s];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++s}for(;s<r.length;++s){const d=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class D1{constructor(){this.Ye=new DT}addToCollectionParentIndex(e,t){return this.Ye.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Li.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class DT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new En(tn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new En(tn.comparator)).toArray()}}const QE=new Uint8Array(0);class T1{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new DT,this.Ze=new tl(r=>ku(r),(r,s)=>qd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:l(s)};return $x(e).put(u)}return ce.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[mm(t),""],!1,!0);return $x(e).W(s).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(y(d.parent))}return r})}addFieldIndex(e,t){const r=JE(e),s={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete s.indexId;const u=r.add(s);if(t.indexState){const d=u0(e);return u.next(g=>{d.put(Lx(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=JE(e),s=u0(e),u=a0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=a0(e);let s=!0;const u=new Map;return ce.forEach(this.tn(t),d=>this.en(e,d).next(g=>{s&&(s=!!g),u.set(d,g)})).next(()=>{if(s){let d=jt();const g=[];return ce.forEach(u,(_,b)=>{var S;Ve("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Vt=>`${Vt.fieldPath}:${Vt.kind}`).join(",")}`} to execute ${ku(t)}`);const P=function(Vt,Ut){const $t=ym(Ut);if(void 0===$t)return null;for(const Yt of Vv(Vt,$t.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(b,_),$=function(Vt,Ut){const $t=new Map;for(const Yt of xu(Ut))for(const ti of Vv(Vt,Yt.fieldPath))switch(ti.op){case"==":case"in":$t.set(Yt.fieldPath.canonicalString(),ti.value);break;case"not-in":case"!=":return $t.set(Yt.fieldPath.canonicalString(),ti.value),Array.from($t.values())}return null}(b,_),Z=function(Vt,Ut){const $t=[];let Yt=!0;for(const ti of xu(Ut)){const D0=0===ti.kind?xE(Vt,ti.fieldPath,Vt.startAt):ME(Vt,ti.fieldPath,Vt.startAt);$t.push(D0.value),Yt&&(Yt=D0.inclusive)}return new Ru($t,Yt)}(b,_),re=function(Vt,Ut){const $t=[];let Yt=!0;for(const ti of xu(Ut)){const D0=0===ti.kind?ME(Vt,ti.fieldPath,Vt.endAt):xE(Vt,ti.fieldPath,Vt.endAt);$t.push(D0.value),Yt&&(Yt=D0.inclusive)}return new Ru($t,Yt)}(b,_),Re=this.nn(_,b,Z),Ue=this.nn(_,b,re),ut=this.sn(_,b,$),Ot=this.rn(_.indexId,P,Re,Z.inclusive,Ue,re.inclusive,ut);return ce.forEach(Ot,Vt=>r.J(Vt,t.limit).next(Ut=>{Ut.forEach($t=>{const Yt=qe.fromSegments($t.documentKey);d.has(Yt)||(d=d.add(Yt),g.push(Yt))})}))}).next(()=>g)}return ce.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,d,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),S=[];for(let P=0;P<_;++P){const $=t?this.on(t[P/b]):QE,Z=this.un(e,$,r[P%b],s),re=this.cn(e,$,u[P%b],d),Re=g.map(Ue=>this.un(e,$,Ue,!0));S.push(...this.createRange(Z,re,Re))}return S}un(e,t,r,s){const u=new _p(e,qe.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new _p(e,qe.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new I1(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let d=null;for(const g of u)r.We(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;return ce.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(d){let g=new En(rr.comparator),_=!1;for(const b of d.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?_=!0:g=g.add(S.field))}for(const b of d.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(_?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new o0;for(const s of xu(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const d=r.qe(s.kind);yp.Te.ce(u,d)}return r.$e()}on(e){const t=new o0;return yp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new o0;return yp.Te.ce(Nu(this.databaseId,t),r.qe(function(s){const u=xu(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new o0);let u=0;for(const d of xu(e)){const g=r[u++];for(const _ of s)if(this.ln(t,d.fieldPath)&&Cm(g))s=this.fn(s,d,g);else{const b=_.qe(d.kind);yp.Te.ce(g,b)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of s){const _=new o0;_.seed(g.$e()),yp.Te.ce(d,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=JE(e),s=u0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return ce.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{d.push(function(b,S){const P=S?new Bd(S.sequenceNumber,new Li(gp(S.readTime),new qe(y(S.documentKey)),S.largestBatchId)):Bd.empty(),$=b.fields.map(([Z,re])=>new _m(rr.fromServerFormat(Z),re));return new Wf(b.indexId,b.collectionGroup,$,P)}(g,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=JE(e),u=u0(e);return this._n(e).next(d=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ce.forEach(g,_=>u.put(Lx(_.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(s,u)=>{const d=r.get(s.collectionGroup);return(d?ce.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),ce.forEach(g,_=>this.wn(e,s,_).next(b=>{const S=this.mn(u,_);return b.isEqual(S)?ce.resolve():this.gn(e,u,_,b,S)}))))})}yn(e,t,r,s){return a0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return a0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=a0(e);let u=new En(vp);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,g)=>{u=u.add(new _p(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}mn(e,t){let r=new En(vp);const s=this.an(t,e);if(null==s)return r;const u=ym(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Cm(d))for(const g of d.arrayValue.values||[])r=r.add(new _p(t.indexId,e.key,this.on(g),s))}else r=r.add(new _p(t.indexId,e.key,QE,s));return r}gn(e,t,r,s,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,_,b,S,P){const $=g.getIterator(),Z=_.getIterator();let re=jd($),Re=jd(Z);for(;re||Re;){let Ue=!1,ut=!1;if(re&&Re){const Ot=b(re,Re);Ot<0?ut=!0:Ot>0&&(Ue=!0)}else null!=re?ut=!0:Ue=!0;Ue?(S(Re),Re=jd(Z)):ut?(P(re),re=jd($)):(re=jd($),Re=jd(Z))}}(s,u,vp,g=>{d.push(this.yn(e,t,r,g))},g=>{d.push(this.pn(e,t,r,g))}),ce.waitFor(d)}_n(e){let t=1;return u0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>vp(d,g)).filter((d,g,_)=>!g||0!==vp(d,_[g-1]));const s=[];s.push(e);for(const d of r){const g=vp(d,e),_=vp(d,t);if(0===g)s[0]=e.Ke();else if(g>0&&_<0)s.push(d),s.push(d.Ke());else if(_>0)break}s.push(t);const u=[];for(let d=0;d<s.length;d+=2)u.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,QE,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,QE,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Hx)}getMinOffset(e,t){return ce.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||st())).next(Hx)}}function $x(n){return Er(n,"collectionParents")}function a0(n){return Er(n,"indexEntries")}function JE(n){return Er(n,"indexConfiguration")}function u0(n){return Er(n,"indexState")}function Hx(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Jr(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Li(e.readTime,e.documentKey,t)}const Gx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Os{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Os(e,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zx(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const _=r.Z({range:d},(S,P,$)=>(g++,$.delete()));u.push(_.next(()=>{It(1===g)}));const b=[];for(const S of t.mutations){const P=T(e,S.key.path,t.batchId);u.push(s.delete(P)),b.push(S.key)}return ce.waitFor(u).next(()=>b)}function XE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Os.DEFAULT_COLLECTION_PERCENTILE=10,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Os.DEFAULT=new Os(41943040,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Os.DISABLED=new Os(-1,0,0);class eb{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new eb(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rh(e).Z({index:"userMutationsIndex",range:r},(s,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Fm(e),d=rh(e);return d.add({}).next(g=>{It("number"==typeof g);const _=new fp(g,t,r,s),b=function($,Z,re){const Re=re.baseMutations.map(ut=>cp($.re,ut)),Ue=re.mutations.map(ut=>cp($.re,ut));return{userId:Z,batchId:re.batchId,localWriteTimeMs:re.localWriteTime.toMillis(),baseMutations:Re,mutations:Ue}}(this.It,this.userId,_),S=[];let P=new En(($,Z)=>Nt($.canonicalString(),Z.canonicalString()));for(const $ of s){const Z=T(this.userId,$.key.path,g);P=P.add($.key.path.popLast()),S.push(d.put(b)),S.push(u.put(Z,O))}return P.forEach($=>{S.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[g]=_.keys()}),ce.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return rh(e).get(t).next(r=>r?(It(r.userId===this.userId),mp(this.It,r)):null)}Tn(e,t){return this.In[t]?ce.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return rh(e).Z({index:"userMutationsIndex",range:s},(d,g,_)=>{g.userId===this.userId&&(It(g.batchId>=r),u=mp(this.It,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rh(e).W("userMutationsIndex",t).next(r=>r.map(s=>mp(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=E(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Fm(e).Z({range:s},(d,g,_)=>{const[b,S,P]=d,$=y(S);if(b===this.userId&&t.path.isEqual($))return rh(e).get(P).next(Z=>{if(!Z)throw st();It(Z.userId===this.userId),u.push(mp(this.It,Z))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Nt);const s=[];return t.forEach(u=>{const d=E(this.userId,u.path),g=IDBKeyRange.lowerBound(d),_=Fm(e).Z({range:g},(b,S,P)=>{const[$,Z,re]=b,Re=y(Z);$===this.userId&&u.path.isEqual(Re)?r=r.add(re):P.done()});s.push(_)}),ce.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=E(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new En(Nt);return Fm(e).Z({range:d},(_,b,S)=>{const[P,$,Z]=_,re=y($);P===this.userId&&r.isPrefixOf(re)?re.length===s&&(g=g.add(Z)):S.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(rh(e).get(u).next(d=>{if(null===d)throw st();It(d.userId===this.userId),r.push(mp(this.It,d))}))}),ce.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return zx(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ce.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Fm(e).Z({range:r},(u,d,g)=>{if(u[0]===this.userId){const _=y(u[1]);s.push(_)}else g.done()}).next(()=>{It(0===s.length)})})}containsKey(e,t){return qx(e,this.userId,t)}Rn(e){return Zx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qx(n,e,t){const r=E(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Fm(n).Z({range:u,X:!0},(g,_,b)=>{const[S,P,$]=g;S===e&&P===s&&(d=!0),b.done()}).next(()=>d)}function rh(n){return Er(n,"mutations")}function Fm(n){return Er(n,"documentMutations")}function Zx(n){return Er(n,"mutationQueues")}class wp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new wp(0)}static vn(){return new wp(-1)}}class S1{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new wp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>St.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Lm(e).Z((d,g)=>{const _=r0(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>ce.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Lm(e).Z((r,s)=>{const u=r0(s);t(u)})}Vn(e){return Wx(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}Sn(e,t){return Wx(e).put("targetGlobalKey",t)}Dn(e,t){return Lm(e).put(Rx(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ku(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Lm(e).Z({range:s,index:"queryTargetsIndex"},(d,g,_)=>{const b=r0(g);qd(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=ih(e);return t.forEach(d=>{const g=l(d.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,d))}),ce.waitFor(s)}removeMatchingKeys(e,t,r){const s=ih(e);return ce.forEach(t,u=>{const d=l(u.path);return ce.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ih(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ih(e);let u=jt();return s.Z({range:r,X:!0},(d,g,_)=>{const b=y(d[1]),S=new qe(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=l(t.path),s=IDBKeyRange.bound([r],[mm(r)],!1,!0);let u=0;return ih(e).Z({index:"documentTargetsIndex",X:!0,range:s},([d,g],_,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}se(e,t){return Lm(e).get(t).next(r=>r?r0(r):null)}}function Lm(n){return Er(n,"targets")}function Wx(n){return Er(n,"targetGlobal")}function ih(n){return Er(n,"targetDocuments")}function Kx([n,e],[t,r]){const s=Nt(n,t);return 0===s?Nt(e,r):s}class A1{constructor(e){this.xn=e,this.buffer=new En(Kx),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Kx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class x1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Jo(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Mu(r)}yield t.Fn(3e5)}))}}class M1{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Di.at);const r=new A1(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Gx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gx):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,d,g,_,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),s=this.params.maximumSequenceNumbersToCollect):s=P,d=Date.now(),this.nthSequenceNumber(e,s))).next(P=>(r=P,g=Date.now(),this.removeTargets(e,r,t))).next(P=>(u=P,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(b=Date.now(),Iv()<=ja.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${s} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${P} documents in `+(b-_)+`ms\nTotal Duration: ${b-S}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:P})))}}class O1{constructor(e,t){this.db=e,this.garbageCollector=new M1(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return tb(e,r)}removeReference(e,t,r){return tb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return tb(e,t)}Gn(e,t){return function(r,s){let u=!1;return Zx(r).tt(d=>qx(r,d,s).next(g=>(g&&(u=!0),ce.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(d,g)=>{if(g<=t){const _=this.Gn(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,St.min()),ih(e).delete([0,l(d.path)])))});s.push(_)}}).next(()=>ce.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return tb(e,t)}Kn(e,t){const r=ih(e);let s,u=Di.at;return r.Z({index:"documentTargetsIndex"},([d,g],{path:_,sequenceNumber:b})=>{0===d?(u!==Di.at&&t(new qe(y(s)),u),u=b,s=_):u=Di.at}).next(()=>{u!==Di.at&&t(new qe(y(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tb(n,e){return ih(n).put((r=n.currentSequenceNumber,{targetId:0,path:l(e.path),sequenceNumber:r}));var r}class Yx{constructor(){this.changes=new tl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class P1{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Cp(e).put(r)}removeEntry(e,t,r){return Cp(e).delete(function(s,u){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],KE(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=xn.newInvalidDocument(t);return Cp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(c0(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:xn.newInvalidDocument(t)};return Cp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(c0(t))},(s,u)=>{r={document:this.jn(t,u),size:XE(u)}}).next(()=>r)}getEntries(e,t){let r=ss();return this.zn(e,t,(s,u)=>{const d=this.jn(s,u);r=r.insert(s,d)}).next(()=>r)}Hn(e,t){let r=ss(),s=new mr(qe.comparator);return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);r=r.insert(u,g),s=s.insert(u,XE(d))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return ce.resolve();let s=new En(eM);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(c0(s.first()),c0(s.last())),d=s.getIterator();let g=d.getNext();return Cp(e).Z({index:"documentKeyIndex",range:u},(_,b,S)=>{const P=qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&eM(g,P)<0;)r(g,null),g=d.getNext();g&&g.isEqual(P)&&(r(g,b),g=d.hasNext()?d.getNext():null),g?S.j(c0(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),KE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cp(e).W(IDBKeyRange.bound(s,u,!0)).next(d=>{let g=ss();for(const _ of d){const b=this.jn(qe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,s){let u=ss();const d=Xx(t,r),g=Xx(t,Li.max());return Cp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(_,b,S)=>{const P=this.jn(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(P.key,P),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new N1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Jx(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Qn(e,t){return Jx(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function _1(n,e){let t;if(e.document)t=pT(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),s=gp(e.noDocument.readTime);t=xn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=qe.fromSegments(e.unknownDocument.path),s=gp(e.unknownDocument.version);t=xn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Rn(r[0],r[1]);return St.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return xn.newInvalidDocument(e)}}function Qx(n){return new P1(n)}class N1 extends Yx{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new tl(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new En((u,d)=>Nt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const _=kx(this.Yn.It,d);s=s.add(u.path.popLast()),r+=XE(_)-g.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=kx(this.Yn.It,d.convertToNoDocument(St.min()));t.push(this.Yn.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Jx(n){return Er(n,"remoteDocumentGlobal")}function Cp(n){return Er(n,"remoteDocumentsV14")}function c0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xx(n,e){const t=e.documentKey.path.toArray();return[n,KE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function eM(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Nt(t[u],r[u]),s)return s;return s=Nt(t.length,r.length),s||(s=Nt(t[t.length-2],r[r.length-2]),s||Nt(t[t.length-1],r[r.length-1]))}class k1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class tM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&Fu(r.mutation,s,Vi.empty(),Rn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const s=ta();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let d=op();return u.forEach((g,_)=>{d=d.insert(g,_.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ta();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,s){let u=ss();const d=eh(),g=eh();return t.forEach((_,b)=>{const S=r.get(b.key);s.has(b.key)&&(void 0===S||S.mutation instanceof ea)?u=u.insert(b.key,b):void 0!==S&&(d.set(b.key,S.mutation.getFieldMask()),Fu(S.mutation,b,S.mutation.getFieldMask(),Rn.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,S)=>d.set(b,S)),t.forEach((b,S)=>{var P;return g.set(b,new k1(S,null!==(P=d.get(b))&&void 0!==P?P:null))}),g))}recalculateAndSaveOverlays(e,t){const r=eh();let s=new mr((d,g)=>d-g),u=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let S=r.get(_)||Vi.empty();S=g.applyToLocalView(b,S),r.set(_,S);const P=(s.get(g.batchId)||jt()).add(_);s=s.insert(g.batchId,P)})}).next(()=>{const d=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),b=_.key,S=_.value,P=$E();S.forEach($=>{if(!u.has($)){const Z=qv(t.get($),r.get($));null!==Z&&P.set($,Z),u=u.add($)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,P))}return ce.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Bv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const d=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ce.resolve(ta());let g=-1,_=u;return d.next(b=>ce.forEach(b,(S,P)=>(g<P.largestBatchId&&(g=P.largestBatchId),u.get(S)?ce.resolve():this.getBaseDocument(e,S,P).next($=>{_=_.insert(S,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,jt())).next(S=>({batchId:g,changes:ap(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let s=op();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=op();return this.indexManager.getCollectionParents(e,s).next(d=>ce.forEach(d,g=>{const _=(b=t,S=g.child(s),new Ya(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((S,P)=>{u=u.insert(S,P)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,_)=>{const b=_.getKey();null===s.get(b)&&(s=s.insert(b,xn.newInvalidDocument(b)))});let d=op();return s.forEach((g,_)=>{const b=u.get(g);void 0!==b&&Fu(b.mutation,_,Vi.empty(),Rn.now()),Sm(t,_)&&(d=d.insert(g,_))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(xn.newInvalidDocument(t))}}class R1{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ce.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:bT(r.bundledQuery),readTime:Ur(r.readTime)}),ce.resolve();var r}}class F1{constructor(){this.overlays=new mr(qe.comparator),this.es=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ta();return ce.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const s=ta(),u=t.length+1,d=new qe(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new mr((b,S)=>b-S);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=ta(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const g=ta(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,S)=>g.set(b,S)),!(g.size()>=s)););return ce.resolve(g)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new ET(t,r));let u=this.es.get(t);void 0===u&&(u=jt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class TT{constructor(){this.ns=new En(hi.ss),this.rs=new En(hi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new hi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new hi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new tn([])),r=new hi(t,e),s=new hi(t,e+1),u=[];return this.rs.forEachInRange([r,s],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new tn([])),r=new hi(t,e),s=new hi(t,e+1);let u=jt();return this.rs.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new hi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||Nt(e._s,t._s)}static os(e,t){return Nt(e._s,t._s)||qe.comparator(e.key,t.key)}}class L1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new En(hi.ss)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const d=new fp(u,t,r,s);this.mutationQueue.push(d);for(const g of s)this.gs=this.gs.add(new hi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ce.resolve(d)}lookupMutationBatch(e,t){return ce.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return ce.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),s=new hi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],d=>{const g=this.ys(d._s);u.push(g)}),ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Nt);return t.forEach(s=>{const u=new hi(s,0),d=new hi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],g=>{r=r.add(g._s)})}),ce.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const d=new hi(new qe(u),0);let g=new En(Nt);return this.gs.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(g=g.add(_._s)),!0)},d),ce.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){It(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ce.forEach(t.mutations,s=>{const u=new hi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new hi(t,0),s=this.gs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ce.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class V1{constructor(e){this.Es=e,this.docs=new mr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=ss();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():xn.newInvalidDocument(s))}),ce.resolve(r)}getAllFromCollection(e,t,r){let s=ss();const u=new qe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:_}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Jr(Sv(_),r)<=0||(s=s.insert(_.key,_.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(e,t,r,s){st()}As(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new U1(this)}getSize(e){return ce.resolve(this.size)}}class U1 extends Yx{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class B1{constructor(e){this.persistence=e,this.Rs=new tl(t=>ku(t),qd),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.bs=0,this.Ps=new TT,this.targetCount=0,this.vs=wp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ce.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new wp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Dn(t),ce.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),ce.waitFor(u).next(()=>s)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),ce.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Ps.containsKey(t))}}class nM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Di(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new B1(this),this.indexManager=new D1,this.remoteDocumentCache=new V1(r=>this.referenceDelegate.xs(r)),this.It=new Nx(t),this.Ns=new R1(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new F1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new L1(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const s=new j1(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return ce.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class j1 extends EE{constructor(e){super(),this.currentSequenceNumber=e}}class nb{constructor(e){this.persistence=e,this.Fs=new TT,this.$s=null}static Bs(e){return new nb(e)}get Ls(){if(this.$s)return this.$s;throw st()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ls,r=>{const s=qe.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,St.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ce.or([()=>ce.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class $1{constructor(e){this.It=e}$(e,t,r,s){const u=new Kf("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w,{unique:!0}),g.createObjectStore("documentMutations"),rM(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=ce.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),rM(e)),d=d.next(()=>function(g){const _=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(g,_){return _.store("mutations").W().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w,{unique:!0});const S=_.store("mutations"),P=b.map($=>S.put($));return ce.waitFor(P)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.qs(u))),r<6&&s>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(d=d.next(()=>this.Gs(u))),r<8&&s>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&s>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.js(u))),r<11&&s>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:qn});_.createIndex("collectionPathOverlayIndex",al,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",e0,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:F});_.createIndex("documentKeyIndex",q),_.createIndex("collectionGroupIndex",te)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&s>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Ct}).createIndex("sequenceNumberIndex",Oe,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:At}).createIndex("documentKeyIndex",pn,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=XE(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>ce.forEach(s,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(g=>ce.forEach(g,_=>{It(_.userId===u.userId);const b=mp(this.It,_);return zx(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((d,g)=>{const _=new tn(d),b=[0,l(_)];u.push(t.get(b).next(S=>S?ce.resolve():t.put({targetId:0,path:l(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ce.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:ot});const r=t.store("collectionParents"),s=new DT,u=d=>{if(s.add(d)){const g=d.lastSegment(),_=d.popLast();return r.put({collectionId:g,parent:l(_)})}};return t.store("remoteDocuments").Z({X:!0},(d,g)=>{const _=new tn(d);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,g,_],b)=>{const S=y(g);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=r0(s),d=Rx(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,d)=>{const g=t.store("remoteDocumentsV14"),_=(b=d,b.document?new qe(tn.fromString(b.document.name).popFirst(5)):b.noDocument?qe.fromSegments(b.noDocument.path):b.unknownDocument?qe.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(g.put(S))}).next(()=>ce.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=Qx(this.It),u=new nM(nb.Bs,this.It.re);return r.W().next(d=>{const g=new Map;return d.forEach(_=>{var b;let S=null!==(b=g.get(_.userId))&&void 0!==b?b:jt();mp(this.It,_).keys().forEach(P=>S=S.add(P)),g.set(_.userId,S)}),ce.forEach(g,(_,b)=>{const S=new xr(b),P=YE.oe(this.It,S),$=u.getIndexManager(S),Z=eb.oe(S,this.It,$,u.referenceDelegate);return new tM(s,Z,P,$).recalculateAndSaveOverlaysForDocumentKeys(new hp(t,Di.at),_).next()})})}}function rM(n){n.createObjectStore("targetDocuments",{keyPath:$e}).createIndex("documentTargetsIndex",Ze,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ce,{unique:!0}),n.createObjectStore("targetGlobal")}const ST="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AT{constructor(e,t,r,s,u,d,g,_,b,S,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=g,this.Js=b,this.Ys=S,this.Xs=P,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!AT.C())throw new ke(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new O1(this,s),this.ii=t+"main",this.It=new Nx(_),this.ri=new xs(this.ii,this.Xs,new $1(this.It)),this.Cs=new S1(this.referenceDelegate,this.It),this.remoteDocumentCache=Qx(this.It),this.Ns=new v1,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(pe.FAILED_PRECONDITION,ST);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Di(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ve.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Jo(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return l0(e).get("owner").next(t=>ce.resolve(this.mi(t)))}gi(e){return rb(e).delete(this.clientId)}yi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Er(r,"clientMetadata");return s.W().next(u=>{const d=e.Ii(u,18e5),g=u.filter(_=>-1===d.indexOf(_));return ce.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ce.resolve(!0):l0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ke(pe.FAILED_PRECONDITION,ST);return!1}}return!(!this.networkEnabled||!this.inForeground)||rb(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const d=!this.inForeground&&s.inForeground,g=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new hp(t,Di.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>rb(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return eb.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new T1(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return YE.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?n0:14===d?Rm:13===d?km:12===d?t0:11===d?Nm:void st();var d;let g;return this.ri.runTransaction(e,s,u,_=>(g=new hp(_,this.Ss?this.Ss.next():Di.at),"readwrite-primary"===t?this.fi(g).next(b=>!!b||this.di(g)).next(b=>{if(!b)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ke(pe.FAILED_PRECONDITION,Wc);return r(g)}).next(b=>this.wi(g).next(()=>b)):this.Vi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Vi(e){return l0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(pe.FAILED_PRECONDITION,ST)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return l0(e).put("owner",t)}static C(){return xs.C()}_i(e){const t=l0(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,on.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function l0(n){return Er(n,"owner")}function rb(n){return Er(n,"clientMetadata")}function xT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class MT{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=jt(),s=jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new MT(e,t.fromCache,r,s)}}class iM{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(is(t))return ce.resolve(null);let r=ei(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=tp(t,null,"F"),r=ei(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=jt(...u);return this.Ni.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.Fi(t,g);return this.$i(t,b,d,_.readTime)?this.ki(e,tp(t,null,"F")):this.Bi(e,b,t,_)}))})))}Oi(e,t,r,s){return is(t)||s.isEqual(St.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,s)?this.Mi(e,t):(Iv()<=ja.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tm(t)),this.Bi(e,d,t,CE(s,-1)))})}Fi(e,t){let r=new En(jv(e));return t.forEach((s,u)=>{Sm(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return Iv()<=ja.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Tm(t)),this.Ni.getDocumentsMatchingQuery(e,t,Li.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class H1{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new mr(Nt),this.qi=new tl(u=>ku(u),qd),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function sM(n,e,t,r){return new H1(n,e,t,r)}function oM(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ve.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let _=jt();for(const b of s){d.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}for(const b of u){g.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next(b=>({ji:b,removedBatchIds:d,addedBatchIds:g}))})})}),OT.apply(this,arguments)}function G1(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,g,_,b){const S=_.batch,P=S.keys();let $=ce.resolve();return P.forEach(Z=>{$=$.next(()=>b.getEntry(g,Z)).next(re=>{const Re=_.docVersions.get(Z);It(null!==Re),re.version.compareTo(Re)<0&&(S.applyToRemoteDocument(re,_),re.isValidDocument()&&(re.setReadTime(_.commitVersion),b.addEntry(re)))})}),$.next(()=>d.mutationQueue.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=jt();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(g=g.add(d.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function aM(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function z1(n,e){const t=Ke(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const g=[];e.targetChanges.forEach((S,P)=>{const $=s.get(P);if(!$)return;g.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,P).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,P)));let Z=$.withSequenceNumber(u.currentSequenceNumber);var re,Re,Ue;e.targetMismatches.has(P)?Z=Z.withResumeToken(Vr.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):S.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(S.resumeToken,r)),s=s.insert(P,Z),Re=Z,Ue=S,(0===(re=$).resumeToken.approximateByteSize()||Re.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=3e8||Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,Z))});let _=ss(),b=jt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(uM(u,d,e.documentUpdates).next(S=>{_=S.Wi,b=S.zi})),!r.isEqual(St.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(P=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return ce.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.Ui=s,u))}function uM(n,e,t){let r=jt(),s=jt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=ss();return t.forEach((g,_)=>{const b=u.get(g);_.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(St.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):Ve("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",_.version)}),{Wi:d,zi:s}})}function q1(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vm(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,ce.resolve(s)):t.Cs.allocateTargetId(r).next(d=>(s=new nh(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Um(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,ve.Z)(function*(n,e,t){const r=Ke(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!Jo(d))throw d;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),PT.apply(this,arguments)}function ib(n,e,t){const r=Ke(n);let s=St.min(),u=jt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,_,b){const S=Ke(g),P=S.qi.get(b);return void 0!==P?ce.resolve(S.Ui.get(P)):S.Cs.getTargetData(_,b)}(r,d,ei(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,g.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?s:St.min(),t?u:jt())).next(g=>(dM(r,NE(e),g),{documents:g,Hi:u})))}function cM(n,e){const t=Ke(n),r=Ke(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function lM(n,e){const t=Ke(n),r=t.Ki.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,CE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(dM(t,e,s),s))}function dM(n,e,t){let r=n.Ki.get(e)||St.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function NT(){return NT=(0,ve.Z)(function*(n,e,t,r){const s=Ke(n);let u=jt(),d=ss();for(const b of t){const S=e.Ji(b.metadata.name);b.document&&(u=u.add(S));const P=e.Yi(b);P.setReadTime(e.Xi(b.metadata.readTime)),d=d.insert(S,P)}const g=s.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Vm(s,(b=r,ei(Zd(tn.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>uM(b,g,d).next(S=>(g.apply(b),S)).next(S=>s.Cs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>s.Cs.addMatchingKeys(b,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,S.Wi,S.zi)).next(()=>S.Wi)))}),NT.apply(this,arguments)}function W1(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,ve.Z)(function*(n,e,t=jt()){const r=yield Vm(n,ei(bT(e.bundledQuery))),s=Ke(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const d=Ur(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(Vr.EMPTY_BYTE_STRING,d);return s.Ui=s.Ui.insert(g.targetId,g),s.Cs.updateTargetData(u,g).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),kT.apply(this,arguments)}function hM(n,e){return`firestore_clients_${n}_${e}`}function fM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function RT(n,e){return`firestore_targets_${n}_${e}`}class sb{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new ke(s.error.code,s.error.message))),d?new sb(e,t,s.state,u):(gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class d0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new ke(r.error.code,r.error.message))),u?new d0(e,r.state,s):(gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ob{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Mm();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=DE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return s?new ob(e,u):(gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class FT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new FT(t.clientId,t.onlineState):(gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class LT{constructor(){this.activeTargetIds=Mm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VT{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new mr(Nt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=hM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new LT),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(hM(e.persistenceKey,s));if(u){const d=ob.Zi(s,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(RT(this.persistenceKey,e));if(r){const s=d0.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(RT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let d=Di.at;if(null!=u)try{const g=JSON.parse(u);It("number"==typeof g),d=g}catch(g){gr("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);s!==Di.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new sb(this.currentUser,e,t,r),u=fM(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=fM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=RT(this.persistenceKey,e),u=new d0(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ob.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return sb.Zi(new xr(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return d0.Zi(s,t)}yr(e){return FT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),d=[],g=[];return u.forEach(_=>{s.has(_)||d.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Br(d,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Mm();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class pM{constructor(){this.Lr=new LT,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new LT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class K1{qr(e){}shutdown(){}}class gM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Y1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Q1{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class J1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const d=this.ho(e,t);Ve("RestConnection","Sending: ",d,r);const g={};return this.lo(g,s,u),this.fo(e,d,g,r).then(_=>(Ve("RestConnection","Received: ",_),_),_=>{throw qa("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}_o(e,t,r,s,u,d){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+qc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${Y1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,d)=>{const g=new kD;g.setWithCredentials(!0),g.listenOnce(pE.COMPLETE,()=>{var b;try{switch(g.getLastErrorCode()){case pm.NO_ERROR:const S=g.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(S)),u(S);break;case pm.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),d(new ke(pe.DEADLINE_EXCEEDED,"Request time out"));break;case pm.HTTP_ERROR:const P=g.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',P,"response text:",g.getResponseText()),P>0){let $=g.getResponseJson();Array.isArray($)&&($=$[0]);const Z=null===(b=$)||void 0===b?void 0:b.error;if(Z&&Z.status&&Z.message){const re=function(Re){const Ue=Re.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Ue)>=0?Ue:pe.UNKNOWN}(Z.status);d(new ke(re,Z.message))}else d(new ke(pe.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new ke(pe.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(s);g.send(t,"POST",_,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ND(),d=Hf(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new mE({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=s.join("");Ve("Connection","Creating WebChannel: "+_,g);const b=u.createWebChannel(_,g);let S=!1,P=!1;const $=new Q1({Hr:re=>{P?Ve("Connection","Not sending because WebChannel is closed:",re):(S||(Ve("Connection","Opening WebChannel transport."),b.open(),S=!0),Ve("Connection","WebChannel sending:",re),b.send(re))},Jr:()=>b.close()}),Z=(re,Re,Ue)=>{re.listen(Re,ut=>{try{Ue(ut)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Z(b,Gf.EventType.OPEN,()=>{P||Ve("Connection","WebChannel transport opened.")}),Z(b,Gf.EventType.CLOSE,()=>{P||(P=!0,Ve("Connection","WebChannel transport closed"),$.io())}),Z(b,Gf.EventType.ERROR,re=>{P||(P=!0,qa("Connection","WebChannel transport errored:",re),$.io(new ke(pe.UNAVAILABLE,"The operation could not be completed")))}),Z(b,Gf.EventType.MESSAGE,re=>{var Re;if(!P){const Ue=re.data[0];It(!!Ue);const ut=Ue,Ot=ut.error||(null===(Re=ut[0])||void 0===Re?void 0:Re.error);if(Ot){Ve("Connection","WebChannel received error:",Ot);const Vt=Ot.status;let Ut=function(Yt){const ti=Cr[Yt];if(void 0!==ti)return sT(ti)}(Vt),$t=Ot.message;void 0===Ut&&(Ut=pe.INTERNAL,$t="Unknown error status: "+Vt+" with message "+Ot.message),P=!0,$.io(new ke(Ut,$t)),b.close()}else Ve("Connection","WebChannel received:",Ue),$.ro(Ue)}}),Z(d,gE.STAT_EVENT,re=>{re.stat===bv.PROXY?Ve("Connection","Detected buffering proxy"):re.stat===bv.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function mM(){return typeof window<"u"?window:null}function ab(){return typeof document<"u"?document:null}function h0(n){return new hT(n,!0)}class UT{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yM{constructor(e,t,r,s,u,d,g,_){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new UT(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ve.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ve.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new ke(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ve.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class X1 extends yM{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function mT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),s=e.targetChange.targetIds||[],u=function(_,b){return _.gt?(It(void 0===b||"string"==typeof b),Vr.fromBase64String(b||"")):(It(void 0===b||b instanceof Uint8Array),Vr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(_){const b=void 0===_.code?pe.UNKNOWN:sT(_.code);return new ke(b,_.message||"")}(d);t=new uT(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=Xa(n,r.document.name),u=Ur(r.document.updateTime),d=new vr({mapValue:{fields:r.document.fields}}),g=xn.newFoundDocument(s,u,d);t=new sl(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,s=Xa(n,r.document),u=r.readTime?Ur(r.readTime):St.min(),d=xn.newNoDocument(s,u);t=new sl([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=Xa(n,r.document);t=new sl([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new BE(r.count||0);t=new aT(r.targetId,u)}}var _;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return St.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?St.min():u.readTime?Ur(u.readTime):St.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=up(this.It),t.addTarget=function(s,u){let d;const g=u.target;return d=Lv(g)?{documents:yT(s,g)}:{query:WE(s,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Qv(s,u.resumeToken):u.snapshotVersion.compareTo(St.min())>0&&(d.readTime=th(s,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function vT(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=up(this.It),t.removeTarget=e,this.Bo(t)}}class eP extends yM{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function xx(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,s){let u=Ur(r.updateTime?r.updateTime:s);return u.isEqual(St.min())&&(u=Ur(s)),new zv(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Zo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=up(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>cp(this.It,r))};this.Bo(t)}}class tP extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new ke(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(pe.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ke(pe.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class rP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(gr(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class iP{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(g=>{r.enqueueAndForget((0,ve.Z)(function*(){var _;ul(d)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ve.Z)(function*(b){const S=Ke(b);S._u.add(4),yield Bm(S),S.gu.set("Unknown"),S._u.delete(4),yield f0(S)}),function(b){return _.apply(this,arguments)})(d))}))}),this.gu=new rP(r,s)}}function f0(n){return jT.apply(this,arguments)}function jT(){return jT=(0,ve.Z)(function*(n){if(ul(n))for(const e of n.wu)yield e(!0)}),jT.apply(this,arguments)}function Bm(n){return $T.apply(this,arguments)}function $T(){return $T=(0,ve.Z)(function*(n){for(const e of n.wu)yield e(!1)}),$T.apply(this,arguments)}function ub(n,e){const t=Ke(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),zT(t)?GT(t):$m(t).ko()&&HT(t,e))}function p0(n,e){const t=Ke(n),r=$m(t);t.du.delete(e),r.ko()&&_M(t,e),0===t.du.size&&(r.ko()?r.Fo():ul(t)&&t.gu.set("Unknown"))}function HT(n,e){n.yu.Mt(e.targetId),$m(n).zo(e)}function _M(n,e){n.yu.Mt(e),$m(n).Ho(e)}function GT(n){n.yu=new Ax({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),$m(n).start(),n.gu.uu()}function zT(n){return ul(n)&&!$m(n).No()&&n.du.size>0}function ul(n){return 0===Ke(n)._u.size}function vM(n){n.yu=void 0}function sP(n){return qT.apply(this,arguments)}function qT(){return qT=(0,ve.Z)(function*(n){n.du.forEach((e,t)=>{HT(n,e)})}),qT.apply(this,arguments)}function oP(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ve.Z)(function*(n,e){vM(n),zT(n)?(n.gu.hu(e),GT(n)):n.gu.set("Unknown")}),ZT.apply(this,arguments)}function aP(n,e,t){return WT.apply(this,arguments)}function WT(){return WT=(0,ve.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof uT&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(s,u){const d=u.cause;for(const g of u.targetIds)s.du.has(g)&&(yield s.remoteSyncer.rejectListen(g,d),s.du.delete(g),s.yu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield cb(n,r)}else if(e instanceof sl?n.yu.Gt(e):e instanceof aT?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(St.min()))try{const r=yield aM(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.yu.te(u);return d.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const b=s.du.get(_);b&&s.du.set(_,b.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const _=s.du.get(g);if(!_)return;s.du.set(g,_.withResumeToken(Vr.EMPTY_BYTE_STRING,_.snapshotVersion)),_M(s,g);const b=new nh(_.target,g,1,_.sequenceNumber);HT(s,b)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield cb(n,r)}var r}),WT.apply(this,arguments)}function cb(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,ve.Z)(function*(n,e,t){if(!Jo(e))throw e;n._u.add(1),yield Bm(n),n.gu.set("Offline"),t||(t=()=>aM(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield f0(n)}))}),KT.apply(this,arguments)}function wM(n,e){return e().catch(t=>cb(n,t,e))}function jm(n){return YT.apply(this,arguments)}function YT(){return YT=(0,ve.Z)(function*(n){const e=Ke(n),t=sh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;uP(e);)try{const s=yield q1(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,cP(e,s)}catch(s){yield cb(e,s)}CM(e)&&EM(e)}),YT.apply(this,arguments)}function uP(n){return ul(n)&&n.fu.length<10}function cP(n,e){n.fu.push(e);const t=sh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function CM(n){return ul(n)&&!sh(n).No()&&n.fu.length>0}function EM(n){sh(n).start()}function lP(n){return QT.apply(this,arguments)}function QT(){return QT=(0,ve.Z)(function*(n){sh(n).eu()}),QT.apply(this,arguments)}function dP(n){return JT.apply(this,arguments)}function JT(){return JT=(0,ve.Z)(function*(n){const e=sh(n);for(const t of n.fu)e.Xo(t.mutations)}),JT.apply(this,arguments)}function hP(n,e,t){return XT.apply(this,arguments)}function XT(){return XT=(0,ve.Z)(function*(n,e,t){const r=n.fu.shift(),s=CT.from(r,e,t);yield wM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield jm(n)}),XT.apply(this,arguments)}function fP(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,ve.Z)(function*(n,e){var t;e&&sh(n).Yo&&(yield(t=(0,ve.Z)(function*(r,s){if(jE(u=s.code)&&u!==pe.ABORTED){const d=r.fu.shift();sh(r).Mo(),yield wM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield jm(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),CM(n)&&EM(n)}),eS.apply(this,arguments)}function bM(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,ve.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=ul(t);t._u.add(3),yield Bm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield f0(t)}),tS.apply(this,arguments)}function nS(n,e){return rS.apply(this,arguments)}function rS(){return rS=(0,ve.Z)(function*(n,e){const t=Ke(n);e?(t._u.delete(2),yield f0(t)):e||(t._u.add(2),yield Bm(t),t.gu.set("Unknown"))}),rS.apply(this,arguments)}function $m(n){return n.pu||(n.pu=function(e,t,r){const s=Ke(e);return s.su(),new X1(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:sP.bind(null,n),Zr:oP.bind(null,n),Wo:aP.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.pu.Mo(),zT(n)?GT(n):n.gu.set("Unknown")):(yield n.pu.stop(),vM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function sh(n){return n.Iu||(n.Iu=function(e,t,r){const s=Ke(e);return s.su(),new eP(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:lP.bind(null,n),Zr:fP.bind(null,n),tu:dP.bind(null,n),Zo:hP.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Iu.Mo(),yield jm(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class iS{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,g=new iS(e,t,d,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(n,e){if(gr("AsyncQueue",`${e}: ${n}`),Jo(n))return new ke(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Gm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=op(),this.sortedSet=new mr(this.comparator)}static emptySet(e){return new Gm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Gm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class IM{constructor(){this.Tu=new mr(qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):st():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class zm{constructor(e,t,r,s,u,d,g,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new zm(e,t,Gm.emptySet(t),d,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class pP{constructor(){this.Au=void 0,this.listeners=[]}}class gP{constructor(){this.queries=new tl(e=>PE(e),Kd),this.onlineState="Unknown",this.Ru=new Set}}function sS(n,e){return oS.apply(this,arguments)}function oS(){return oS=(0,ve.Z)(function*(n,e){const t=Ke(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new pP),s)try{u.Au=yield t.onListen(r)}catch(d){const g=Hm(d,`Initialization of query '${Tm(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&cS(t)}),oS.apply(this,arguments)}function aS(n,e){return uS.apply(this,arguments)}function uS(){return uS=(0,ve.Z)(function*(n,e){const t=Ke(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),uS.apply(this,arguments)}function mP(n,e){const t=Ke(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const g of d.listeners)g.Pu(s)&&(r=!0);d.Au=s}}r&&cS(t)}function yP(n,e,t){const r=Ke(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function cS(n){n.Ru.forEach(e=>{e.next()})}class lS{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new zm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=zm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class _P{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class DM{constructor(e){this.It=e}Ji(e){return Xa(this.It,e)}Yi(e){return e.metadata.exists?pT(this.It,e.document,!1):xn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ur(e)}}class vP{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=tn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new DM(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const d of s.metadata.queries){const g=(t.get(d)||jt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function Z1(n,e,t,r){return NT.apply(this,arguments)}(e.localStore,new DM(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield W1(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function TM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class SM{constructor(e){this.key=e}}class AM{constructor(e){this.key=e}}class xM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jt(),this.mutatedKeys=jt(),this.Gu=jv(e),this.Qu=new Gm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new IM,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,P)=>{const $=s.get(S),Z=Sm(this.query,P)?P:null,re=!!$&&this.mutatedKeys.has($.key),Re=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ue=!1;$&&Z?$.data.isEqual(Z.data)?re!==Re&&(r.track({type:3,doc:Z}),Ue=!0):this.Hu($,Z)||(r.track({type:2,doc:Z}),Ue=!0,(_&&this.Gu(Z,_)>0||b&&this.Gu(Z,b)<0)&&(g=!0)):!$&&Z?(r.track({type:0,doc:Z}),Ue=!0):$&&!Z&&(r.track({type:1,doc:$}),Ue=!0,(_||b)&&(g=!0)),Ue&&(Z?(d=d.add(Z),u=Re?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:d,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((b,S)=>function(P,$){const Z=re=>{switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return Z(P)-Z($)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const d=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,_=g!==this.qu;return this.qu=g,0!==u.length||_?{snapshot:new zm(this.query,e.Qu,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new IM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new AM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new SM(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return zm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class wP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CP{constructor(e){this.key=e,this.nc=!1}}class EP{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new tl(g=>PE(g),Kd),this.rc=new Map,this.oc=new Set,this.uc=new mr(qe.comparator),this.cc=new Map,this.ac=new TT,this.hc={},this.lc=new Map,this.fc=wp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function bP(n,e){return dS.apply(this,arguments)}function dS(){return dS=(0,ve.Z)(function*(n,e){const t=kS(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const d=yield Vm(t.localStore,ei(e));t.isPrimaryClient&&ub(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield hS(t,e,r,"current"===g,d.resumeToken)}return s}),dS.apply(this,arguments)}function hS(n,e,t,r,s){return fS.apply(this,arguments)}function fS(){return fS=(0,ve.Z)(function*(n,e,t,r,s){n._c=(P,$,Z)=>{return(re=(0,ve.Z)(function*(Re,Ue,ut,Ot){let Vt=Ue.view.Wu(ut);Vt.$i&&(Vt=yield ib(Re.localStore,Ue.query,!1).then(({documents:Yt})=>Ue.view.Wu(Yt,Vt)));const Ut=Ot&&Ot.targetChanges.get(Ue.targetId),$t=Ue.view.applyChanges(Vt,Re.isPrimaryClient,Ut);return bS(Re,Ue.targetId,$t.Xu),$t.snapshot}),function(Re,Ue,ut,Ot){return re.apply(this,arguments)})(n,P,$,Z);var re};const u=yield ib(n.localStore,e,!0),d=new xM(e,u.Hi),g=d.Wu(u.documents),_=il.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=d.applyChanges(g,n.isPrimaryClient,_);bS(n,t,b.Xu);const S=new wP(e,t,d);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),fS.apply(this,arguments)}function IP(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,ve.Z)(function*(n,e){const t=Ke(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!Kd(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Um(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),p0(t.remoteStore,r.targetId),qm(t,r.targetId)}).catch(Mu))):(qm(t,r.targetId),yield Um(t.localStore,r.targetId,!0))}),pS.apply(this,arguments)}function gS(){return gS=(0,ve.Z)(function*(n,e,t){const r=RS(n);try{const s=yield function(u,d){const g=Ke(u),_=Rn.now(),b=d.reduce(($,Z)=>$.add(Z.key),jt());let S,P;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Z=ss(),re=jt();return g.Gi.getEntries($,b).next(Re=>{Z=Re,Z.forEach((Ue,ut)=>{ut.isValidDocument()||(re=re.add(Ue))})}).next(()=>g.localDocuments.getOverlayedDocuments($,Z)).next(Re=>{S=Re;const Ue=[];for(const ut of d){const Ot=xm(ut,S.get(ut.key).overlayedDocument);null!=Ot&&Ue.push(new ea(ut.key,Ot,Fv(Ot.value.mapValue),Un.exists(!0)))}return g.mutationQueue.addMutationBatch($,_,Ue,d)}).next(Re=>{P=Re;const Ue=Re.applyToLocalDocumentSet(S,re);return g.documentOverlayCache.saveOverlays($,Re.batchId,Ue)})}).then(()=>({batchId:P.batchId,changes:ap(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,g){let _=u.hc[u.currentUser.toKey()];_||(_=new mr(Nt)),_=_.insert(d,g),u.hc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield cl(r,s.changes),yield jm(r.remoteStore)}catch(s){const u=Hm(s,"Failed to persist write");t.reject(u)}}),gS.apply(this,arguments)}function MM(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,ve.Z)(function*(n,e){const t=Ke(n);try{const r=yield z1(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.cc.get(u);d&&(It(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.nc=!0:s.modifiedDocuments.size>0?It(d.nc):s.removedDocuments.size>0&&(It(d.nc),d.nc=!1))}),yield cl(t,r,e)}catch(r){yield Mu(r)}}),mS.apply(this,arguments)}function OM(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,d)=>{const g=d.view.bu(e);g.snapshot&&s.push(g.snapshot)}),function(u,d){const g=Ke(u);g.onlineState=d;let _=!1;g.queries.forEach((b,S)=>{for(const P of S.listeners)P.bu(d)&&(_=!0)}),_&&cS(g)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TP(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,ve.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let d=new mr(qe.comparator);d=d.insert(u,xn.newNoDocument(u,St.min()));const g=jt().add(u),_=new rl(St.min(),new Map,new En(Nt),d,g);yield MM(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),IS(r)}else yield Um(r.localStore,e,!1).then(()=>qm(r,e,t)).catch(Mu)}),yS.apply(this,arguments)}function SP(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,ve.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const s=yield G1(t.localStore,e);ES(t,r,null),CS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cl(t,s)}catch(s){yield Mu(s)}}),_S.apply(this,arguments)}function AP(n,e,t){return vS.apply(this,arguments)}function vS(){return vS=(0,ve.Z)(function*(n,e,t){const r=Ke(n);try{const s=yield function(u,d){const g=Ke(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return g.mutationQueue.lookupMutationBatch(_,d).next(S=>(It(null!==S),b=S.keys(),g.mutationQueue.removeMutationBatch(_,S))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,b,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>g.localDocuments.getDocuments(_,b))})}(r.localStore,e);ES(r,e,t),CS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cl(r,s)}catch(s){yield Mu(s)}}),vS.apply(this,arguments)}function wS(){return wS=(0,ve.Z)(function*(n,e){const t=Ke(n);ul(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ke(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=Hm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),wS.apply(this,arguments)}function CS(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function ES(n,e,t){const r=Ke(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function qm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||PM(n,r)})}function PM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(p0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),IS(n))}function bS(n,e,t){for(const r of t)r instanceof SM?(n.ac.addReference(r.key,e),MP(n,r)):r instanceof AM?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||PM(n,r.key)):st()}function MP(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),IS(n))}function IS(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(tn.fromString(e)),r=n.fc.next();n.cc.set(r,new CP(t)),n.uc=n.uc.insert(t,r),ub(n.remoteStore,new nh(ei(Zd(t.path)),r,2,Di.at))}}function cl(n,e,t){return DS.apply(this,arguments)}function DS(){return DS=(0,ve.Z)(function*(n,e,t){const r=Ke(n),s=[],u=[],d=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,_)=>{d.push(r._c(_,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const S=MT.Ci(_.targetId,b);u.push(S)}}))}),yield Promise.all(d),r.sc.Wo(s),yield(g=(0,ve.Z)(function*(_,b){const S=Ke(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>ce.forEach(b,$=>ce.forEach($.Si,Z=>S.persistence.referenceDelegate.addReference(P,$.targetId,Z)).next(()=>ce.forEach($.Di,Z=>S.persistence.referenceDelegate.removeReference(P,$.targetId,Z)))))}catch(P){if(!Jo(P))throw P;Ve("LocalStore","Failed to update sequence numbers: "+P)}for(const P of b){const $=P.targetId;if(!P.fromCache){const Z=S.Ui.get($),Re=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);S.Ui=S.Ui.insert($,Re)}}}),function(_,b){return g.apply(this,arguments)})(r.localStore,u))}),DS.apply(this,arguments)}function OP(n,e){return TS.apply(this,arguments)}function TS(){return TS=(0,ve.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield oM(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(d=>{d.forEach(g=>{g.reject(new ke(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cl(t,r.ji)}var s}),TS.apply(this,arguments)}function PP(n,e){const t=Ke(n),r=t.cc.get(e);if(r&&r.nc)return jt().add(r.key);{let s=jt();const u=t.rc.get(e);if(!u)return s;for(const d of u){const g=t.ic.get(d);s=s.unionWith(g.view.ju)}return s}}function NP(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,ve.Z)(function*(n,e){const t=Ke(n),r=yield ib(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&bS(t,e.targetId,s.Xu),s}),SS.apply(this,arguments)}function kP(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,ve.Z)(function*(n,e){const t=Ke(n);return lM(t.localStore,e).then(r=>cl(t,r))}),AS.apply(this,arguments)}function RP(n,e,t,r){return xS.apply(this,arguments)}function xS(){return xS=(0,ve.Z)(function*(n,e,t,r){const s=Ke(n),u=yield function(d,g){const _=Ke(d),b=Ke(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Tn(S,g).next(P=>P?_.localDocuments.getDocuments(S,P):ce.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield jm(s.remoteStore):"acknowledged"===t||"rejected"===t?(ES(s,e,r||null),CS(s,e),g=e,Ke(Ke(s.localStore).mutationQueue).An(g)):st(),yield cl(s,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),xS.apply(this,arguments)}function MS(){return MS=(0,ve.Z)(function*(n,e){const t=Ke(n);if(kS(t),RS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield NM(t,r.toArray());t.dc=!0,yield nS(t.remoteStore,!0);for(const u of s)ub(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(qm(t,d),Um(t.localStore,d,!0))),p0(t.remoteStore,d)}),yield s,yield NM(t,r),function(u){const d=Ke(u);d.cc.forEach((g,_)=>{p0(d.remoteStore,_)}),d.ac.fs(),d.cc=new Map,d.uc=new mr(qe.comparator)}(t),t.dc=!1,yield nS(t.remoteStore,!1)}}),MS.apply(this,arguments)}function NM(n,e,t){return OS.apply(this,arguments)}function OS(){return OS=(0,ve.Z)(function*(n,e,t){const r=Ke(n),s=[],u=[];for(const d of e){let g;const _=r.rc.get(d);if(_&&0!==_.length){g=yield Vm(r.localStore,ei(_[0]));for(const b of _){const S=r.ic.get(b),P=yield NP(r,S);P.snapshot&&u.push(P.snapshot)}}else{const b=yield cM(r.localStore,d);g=yield Vm(r.localStore,b),yield hS(r,kM(b),d,!1,g.resumeToken)}s.push(g)}return r.sc.Wo(u),s}),OS.apply(this,arguments)}function kM(n){return Dm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function LP(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).vi()}function VP(n,e,t,r){return PS.apply(this,arguments)}function PS(){return PS=(0,ve.Z)(function*(n,e,t,r){const s=Ke(n);if(s.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield lM(s.localStore,NE(u[0])),g=rl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vr.EMPTY_BYTE_STRING);yield cl(s,d,g);break}case"rejected":yield Um(s.localStore,e,!0),qm(s,e,r);break;default:st()}}),PS.apply(this,arguments)}function UP(n,e,t){return NS.apply(this,arguments)}function NS(){return NS=(0,ve.Z)(function*(n,e,t){const r=kS(n);if(r.dc){for(const s of e){if(r.rc.has(s)){Ve("SyncEngine","Adding an already active target "+s);continue}const u=yield cM(r.localStore,s),d=yield Vm(r.localStore,u);yield hS(r,kM(u),d.targetId,!1,d.resumeToken),ub(r.remoteStore,d)}for(const s of t)r.rc.has(s)&&(yield Um(r.localStore,s,!1).then(()=>{p0(r.remoteStore,s),qm(r,s)}).catch(Mu))}}),NS.apply(this,arguments)}function kS(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TP.bind(null,e),e.sc.Wo=mP.bind(null,e.eventManager),e.sc.wc=yP.bind(null,e.eventManager),e}function RS(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AP.bind(null,e),e}class RM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.It=h0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return sM(this.persistence,new iM,e.initialUser,this.It)}yc(e){return new nM(nb.Bs,this.It)}gc(e){return new pM}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FM extends RM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield RS(r.Ac.syncEngine),yield jm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return sM(this.persistence,new iM,e.initialUser,this.It)}Tc(e,t){return new x1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new xv(t,this.persistence);return new $D(e.asyncQueue,r)}yc(e){const t=xT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Os.withCacheSize(this.cacheSizeBytes):Os.DEFAULT;return new AT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mM(),ab(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new pM}}class jP extends FM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof VT&&(r.sharedClientState.syncEngine={Fr:RP.bind(null,s),$r:VP.bind(null,s),Br:UP.bind(null,s),vi:LP.bind(null,s),Mr:kP.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ve.Z)(function*(d){yield function FP(n,e){return MS.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=mM();if(!VT.C(t))throw new ke(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=xT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new VT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class FS{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>OM(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=OP.bind(null,r.syncEngine),yield nS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gP}createDatastore(e){const t=h0(e.databaseInfo.databaseId),r=new J1(e.databaseInfo);return new tP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>OM(this.syncEngine,g,0),d=gM.C()?new gM:new K1,new iP(t,r,s,u,d);var t,r,s,u,d}createSyncEngine(e,t){return function(r,s,u,d,g,_,b){const S=new EP(r,s,u,d,g,_);return b&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Ke(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Bm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function LS(n,e,t){if(!t)throw new ke(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LM(n,e,t,r){if(!0===e&&!0===r)throw new ke(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VM(n){if(!qe.isDocumentKey(n))throw new ke(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UM(n){if(qe.isDocumentKey(n))throw new ke(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lb(n);throw new ke(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BM(n,e){if(e<=0)throw new ke(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const jM=new Map;class $M{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $M({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $M(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new LD;switch(t.type){case"gapi":return new Dv(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ke(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jM.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),jM.delete(e),t.terminate())}(this),Promise.resolve()}}class ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class Lu extends Ui{constructor(e,t,r){super(e,t,Zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new qe(e))}withConverter(e){return new Lu(this.firestore,e,this._path)}}function GM(n,e,...t){if(n=(0,on.m9)(n),LS("collection","path",e),n instanceof g0){const r=tn.fromString(e,...t);return UM(r),new Lu(n,null,r)}{if(!(n instanceof ir||n instanceof Lu))throw new ke(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return UM(r),new Lu(n.firestore,null,r)}}function db(n,e,...t){if(n=(0,on.m9)(n),1===arguments.length&&(e=gm.R()),LS("doc","path",e),n instanceof g0){const r=tn.fromString(e,...t);return VM(r),new ir(n,null,new qe(r))}{if(!(n instanceof ir||n instanceof Lu))throw new ke(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return VM(r),new ir(n.firestore,n instanceof Lu?n.converter:null,new qe(r))}}function zM(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),(n instanceof ir||n instanceof Lu)&&(e instanceof ir||e instanceof Lu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function VS(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&Kd(n._query,e._query)&&n.converter===e.converter}function qM(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HP{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new lr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new _P(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ve.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ve.Z)(function*(u,d){const g=Ke(u),_=up(g.It)+"/documents",b={documents:d.map(Z=>ol(g.It,Z))},S=yield g._o("BatchGetDocuments",_,b,d.length),P=new Map;S.forEach(Z=>{const re=function gT(n,e){return"found"in e?function(t,r){It(!!r.found);const s=Xa(t,r.found.name),u=Ur(r.found.updateTime),d=new vr({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(s,u,d)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const s=Xa(t,r.missing),u=Ur(r.readTime);return xn.newNoDocument(s,u)}(n,e):st()}(g.It,Z);P.set(re.key.toString(),re)});const $=[];return d.forEach(Z=>{const re=P.get(Z.toString());It(!!re),$.push(re)}),$}),function(u,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=qe.fromPath(s);e.mutations.push(new UE(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(s,u){const d=Ke(s),g=up(d.It)+"/documents",_={writes:u.map(b=>cp(d.It,b))};yield d.ao("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(St.min())?Un.exists(!1):Un.updateTime(t):Un.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new ke(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Un.updateTime(t)}return Un.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ZP{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new UT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ve.Z)(function*(){const t=new qP(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Hd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!jE(t)}return!1}}class WP{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=xr.UNAUTHENTICATED,this.clientId=gm.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(g){Ve("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Hm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function ZM(n,e){return US.apply(this,arguments)}function US(){return US=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ve.Z)(function*(u){r.isEqual(u)||(yield oM(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),US.apply(this,arguments)}function WM(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield jS(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>bM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>bM(e.remoteStore,u)),n.onlineComponents=e}),BS.apply(this,arguments)}function jS(n){return $S.apply(this,arguments)}function $S(){return $S=(0,ve.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield ZM(n,new RM)),n.offlineComponents}),$S.apply(this,arguments)}function fb(n){return HS.apply(this,arguments)}function HS(){return HS=(0,ve.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield WM(n,new FS)),n.onlineComponents}),HS.apply(this,arguments)}function KM(n){return jS(n).then(e=>e.persistence)}function pb(n){return jS(n).then(e=>e.localStore)}function GS(n){return fb(n).then(e=>e.remoteStore)}function zS(n){return fb(n).then(e=>e.syncEngine)}function Zm(n){return qS.apply(this,arguments)}function qS(){return qS=(0,ve.Z)(function*(n){const e=yield fb(n),t=e.eventManager;return t.onListen=bP.bind(null,e.syncEngine),t.onUnlisten=IP.bind(null,e.syncEngine),t}),qS.apply(this,arguments)}function QM(n,e,t={}){const r=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(s,u,d,g,_){const b=new hb({next:P=>{u.enqueueAndForget(()=>aS(s,S));const $=P.docs.has(d);!$&&P.fromCache?_.reject(new ke(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&P.fromCache&&g&&"server"===g.source?_.reject(new ke(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(P)},error:P=>_.reject(P)}),S=new lS(Zd(d.path),b,{includeMetadataChanges:!0,Nu:!0});return sS(s,S)}(yield Zm(n),n.asyncQueue,e,t,r)})),r.promise}function JM(n,e,t={}){const r=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(s,u,d,g,_){const b=new hb({next:P=>{u.enqueueAndForget(()=>aS(s,S)),P.fromCache&&"server"===g.source?_.reject(new ke(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(P)},error:P=>_.reject(P)}),S=new lS(d,b,{includeMetadataChanges:!0,Nu:!0});return sS(s,S)}(yield Zm(n),n.asyncQueue,e,t,r)})),r.promise}class nN{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new UT(this,"async_queue_retry"),this.Wc=()=>{const t=ab();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ab();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=ab();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new lr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Jo(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,gr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=iS.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(s),s}zc(){this.Kc&&st()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function ZS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class rN{constructor(){this._progressObserver={},this._taskCompletionResolver=new lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class sr extends g0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new nN,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XM(this),this._firestoreClient.terminate()}}function Mr(n){return n._firestoreClient||XM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new GD(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new WP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function eO(n,e,t){const r=new lr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield ZM(n,t),yield WM(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(d=u).name?d.code===pe.FAILED_PRECONDITION||d.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;qa("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function tO(n){if(n._initialized||n._terminated)throw new ke(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vu(Vr.fromBase64String(e))}catch(t){throw new ke(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vu(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ll{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ep{constructor(e){this._methodName=e}}class gb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const fN=/^__.*__$/;class pN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ea(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xd(e,this.data,t,this.fieldTransforms)}}class nO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ea(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class mb{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new mb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return vb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(rO(this.sa)&&fN.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class gN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||h0(e)}da(e,t,r,s=!1){return new mb({sa:e,methodName:t,fa:r,path:rr.emptyPath(),oa:!1,la:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function bp(n){const e=n._freezeSettings(),t=h0(n._databaseId);return new gN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yb(n,e,t,r,s,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,s);QS("Data must be an object, but it was:",d,r);const g=oO(r,d);let _,b;if(u.merge)_=new Vi(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const P of u.mergeFields){const $=JS(e,P,t);if(!d.contains($))throw new ke(pe.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);uO(S,$)||S.push($)}_=new Vi(S),b=d.fieldTransforms.filter(P=>_.covers(P.field))}else _=null,b=d.fieldTransforms;return new pN(new vr(g),_,b)}class m0 extends Ep{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof m0}}function iO(n,e,t){return new mb({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class WS extends Ep{_toFieldTransform(e){return new Jd(e.path,new Qd)}isEqual(e){return e instanceof WS}}class mN extends Ep{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=iO(this,e,!0),r=this._a.map(u=>Ip(u,t)),s=new Xc(r);return new Jd(e.path,s)}isEqual(e){return this===e}}class yN extends Ep{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=iO(this,e,!0),r=this._a.map(u=>Ip(u,t)),s=new el(r);return new Jd(e.path,s)}isEqual(e){return this===e}}class _N extends Ep{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new np(e.It,$v(e.It,this.wa));return new Jd(e.path,t)}isEqual(e){return this===e}}function KS(n,e,t,r){const s=n.da(1,e,t);QS("Data must be an object, but it was:",s,r);const u=[],d=vr.empty();Xo(r,(_,b)=>{const S=_b(e,_,t);b=(0,on.m9)(b);const P=s.ca(S);if(b instanceof m0)u.push(S);else{const $=Ip(b,P);null!=$&&(u.push(S),d.set(S,$))}});const g=new Vi(u);return new nO(d,g,s.fieldTransforms)}function YS(n,e,t,r,s,u){const d=n.da(1,e,t),g=[JS(e,r,t)],_=[s];if(u.length%2!=0)throw new ke(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(JS(e,u[$])),_.push(u[$+1]);const b=[],S=vr.empty();for(let $=g.length-1;$>=0;--$)if(!uO(b,g[$])){const Z=g[$];let re=_[$];re=(0,on.m9)(re);const Re=d.ca(Z);if(re instanceof m0)b.push(Z);else{const Ue=Ip(re,Re);null!=Ue&&(b.push(Z),S.set(Z,Ue))}}const P=new Vi(b);return new nO(S,P,d.fieldTransforms)}function sO(n,e,t,r=!1){return Ip(t,n.da(r?4:3,e))}function Ip(n,e){if(aO(n=(0,on.m9)(n)))return QS("Unsupported field value:",e,n),oO(n,e);if(n instanceof Ep)return function(t,r){if(!rO(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const d of t){let g=Ip(d,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,on.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $v(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Rn.fromDate(t);return{timestampValue:th(r.It,s)}}if(t instanceof Rn){const s=new Rn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:th(r.It,s)}}if(t instanceof gb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vu)return{bytesValue:Qv(r.It,t._byteString)};if(t instanceof ir){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${lb(t)}`)}(n,e)}function oO(n,e){const t={};return vm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xo(n,(r,s)=>{const u=Ip(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function aO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof gb||n instanceof Vu||n instanceof ir||n instanceof Ep)}function QS(n,e,t){if(!aO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=lb(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function JS(n,e,t){if((e=(0,on.m9)(e))instanceof ll)return e._internalPath;if("string"==typeof e)return _b(n,e);throw vb("Field path arguments must be of type string or ",n,!1,void 0,t)}const vN=new RegExp("[~\\*/\\[\\]]");function _b(n,e,t){if(e.search(vN)>=0)throw vb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ll(...e.split("."))._internalPath}catch{throw vb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vb(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${r}`),d&&(_+=` in document ${s}`),_+=")"),new ke(pe.INVALID_ARGUMENT,g+n+_)}function uO(n,e){return n.some(t=>t.isEqual(e))}class y0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wN extends y0{data(){return super.data()}}function wb(n,e){return"string"==typeof e?_b(n,e):e instanceof ll?e._internalPath:e._delegate._internalPath}function cO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _0{}function oh(n,...e){for(const t of e)n=t._apply(n);return n}class CN extends _0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=bp(e.firestore),r=function(s,u,d,g,_,b,S){let P;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new ke(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){gO(S,b);const Z=[];for(const re of S)Z.push(pO(g,s,re));P={arrayValue:{values:Z}}}else P=pO(g,s,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||gO(S,b),P=sO(d,"where",S,"in"===b||"not-in"===b);const $=wr.create(_,b,P);return function(Z,re){if(re.dt()){const Ue=ep(Z);if(null!==Ue&&!Ue.isEqual(re.field))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${re.field.toString()}'`);const ut=Uv(Z);null!==ut&&mO(0,re.field,ut)}const Re=function(Ue,ut){for(const Ot of Ue.filters)if(ut.indexOf(Ot.op)>=0)return Ot.op;return null}(Z,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(re.op));if(null!==Re)throw new ke(pe.INVALID_ARGUMENT,Re===re.op?`Invalid query. You cannot use more than one '${re.op.toString()}' filter.`:`Invalid query. You cannot use '${re.op.toString()}' filters with '${Re.toString()}' filters.`)}(s,$),$}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ui(e.firestore,e.converter,function(s,u){const d=s.filters.concat([u]);return new Ya(s.path,s.collectionGroup,s.explicitOrderBy.slice(),d,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class bN extends _0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new ke(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Jc(s,u);return function(g,_){if(null===Uv(g)){const b=ep(g);null!==b&&mO(0,b,_.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Ui(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Ya(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lO extends _0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ui(e.firestore,e.converter,tp(e._query,this.Ia,this.Ta))}}class dO extends _0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=fO(e,this.type,this.Ea,this.Aa);return new Ui(e.firestore,e.converter,(s=t,new Ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class hO extends _0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=fO(e,this.type,this.Ea,this.Aa);return new Ui(e.firestore,e.converter,(s=t,new Ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function fO(n,e,t,r){if(t[0]=(0,on.m9)(t[0]),t[0]instanceof y0)return function(s,u,d,g,_){if(!g)throw new ke(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const S of Wd(s))if(S.field.isKeyField())b.push(Nu(u,g.key));else{const P=g.data.field(S.field);if(Pv(P))throw new ke(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const $=S.field.canonicalString();throw new ke(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(P)}return new Ru(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=bp(n.firestore);return function(u,d,g,_,b,S){const P=u.explicitOrderBy;if(b.length>P.length)throw new ke(pe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Z=0;Z<b.length;Z++){const re=b[Z];if(P[Z].field.isKeyField()){if("string"!=typeof re)throw new ke(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof re}`);if(!Bv(u)&&-1!==re.indexOf("/"))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${re}' contains a slash.`);const Re=u.path.child(tn.fromString(re));if(!qe.isDocumentKey(Re))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const Ue=new qe(Re);$.push(Nu(d,Ue))}else{const Re=sO(g,_,re);$.push(Re)}}return new Ru($,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function pO(n,e,t){if("string"==typeof(t=(0,on.m9)(t))){if(""===t)throw new ke(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bv(e)&&-1!==t.indexOf("/"))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!qe.isDocumentKey(r))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nu(n,new qe(r))}if(t instanceof ir)return Nu(n,t._key);throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lb(t)}.`)}function gO(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mO(n,e,t){if(!t.isEqual(e))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class XS{convertValue(e,t="none"){switch(Pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Xo(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new gb(dr(e.latitude),dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Nv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($d(e));default:return null}}convertTimestamp(e){const t=Yc(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);It(a(r));const s=new Za(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return s.isEqual(t)||gr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Cb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ON extends XS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}class Dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dl extends y0{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new v0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class v0 extends dl{data(e={}){return super.data(e)}}class ah{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Dp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new v0(this._firestore,this._userDataWriter,r.key,r,new Dp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new v0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Dp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const g=new v0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Dp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==d.type&&(_=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:PN(d.type),doc:g,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function yO(n,e){return n instanceof dl&&e instanceof dl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ah&&e instanceof ah&&n._firestore===e._firestore&&VS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class uh extends XS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}function _O(n,e,t){n=rn(n,ir);const r=rn(n.firestore,sr),s=Cb(n.converter,e,t);return Wm(r,[yb(bp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Un.none())])}function vO(n,e,t,...r){n=rn(n,ir);const s=rn(n.firestore,sr),u=bp(s);let d;return d="string"==typeof(e=(0,on.m9)(e))||e instanceof ll?YS(u,"updateDoc",n._key,e,t,r):KS(u,"updateDoc",n._key,e),Wm(s,[d.toMutation(n._key,Un.exists(!0))])}function wO(n,...e){var t,r,s;n=(0,on.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||ZS(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(ZS(e[d])){const P=e[d];e[d]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[d+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[d+2]=null===(s=P.complete)||void 0===s?void 0:s.bind(P)}let _,b,S;if(n instanceof ir)b=rn(n.firestore,sr),S=Zd(n._key.path),_={next:P=>{e[d]&&e[d](eA(b,n,P))},error:e[d+1],complete:e[d+2]};else{const P=rn(n,Ui);b=rn(P.firestore,sr),S=P._query;const $=new uh(b);_={next:Z=>{e[d]&&e[d](new ah(b,$,P,Z))},error:e[d+1],complete:e[d+2]},cO(n._query)}return function(P,$,Z,re){const Re=new hb(re),Ue=new lS($,Re,Z);return P.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return sS(yield Zm(P),Ue)})),()=>{Re.bc(),P.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return aS(yield Zm(P),Ue)}))}}(Mr(b),S,g,_)}function Wm(n,e){return function(t,r){const s=new lr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function DP(n,e,t){return gS.apply(this,arguments)}(yield zS(t),r,s)})),s.promise}(Mr(n),e)}function eA(n,e,t){const r=t.docs.get(e._key),s=new uh(n);return new dl(n,s,e._key,r,new Dp(t.hasPendingWrites,t.fromCache),e.converter)}const $N={maxAttempts:5};class CO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bp(e)}set(e,t,r){this._verifyNotCommitted();const s=ch(e,this._firestore),u=Cb(s.converter,t,r),d=yb(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,Un.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=ch(e,this._firestore);let d;return d="string"==typeof(t=(0,on.m9)(t))||t instanceof ll?YS(this._dataReader,"WriteBatch.update",u._key,t,r,s):KS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Un.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ch(e,this._firestore);return this._mutations=this._mutations.concat(new sp(t._key,Un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ch(n,e){if((n=(0,on.m9)(n)).firestore!==e)throw new ke(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class HN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bp(e)}get(e){const t=ch(e,this._firestore),r=new ON(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return st();const u=s[0];if(u.isFoundDocument())return new y0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new y0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const s=ch(e,this._firestore),u=Cb(s.converter,t,r),d=yb(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const u=ch(e,this._firestore);let d;return d="string"==typeof(t=(0,on.m9)(t))||t instanceof ll?YS(this._dataReader,"Transaction.update",u._key,t,r,s):KS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=ch(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ch(e,this._firestore),r=new uh(this._firestore);return super.get(e).then(s=>new dl(this._firestore,r,t._key,s._document,new Dp(!1,!1),t.converter))}}function tA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bO(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function IO(){if(!function Ov(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){qc=Iu.SDK_VERSION,(0,Iu._registerComponent)(new _f.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),d=new sr(new yE(t.getProvider("auth-internal")),new UD(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ke(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,Iu.registerVersion)(RD,"3.7.3",n),(0,Iu.registerVersion)(RD,"3.7.3","esm2017")}();class w0{constructor(e){this._delegate=e}static fromBase64String(e){return IO(),new w0(Vu.fromBase64String(e))}static fromUint8Array(e){return bO(),new w0(Vu.fromUint8Array(e))}toBase64(){return IO(),this._delegate.toBase64()}toUint8Array(){return bO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function nA(n){return function JN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class XN{enableIndexedDbPersistence(e,t){return function sN(n,e){tO(n=rn(n,sr));const t=Mr(n),r=n._freezeSettings(),s=new FS;return eO(t,s,new FM(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function oN(n){tO(n=rn(n,sr));const e=Mr(n),t=n._freezeSettings(),r=new FS;return eO(e,r,new jP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function aN(n){if(n._initialized&&!n._terminated)throw new ke(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!xs.C())return Promise.resolve();const s=r+"main";yield xs.delete(s)}),function(r){return t.apply(this,arguments)})(xT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class DO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function HM(n,e,t,r={}){var s;const u=(n=rn(n,g0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&qa("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=xr.MOCK_USER;else{d=(0,on.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ke(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new xr(_)}n._authCredentials=new VD(new qf(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function cN(n){return function KP(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield KM(n),t=yield GS(n);return e.setNetworkEnabled(!0),function(r){const s=Ke(r);return s._u.delete(0),f0(s)}(t)}))}(Mr(n=rn(n,sr)))}(this._delegate)}disableNetwork(){return function lN(n){return function YP(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield KM(n),t=yield GS(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(s){const u=Ke(s);u._u.add(0),yield Bm(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Mr(n=rn(n,sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function uN(n){return function(e){const t=new lr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function xP(n,e){return wS.apply(this,arguments)}(yield zS(e),t)})),t.promise}(Mr(n=rn(n,sr)))}(this._delegate)}onSnapshotsInSync(e){return function jN(n,e){return function XP(n,e){const t=new hb(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Zm(n),s=t,Ke(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Zm(n),s=t,void Ke(r).Ru.delete(s);var r,s}))}}(Mr(n=rn(n,sr)),ZS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,GM(this._delegate,e))}catch(t){throw os(t,"collection()","Firestore.collection()")}}doc(e){try{return new na(this,db(this._delegate,e))}catch(t){throw os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,function $P(n,e){if(n=rn(n,g0),LS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new Ya(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function GN(n,e,t){n=rn(n,sr);const r=Object.assign(Object.assign({},$N),t);return function(s){if(s.maxAttempts<1)throw new ke(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,d){const g=new lr;return s.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const _=yield function YM(n){return fb(n).then(e=>e.datastore)}(s);new ZP(s.asyncQueue,_,d,u,g).run()})),g.promise}(Mr(n),s=>e(new HN(n,s)),r)}(this._delegate,t=>e(new TO(this,t)))}batch(){return Mr(this._delegate),new SO(new CO(this._delegate,e=>Wm(this._delegate,e)))}loadBundle(e){return function dN(n,e){const t=Mr(n=rn(n,sr)),r=new rN;return function eN(n,e,t,r){const s=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return qM(_,b);if(_ instanceof ArrayBuffer)return qM(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new HP(_,d);var _}(t,h0(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function BP(n,e,t){const r=Ke(n);var s;(s=(0,ve.Z)(function*(u,d,g){try{const _=yield d.getMetadata();if(yield function($,Z){const re=Ke($),Re=Ur(Z.createTime);return re.persistence.runTransaction("hasNewerBundle","readonly",Ue=>re.Ns.getBundleMetadata(Ue,Z.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(Re)>=0)}(u.localStore,_))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:($=_).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(TM(_));const b=new vP(_,u.localStore,d.It);let S=yield d.mc();for(;S;){const $=yield b.Fu(S);$&&g._updateProgress($),S=yield d.mc()}const P=yield b.complete();return yield cl(u,P.Lu,void 0),yield function($,Z){const re=Ke($);return re.persistence.runTransaction("Save bundle","readwrite",Re=>re.Ns.saveBundleMetadata(Re,Z))}(u.localStore,_),g._completeWith(P.progress),Promise.resolve(P.Bu)}catch(_){return qa("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var $}),function(u,d,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield zS(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function hN(n,e){return function tN(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const s=Ke(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield pb(n),e)}))}(Mr(n=rn(n,sr)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new as(this,t):null)}}class Eb extends XS{constructor(e){super(),this.firestore=e}convertBytes(e){return new w0(new Vu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return na.forKey(t,this.firestore,null)}}class TO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}get(e){const t=Sp(e);return this._delegate.get(t).then(r=>new C0(this._firestore,new dl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Sp(e);return r?(tA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}}class SO{constructor(e){this._delegate=e}set(e,t,r){const s=Sp(e);return r?(tA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new v0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new E0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Tp(e,new Eb(e),t),s.set(t,u)),u}}Tp.INSTANCES=new WeakMap;class na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new na(t,new ir(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new na(t,new ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,GM(this._delegate,e))}catch(t){throw os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,on.m9)(e))instanceof ir&&zM(this._delegate,e)}set(e,t){t=tA("DocumentReference.set",t);try{return t?_O(this._delegate,e,t):_O(this._delegate,e)}catch(r){throw os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vO(this._delegate,e):vO(this._delegate,e,t,...r)}catch(s){throw os(s,"updateDoc()","DocumentReference.update()")}}delete(){return function UN(n){return Wm(rn(n.firestore,sr),[new sp(n._key,Un.none())])}(this._delegate)}onSnapshot(...e){const t=AO(e),r=xO(e,s=>new C0(this.firestore,new dl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return wO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function kN(n){n=rn(n,ir);const e=rn(n.firestore,sr),t=Mr(e),r=new uh(e);return function QP(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(s,u,d){try{const g=yield function(_,b){const S=Ke(_);return S.persistence.runTransaction("read document","readonly",P=>S.localDocuments.getDocument(P,b))}(s,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new ke(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Hm(g,`Failed to get document '${u} from cache`);d.reject(_)}}),function(s,u,d){return r.apply(this,arguments)})(yield pb(n),e,t);var r})),t.promise}(t,n._key).then(s=>new dl(e,r,n._key,s,new Dp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function RN(n){n=rn(n,ir);const e=rn(n.firestore,sr);return QM(Mr(e),n._key,{source:"server"}).then(t=>eA(e,n,t))}(this._delegate):function NN(n){n=rn(n,ir);const e=rn(n.firestore,sr);return QM(Mr(e),n._key).then(t=>eA(e,n,t))}(this._delegate),t.then(r=>new C0(this.firestore,new dl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new na(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}function os(n,e,t){return n.message=n.message.replace(e,t),n}function AO(n){for(const e of n)if("object"==typeof e&&!nA(e))return e;return{}}function xO(n,e){var t,r;let s;return s=nA(n[0])?n[0]:nA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class C0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yO(this._delegate,e._delegate)}}class E0 extends C0{data(e){const t=this._delegate.data(e);return function zf(n,e){n||st()}(void 0!==t),t}}class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}where(e,t,r){try{return new as(this.firestore,oh(this._delegate,function EN(n,e,t){const r=e,s=wb("where",n);return new CN(s,r,t)}(e,t,r)))}catch(s){throw os(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new as(this.firestore,oh(this._delegate,function IN(n,e="asc"){const t=e,r=wb("orderBy",n);return new bN(r,t)}(e,t)))}catch(r){throw os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new as(this.firestore,oh(this._delegate,function DN(n){return BM("limit",n),new lO("limit",n,"F")}(e)))}catch(t){throw os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new as(this.firestore,oh(this._delegate,function TN(n){return BM("limitToLast",n),new lO("limitToLast",n,"L")}(e)))}catch(t){throw os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new as(this.firestore,oh(this._delegate,function SN(...n){return new dO("startAt",n,!0)}(...e)))}catch(t){throw os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new as(this.firestore,oh(this._delegate,function AN(...n){return new dO("startAfter",n,!1)}(...e)))}catch(t){throw os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new as(this.firestore,oh(this._delegate,function xN(...n){return new hO("endBefore",n,!1)}(...e)))}catch(t){throw os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new as(this.firestore,oh(this._delegate,function MN(...n){return new hO("endAt",n,!0)}(...e)))}catch(t){throw os(t,"endAt()","Query.endAt()")}}isEqual(e){return VS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function LN(n){n=rn(n,Ui);const e=rn(n.firestore,sr),t=Mr(e),r=new uh(e);return function JP(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(s,u,d){try{const g=yield ib(s,u,!0),_=new xM(u,g.Hi),b=_.Wu(g.documents),S=_.applyChanges(b,!1);d.resolve(S.snapshot)}catch(g){const _=Hm(g,`Failed to execute query '${u} against cache`);d.reject(_)}}),function(s,u,d){return r.apply(this,arguments)})(yield pb(n),e,t);var r})),t.promise}(t,n._query).then(s=>new ah(e,r,n,s))}(this._delegate):"server"===e?.source?function VN(n){n=rn(n,Ui);const e=rn(n.firestore,sr),t=Mr(e),r=new uh(e);return JM(t,n._query,{source:"server"}).then(s=>new ah(e,r,n,s))}(this._delegate):function FN(n){n=rn(n,Ui);const e=rn(n.firestore,sr),t=Mr(e),r=new uh(e);return cO(n._query),JM(t,n._query).then(s=>new ah(e,r,n,s))}(this._delegate),t.then(r=>new rA(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=AO(e),r=xO(e,s=>new rA(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return wO(this._delegate,t,r)}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}class tk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new E0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new E0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new E0(this._firestore,r))})}isEqual(e){return yO(this._delegate,e._delegate)}}class Km extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new na(this.firestore,e):null}doc(e){try{return new na(this.firestore,void 0===e?db(this._delegate):db(this._delegate,e))}catch(t){throw os(t,"doc()","CollectionReference.doc()")}}add(e){return function BN(n,e){const t=rn(n.firestore,sr),r=db(n),s=Cb(n.converter,e);return Wm(t,[yb(bp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new na(this.firestore,t))}isEqual(e){return zM(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}function Sp(n){return rn(n,ir)}class iA{constructor(...e){this._delegate=new ll(...e)}static documentId(){return new iA(rr.keyField().canonicalString())}isEqual(e){return(e=(0,on.m9)(e))instanceof ll&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function qN(){return new WS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ap(e)}static delete(){const e=function zN(){return new m0("deleteField")}();return e._methodName="FieldValue.delete",new Ap(e)}static arrayUnion(...e){const t=function ZN(...n){return new mN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ap(t)}static arrayRemove(...e){const t=function WN(...n){return new yN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ap(t)}static increment(e){const t=function KN(n){return new _N("increment",n)}(e);return t._methodName="FieldValue.increment",new Ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nk={Firestore:DO,GeoPoint:gb,Timestamp:Rn,Blob:w0,Transaction:TO,WriteBatch:SO,DocumentReference:na,DocumentSnapshot:C0,Query:as,QueryDocumentSnapshot:E0,QuerySnapshot:rA,CollectionReference:Km,FieldPath:iA,FieldValue:Ap,setLogLevel:function ek(n){!function FD(n){Au.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function ik(n){(function rk(n,e){n.INTERNAL.registerComponent(new _f.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},nk)))})(n,(e,t)=>new DO(e,t,new XN)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Sr.Z);var sk=R(6451),bb=R(5363),ok=R(6063);class ak extends In.x{constructor(e=1/0,t=1/0,r=ok.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!s&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const d=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=d;_+=2)g=_;g&&r.splice(0,g+1)}}}var uk=R(3099);function MO(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,uk.B)({connector:()=>new ak(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function OO(n,e){return(0,_i.m)(e)?tr(()=>n,e):tr(()=>n)}var sA=R(9468);R(5867);const aA=new Map,NO={activated:!1,tokenObservers:[]},fk={initialized:!1,enabled:!1};function Ti(n){return aA.get(n)||Object.assign({},NO)}function Db(){return fk}class vk{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new on.BH,yield function wk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new on.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const us=new on.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RO(n){if(!Ti(n).activated)throw us.create("use-before-activation",{appName:n.name})}function lA(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,ve.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Z=yield d.getHeartbeatsHeader();Z&&(u["X-Firebase-Client"]=Z)}const g={method:"POST",body:JSON.stringify(e),headers:u};let _,b;try{_=yield fetch(n,g)}catch(Z){throw us.create("fetch-network-error",{originalErrorMessage:null===(r=Z)||void 0===r?void 0:r.message})}if(200!==_.status)throw us.create("fetch-status-error",{httpStatus:_.status});try{b=yield _.json()}catch(Z){throw us.create("fetch-parse-error",{originalErrorMessage:null===(s=Z)||void 0===s?void 0:s.message})}const S=b.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const P=1e3*Number(S[1]),$=Date.now();return{token:b.token,expireTimeMillis:$+P,issuedAtTimeMillis:$}}),dA.apply(this,arguments)}function Ik(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const b0="firebase-app-check-store";let Ab=null;function LO(){return Ab||(Ab=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(us.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(b0,{keyPath:"compositeKey"})}}catch(r){e(us.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Ab)}function hA(){return hA=(0,ve.Z)(function*(n,e){const r=(yield LO()).transaction(b0,"readwrite"),u=r.objectStore(b0).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=_=>{d()},r.onerror=_=>{var b;g(us.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),hA.apply(this,arguments)}const I0=new ja.Yd("@firebase/app-check");function gA(n,e){return(0,on.hl)()?function Ak(n,e){return function VO(n,e){return hA.apply(this,arguments)}(function BO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{I0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jO(){return Db().enabled}function $O(){return yA.apply(this,arguments)}function yA(){return yA=(0,ve.Z)(function*(){const n=Db();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),yA.apply(this,arguments)}const kk={error:"UNKNOWN_ERROR"};function Rk(n){return on.US.encodeString(JSON.stringify(n),!1)}function xb(n){return _A.apply(this,arguments)}function _A(){return _A=(0,ve.Z)(function*(n,e=!1){const t=n.app;RO(t);const r=Ti(t);let u,s=r.token;if(s&&!Ym(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(Ym(_)?s=_:yield gA(t,void 0))}if(!e&&s&&Ym(s))return{token:s.token};let g,d=!1;if(jO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lA(Ik(t,yield $O()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const _=yield r.exchangeTokenPromise;return yield gA(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),s=yield Ti(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?I0.warn(_.message):I0.error(_),u=_}return s?u?g=Ym(s)?{token:s.token,internalError:u}:zO(u):(g={token:s.token},r.token=s,yield gA(t,s)):g=zO(u),d&&GO(t,g),g}),_A.apply(this,arguments)}function wA(n,e){const t=Ti(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function HO(n){const{app:e}=n,t=Ti(e);let r=t.tokenRefresher;r||(r=function Fk(n){const{app:e}=n;return new vk((0,ve.Z)(function*(){let r;if(r=Ti(e).token?yield xb(n,!0):yield xb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function GO(n,e){const t=Ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ym(n){return n.expireTimeMillis-Date.now()>0}function zO(n){return{token:Rk(kk),error:n}}class Lk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ti(this.app);for(const t of e)wA(this.app,t.next);return Promise.resolve()}}const XO="app-check-internal";!function Qk(){(0,Iu._registerComponent)(new _f.wA("app-check",n=>function Vk(n,e){return new Lk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XO).initialize()})),(0,Iu._registerComponent)(new _f.wA(XO,n=>function Uk(n){return{getToken:e=>xb(n,e),addTokenListener:e=>function vA(n,e,t,r){const{app:s}=n,u=Ti(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Ym(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),HO(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>HO(n))}(n,"INTERNAL",e),removeTokenListener:e=>wA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Iu.registerVersion)("@firebase/app-check","0.5.17")}();class IA{constructor(){return(0,Yr.vb)("app-check")}}typeof window<"u"&&window;const t1=new c.OlP("angularfire2.auth.use-emulator"),n1=new c.OlP("angularfire2.auth.settings"),r1=new c.OlP("angularfire2.auth.tenant-id"),i1=new c.OlP("angularfire2.auth.langugage-code"),s1=new c.OlP("angularfire2.auth.use-device-language"),o1=new c.OlP("angularfire.auth.persistence"),a1=(n,e,t,r,s,u,d,g)=>(0,Ds.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),d)for(const[b,S]of Object.entries(d))_.settings[b]=S;return g&&_.setPersistence(g),_},[t,r,s,u,d,g]);let u1=(()=>{class n{constructor(t,r,s,u,d,g,_,b,S,P,$,Z){const re=new In.x,Re=it(void 0).pipe((0,bb.Q)(d.outsideAngular),tr(()=>u.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,5881)))),(0,mt.U)(()=>(0,Ds.on)(t,u,r)),(0,mt.U)(Ue=>a1(Ue,u,g,b,S,P,_,$)),MO({bufferSize:1,refCount:!1}));if(ho(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Re.pipe(ka()).subscribe();const ut=Re.pipe(tr(Ut=>Ut.getRedirectResult().then($t=>$t,()=>null)),Yr.iC,MO({bufferSize:1,refCount:!1})),Ot=Re.pipe(tr(Ut=>new yi.y($t=>({unsubscribe:u.runOutsideAngular(()=>Ut.onAuthStateChanged(Yt=>$t.next(Yt),Yt=>$t.error(Yt),()=>$t.complete()))})))),Vt=Re.pipe(tr(Ut=>new yi.y($t=>({unsubscribe:u.runOutsideAngular(()=>Ut.onIdTokenChanged(Yt=>$t.next(Yt),Yt=>$t.error(Yt),()=>$t.complete()))}))));this.authState=ut.pipe(OO(Ot),(0,sA.R)(d.outsideAngular),(0,bb.Q)(d.insideAngular)),this.user=ut.pipe(OO(Vt),(0,sA.R)(d.outsideAngular),(0,bb.Q)(d.insideAngular)),this.idToken=this.user.pipe(tr(Ut=>Ut?(0,dn.D)(Ut.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(tr(Ut=>Ut?(0,dn.D)(Ut.getIdTokenResult()):it(null))),this.credential=(0,sk.T)(ut,re,this.authState.pipe(zr(Ut=>!Ut))).pipe((0,mt.U)(Ut=>Ut?.user?Ut:null),(0,sA.R)(d.outsideAngular),(0,bb.Q)(d.insideAngular))}return(0,Ds.pX)(this,Re,u,{spy:{apply:(Ue,ut,Ot)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Ot.then(Vt=>re.next(Vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ds.Dh),c.LFG(Ds.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Yr.HU),c.LFG(t1,8),c.LFG(n1,8),c.LFG(r1,8),c.LFG(i1,8),c.LFG(s1,8),c.LFG(o1,8),c.LFG(IA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function c1(n,e){return function rR(n,e=gC.z){return new yi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function TA(n,e){return c1(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}function Ob(n,e){return TA(n,e).pipe(Yh(void 0),mC(),(0,mt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const _=s.find(S=>S.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function l1(n,e,t){return Ob(n,t).pipe(Jl((r,s)=>function sR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function oR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return SA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return SA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function iD(n,e=Cc.y){return n=n??sD,(0,Pn.e)((t,r)=>{let s,u=!0;t.subscribe((0,Sn.x)(r,d=>{const g=e(d);(u||!n(s,g))&&(u=!1,s=g,r.next(d))}))})}(),(0,mt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function SA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function d1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class h1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ob(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Yh(void 0),mC(),zr(([r,s])=>s.length>0||!r),(0,mt.U)(([r,s])=>s),Yr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Jl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=d1(e);return l1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yr.iC)}valueChanges(e={}){return TA(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Yr.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(Yr.iC)}add(e){return this.ref.add(e)}doc(e){return new f1(this.ref.doc(e),this.afs)}}class f1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=p1(r,t);return new h1(s,u,this.afs)}snapshotChanges(){return function iR(n,e){return c1(n,e).pipe(Yh(void 0),mC(),(0,mt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(Yr.iC)}}class aR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ob(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),zr(t=>t.length>0),Yr.iC):Ob(this.query,this.afs.schedulers.outsideAngular).pipe(Yr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Jl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=d1(e);return l1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yr.iC)}valueChanges(e={}){return TA(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Yr.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(Yr.iC)}}const uR=new c.OlP("angularfire2.enableFirestorePersistence"),cR=new c.OlP("angularfire2.firestore.persistenceSettings"),lR=new c.OlP("angularfire2.firestore.settings"),dR=new c.OlP("angularfire2.firestore.use-emulator");function p1(n,e=(t=>t)){return{query:e(n),ref:n}}let hR=(()=>{class n{constructor(t,r,s,u,d,g,_,b,S,P,$,Z,re,Re,Ue,ut,Ot){this.schedulers=_;const Vt=(0,Ds.on)(t,g,r),Ut=S;P&&a1(Vt,g,$,re,Re,Ue,Z,ut),[this.firestore,this.persistenceEnabled$]=(0,Ds.cc)(`${Vt.name}.firestore`,"AngularFirestore",Vt.name,()=>{const $t=g.runOutsideAngular(()=>Vt.firestore());if(u&&$t.settings(u),Ut&&$t.useEmulator(...Ut),s&&!ho(d)){const Yt=()=>{try{return(0,dn.D)($t.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ti){return typeof console<"u"&&console.warn(ti),it(!1)}};return[$t,g.runOutsideAngular(Yt)]}return[$t,it(!1)]},[u,Ut,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=p1(s,r),g=this.schedulers.ngZone.run(()=>u);return new h1(g,d,this)}collectionGroup(t,r){const s=r||(d=>d),u=this.firestore.collectionGroup(t);return new aR(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new f1(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ds.Dh),c.LFG(Ds.xv,8),c.LFG(uR,8),c.LFG(lR,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Yr.HU),c.LFG(cR,8),c.LFG(dR,8),c.LFG(u1,8),c.LFG(t1,8),c.LFG(n1,8),c.LFG(r1,8),c.LFG(i1,8),c.LFG(s1,8),c.LFG(o1,8),c.LFG(IA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hl=(()=>{class n{constructor(t){this.firestore=t}onUserChanged(t){return(0,B_.v)((0,B_.n)(),r=>t(r))}createUserWithEmailAndPassword(t,r){Yo.Z.auth().createUserWithEmailAndPassword(t,r).then(s=>{console.log("Usuario exitoso: ",s)}).catch(s=>{console.log("Error al crear usuario: ",s)})}signInWithEmailAndPassword(t,r){console.log(t,r),Yo.Z.auth().signInWithEmailAndPassword(t,r).then(s=>{console.log("Inicio de sesi\xf3n exitoso: ",s)}).catch(s=>{console.log("Error al iniciar sesi\xf3n: ",s.message)})}logout(){Yo.Z.auth().signOut().then(()=>{console.log("Cierre de sesi\xf3n exitoso")}).catch(t=>{console.log("Error al cerrar sesi\xf3n: ",t)})}getAllProjects(){return this.firestore.collection("epics").valueChanges({idField:"docId"})}getProject(t){return this.firestore.doc(`epics/${t}`).valueChanges({idField:"docId"})}getProjectsByID(t){return this.firestore.collection("epics",r=>r.where(Yo.Z.firestore.FieldPath.documentId(),"in",t)).valueChanges({idField:"docId"})}getProjecsByCompany(t){return Ec(this.sliceIntoChunks(t,10).map(s=>this.getProjectsByID(s)))}addTicketsToProject(t,r){return this.firestore.doc(`epics/${t}`).update({tickets:r})}addTicketToProject(t,r){return this.firestore.doc(`epics/${t}`).update({tickets:Yo.Z.firestore.FieldValue.arrayUnion(r)})}getCompanies(){return this.firestore.collection("companies").valueChanges({idField:"docId"})}getCompany(t){return this.firestore.doc(`companies/${t}`).valueChanges({idField:"docId"})}getPeople(t){return Ec(this.sliceIntoChunks(t,10).map(s=>this.getPeopleByID(s)))}getPeopleByID(t){return this.firestore.collection("people",r=>r.where(Yo.Z.firestore.FieldPath.documentId(),"in",t)).valueChanges({idField:"docId"})}getPerson(t){return this.firestore.doc(`people/${t}`).valueChanges()}getTickets(t){return Ec(this.sliceIntoChunks(t,10).map(s=>this.getTicketsByID(s)))}getTicketsByID(t){return this.firestore.collection("tickets",r=>r.where(Yo.Z.firestore.FieldPath.documentId(),"in",t)).valueChanges({idField:"id"})}getTicket(t){return this.firestore.doc(`tickets/${t}`).valueChanges()}createTicket(t,r){return this.firestore.collection("tickets").add(t).then(s=>this.addTicketToProject(r,s))}sliceIntoChunks(t,r){const s=[];for(;t.length>0;){const u=t.splice(0,r);s.push(u)}return s}deleteParentsOnTickets(t,r){return Ec(t.map(s=>this.deleteParents(s,r)))}deleteParents(t,r){return console.log(t,r),this.firestore.doc(`tickets/${t}`).update({parents:Yo.Z.firestore.FieldValue.arrayRemove(...r)})}updateTicket(t,r){return this.firestore.collection("tickets").doc(t).update(r)}deleteTicketFromProject(t,r){return this.firestore.doc(`epics/${r}`).update({tickets:Yo.Z.firestore.FieldValue.arrayRemove(t)})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hR))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Bi_gap_x=12,Bi_gap_y=46,Bi_margin_x=40,Bi_margin_y=50;let xp=(()=>{class n{constructor(){this._mvps=new In.x,this.mvps$=this._mvps.asObservable(),this._name=new In.x,this.name$=this._name.asObservable(),this._leader=new In.x,this.leader$=this._leader.asObservable(),this._constraints=new In.x,this.constraints$=this._constraints.asObservable(),this.nodeTree=[],this._nodeTree=new In.x,this.nodeTree$=this._nodeTree.asObservable(),this._treeProgress=new In.x,this.treeProgress$=this._treeProgress.asObservable(),this._isLoadWindowOpen=new In.x,this.isLoadWindowOpen$=this._isLoadWindowOpen.asObservable(),this.isProjectLoaded=!1}getStaticNodeTree(){return this.nodeTree}getConstraints(){return this.constraints}getNodeTree(){return this.nodeTree$}getMVPs(){return this.mvps$}getProgress(){return this.treeProgress$}getProjectName(){return this.name$}getLeader(){return this.leader$}getconstraints(){return this.constraints$}loadFromLocalStorage(){let t=localStorage.getItem("project");if(t){const r=JSON.parse(t);this.loadProject(r)}}loadProject(t,r){r&&(this.people=r),localStorage.setItem("project",JSON.stringify(t)),this._name.next(t.name),this.name=t.name,this._leader.next(t.leader),this.leader=t.leader,this.isProjectLoaded=!0;const s=this.parseProject(t,r||this.people);this.sortDependencies(s.tickets)}parseProject(t,r){return{...t,tickets:t.tickets.map(s=>({...s,assigned:r.find(u=>u.id===s.assigned),parents:s.parents||[],children:[],childrenTree:[],childrenTreeSimple:[],index:0,level:0,childrenWidth:0,enabled:!0,position:{x:0,y:0,offsetX:0},blockedByParents:!1,selected:!1}))}}openLoadWindow(){this._isLoadWindowOpen.next(!0)}isLoadWindowOpen(){return this.isLoadWindowOpen$}sortDependencies(t){let r=this.sortNodes(t);r=this.nodesTree(t),r=this.addChildren(r),r=this.addChildrenWidth(r),r=this.addNewPositions(r),r=this.addParentCoodrs(r),r=this.blockByParents(r),r=this.disableNodes(r),this.nodeTree=r,this._nodeTree.next(r),this.calculateTreeProgress(this.nodeTree),this.extractMVPs(t)}sortNodes(t){return t.sort((r,s)=>r.order<s.order?1:r.order>s.order?-1:0)}nodesTree(t,r=[],s=0){if(0===t.length)return r;let u=t.filter(d=>0===d.parents?.length||void 0===d.parents).map((d,g)=>({...d,level:s,index:g}));return 0===u?.length&&(r.map(d=>{u=u.concat(t.filter(g=>g.parents[0]===d.id).map(g=>({...g,level:s,index:0})))}),u=u.filter((d,g,_)=>g===_.findIndex(b=>b.id===d.id)).map((d,g)=>({...d,index:g}))),r=r.concat(u),t=t.filter(d=>!r.map(g=>g.id).includes(d.id)),s++,this.nodesTree(t,r,s)}addChildren(t){let r=[...t];t.forEach(s=>{s.parents?.forEach(u=>{const d=r.findIndex(g=>g.id===u);r[d].children=r[d]?.children?.concat(s.id),r[d].childrenTree=[r[d].children]})}),r=r.map(s=>({...s,childrenTreeSimple:[t.filter(u=>u.parents[0]===s.id).map(u=>u.id)]}));for(const s of r)this.addChildrenTree(t,s),this.addSimpleChildrenTree(t,s);return r}addChildrenTree(t,r){if(!r)return;const s=this.addTreeChildrenNextLevel(t,r);return 0===s.length?r:(r.childrenTree.push(s),this.addChildrenTree(t,r))}addTreeChildrenNextLevel(t,r){if(!r)return[];const s=r.childrenTree[r.childrenTree.length-1];let u=[];return s&&(u=s.map(d=>t.find(g=>g.id===d)?.childrenTree[0]||[]).flat()),[...new Set(u)]}addSimpleChildrenTree(t,r){if(!r)return;const s=this.addSimpleTreeChildrenNextLevel(t,r);return 0===s.length?r:(r.childrenTreeSimple.push(s),this.addSimpleChildrenTree(t,r))}addSimpleTreeChildrenNextLevel(t,r){if(!r)return[];const s=r.childrenTreeSimple[r.childrenTreeSimple.length-1];return t.filter(u=>s.includes(u.parents[0])).map(u=>u.id)}addChildrenWidth(t){return t.reverse().map(r=>{const s=r.childrenTreeSimple[0].length,u=t.filter(d=>r.childrenTreeSimple[0].includes(d.id)).reduce((d,g)=>d+g.childrenWidth,0);return r.childrenWidth=Math.max(s,u)||1,r}).reverse()}addNewPositions(t){const r=[...t];return r.forEach(s=>{const u=t.find(g=>s.parents[0]===g.id),d=this.previousPositions(s,t,u);s.position.x=(u?.position.x||0)-((u?.childrenWidth||0)-s.childrenWidth)*(190+Bi_gap_x)/2+d,s.position.y=s.level*(95+Bi_gap_y)+Bi_margin_y}),this.constraints=this.calculateconstraints(t),this._constraints.next(this.constraints),r.map(s=>({...s,position:{y:s.position.y,x:s.position.x-this.constraints.left+Bi_margin_x}}))}previousPositions(t,r,s){return t?r.filter(u=>{const g=u.index<t.index;return void 0===s?g&&u.level===t.level:g&&s?.childrenTreeSimple[0].includes(u.id)}).map(u=>u.childrenWidth*(190+Bi_gap_x)).reduce((u,d)=>u+d,0):0}addParentCoodrs(t){return t?.map(r=>({...r,paretsPosition:r.parents?.map(s=>{const u=t.find(d=>d.id===s)?.position;return{id:s,x:u?.x||0,y:u?.y||0}})}))}calculateconstraints(t){return t.reduce((r,s)=>(r.left=s.position.x<r.left?s.position.x:r.left,r.top=s.position.y<r.top?s.position.y:r.top,r.right=s.position.x>r.right?s.position.x:r.right,r.bottom=s.position.y>r.bottom?s.position.y:r.bottom,r),{left:2e5,top:0,right:0,bottom:0})}selectDescendant(t,r,s=[]){if(s[0]){let u=[];if(s[s.length-1].map(d=>{const g=t.find(_=>_.id===d)?.childrenTree[0];g&&(u=u.concat(g))}),0===u.length)return s.flat();s.push([...new Set(u)])}else{const u=t.find(d=>d.id===r);u&&(s[0]=[u.id],s.push(u.childrenTree[0]))}return this.selectDescendant(t,r,s)}blockByParents(t){const r=t.filter(s=>s.status===Is.blocked).map(s=>this.selectDescendant(t,s.id)).flat();return t.map(s=>({...s,blockedByParents:r.includes(s.id)}))}highlightNodes(t,r,s){return t.map(u=>({...u,selected:r.includes(u.id)}))}extractMVPs(t){const r=t.reduce((s,u)=>{if(void 0===u.mvp)return s;const d=u.mvp.name,g=u.mvp.id;return-1===s.findIndex(b=>b.value===u.mvp.id)?[...s,{name:d,value:g}]:s},[]);this._mvps.next(r.sort((s,u)=>s.value>u.value?1:s.value<u.value?-1:0))}calculateTreeProgress(t){const r=t.reduce((s,u)=>{const d=u.estimation,g=u.status,_=s.findIndex(S=>S.name===g)||0,b={name:g,count:(s[_]?.count||0)+1,points:(s[_]?.points||0)+d};return _>-1?s[_]=b:s.push(b),s},[]);this._treeProgress.next(r),localStorage.setItem("progress",JSON.stringify(r))}disableNodes(t){return t.map(r=>({...r,enabled:t.filter(s=>r.parents.includes(s.id)).every(s=>s.status===Is.done)}))}onSelectNode(t){const r=this.selectDescendant(this.nodeTree,t);this.nodeTree=this.highlightNodes(this.nodeTree,r,!0),this._nodeTree.next(this.nodeTree)}onSelectMVP(t){const r=this.nodeTree.filter(d=>d.mvp?.id===t),s=r.map(d=>d.id)||[];this.nodeTree=this.highlightNodes(this.nodeTree,s,!1);const u=""===t?this.nodeTree:r;this._nodeTree.next(this.nodeTree),this.calculateTreeProgress(u)}onSelectStatus(t){const s=this.nodeTree.filter(u=>u.status===t).map(u=>u.id)||[];this.nodeTree=this.highlightNodes(this.nodeTree,s,!1),this._nodeTree.next(this.nodeTree)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AA=(()=>{class n{constructor(t){this.firebaseService=t}set people(t){this._peopleIDs=t.map(r=>r.id),this._people=t.filter(r=>!0===r.active).map(r=>({id:r.docId,name:r.name,roles:r.roles||[]}))}get people(){return this._people}getPerson(t){return void 0===t?"--":this._people.find(r=>r.id===t)}getPersonRef(t){return void 0===t?"--":this._peopleRefs.find(r=>r.docId===t)}loadPeople(t){return this._peopleIDs=t,this.firebaseService.getPeople(t).pipe((0,mt.U)(r=>(this.people=r.flat(),r.flat())))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pb=(()=>{class n{constructor(t,r,s){this.firebaseService=t,this.nodeTreeService=r,this.peopleService=s,this._project=new In.x,this.project$=this._project.asObservable(),this._projects=new In.x,this.projects$=this._projects.asObservable()}set project(t){this._project.next(t),this.currentProject=t}get project(){return this.currentProject}get ticketsRef(){return this._ticketsRef}getTicketRefById(t){return this._ticketsRef.find(r=>r.id===t)}getProject(){return this.project$}getProjectsByCompany(t){return this.firebaseService.getProjecsByCompany(t).pipe((0,mt.U)(r=>r.flat()),(0,Wr.b)(r=>{this.projects=r,this._projects.next(r)}))}getProjects(){return this.projects$}getProjectsByID(t){return this.projects$}getCurrentProject$(){return this.project$}loadProjectData(t){return this._ticketsRef=t?.tickets||[],Ec([this.firebaseService.getPeopleByID([t.leader]),this.firebaseService.getTickets(this._ticketsRef.map(r=>r.id))]).pipe((0,mt.U)(r=>{const s={leader:"res[0][0].name",docId:t.docId,name:t.name,tickets:r[1].flat()};return this.nodeTreeService.loadProject(s,this.peopleService.people),this.project={...s,tickets:this.nodeTreeService.getStaticNodeTree()},this.project}))}moveTicketToTrash(t){return void 0===t?it({}):this.firebaseService.deleteTicketFromProject(t,this.project.docId)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hl),c.LFG(xp),c.LFG(AA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fR=(()=>{class n{constructor(t){this.projectService=t}ngOnInit(){this.project=this.projectService.project}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Pb))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:1,template:function(t,r){1&t&&(c.TgZ(0,"h1"),c._uU(1),c.qZA()),2&t&&(c.xp6(1),c.Oqu(r.project.name))}}),n})();var pR=R(5032);function io(n){return(0,Pn.e)((e,t)=>{(0,dc.Xf)(n).subscribe((0,Sn.x)(t,()=>t.complete(),pR.Z)),!t.closed&&e.subscribe(t)})}const xA_jira={user:"<your jira user>",token:"<your token>"},xA_firebaseConfig={apiKey:"AIzaSyBgVfJJ6uZIjmW6nT_C7b4cfgiOGur_6Cs",authDomain:"kinesso-project-tracking.firebaseapp.com",projectId:"kinesso-project-tracking",storageBucket:"kinesso-project-tracking.appspot.com",messagingSenderId:"166399580136",appId:"1:166399580136:web:441192dfdd120bdcae365d",measurementId:"G-QES9FQS6BG"};let gR=(()=>{class n{constructor(t){this.http=t,this.credentials=xA_jira}getEpic(){return this.http.get("https://projects.mbww.com/rest/api/3/issue/AMC-10451",{headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(`${this.credentials.user}:${this.credentials.token}`)}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ro))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),g1=(()=>{class n{constructor(){this.currentZoom=0,this._zoom=new Fi(this.currentZoom),this.zoom$=this._zoom.asObservable()}setZoom(t){this.currentZoom+=t,this._zoom.next(this.currentZoom)}getZoom(){return this.zoom$}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Uu=(()=>(function(n){n.CREATE="create",n.EDIT="edit"}(Uu||(Uu={})),Uu))();class mR{constructor(){this.id="",this.code="",this.status=Is.new,this.title="",this.estimation=0,this.effort=[],this.parents=[],this.assigned={name:"",id:""},this.children=[],this.order=0,this.enabled=!0,this.mvp={name:"",id:0},this.position={x:0,y:0},this.level=0,this.index=0,this.childrenTree=[],this.childrenTreeSimple=[],this.childrenWidth=0,this.selected=!1,this.blockedByParents=!1}}let Nb=(()=>{class n{constructor(t,r){this.firebaseService=t,this.projectService=r,this._ticket=new In.x,this.ticket$=this._ticket.asObservable(),this._mode=Uu.EDIT,this._showDetailsPanel=new In.x,this.showDetailsPanel$=this._showDetailsPanel.asObservable()}openDetailsPanel(t){this._showDetailsPanel.next(t)}isDetailsPanelOpen(){return this.showDetailsPanel$}setNodeData(t){this._showDetailsPanel.next(!0),this._mode=t?Uu.EDIT:Uu.CREATE,this.ticket=t||new mR,this._ticket.next(this.ticket)}getNodeData$(){return this.ticket$}getnodeData(){return this.ticket}get mode(){return this._mode}moveToTrash(t,r){return void 0===t?it({}):this.firebaseService.deleteParentsOnTickets(r,[t.id]).pipe(tr(s=>this.projectService.moveTicketToTrash(t)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hl),c.LFG(Pb))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yR=(()=>{class n{transform(t){return t?.split(" ").map(r=>r.substring(0,1)).join("")||""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"initials",type:n,pure:!0}),n})();const _R=["card"];function vR(n,e){if(1&n&&(c.TgZ(0,"div",12),c._uU(1),c.ALo(2,"initials"),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Oqu(c.lcZ(2,1,t.nodeData.assigned.name))}}function wR(n,e){if(1&n&&(c.O4$(),c._UZ(0,"path",19)),2&n){const t=c.oxw().index,r=c.oxw(2);c.uIk("d",r.bezierCoordString[t])}}function CR(n,e){if(1&n&&(c.O4$(),c._UZ(0,"line",20)),2&n){const t=c.oxw().index,r=c.oxw(2);c.uIk("x1",r.svgCoords[t].x1+"%")("y1",r.svgCoords[t].y1+"%")("x2",r.svgCoords[t].x2+"%")("y2",r.svgCoords[t].y2+"%")}}function ER(n,e){if(1&n&&(c.TgZ(0,"div",15),c.O4$(),c.TgZ(1,"svg",16),c.YNc(2,wR,1,1,"path",17),c.YNc(3,CR,1,4,"line",18),c.qZA()()),2&n){const t=e.index,r=c.oxw(2);c.Akn(r.arrowContainerStyles[t]),c.xp6(1),c.uIk("viewBox",r.arrowViewBox[t]),c.xp6(1),c.Q6J("ngIf",!0===r.bezier[t]),c.xp6(1),c.Q6J("ngIf",!1===r.bezier[t])}}function bR(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,ER,4,5,"div",14),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.nodeData.paretsPosition)}}let IR=(()=>{class n{constructor(){this.selectNode=new c.vpe,this.infoNode=new c.vpe,this.nodeStatus=Is,this.arrowContainerStyles=[],this.arrowViewBox=[],this.svgCoords=[],this.bezierCoords=[],this.bezier=[],this.childLeft=!1,this.cardHeight=0,this.estimated=!1}set node(t){this.nodeData={...t},this.estimated=this.nodeData.estimation>0,this.nodeData.paretsPosition?.forEach(r=>this.calculateArrows(r,95))}ngAfterViewInit(){this.cardHeight=this.card.nativeElement.clientHeight}calculateArrows(t,r){let s=t.x+95,u=t.y+r-5,d=Math.abs(this.nodeData.position.x-t.x),g=Math.abs(this.nodeData.position?.y-t.y-r)+5;this.svgCoords.push({x1:0,y1:0,x2:100,y2:100}),this.bezierCoords.push({M:[1,0],c:[[1,g/2],[d-1,g/2],[d-1,g]]});const _=this.svgCoords.length-1;this.bezier[_]=!0,t.x===this.nodeData.position.x&&(d=4,this.svgCoords[_].x1=0,this.svgCoords[_].x2=0,this.bezier[_]=!1),t.x>this.nodeData.position.x&&(s=this.nodeData.position.x+95,d=Math.abs(t.x-this.nodeData.position.x),this.svgCoords[_]={x1:100,y1:0,x2:0,y2:100},this.bezierCoords[_]={M:[1,g],c:[[1,-g/2],[d-1,-g/2],[d-1,-g]]}),t.y===this.nodeData.position.y&&(g=4,this.childLeft=!0,u=t.y+r/2-3,this.svgCoords[_].x1=0,this.svgCoords[_].x2=100,this.svgCoords[_].y1=0,this.svgCoords[_].y2=0,this.bezier[_]=!1),t.y>this.nodeData.position.y&&(u=this.nodeData.position.y+r/2-3,g=t.y-this.nodeData.position.y,s=t.x+190,d=this.nodeData.position.x-s,this.bezierCoords[_]={M:[0,g],c:[[d/2,0],[d/2,-g],[d,-g]]},this.bezier[_]=!0),this.arrowContainerStyles.push({left:`${s}px`,top:`${u}px`,width:`${d+1}px`,height:`${g}px`}),this.arrowViewBox.push(`0 0 \n      ${d} \n      ${g}\n    `),this.bezierCoordString=this.bezierCoords.map(b=>`\n      M ${b.M.toString()} \n      c ${b.c.map(S=>S.toString()).join(" ")}\n    `)}ngOnInit(){}onNodeClick(){}onTreeClick(){this.selectNode.next(this.nodeData.id)}onInfoClick(){this.infoNode.next(this.nodeData)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-card"]],viewQuery:function(t,r){if(1&t&&c.Gf(_R,5),2&t){let s;c.iGM(s=c.CRH())&&(r.card=s.first)}},inputs:{node:"node"},outputs:{selectNode:"selectNode",infoNode:"infoNode"},decls:23,vars:29,consts:[[1,"card",3,"click"],["card",""],[1,"card-iconset"],[1,"material-symbols-outlined",3,"click"],[1,"card-header"],["class","card-header-assigned",4,"ngIf"],[1,"card-header-code"],[1,"card-header-status"],[1,"card-body"],[1,"card-header-title"],[1,"card-footer"],["class","svg",4,"ngIf"],[1,"card-header-assigned"],[1,"svg"],["class","svg-container",3,"style",4,"ngFor","ngForOf"],[1,"svg-container"],["xmlns","http://www.w3.org/2000/svg"],["class","connector","stroke","#888","stroke-width","0.8","fill","none",4,"ngIf"],["class","connector","stroke","#888","stroke-width","2",4,"ngIf"],["stroke","#888","stroke-width","0.8","fill","none",1,"connector"],["stroke","#888","stroke-width","2",1,"connector"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0,1),c.NdJ("click",function(){return r.onInfoClick()}),c.TgZ(2,"div",2)(3,"span",3),c.NdJ("click",function(){return r.onInfoClick()}),c._uU(4," info "),c.qZA(),c.TgZ(5,"span",3),c.NdJ("click",function(){return r.onTreeClick()}),c._uU(6," account_tree "),c.qZA()(),c.TgZ(7,"div",4),c.YNc(8,vR,3,3,"div",5),c.TgZ(9,"div",6),c._uU(10),c.qZA(),c.TgZ(11,"div",7),c.ALo(12,"lowercase"),c._uU(13),c.qZA()(),c.TgZ(14,"div",8)(15,"span",9),c._uU(16),c.qZA()(),c.TgZ(17,"div",10)(18,"div"),c._uU(19),c.qZA(),c.TgZ(20,"div"),c._uU(21),c.qZA()()(),c.YNc(22,bR,2,1,"div",11)),2&t&&(c.Tol("type--"+r.nodeData.type),c.Udp("transform","translate("+r.nodeData.position.x+"px, "+r.nodeData.position.y+"px)"),c.ekj("blocked",r.nodeData.status==r.nodeStatus.blocked||1==r.nodeData.blockedByParents)("done",r.nodeData.status==r.nodeStatus.done)("selected",r.nodeData.selected)("disabled",!r.nodeData.enabled)("child-left",r.childLeft)("child",(r.nodeData.parents.length||0)>0),c.xp6(8),c.Q6J("ngIf",r.nodeData.assigned),c.xp6(2),c.Oqu(r.nodeData.code),c.xp6(1),c.Tol(c.lcZ(12,27,r.nodeData.status)),c.xp6(2),c.Oqu(r.nodeData.status),c.xp6(3),c.Oqu(r.nodeData.title),c.xp6(1),c.ekj("unestimated",!r.estimated),c.xp6(2),c.Oqu(r.nodeData.effort),c.xp6(2),c.hij("",r.nodeData.estimation," PTS"),c.xp6(1),c.Q6J("ngIf",r.bezier.length>0))},dependencies:[kr,fn,Bs,yR],styles:['.card[_ngcontent-%COMP%]{font-size:10px;border-radius:4px;background-color:#fff;position:absolute;width:190px;box-shadow:0 0 1px #091e424f,0 2px 4px -1px #09244240;transition:.3s box-shadow;z-index:10;cursor:pointer}.card.disabled[_ngcontent-%COMP%]{box-shadow:unset}.card.disabled[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{opacity:.5}.card.disabled[_ngcontent-%COMP%] + .svg[_ngcontent-%COMP%]{opacity:.3}.card.selected[_ngcontent-%COMP%]{border:1px solid #333;background-color:#ddd}.card.selected[_ngcontent-%COMP%] + .svg[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{stroke-width:1.5;stroke:#006ec3}.card.selected[_ngcontent-%COMP%] + .svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke-width:3}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 1px #091e424f,0 2px 4px #09244273}.card[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{opacity:1}.card[_ngcontent-%COMP%]:hover   .card-iconset[_ngcontent-%COMP%]{display:flex}.card[_ngcontent-%COMP%]:hover + .svg[_ngcontent-%COMP%]{opacity:1}.card[_ngcontent-%COMP%]:hover + .svg[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{stroke-width:1.5;stroke:#90f}.card[_ngcontent-%COMP%]:hover + .svg[_ngcontent-%COMP%]   line.connector[_ngcontent-%COMP%]{stroke-width:3}.card.child[_ngcontent-%COMP%]:after{content:"";position:absolute;width:4px;height:4px;border-radius:50%;background-color:#888;display:block;top:-2px;left:50%;margin-left:-1px}.card.child-left[_ngcontent-%COMP%]:before{content:"";position:absolute;width:4px;height:4px;border-radius:50%;background-color:#888;display:block;top:44px;left:-2px;margin-left:-1px;margin-top:-2px}.card.child[_ngcontent-%COMP%]:hover:after, .card.child-left[_ngcontent-%COMP%]:hover:before{background-color:#006ec3}.card.blocked[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#f500003d}.card.done[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#004dff3d}.card.type--e2e[_ngcontent-%COMP%]{box-shadow:0 0 1px #091e424f,0 2px 4px -1px #0006,4px 3px #cacaca,4px 3px 1px #03091466,4px 5px 4px -1px #09244240,8px 6px #cacaca,8px 6px 1px #0006,8px 8px 4px -1px #00000059}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;border-radius:4px 4px 0 0}.card-header-code[_ngcontent-%COMP%]{font-weight:500;color:#013198}.card-header-code[_ngcontent-%COMP%]:hover{text-decoration:underline}.card-header-assigned[_ngcontent-%COMP%]{color:#fff;background-color:#333;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:8px;padding:0}.card-header-title[_ngcontent-%COMP%]{font-size:10px;margin:0;color:#444}.card-header-status[_ngcontent-%COMP%]{color:#fff;font-size:8px;background-color:#333;border-radius:4px;padding:1px 4px}.card-body[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.07);border-bottom:1px solid rgba(0,0,0,.07);padding:10px}.card-footer[_ngcontent-%COMP%]{padding:4px 10px;display:flex;justify-content:space-between;border-radius:0 0 4px 4px}.card-footer.unestimated[_ngcontent-%COMP%]{background-color:#ffc90042}.card-iconset[_ngcontent-%COMP%]{position:absolute;top:-21px;right:2px;background-color:#0080d0;border-radius:6px 6px 0 0;padding:3px 6px;display:none;gap:12px}.card-iconset[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{color:#fff;font-size:14px}.card-header-status.blocked[_ngcontent-%COMP%]{background-color:red}.card-header-status.new[_ngcontent-%COMP%]{background-color:#08a13c}.card-header-status.progress[_ngcontent-%COMP%]{background-color:#009dff}.card-header-status.done[_ngcontent-%COMP%]{background-color:#953ac0}.card-header-status.undefined[_ngcontent-%COMP%]{background-color:#333028}.card-header-status.review[_ngcontent-%COMP%]{background-color:#08bf1a}svg[_ngcontent-%COMP%]{display:block}.svg[_ngcontent-%COMP%]{position:relative}.svg-container[_ngcontent-%COMP%]{position:absolute;z-index:9}']}),n})();function DR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"app-card",4),c.NdJ("selectNode",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onSelectNode(s))})("infoNode",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onInfoNode(s))}),c.qZA()}2&n&&c.Q6J("node",e.$implicit)}let TR=(()=>{class n{constructor(t,r,s,u){this.jiraService=t,this.nodeTreeService=r,this.viewService=s,this.ticketService=u,this.bgStyles={},this.nodeTree=[],this.unsub$=new In.x,localStorage.getItem("project")&&(this.bgStyles=this.calculateBg(r.getConstraints()),this.nodeTree=r.getStaticNodeTree()),this.nodeTreeService.getNodeTree().pipe(io(this.unsub$)).subscribe(d=>{this.nodeTree=d}),this.nodeTreeService.getconstraints().pipe(io(this.unsub$)).subscribe(d=>{this.bgStyles=this.calculateBg(d)}),this.viewService.getZoom().pipe(io(this.unsub$)).subscribe(d=>{this.bgStyles={...this.bgStyles,transform:`scale(${.9+.1*d})`},this.zoomStyle={transform:`scale(${1+.1*d})`}})}calculateBg(t){return{width:t.right-t.left+190+2*Bi_margin_x+"px",height:t.bottom-t.top+95+Bi_margin_y+"px"}}ngOnInit(){}onSelectNode(t){this.nodeTreeService.onSelectNode(t)}onInfoNode(t){this.ticketService.setNodeData(t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(gR),c.Y36(xp),c.Y36(g1),c.Y36(Nb))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dependency"]],decls:4,vars:2,consts:[[1,"graph"],[1,"graph-viewer",3,"ngStyle"],["container",""],[3,"node","selectNode","infoNode",4,"ngFor","ngForOf"],[3,"node","selectNode","infoNode"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1,2),c.YNc(3,DR,1,1,"app-card",3),c.qZA()()),2&t&&(c.xp6(1),c.Q6J("ngStyle",r.bgStyles),c.xp6(2),c.Q6J("ngForOf",r.nodeTree))},dependencies:[kr,nu,IR],styles:[".graph[_ngcontent-%COMP%]{height:calc(100vh - 52px);overflow:auto;background-color:#eeeef1}.graph-viewer[_ngcontent-%COMP%]{transform-origin:10% top;transform:scale(.9);position:relative;margin:auto}"]}),n})();function SR(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw().$implicit;c.xp6(1),c.hij(" ",t.assigned.name," ")}}function AR(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw().$implicit;c.xp6(1),c.AsE(" ",t.mvp.id,". ",t.mvp.name," ")}}function xR(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"tr")(2,"td")(3,"a",3),c._uU(4),c.qZA()(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c.YNc(8,SR,2,1,"ng-container",4),c.qZA(),c.TgZ(9,"td"),c.YNc(10,AR,2,2,"ng-container",4),c.qZA(),c.TgZ(11,"td"),c._uU(12),c.qZA(),c.TgZ(13,"td"),c._uU(14),c.qZA(),c.TgZ(15,"td"),c._uU(16),c.qZA(),c.TgZ(17,"td",1),c._uU(18),c.qZA()(),c.BQk()),2&n){const t=e.$implicit;c.xp6(1),c.ekj("selected",t.selected),c.xp6(2),c.Q6J("href",t.link,c.LSH),c.xp6(1),c.Oqu(t.code),c.xp6(2),c.Oqu(t.title),c.xp6(2),c.Q6J("ngIf",t.assigned),c.xp6(2),c.Q6J("ngIf",t.mvp),c.xp6(2),c.Oqu(t.estimation),c.xp6(2),c.Oqu(t.status),c.xp6(2),c.Oqu(t.effort),c.xp6(2),c.Oqu(t.parents.join(", "))}}const MR=[{path:"",pathMatch:"full",redirectTo:"dependency"},{path:"dependency",component:TR},{path:"table",component:(()=>{class n{constructor(t){this.nodeTreeService=t,this.ticketList=[],this.unsub$=new In.x,localStorage.getItem("project")&&(this.ticketList=this.parsedNodes(t.getStaticNodeTree())),t.getNodeTree().pipe(io(this.unsub$)).subscribe(r=>{this.ticketList=this.parsedNodes(r)})}parsedNodes(t){return t.map(r=>({...r,parents:r.parents.map(s=>t.find(u=>u.id===s)?.code||"")}))}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xp))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-ticket-list"]],decls:22,vars:1,consts:[[1,"table-container"],[1,"mw"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[4,"ngIf"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"table")(2,"thead")(3,"tr")(4,"th"),c._uU(5,"Code"),c.qZA(),c.TgZ(6,"th"),c._uU(7,"Ticket"),c.qZA(),c.TgZ(8,"th"),c._uU(9,"Assigned"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"MVP"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"Estimation"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"Status"),c.qZA(),c.TgZ(16,"th"),c._uU(17,"Effort"),c.qZA(),c.TgZ(18,"th",1),c._uU(19,"parents"),c.qZA()()(),c.TgZ(20,"tbody"),c.YNc(21,xR,19,11,"ng-container",2),c.qZA()()()),2&t&&(c.xp6(21),c.Q6J("ngForOf",r.ticketList))},dependencies:[kr,fn],styles:["[_nghost-%COMP%]{background-color:#eeeef1;height:calc(100vh - 52px);overflow:auto}.table-container[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;padding-top:30px}table[_ngcontent-%COMP%]{margin:25px auto;font-size:.8em;font-family:sans-serif;min-width:400px;border-collapse:separate;border-spacing:0 4px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fff;padding:8px 12px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-radius:4px 0 0 4px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:0 4px 4px 0}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#33325c;color:#fff;text-align:left;text-transform:uppercase}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:2px solid #33325c}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#d1dbff}.mw[_ngcontent-%COMP%]{max-width:200px}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited{text-decoration:none;color:#33325c;font-weight:700}"]}),n})()},{path:"dashboard",component:fR}];let OR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[L_.forRoot(MR),L_]}),n})(),PR=(()=>{class n{constructor(t){this.firebaseService=t}set companyData(t){this._company={id:t.docId,name:t.name,people:t.people.map(r=>r.id),projects:t.projects.map(r=>r.id)}}get company(){return this._company}loadCompany(t){return this.firebaseService.getCompany(t).pipe((0,Wr.b)(r=>this.companyData=r))}loadCompanies(){return this.firebaseService.getCompanies()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MA=(()=>{class n{constructor(t){this.firebaseService=t,this._profileOpen=new Fi(!1),this.profileOpen$=this._profileOpen.asObservable(),this.currentUser=null,this._user=new In.x,this.user$=this._user.asObservable(),this.firebaseService.onUserChanged(r=>{const s=r?{displayName:r.displayName,email:r.email,phoneNumber:r.phoneNumber,photoURL:r.photoURL,providerId:r.providerId,uid:r.uid}:null;this._user.next(s),this.currentUser=s})}get user(){return this.currentUser}getUser$(){return this.user$}isProfileOpen(){return this.profileOpen$}setProfileOpen(t){this._profileOpen.next(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NR(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"form",4),c.NdJ("ngSubmit",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.onLoginClick())}),c.TgZ(2,"div",5)(3,"label",6),c._uU(4,"Email:"),c.qZA(),c._UZ(5,"input",7),c.qZA(),c.TgZ(6,"div",5)(7,"label",8),c._uU(8,"Password:"),c.qZA(),c._UZ(9,"input",9),c.qZA(),c.TgZ(10,"button",10),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.onLoginClick())}),c._uU(11,"Login"),c.qZA(),c.TgZ(12,"button",11),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.close())}),c._uU(13,"close"),c.qZA()(),c.BQk()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("formGroup",t.form)}}function kR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"h3"),c._uU(1,"Admin user"),c.qZA(),c.TgZ(2,"button",11),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.logout())}),c._uU(3,"Logout"),c.qZA(),c.TgZ(4,"button",11),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.close())}),c._uU(5,"close"),c.qZA()}}let RR=(()=>{class n{constructor(t,r,s){this.firebaseService=t,this.userService=r,this.fb=s,this.email="",this.password="",this.user=null,this.setupForm()}ngOnInit(){this.user=this.userService.user,this.userService.getUser$().subscribe(t=>{console.log(t),this.user=t})}setupForm(){this.form=this.fb.group({email:["",xa.required],password:["",xa.required]})}login(t,r){this.firebaseService.signInWithEmailAndPassword(t,r),this.userService.setProfileOpen(!1)}onLoginClick(){this.login(this.form.get("email")?.value,this.form.get("password")?.value)}logout(){this.firebaseService.logout()}createUser(t,r){this.firebaseService.createUserWithEmailAndPassword(t,r)}close(){this.userService.setProfileOpen(!1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(hl),c.Y36(MA),c.Y36(wc))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-authentication"]],decls:5,vars:2,consts:[[1,"overlay"],[1,"authentication"],[4,"ngIf","ngIfElse"],["haUser",""],[1,"form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","email",1,"form-group-label"],["type","email","id","email","formControlName","email","name","email",1,"form-group-input"],["for","password",1,"form-group-label"],["type","password","id","password","formControlName","password","name","password",1,"form-group-input"],["type","submit",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"div",0)(1,"div",1),c.YNc(2,NR,14,1,"ng-container",2),c.YNc(3,kR,6,0,"ng-template",null,3,c.W1O),c.qZA()()),2&t){const s=c.MAs(4);c.xp6(2),c.Q6J("ngIf",null===r.user)("ngIfElse",s)}},dependencies:[fn,Sy,Ys,hc,vu,Zl,qh],styles:['.btn[_ngcontent-%COMP%]{background-color:#33325c;border-radius:4px;color:#fff;font-size:14px;padding:8px 12px;border:medium none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px}.btn[_ngcontent-%COMP%]:hover{background-color:#33325ccc}.btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:default}.btn[disabled][_ngcontent-%COMP%]:hover{background-color:#33325c}.btn-alert[_ngcontent-%COMP%]{background-color:#e849d4}.btn[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:18px}.form[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column}.form-group[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.form-group-label[_ngcontent-%COMP%]{flex-basis:56px}.form-group-input[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.4);border-radius:4px;outline:medium none;padding:8px;flex-grow:1}.form-group-input[_ngcontent-%COMP%]:-internal-autofill-selected{color:#fff;background-color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;z-index:20000;width:100vw;height:100vh;background-color:#b4b4b466;left:0;top:0;display:flex;justify-content:center;align-items:center;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.authentication[_ngcontent-%COMP%]{position:absolute;right:10px;top:60px;width:300px;display:flex;flex-direction:column;gap:20px;background:white;padding:30px;border-radius:12px;box-shadow:1px 1px 4px #0006;font-size:12px}.authentication[_ngcontent-%COMP%]:before{content:"";width:20px;height:20px;border-radius:4px;transform:rotate(45deg);position:absolute;right:12px;top:-10px;background-color:#fff}']}),n})();function FR(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.hij("",t.label,":")}}function LR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",6),c.NdJ("click",function(){const u=c.CHM(t).index,d=c.oxw();return c.KtG(d.onElementClick(u))}),c._uU(1),c.qZA()}if(2&n){const t=e.$implicit,r=e.index,s=c.oxw();c.ekj("selected",s.selectedIndex===r),c.xp6(1),c.hij(" ",t.name," ")}}let kb=(()=>{class n{constructor(t){this.elRef=t,this.onSelect=new c.vpe,this.clickable=!1,this.isActive=!1,this.selectedIndex=0,this.selectedValue=this.defaultOption,this.propagateChange=r=>{}}clickout(t){!this.elRef.nativeElement.contains(t.target)&&this.clickable&&(this.onSelect.next(this.selectedValue),this.isActive=!1)}set defaultOption(t){this._defaultOption={name:t,value:""}}set options(t){if(this._options=t.every(r=>this.dropDownType(r))?t:t.map(r=>({name:r,value:r})),0!==this._options.length)if(this._defaultOption){const r=this._options.map(s=>s.name).indexOf(this._defaultOption.name);r>=0?this.selectElement(r):""!==this._defaultOption.name&&void 0!==this._defaultOption.name&&(this._options.unshift(this._defaultOption),this.selectElement(0))}else this.selectElement(0)}dropDownType(t){return"string"!=typeof t&&"name"in t&&"value"in t}selectElement(t){t<0||0===this._options.length||(this.selectedIndex=t,this.selectedValue=this._options[t]?.name,this.isActive=!1)}onElementClick(t){t<0||0===this._options.length||(this.selectElement(t),this.onSelect.next(this._options[t].value))}onMouseOver(){this.clickable||(this.isActive=!0)}onMouseOut(){this.clickable||(this.isActive=!1)}onLabelClick(){this.clickable&&(this.isActive=!0)}writeValue(t){this.propagateChange(this.selectedValue)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.propagateChange=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dropdown"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.clickout(u)},!1,c.evT)},inputs:{label:"label",clickable:"clickable",defaultOption:"defaultOption",options:"options"},outputs:{onSelect:"onSelect"},features:[c._Bn([{provide:li,useExisting:(0,c.Gpc)(()=>n),multi:!0}])],decls:9,vars:5,consts:[[1,"dropdown",3,"mouseover","mouseout"],[1,"dropdown-selector",3,"click"],[1,"dropdown-selector-label"],[4,"ngIf"],[1,"material-symbols-outlined","dropdown-selector-expand"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.NdJ("mouseover",function(){return r.onMouseOver()})("mouseout",function(){return r.onMouseOut()}),c.TgZ(1,"div",1),c.NdJ("click",function(){return r.onLabelClick()}),c.TgZ(2,"span",2),c.YNc(3,FR,2,1,"span",3),c._uU(4),c.qZA(),c.TgZ(5,"span",4),c._uU(6," expand_more "),c.qZA()(),c.TgZ(7,"ul"),c.YNc(8,LR,2,3,"li",5),c.qZA()()),2&t&&(c.ekj("active",r.isActive),c.xp6(3),c.Q6J("ngIf",r.label),c.xp6(1),c.hij(" ",r.selectedValue," "),c.xp6(4),c.Q6J("ngForOf",r._options))},dependencies:[kr,fn],styles:[".dropdown[_ngcontent-%COMP%]{position:relative;padding:6px;width:100%;cursor:pointer}.dropdown-selector[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:4px}.dropdown-selector-expand[_ngcontent-%COMP%]{font-size:20px}.dropdown.active[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]{z-index:1000;display:none;position:absolute;margin:6px 0 0 -12px;padding:0;list-style:none;background-color:#fff;font-weight:400;font-size:13px;border-radius:4px;box-shadow:1px 1px 4px #0006;min-width:100%;max-height:200px;overflow-y:auto;color:#333}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 12px}ul[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#eee}"]}),n})();function VR(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"number"),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.lnq("",t.completed[t.selectBy]," / ",t.total[t.selectBy]," : ",c.xi3(2,3,100*t.completed[t.selectBy]/t.total[t.selectBy],"1.0-0"),"")}}function UR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.onStatusSelect(u.name))}),c.TgZ(1,"span",11),c.ALo(2,"lowercase"),c.qZA(),c._uU(3),c.ALo(4,"titlecase"),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw();c.ekj("selected",r.selectedStatus===t.name),c.xp6(1),c.Tol(c.lcZ(2,5,t.name)),c.xp6(2),c.hij(" ",c.lcZ(4,7,t.name)," ")}}function BR(n,e){if(1&n&&(c.TgZ(0,"div"),c.ALo(1,"lowercase"),c._uU(2),c.ALo(3,"number"),c.qZA()),2&n){const t=e.$implicit,r=c.oxw();c.Tol(c.lcZ(1,6,t.name)),c.Udp("width",100*t[r.selectBy]/r.total[r.selectBy]+"%"),c.xp6(2),c.AsE(" ",t[r.selectBy]," : ",c.xi3(3,8,100*t[r.selectBy]/r.total[r.selectBy],"1.1-1")," % ")}}var Qm=(()=>(function(n){n.COUNT="count",n.POINTS="points"}(Qm||(Qm={})),Qm))();let jR=(()=>{class n{constructor(){this.statuses=[],this.onStatusSelected=new c.vpe,this.selectedStatus="",this.selectBy=Qm.COUNT,this.selectByOpts=[Qm.COUNT,Qm.POINTS]}ngOnChanges(){this.statuses&&(this.selectedStatus="",this.total=this.statuses.reduce((t,r)=>({count:r.count+t.count,points:t.points+r.points}),{count:0,points:0}),this.completed=this.statuses.find(t=>t.name===Is.done)||{name:"DONE",count:0,points:0})}selectType(t){this.selectBy=t}onStatusSelect(t){this.selectedStatus=this.selectedStatus===t?"":t,this.onStatusSelected.next(this.selectedStatus)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-progress-bar"]],inputs:{statuses:"statuses"},outputs:{onStatusSelected:"onStatusSelected"},features:[c.TTD],decls:13,vars:4,consts:[[1,"container"],[1,"selector"],[3,"options","onSelect"],[1,"bar"],[1,"info"],[4,"ngIf"],[1,"convention"],["class","convention-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"partial"],[3,"class","width",4,"ngFor","ngForOf"],[1,"convention-item",3,"click"],[1,"dot"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"app-dropdown",2),c.NdJ("onSelect",function(u){return r.selectType(u)}),c.qZA()(),c.TgZ(3,"div",3)(4,"div",4)(5,"span"),c._uU(6,"Completed: "),c.YNc(7,VR,3,6,"span",5),c._uU(8,"% "),c.qZA(),c.TgZ(9,"div",6),c.YNc(10,UR,5,9,"div",7),c.qZA()(),c.TgZ(11,"div",8),c.YNc(12,BR,4,11,"div",9),c.qZA()()()),2&t&&(c.xp6(2),c.Q6J("options",r.selectByOpts),c.xp6(5),c.Q6J("ngIf",r.completed),c.xp6(3),c.Q6J("ngForOf",r.statuses),c.xp6(2),c.Q6J("ngForOf",r.statuses))},dependencies:[kr,fn,kb,Bs,js,Hu],styles:[".container[_ngcontent-%COMP%]{display:flex;gap:20px}.selector[_ngcontent-%COMP%]{display:flex;align-items:center}.bar[_ngcontent-%COMP%]{color:#fff;font-size:9px;font-weight:700;padding:10px 0;flex-grow:1}.partial[_ngcontent-%COMP%]{display:flex;margin-top:6px;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,.8)}.partial[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:1px 12px;overflow:hidden;white-space:nowrap;background-color:#333}.info[_ngcontent-%COMP%]{display:flex;color:#fff;gap:20px}.convention[_ngcontent-%COMP%]{display:flex;gap:40px;justify-content:center;color:#fff;flex-grow:2}.convention-item[_ngcontent-%COMP%]{opacity:.6;display:flex;align-items:center;cursor:pointer}.convention-item[_ngcontent-%COMP%]:hover, .convention-item.selected[_ngcontent-%COMP%]{opacity:1}.convention[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;display:inline-block;margin-right:5px;border-radius:50%;border:1px solid white}app-dropdown[_ngcontent-%COMP%]{width:90px;display:block}.partial[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]{background-color:red}.partial[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%]{background-color:#08a13c}.partial[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background-color:#009dff}.partial[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{background-color:#953ac0}.partial[_ngcontent-%COMP%]   .undefined[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .undefined[_ngcontent-%COMP%]{background-color:#333028}.partial[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]{background-color:#08bf1a}"]}),n})(),$R=(()=>{class n{constructor(){this.onUploadClick=new c.vpe,this.onZoomClick=new c.vpe}ngOnInit(){}onUploadFile(){this.onUploadClick.next(!0)}onZoom(t){this.onZoomClick.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-menu"]],outputs:{onUploadClick:"onUploadClick",onZoomClick:"onZoomClick"},decls:15,vars:2,consts:[[1,"menu"],[1,"material-symbols-outlined",3,"routerLink"],[1,"material-symbols-outlined",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"ul")(2,"li")(3,"span",1),c._uU(4," account_tree "),c.qZA()(),c.TgZ(5,"li")(6,"span",1),c._uU(7," table_chart "),c.qZA()()(),c.TgZ(8,"ul")(9,"li")(10,"span",2),c.NdJ("click",function(){return r.onZoom(-1)}),c._uU(11," zoom_out "),c.qZA()(),c.TgZ(12,"li")(13,"span",2),c.NdJ("click",function(){return r.onZoom(1)}),c._uU(14," zoom_in "),c.qZA()()()()),2&t&&(c.xp6(3),c.Q6J("routerLink","dependency"),c.xp6(3),c.Q6J("routerLink","table"))},dependencies:[Ba],styles:[".menu[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;padding:12px}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{background-color:#33325c;border-radius:20px;padding:6px 8px;list-style:none;margin:0;display:flex;gap:10px;color:#fff}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;font-size:20px;display:block;font-weight:300}"]}),n})();function HR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",9)(1,"app-dropdown",10),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onSelectMVP(s))}),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("options",t.mvps)("label","MVP")("defaultOption","None")}}function GR(n,e){1&n&&(c.TgZ(0,"span",11),c._uU(1," verified "),c.qZA())}function zR(n,e){1&n&&(c.TgZ(0,"span",12),c._uU(1," dangerous "),c.qZA())}let qR=(()=>{class n{constructor(t,r,s,u){this.nodeTreeService=t,this.ticketService=r,this.viewService=s,this.userService=u,this.mvps=[],this.leader="",this.title="",this.unsub$=new In.x,this.hasUser=!1,t.getMVPs().pipe(io(this.unsub$)).subscribe(d=>this.mvps=d),t.getProgress().pipe(io(this.unsub$)).subscribe(d=>this.progressStatus=d),t.getProjectName().pipe(io(this.unsub$)).subscribe(d=>this.title=d),t.getLeader().pipe(io(this.unsub$)).subscribe(d=>this.leader=d),u.getUser$().subscribe(d=>{this.hasUser=null!==d})}onSelectMVP(t){this.nodeTreeService.onSelectMVP(t)}onProjectClick(){this.nodeTreeService.openLoadWindow()}onZoomClick(t){this.viewService.setZoom(t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}statusSelect(t){this.nodeTreeService.onSelectStatus(t)}onProifleClick(){this.userService.setProfileOpen(!0)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xp),c.Y36(Nb),c.Y36(g1),c.Y36(MA))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-header"]],decls:11,vars:5,consts:[[1,"header"],[1,"header-title",3,"click"],["class","header-sprint",4,"ngIf"],[1,"header-progress"],[3,"statuses","onStatusSelected"],[1,"header-leader",3,"click"],["class","material-symbols-outlined",4,"ngIf"],["class","material-symbols-outlined wrong",4,"ngIf"],[3,"onZoomClick"],[1,"header-sprint"],[3,"options","label","defaultOption","onSelect"],[1,"material-symbols-outlined"],[1,"material-symbols-outlined","wrong"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c.NdJ("click",function(){return r.onProjectClick()}),c.TgZ(2,"h1"),c._uU(3),c.qZA()(),c.YNc(4,HR,2,3,"div",2),c.TgZ(5,"div",3)(6,"app-progress-bar",4),c.NdJ("onStatusSelected",function(u){return r.statusSelect(u)}),c.qZA()(),c.TgZ(7,"div",5),c.NdJ("click",function(){return r.onProifleClick()}),c.YNc(8,GR,2,0,"span",6),c.YNc(9,zR,2,0,"span",7),c.qZA()(),c.TgZ(10,"app-menu",8),c.NdJ("onZoomClick",function(u){return r.onZoomClick(u)}),c.qZA()),2&t&&(c.xp6(3),c.Oqu(r.title),c.xp6(1),c.Q6J("ngIf",r.mvps),c.xp6(2),c.Q6J("statuses",r.progressStatus),c.xp6(2),c.Q6J("ngIf",r.hasUser),c.xp6(1),c.Q6J("ngIf",!r.hasUser))},dependencies:[fn,jR,kb,$R],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px;font-weight:700;height:52px;background-color:#33325c;color:#fff}.header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.3);padding:0 16px;align-items:center;display:flex;flex-shrink:1}.header-title[_ngcontent-%COMP%]{font-size:16px;cursor:pointer}.header-title[_ngcontent-%COMP%]:hover{color:#cc8fe9}.header-progress[_ngcontent-%COMP%]{flex-basis:50%;flex-grow:2;display:block!important}.header-leader[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-right:1px solid #CCC;padding:0 30px}.header-leader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#fff;display:flex;justify-content:center;align-items:center;font-weight:700;border-radius:50%;width:30px;height:30px;color:#199f39;cursor:pointer}.header-leader[_ngcontent-%COMP%]   span.wrong[_ngcontent-%COMP%]{color:#b41d76}h1[_ngcontent-%COMP%]{font-size:16px;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}app-menu[_ngcontent-%COMP%]{position:absolute;width:100%;z-index:900}app-dropdown[_ngcontent-%COMP%]{width:210px;display:block}"]}),n})(),ZR=(()=>{class n{constructor(){this.onDelete=new c.vpe,this.confirmationVisible=!1}ngOnInit(){}onDeleteClick(){this.confirmationVisible=!0}confirmDelete(){!this.id||this.onDelete.next(this.id)}cancelDelete(){this.confirmationVisible=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-chip-item"]],inputs:{id:"id",text:"text",confirmation:"confirmation"},outputs:{onDelete:"onDelete"},decls:18,vars:4,consts:[[1,"chip"],[1,"chip-content"],[1,"material-symbols-outlined"],[1,"material-symbols-outlined","aligned_right",3,"click"],[1,"chip-confirmation"],["type","button",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"li",0)(1,"div",1)(2,"span",2),c._uU(3," more_vert "),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.TgZ(6,"span",3),c.NdJ("click",function(){return r.onDeleteClick()}),c._uU(7," delete "),c.qZA()(),c.TgZ(8,"div",4)(9,"div")(10,"span",2),c._uU(11," warning "),c.qZA(),c._uU(12),c.qZA(),c.TgZ(13,"div")(14,"button",5),c.NdJ("click",function(){return r.confirmDelete()}),c._uU(15,"Confirm"),c.qZA(),c.TgZ(16,"button",5),c.NdJ("click",function(){return r.cancelDelete()}),c._uU(17,"Cancel"),c.qZA()()()()),2&t&&(c.xp6(5),c.hij(" ",r.text," "),c.xp6(3),c.ekj("visible",r.confirmationVisible),c.xp6(4),c.hij(" ",r.confirmation," "))},styles:[".chip[_ngcontent-%COMP%]{background-color:#f4edff;border-radius:4px;overflow:hidden;cursor:pointer;position:relative}.chip[_ngcontent-%COMP%]:hover{background-color:#e9dbff}.chip[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:16px;color:#0006}.chip-content[_ngcontent-%COMP%]{display:flex;gap:8px;padding:6px}.chip-confirmation[_ngcontent-%COMP%]{padding:5px 12px;height:100%;position:absolute;left:110%;width:100%;display:flex;justify-content:space-between;align-items:center;transition:left .3s ease-in-out;background-color:#33325c;color:#fff;top:0;font-size:12px}.chip-confirmation.visible[_ngcontent-%COMP%]{left:0}.chip-confirmation[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{color:#e583e1}.chip-confirmation[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{align-items:center;display:flex;gap:8px}button[_ngcontent-%COMP%]{background-color:#f4edff;border:medium none;border-radius:8px;font-size:10px;margin-left:8px;padding:3px 8px}.aligned_right[_ngcontent-%COMP%]{margin-left:auto}"]}),n})();function WR(n,e){if(1&n&&(c.ynx(0),c._UZ(1,"input",27),c.BQk()),2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.ekj("field_error",(null==(r=t.form.get("code"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("code"))?null:r.touched))}}function KR(n,e){if(1&n&&(c.TgZ(0,"span",28),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);let r,s;c.ekj("field_error",(null==(r=t.form.get("code"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("code"))?null:r.touched)),c.xp6(1),c.Oqu(null==(s=t.form.get("code"))?null:s.value)}}function YR(n,e){if(1&n&&(c.ynx(0),c._UZ(1,"input",30),c.BQk()),2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.ekj("field_error",(null==(r=t.form.get("estimation"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("estimation"))?null:r.touched))}}function QR(n,e){if(1&n&&(c.TgZ(0,"p",28),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.hij("",t.data.estimation," pts")}}function JR(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"app-dropdown",31),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw(2);return c.KtG(u.onStatusChange(s))}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.Q6J("defaultOption",null==(r=t.form.get(t.editableFields.STATUS))?null:r.value)("options",t.statuses)}}function XR(n,e){if(1&n&&(c.TgZ(0,"span",32),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);let r;c.Tol(t.data.status),c.xp6(1),c.Oqu(null==(r=t.form.get(t.editableFields.STATUS))?null:r.value)}}function eF(n,e){if(1&n&&(c.ynx(0),c._UZ(1,"input",33),c.BQk()),2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.ekj("field_error",(null==(r=t.form.get("title"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("title"))?null:r.touched))}}function tF(n,e){if(1&n&&(c.TgZ(0,"h3",34),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);let r;c.xp6(1),c.Oqu(null==(r=t.form.get("title"))?null:r.value)}}function nF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"app-dropdown",35),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw(2);return c.KtG(u.onAssignedChanged(s))}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.ekj("field_error",(null==(r=t.form.get("assigned"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("assigned"))?null:r.touched)),c.Q6J("defaultOption",null==t.assigned?null:t.assigned.name)("options",t.filteredPeople)}}function rF(n,e){if(1&n&&(c.TgZ(0,"span",28),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Oqu((null==t.assigned?null:t.assigned.name)||"--")}}function iF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"span",36),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onShowDropdown(s.editableFields.PARENTS))}),c._uU(2," add_box "),c.qZA(),c.BQk()}}function sF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span",36),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onShowDropdown(s.editableFields.NONE))}),c._uU(1," disabled_by_default "),c.qZA()}}function oF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"app-chip-item",37),c.NdJ("onDelete",function(s){c.CHM(t);const u=c.oxw(2);return c.KtG(u.onParentDelete(s))}),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("id",t.id)("text",t.code+" - "+t.title)("confirmation","Are you sure you want to remove this parent?")}}function aF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"app-dropdown",38),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw(2);return c.KtG(u.onParentSelect(s))}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("defaultOption","Select a parent node")("options",t.ticketListFiltered)}}function uF(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"textarea",39),c._uU(2,"                                "),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(1),c.Tol(t.mode)}}function cF(n,e){if(1&n&&(c._UZ(0,"div",40),c.TgZ(1,"span",29),c._uU(2," edit "),c.qZA()),2&n){const t=c.oxw(2);let r;c.Q6J("innerHTML",null==(r=t.form.get("description"))?null:r.value,c.oJD)}}function lF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",41),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.moveToTrash())}),c.TgZ(1,"span",42),c._uU(2,"delete"),c.qZA(),c._uU(3," Move to trash "),c.qZA()}}function dF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",3)(2,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.CODE))}),c.YNc(3,WR,2,4,"ng-container",5),c.YNc(4,KR,4,3,"ng-template",null,6,c.W1O),c.qZA(),c.TgZ(6,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.ESTIMATION))}),c.YNc(7,YR,2,4,"ng-container",5),c.YNc(8,QR,4,1,"ng-template",null,7,c.W1O),c.qZA(),c.TgZ(10,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.STATUS))}),c.YNc(11,JR,2,4,"ng-container",5),c.YNc(12,XR,4,3,"ng-template",null,8,c.W1O),c.qZA(),c.TgZ(14,"span",9),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.closeModal())}),c._uU(15," close "),c.qZA()(),c.TgZ(16,"div",10)(17,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.TITLE))}),c.YNc(18,eF,2,4,"ng-container",5),c.YNc(19,tF,4,1,"ng-template",null,11,c.W1O),c.qZA(),c.TgZ(21,"section",12)(22,"h5",13)(23,"span",14),c._uU(24," expand_more "),c.qZA(),c._uU(25," Assigned: "),c.qZA(),c.TgZ(26,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.ASSIGNED))}),c.YNc(27,nF,2,6,"ng-container",5),c.YNc(28,rF,4,1,"ng-template",null,15,c.W1O),c.qZA()(),c.TgZ(30,"section",12)(31,"h5",13)(32,"span",14),c._uU(33," expand_more "),c.qZA(),c._uU(34," Parents: "),c.TgZ(35,"div",16),c.YNc(36,iF,3,0,"ng-container",5),c.YNc(37,sF,2,0,"ng-template",null,17,c.W1O),c.qZA()(),c.TgZ(39,"div")(40,"ul",18),c.YNc(41,oF,2,3,"li",19),c.qZA()(),c.YNc(42,aF,2,2,"ng-container",2),c.qZA(),c.TgZ(43,"section",12)(44,"h5",13)(45,"span",14),c._uU(46," expand_more "),c.qZA(),c._uU(47," Description: "),c.qZA(),c.TgZ(48,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.DESCRIPTION))}),c.YNc(49,uF,3,2,"ng-container",5),c.YNc(50,cF,3,1,"ng-template",null,20,c.W1O),c.qZA()()(),c.TgZ(52,"div",21)(53,"div",22),c.YNc(54,lF,4,0,"button",23),c.TgZ(55,"div",24),c._UZ(56,"input",25)(57,"input",26),c.qZA()()(),c.BQk()}if(2&n){const t=c.MAs(5),r=c.MAs(9),s=c.MAs(13),u=c.MAs(20),d=c.MAs(29),g=c.MAs(38),_=c.MAs(51),b=c.oxw();c.xp6(3),c.Q6J("ngIf",b.editingField===b.editableFields.CODE||b.mode===b.modes.CREATE)("ngIfElse",t),c.xp6(4),c.Q6J("ngIf",b.editingField===b.editableFields.ESTIMATION||b.mode===b.modes.CREATE)("ngIfElse",r),c.xp6(4),c.Q6J("ngIf",b.editingField===b.editableFields.STATUS||b.mode===b.modes.CREATE)("ngIfElse",s),c.xp6(7),c.Q6J("ngIf",b.editingField===b.editableFields.TITLE||b.mode===b.modes.CREATE)("ngIfElse",u),c.xp6(9),c.Q6J("ngIf",b.editingField===b.editableFields.ASSIGNED||b.mode===b.modes.CREATE)("ngIfElse",d),c.xp6(9),c.Q6J("ngIf",b.activeDropdown!==b.editableFields.PARENTS)("ngIfElse",g),c.xp6(5),c.Q6J("ngForOf",b.parents),c.xp6(1),c.Q6J("ngIf",b.activeDropdown===b.editableFields.PARENTS),c.xp6(7),c.Q6J("ngIf",b.editingField===b.editableFields.DESCRIPTION||b.mode===b.modes.CREATE)("ngIfElse",_),c.xp6(5),c.Q6J("ngIf",b.mode!==b.modes.CREATE),c.xp6(3),c.Q6J("disabled",!b.form.dirty||!b.form.valid)}}var fl=(()=>(function(n){n.NONE="",n.STATUS="status",n.TITLE="title",n.ESTIMATION="estimation",n.DESCRIPTION="description",n.CODE="code",n.ASSIGNED="assigned",n.PARENTS="parents"}(fl||(fl={})),fl))();let hF=(()=>{class n{constructor(t,r,s,u,d,g){this.ticketService=t,this.nodeTreeService=r,this.firebaseService=s,this.projectService=u,this.peopleService=d,this.fb=g,this.nodeStaus=Is,this.editableFields=fl,this.modes=Uu,this.mode=Uu.CREATE,this.editingField=fl.NONE,this.peopleList=[],this.ticketList=[],this.ticketListFiltered=[],this.parents=[],this.activeDropdown=fl.NONE,this.unsub$=new In.x,this.statuses=[Is.blocked,Is.done,Is.new,Is.progress,Is.review,Is.undefined]}ngOnInit(){this.peopleList=this.peopleService.people,this.setupData(this.projectService.project,this.ticketService.getnodeData()),this.nodeTreeService.getNodeTree().pipe(io(this.unsub$)).subscribe(t=>this.ticketList=t),this.ticketService.getNodeData$().pipe(io(this.unsub$)).subscribe(t=>{this.onEditField(void 0,fl.NONE),this.setupData(this.projectService.project,t)})}setupData(t,r){this.project=t,this.ticketList=t.tickets.map(s=>({code:s.code,id:s.id,title:s.title,childrenTree:s.childrenTree})),this.mode=this.ticketService.mode,this.data=r,this.parents=[],this.data.parents.forEach(s=>{const u=this.ticketList.find(d=>d.id===s);void 0!==u&&this.parents.push(u)}),this.assigned=this.data?.assigned,this.updateFilteredParentList(),this.updateFilteredPeople(),this.setupForm()}setupForm(){this.form=this.fb.group({assigned:[this.assigned?.name],code:[this.data?.code,xa.required],description:[this.data?.description],estimation:[this.data?.estimation,xa.required],status:[this.data?.status,xa.required],title:[this.data?.title,xa.required],parents:[this.data.parents]})}closeModal(){this.ticketService.openDetailsPanel(!1)}onSave(){if(this.mode==Uu.EDIT){const t=this.form.controls;let r={};for(const s in t)!0===t[s].dirty&&(r={...r,[s]:t[s].value},s===this.editableFields.ASSIGNED&&(r.assigned=t[s].value.id));this.closeModal(),this.firebaseService.updateTicket(this.data?.id,r).catch(console.error)}else this.mode==Uu.CREATE&&this.firebaseService.createTicket(this.form.value,this.project.docId).then(t=>{this.closeModal()}).catch(console.error)}onEditField(t,r){this.editingField=r}onStatusChange(t){this.editingField=fl.NONE;const r=this.form.get("status");r?.patchValue(t),this.markAsDirty(r)}onShowDropdown(t){this.activeDropdown=t}onParentSelect(t){if(""===t)return;const r=this.ticketList.find(s=>s.id===t);if(r){this.parents.push(r);const s=this.form.get("parents");s?.patchValue(this.parents.map(u=>u.id)),this.markAsDirty(s),this.updateFilteredParentList()}}onParentDelete(t){this.parents=this.parents.filter(s=>s.id!==t);const r=this.form.get("parents");r?.patchValue(this.parents.map(s=>s.id)),this.markAsDirty(r),this.updateFilteredParentList(t)}onAssignedChanged(t){if(""===t)return;const r=this.peopleList.find(s=>s.id===t);if(r){this.assigned={name:r.name,value:r.id},this.editingField=fl.NONE;const s=this.form.get("assigned");this.updateFilteredPeople(),s?.patchValue(r),this.markAsDirty(s),this.updateFilteredPeople()}}updateFilteredParentList(t){this.ticketListFiltered=this.ticketList.filter(r=>r.id!==this.data.id&&!this.parents.map(s=>s.id).includes(r.id)&&r.id&&!this.ticketList.find(s=>s.id===this.data.id)?.childrenTree?.flat().includes(r.id)&&!r.childrenTree?.flat().includes(this.data.id)).map(r=>({name:r.code+" - "+r.title,value:r.id})),t&&(this.ticketListFiltered=this.ticketListFiltered.concat(this.ticketList.filter(r=>r.id===t||r.childrenTree?.flat().includes(t)).map(r=>({name:r.code+" - "+r.title,value:r.id}))))}updateFilteredPeople(){this.filteredPeople=this.peopleList.filter(t=>t.id!==this.assigned?.id).map(t=>({name:t.name,value:t.id}))}markAsDirty(t){t?.markAsDirty({onlySelf:!0}),this.form.markAsDirty()}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}moveToTrash(){this.closeModal(),this.ticketService.moveToTrash(this.projectService.getTicketRefById(this.data.id),this.data.children).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Nb),c.Y36(xp),c.Y36(hl),c.Y36(Pb),c.Y36(AA),c.Y36(wc))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-ticket-detail"]],decls:3,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"modal-window"],[4,"ngIf"],[1,"modal-window-header"],[1,"field_editable",3,"click"],[4,"ngIf","ngIfElse"],["codeEdit",""],["estimationEdit",""],["statusEdit",""],[1,"material-symbols-outlined","close-modal",3,"click"],[1,"modal-window-body"],["titleEdit",""],[1,"field_section"],[1,"field_section_title"],[1,"material-symbols-outlined","field_section_expand"],["assignedEdit",""],[1,"field_section_title_right"],["hideLoadParents",""],[1,"parents"],[4,"ngFor","ngForOf"],["descriptionEdit",""],[1,"modal-window-footer"],[1,"btn-section-between"],["class","btn btn-alert","type","button",3,"click",4,"ngIf"],[1,"btn-section"],["type","button","value","cancel",1,"btn","btn-primary"],["type","submit","value","save",1,"btn","btn-primary",3,"disabled"],["type","text","formControlName","code","placeholder","Ticket Code",1,"field_paragraph"],[1,"field_paragraph"],[1,"material-symbols-outlined","field_editable_icon"],["type","number","placeholder","estimation","formControlName","estimation",1,"field_paragraph"],["formControlName","status",3,"defaultOption","options","onSelect"],[1,"status"],["type","text","formControlName","title","placeholder","Ticket title",1,"field_title"],[1,"field_title"],["formControlName","assigned",1,"field_section_dropdown",3,"defaultOption","options","onSelect"],[1,"material-symbols-outlined",3,"click"],[3,"id","text","confirmation","onDelete"],[1,"field_section_dropdown",3,"defaultOption","options","onSelect"],["formControlName","description",1,"field_textarea"],[1,"field_textarea",3,"innerHTML"],["type","button",1,"btn","btn-alert",3,"click"],[1,"material-symbols-outlined"]],template:function(t,r){1&t&&(c.TgZ(0,"form",0),c.NdJ("ngSubmit",function(){return r.onSave()}),c.TgZ(1,"div",1),c.YNc(2,dF,58,18,"ng-container",2),c.qZA()()),2&t&&(c.Q6J("formGroup",r.form),c.xp6(2),c.Q6J("ngIf",void 0!==r.data||r.mode===r.modes.CREATE))},dependencies:[kr,fn,Sy,Ys,B0,hc,vu,Zl,qh,kb,ZR],styles:[".btn[_ngcontent-%COMP%]{background-color:#33325c;border-radius:4px;color:#fff;font-size:14px;padding:8px 12px;border:medium none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px}.btn[_ngcontent-%COMP%]:hover{background-color:#33325ccc}.btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:default}.btn[disabled][_ngcontent-%COMP%]:hover{background-color:#33325c}.btn-alert[_ngcontent-%COMP%]{background-color:#e849d4}.btn[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:18px}.form[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column}.form-group[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.form-group-label[_ngcontent-%COMP%]{flex-basis:56px}.form-group-input[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.4);border-radius:4px;outline:medium none;padding:8px;flex-grow:1}.form-group-input[_ngcontent-%COMP%]:-internal-autofill-selected{color:#fff;background-color:#fff}h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.modal-window[_ngcontent-%COMP%]{position:fixed;right:0;top:52px;bottom:0;width:600px;background-color:#fff;border-radius:8px 0 0 8px;box-shadow:-1px 0 2px #0003;z-index:2000;font-size:.8em;display:flex;flex-direction:column}.modal-window-header[_ngcontent-%COMP%]{padding:20px 36px 0 20px;display:flex;gap:12px;justify-content:space-between}.modal-window-header[_ngcontent-%COMP%]   .field_editable[_ngcontent-%COMP%]{flex-basis:120px}.modal-window-footer[_ngcontent-%COMP%]{padding:10px 20px 20px}.modal-window-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:10px 20px;flex-grow:2;overflow-Y:auto}.field_editable[_ngcontent-%COMP%]{display:flex;align-items:stretch;cursor:pointer}.field_editable_icon[_ngcontent-%COMP%]{display:none;color:#666;font-size:16px;background-color:#f0f0f0;padding:2px 4px;border-radius:0 4px 4px 0;align-items:center}.field_editable[_ngcontent-%COMP%]:hover   .field_editable_icon[_ngcontent-%COMP%]{display:flex}.field_editable[_ngcontent-%COMP%]:hover   .field_title[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]:hover   .field_paragraph[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]:hover   .field_textarea[_ngcontent-%COMP%]{border-color:#0000000d}.field_editable[_ngcontent-%COMP%]   .field_title.create[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]   .field_paragraph.create[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]   .field_textarea.create[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.2);border-radius:4px}.field_editable[_ngcontent-%COMP%]   .field_title.create.field_error[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]   .field_paragraph.create.field_error[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]   .field_textarea.create.field_error[_ngcontent-%COMP%]{border-color:red}.field_editable[_ngcontent-%COMP%]   .field_title[_ngcontent-%COMP%]:focus, .field_editable[_ngcontent-%COMP%]   .field_paragraph[_ngcontent-%COMP%]:focus, .field_editable[_ngcontent-%COMP%]   .field_textarea[_ngcontent-%COMP%]:focus{border-radius:4px}.field_title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;line-height:1.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:5px 8px;margin:0;border:1px solid transparent;border-radius:4px 0 0 4px}.field_section_title[_ngcontent-%COMP%]{cursor:pointer;margin:0 0 6px 6px;display:flex;gap:4px;align-items:center}.field_section_title_right[_ngcontent-%COMP%]{justify-self:flex-end;margin-left:auto}.field_section[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:16px}.field_section_dropdown[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-radius:4px;padding:0 4px;margin:4px 0 8px 8px;display:block;width:100%}.field_paragraph[_ngcontent-%COMP%], .field_textarea[_ngcontent-%COMP%], .field_title[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid transparent;border-radius:4px 0 0 4px;width:100%}.field_paragraph[_ngcontent-%COMP%]:focus-visible, .field_textarea[_ngcontent-%COMP%]:focus-visible, .field_title[_ngcontent-%COMP%]:focus-visible{border:1px solid #F0F0F0;outline:medium none}.field_textarea[_ngcontent-%COMP%]{height:320px;font-family:inherit;width:100%;padding:8px}.field_error[_ngcontent-%COMP%]{border-color:#e849d4!important}.field_error[_ngcontent-%COMP%] + .field_editable_icon[_ngcontent-%COMP%]{display:flex;color:#fff;background-color:#e849d4}.close-modal[_ngcontent-%COMP%]{position:absolute;cursor:pointer;right:16px;top:16px;font-size:14px}.status[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:6px 8px;background-color:#333;border-radius:4px;color:#fff;font-size:11px}.parents[_ngcontent-%COMP%]{list-style:none;margin:0 0 0 8px;padding:0}.parents[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 0 4px}.parents[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin:0}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.btn-section-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),n})();function fF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",17),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw(3);return c.KtG(d.onLoadProject(u.value))}),c.TgZ(1,"span",18),c._uU(2," family_history "),c.qZA(),c._uU(3),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t.name," ")}}function pF(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"ul"),c.YNc(2,fF,4,1,"li",16),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(2),c.Q6J("ngForOf",t.projectNames)}}function gF(n,e){1&n&&c._uU(0," Loading projects... ")}function mF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",11),c.YNc(2,pF,3,1,"ng-container",5),c.YNc(3,gF,1,0,"ng-template",null,12,c.W1O),c.qZA(),c.TgZ(5,"div",13)(6,"div",14),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.goToView(s.modes.NEW))}),c._UZ(7,"img",15),c.TgZ(8,"p"),c._uU(9,"Create a new project"),c.qZA()()(),c.BQk()}if(2&n){const t=c.MAs(4),r=c.oxw();c.xp6(2),c.Q6J("ngIf",r.projectNames.length>0)("ngIfElse",t)}}function yF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",19),c.NdJ("ngSubmit",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.onCreateNewProject())}),c.TgZ(1,"div",20)(2,"p",21),c._uU(3,"Project name"),c.qZA(),c._UZ(4,"input",22),c.TgZ(5,"p",21),c._uU(6,"Please select a leader for this project."),c.qZA(),c.TgZ(7,"app-dropdown",23),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.selectProjectAssigned(s))}),c.qZA()()()}if(2&n){const t=c.oxw();c.Q6J("formGroup",t.form),c.xp6(7),c.Q6J("defaultOption","None")("options",t.peopleNames)}}function _F(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",24),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.onCreateNewProject())}),c._uU(1," Create "),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("disabled",!t.form.dirty||!t.form.valid)}}var Bu=(()=>(function(n){n.NEW="Create a new project",n.LOAD="Select your project"}(Bu||(Bu={})),Bu))();let vF=(()=>{class n{constructor(t,r){this.nodeTreeService=t,this.fb=r,this.onLoad=new c.vpe,this.onCancel=new c.vpe,this.parseJSONError=!1,this.projectLoaded=!1,this.title=Bu.LOAD,this.mode=Bu.LOAD,this.modes=Bu,this.creationBtnDisabled=!1;const s=localStorage.getItem("project");s&&(this.project=JSON.parse(s))}set projects(t){this.projectNames=t.map(r=>({name:r.name,value:r.docId}))}set people(t){this.peopleNames=t.map(r=>({name:r.name,value:r.id}))}setupForm(){this.form=this.fb.group({assigned:[this.projectAssigned,xa.required],title:[this.projectTitle]})}onSelecProject(t){this.selectedProjectID=t.toString()}onLoadProject(t){this.onLoad.next(t.toString())}ngOnInit(){this.projectLoaded=this.nodeTreeService.isProjectLoaded,this.setupForm()}onInsert(){this.projectLoaded=!0}onClose(){this.onCancel.next(!1)}onCancelClick(){this.mode!==Bu.NEW?this.mode===Bu.LOAD&&this.projectLoaded&&this.onClose():this.goToView(Bu.LOAD)}onCreateNewProject(){}goToView(t){this.title=this.mode=t}goToLoadingView(){this.title=this.mode=Bu.LOAD}selectProjectAssigned(t){""!==t&&(this.projectAssigned=this.people.find(s=>s.id===t),this.form.get("parents"))}onSave(){const t=this.form.controls;let r={};for(const s in t)t[s].dirty&&(r={...r,[s]:t[s].value});console.log(r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xp),c.Y36(wc))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-project-loader"]],inputs:{projects:"projects",people:"people"},outputs:{onLoad:"onLoad",onCancel:"onCancel"},decls:16,vars:5,consts:[[1,"overlay"],[1,"modal"],[1,"modal-header"],[1,"modal-close","material-symbols-outlined",3,"disabled","click"],[1,"modal-body"],[4,"ngIf","ngIfElse"],["createProject",""],[1,"modal-footer"],[1,"btn-section"],["type","button",1,"btn","btn_primary",3,"click"],["class","btn btn_primary","type","submit",3,"disabled","click",4,"ngIf"],[1,"projects"],["projects",""],[1,"file-container"],[1,"file-button",3,"click"],["src","assets/file_001.png","alt","",1,"file-img"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"material-symbols-outlined"],[3,"formGroup","ngSubmit"],[1,"new_project"],[1,"new_project_label"],["type","text","placeholder","Project Name","formControlName","title",1,"new_project_input"],[1,"new_project_dropdown",3,"defaultOption","options","onSelect"],["type","submit",1,"btn","btn_primary",3,"disabled","click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),c._uU(4),c.qZA(),c.TgZ(5,"button",3),c.NdJ("click",function(){return r.onClose()}),c._uU(6," close "),c.qZA()(),c.TgZ(7,"div",4),c.YNc(8,mF,10,2,"ng-container",5),c.YNc(9,yF,8,3,"ng-template",null,6,c.W1O),c.qZA(),c.TgZ(11,"div",7)(12,"div",8)(13,"button",9),c.NdJ("click",function(){return r.onCancelClick()}),c._uU(14,"Cancel"),c.qZA(),c.YNc(15,_F,2,1,"button",10),c.qZA()()()()),2&t){const s=c.MAs(10);c.xp6(4),c.Oqu(r.title),c.xp6(1),c.Q6J("disabled",!r.projectLoaded),c.xp6(3),c.Q6J("ngIf",r.mode===r.modes.LOAD)("ngIfElse",s),c.xp6(7),c.Q6J("ngIf",r.mode===r.modes.NEW)}},dependencies:[kr,fn,Sy,Ys,hc,vu,Zl,qh,kb],styles:[".btn[_ngcontent-%COMP%]{background-color:#33325c;border-radius:4px;color:#fff;font-size:14px;padding:8px 12px;border:medium none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px}.btn[_ngcontent-%COMP%]:hover{background-color:#33325ccc}.btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:default}.btn[disabled][_ngcontent-%COMP%]:hover{background-color:#33325c}.btn-alert[_ngcontent-%COMP%]{background-color:#e849d4}.btn[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:18px}.form[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column}.form-group[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.form-group-label[_ngcontent-%COMP%]{flex-basis:56px}.form-group-input[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.4);border-radius:4px;outline:medium none;padding:8px;flex-grow:1}.form-group-input[_ngcontent-%COMP%]:-internal-autofill-selected{color:#fff;background-color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;z-index:20000;width:100vw;height:100vh;background-color:#b4b4b466;left:0;top:0;display:flex;justify-content:center;align-items:center;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;border:1px solid #CCC;box-shadow:2px 2px 6px #00000080;width:720px}.modal-header[_ngcontent-%COMP%]{padding:28px;position:relative}.modal-body[_ngcontent-%COMP%]{padding:0 28px}.modal-footer[_ngcontent-%COMP%]{padding:28px}.modal-close[_ngcontent-%COMP%]{position:absolute;right:-12px;top:-12px;background-color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:1px 1px 1px #0000001a;border:medium none}.modal-close[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}h2[_ngcontent-%COMP%]{font-size:26px;margin:0}.projects[_ngcontent-%COMP%]{overflow-y:auto;padding:2px;margin-bottom:20px;max-height:210px}.projects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:12px}.projects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{opacity:.6;background-color:#f0f0f0;box-shadow:0 0 0 1px #0000001a;padding:16px;border-radius:12px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:opacity .2s;font-size:20px;color:#333;font-weight:700}.projects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{opacity:1}.projects[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{color:#33325c}.file-container[_ngcontent-%COMP%]{display:flex;gap:30px;justify-content:center}.file-button[_ngcontent-%COMP%]{opacity:.4;background-color:#f0f0f0;box-shadow:0 0 0 1px #0000001a;padding:30px;border-radius:12px;display:flex;flex-direction:column;flex:0 0 50%;justify-content:center;align-items:center;text-align:center;max-width:260px;gap:12px;cursor:pointer;transition:opacity .2s;font-size:13px}.file-button-hidden[_ngcontent-%COMP%]{display:none}.file-button[_ngcontent-%COMP%]:hover{opacity:.7}.file-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.file-img[_ngcontent-%COMP%]{display:block;height:68px}.new_project[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.new_project_label[_ngcontent-%COMP%]{margin:0}.new_project_input[_ngcontent-%COMP%]{font-size:20px;font-weight:700;border:1px solid rgba(0,0,0,.5);border-radius:4px;display:block;width:100%;padding:8px 12px;margin-bottom:26px}.new_project_input[_ngcontent-%COMP%]:focus-visible{outline:medium none;box-shadow:0 0 2px #8925eb80;border:1px solisd rgb(137,37,235)}.new_project_dropdown[_ngcontent-%COMP%]{display:block;border:1px solid rgba(0,0,0,.5);border-radius:4px;padding:4px;margin-bottom:12px}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}"]}),n})();function wF(n,e){1&n&&c._UZ(0,"app-ticket-detail")}function CF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"app-project-loader",5),c.NdJ("onCancel",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onShowLoader(s))})("onLoad",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.loadProject(s))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("projects",t.projects)("people",t.people)}}function EF(n,e){1&n&&c._UZ(0,"app-authentication")}let bF=(()=>{class n{constructor(t,r,s,u,d,g,_){this.nodeTreeService=t,this.ticketService=r,this.projectService=s,this.companyService=u,this.peopleService=d,this.firebaseService=g,this.userService=_,this.showProjectLoader=!0,this.isDetailPanelOpen=!1,this.projects=[],this.people=[],this.currentCompanyID="frCRG0OZ2ytX2GvgYk50",this.unsub$=new In.x,this.showAuthentication=!1}ngOnInit(){localStorage.clear(),this.nodeTreeService.loadFromLocalStorage(),localStorage.getItem("project")&&(this.showProjectLoader=!1),this.userService.isProfileOpen().subscribe(t=>this.showAuthentication=t),this.companyService.loadCompanies().pipe(io(this.unsub$),tr(t=>{const r=t.find(s=>s.docId===this.currentCompanyID);return this.companyService.loadCompany(r.docId)}),tr(t=>this.peopleService.loadPeople(this.companyService.company.people)),tr(t=>this.projectService.getProjectsByCompany(this.companyService.company.projects))).subscribe(t=>{this.projects=t,this.people=this.peopleService.people}),this.nodeTreeService.isLoadWindowOpen().pipe(io(this.unsub$)).subscribe(t=>this.showProjectLoader=t),this.ticketService.isDetailsPanelOpen().pipe(io(this.unsub$)).subscribe(t=>{this.isDetailPanelOpen=t})}loadProject(t){this.firebaseService.getProject(t).pipe(tr(r=>this.projectService.loadProjectData(r))).subscribe(r=>this.onShowLoader(!1))}onShowLoader(t){this.showProjectLoader=t}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}onCreateNode(){this.ticketService.setNodeData()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xp),c.Y36(Nb),c.Y36(Pb),c.Y36(PR),c.Y36(AA),c.Y36(hl),c.Y36(MA))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:9,vars:3,consts:[[1,"main-container"],[4,"ngIf"],[3,"projects","people","onCancel","onLoad",4,"ngIf"],[1,"floating-icon"],[1,"material-symbols-outlined",3,"click"],[3,"projects","people","onCancel","onLoad"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"app-header")(2,"router-outlet"),c.YNc(3,wF,1,0,"app-ticket-detail",1),c.YNc(4,CF,1,2,"app-project-loader",2),c.TgZ(5,"div",3)(6,"span",4),c.NdJ("click",function(){return r.onCreateNode()}),c._uU(7," add "),c.qZA()()(),c.YNc(8,EF,1,0,"app-authentication",1)),2&t&&(c.xp6(3),c.Q6J("ngIf",r.isDetailPanelOpen),c.xp6(1),c.Q6J("ngIf",r.showProjectLoader),c.xp6(4),c.Q6J("ngIf",r.showAuthentication))},dependencies:[fn,uf,RR,qR,hF,vF],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}app-header[_ngcontent-%COMP%]{display:block}.floating-icon[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:24px;background-color:#33325c;width:40px;height:40px;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-size:14px;box-shadow:1px 1px 3px #0009}.floating-icon[_ngcontent-%COMP%]:hover{background-color:#52508a}.floating-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),IF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[hh,eo,Zh]}),n})(),DF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[bF]}),n.\u0275inj=c.cJS({providers:[hl,{provide:_e,useClass:We}],imports:[bo,OR,Uo,eo,Zh,IF,Ds.hO.initializeApp(xA_firebaseConfig)]}),n})();(0,c.G48)(),Ca().bootstrapModule(DF).catch(n=>console.error(n))},5867:(at,Te,R)=>{R.d(Te,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=R(9681);(0,c.registerVersion)("firebase","9.14.0","app")},127:(at,Te,R)=>{R.d(Te,{Z:()=>c.Z});var c=R(3942);c.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(at,Te,R)=>{R.r(Te);var c=R(5861),B=R(3942),N=R(8247),ie=R(2090),he=(R(9681),R(1877),R(4859));function le(){return window}function H(){return(H=(0,c.Z)(function*(U,M,L){var ee;const{BuildInfo:Pe}=le();(0,N.ap)(M.sessionId,"AuthEvent did not contain a session ID");const nt=yield fe(M.sessionId),rt={};return(0,N.aq)()?rt.ibi=Pe.packageName:(0,N.ar)()?rt.apn=Pe.packageName:(0,N.as)(U,"operation-not-supported-in-this-environment"),Pe.displayName&&(rt.appDisplayName=Pe.displayName),rt.sessionId=nt,(0,N.at)(U,L,M.type,void 0,null!==(ee=M.eventId)&&void 0!==ee?ee:void 0,rt)})).apply(this,arguments)}function je(){return(je=(0,c.Z)(function*(U){const{BuildInfo:M}=le(),L={};(0,N.aq)()?L.iosBundleId=M.packageName:(0,N.ar)()?L.androidPackageName=M.packageName:(0,N.as)(U,"operation-not-supported-in-this-environment"),yield(0,N.au)(U,L)})).apply(this,arguments)}function tt(){return(tt=(0,c.Z)(function*(U,M,L){const{cordova:ee}=le();let Pe=()=>{};try{yield new Promise((nt,rt)=>{let De=null;function Fe(){var Mt;nt();const cn=null===(Mt=ee.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof cn&&cn(),"function"==typeof L?.close&&L.close()}function Tt(){De||(De=window.setTimeout(()=>{rt((0,N.aw)(U,"redirect-cancelled-by-user"))},2e3))}function un(){"visible"===document?.visibilityState&&Tt()}M.addPassiveListener(Fe),document.addEventListener("resume",Tt,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",un,!1),Pe=()=>{M.removePassiveListener(Fe),document.removeEventListener("resume",Tt,!1),document.removeEventListener("visibilitychange",un,!1),De&&window.clearTimeout(De)}})}finally{Pe()}})).apply(this,arguments)}function fe(U){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,c.Z)(function*(U){const M=We(U),L=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(L)).map(Pe=>Pe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function We(U){if((0,N.ap)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const M=new ArrayBuffer(U.length),L=new Uint8Array(M);for(let ee=0;ee<U.length;ee++)L[ee]=U.charCodeAt(ee);return L}class Ae extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(M)),super.onEvent(M)}initialized(){var M=this;return(0,c.Z)(function*(){yield M.initPromise})()}}function ne(U){return ue.apply(this,arguments)}function ue(){return(ue=(0,c.Z)(function*(U){const M=yield J()._get(de(U));return M&&(yield J()._remove(de(U))),M})).apply(this,arguments)}function K(){const U=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const ee=Math.floor(Math.random()*M.length);U.push(M.charAt(ee))}return U.join("")}function J(){return(0,N.az)(N.b)}function de(U){return(0,N.aA)("authEvent",U.config.apiKey,U.name)}function Be(U){if(!U?.includes("?"))return{};const[M,...L]=U.split("?");return(0,ie.zd)(L.join("?"))}function ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Ht(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function br(U=(0,ie.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()&&"capacitor:"!==Ht()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function $i(){try{const U=self.localStorage,M=N.aI();if(U)return U.setItem(M,"1"),U.removeItem(M),!function ji(U=(0,ie.z$)()){return function Or(){return(0,ie.w1)()&&11===document?.documentMode}()||function Mn(U=(0,ie.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,ie.hl)()}catch{return Pr()&&(0,ie.hl)()}return!1}function Pr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function kt(){return"http:"===Ht()||"https:"===Ht()}()||(0,ie.ru)()||br())&&!function Si(){return(0,ie.b$)()||(0,ie.UG)()}()&&$i()&&!Pr()}function fi(){return br()&&typeof document<"u"}function Ye(){return(Ye=(0,c.Z)(function*(){return!!fi()&&new Promise(U=>{const M=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),U(!0)})})})).apply(this,arguments)}const jn={LOCAL:"local",NONE:"none",SESSION:"session"},gn=N.ax,hr="persistence";function yn(U){return _n.apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(U){yield U._initializationPromise;const M=ct(),L=N.aA(hr,U.config.apiKey,U.name);M&&M.setItem(L,U._getPersistence())})).apply(this,arguments)}function ct(){var U;try{return(null===(U=function Zn(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const lt=N.ax;class Dt{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(class Xt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(M){var L=this;return(0,c.Z)(function*(){const ee=M._key();let Pe=L.eventManagers.get(ee);return Pe||(Pe=new Ae(M),L.eventManagers.set(ee,Pe),L.attachCallbackListeners(M,Pe)),Pe})()}_openPopup(M){(0,N.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,L,ee,Pe){var nt=this;return(0,c.Z)(function*(){!function _e(U){var M,L,ee,Pe,nt,rt,De,Fe,Tt,un;const Mt=le();(0,N.ax)("function"==typeof(null===(M=Mt?.universalLinks)||void 0===M?void 0:M.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(L=Mt?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(nt=null===(Pe=null===(ee=Mt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===Pe?void 0:Pe.browsertab)||void 0===nt?void 0:nt.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Fe=null===(De=null===(rt=Mt?.cordova)||void 0===rt?void 0:rt.plugins)||void 0===De?void 0:De.browsertab)||void 0===Fe?void 0:Fe.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(un=null===(Tt=Mt?.cordova)||void 0===Tt?void 0:Tt.InAppBrowser)||void 0===un?void 0:un.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const rt=yield nt._initialize(M);yield rt.initialized(),rt.resetRedirect(),(0,N.aD)(),yield nt._originValidation(M);const De=function we(U,M,L=null){return{type:M,eventId:L,urlResponse:null,sessionId:K(),postBody:null,tenantId:U.tenantId,error:(0,N.aw)(U,"no-auth-event")}}(M,ee,Pe);yield function He(U,M){return J()._set(de(U),M)}(M,De);const Fe=yield function z(U,M,L){return H.apply(this,arguments)}(M,De,L),Tt=yield function Me(U){const{cordova:M}=le();return new Promise(L=>{M.plugins.browsertab.isAvailable(ee=>{let Pe=null;ee?M.plugins.browsertab.openUrl(U):Pe=M.InAppBrowser.open(U,(0,N.av)()?"_blank":"_system","location=yes"),L(Pe)})})}(Fe);return function Ee(U,M,L){return tt.apply(this,arguments)}(M,rt,Tt)})()}_isIframeWebStorageSupported(M,L){throw new Error("Method not implemented.")}_originValidation(M){const L=M._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function Y(U){return je.apply(this,arguments)}(M)),this.originValidationPromises[L]}attachCallbackListeners(M,L){const{universalLinks:ee,handleOpenURL:Pe,BuildInfo:nt}=le(),rt=setTimeout((0,c.Z)(function*(){yield ne(M),L.onEvent(ze())}),500),De=function(){var un=(0,c.Z)(function*(Mt){clearTimeout(rt);const cn=yield ne(M);let Gi=null;cn&&Mt?.url&&(Gi=function ye(U,M){var L,ee;const Pe=function Le(U){const M=Be(U),L=M.link?decodeURIComponent(M.link):void 0,ee=Be(L).link,Pe=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return Be(Pe).link||Pe||ee||L||U}(M);if(Pe.includes("/__/auth/callback")){const nt=Be(Pe),rt=nt.firebaseError?function se(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(nt.firebaseError)):null,De=null===(ee=null===(L=rt?.code)||void 0===L?void 0:L.split("auth/"))||void 0===ee?void 0:ee[1],Fe=De?(0,N.aw)(De):null;return Fe?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Pe,postBody:null}}return null}(cn,Mt.url)),L.onEvent(Gi||ze())});return function(cn){return un.apply(this,arguments)}}();typeof ee<"u"&&"function"==typeof ee.subscribe&&ee.subscribe(null,De);const Fe=Pe,Tt=`${nt.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var un=(0,c.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(Tt)&&De({url:Mt}),"function"==typeof Fe)try{Fe(Mt)}catch(cn){console.error(cn)}});return function(Mt){return un.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(M){var L=this;return(0,c.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,L,ee,Pe){var nt=this;return(0,c.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openPopup(M,L,ee,Pe)})()}_openRedirect(M,L,ee,Pe){var nt=this;return(0,c.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openRedirect(M,L,ee,Pe)})()}_isIframeWebStorageSupported(M,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,L)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return fi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,c.Z)(function*(){if(M.underlyingResolver)return;const L=yield function Hi(){return Ye.apply(this,arguments)}();M.underlyingResolver=L?M.cordovaResolver:M.browserResolver})()}}function Br(U){return U.unwrap()}function Ir(U){return Nr(U)}function Nr(U){const{_tokenResponse:M}=U instanceof ie.ZR?U.customData:U;if(!M)return null;if(!(U instanceof ie.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return N.P.credentialFromResult(U);const L=M.providerId;if(!L||L===N.o.PASSWORD)return null;let ee;switch(L){case N.o.GOOGLE:ee=N.Q;break;case N.o.FACEBOOK:ee=N.N;break;case N.o.GITHUB:ee=N.T;break;case N.o.TWITTER:ee=N.W;break;default:const{oauthIdToken:Pe,oauthAccessToken:nt,oauthTokenSecret:rt,pendingToken:De,nonce:Fe}=M;return nt||rt||Pe||De?De?L.startsWith("saml.")?N.aL._create(L,De):N.J._fromParams({providerId:L,signInMethod:L,pendingToken:De,idToken:Pe,accessToken:nt}):new N.U(L).credential({idToken:Pe,accessToken:nt,rawNonce:Fe}):null}return U instanceof ie.ZR?ee.credentialFromError(U):ee.credentialFromResult(U)}function Pt(U,M){return M.catch(L=>{throw L instanceof ie.ZR&&function Et(U,M){var L,ee;const Pe=null===(L=M.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ee=M)||void 0===ee?void 0:ee.code))M.resolver=new or(U,N.an(U,M));else if(Pe){const nt=Nr(M),rt=M;nt&&(rt.credential=nt,rt.tenantId=Pe.tenantId||void 0,rt.email=Pe.email||void 0,rt.phoneNumber=Pe.phoneNumber||void 0)}}(U,L),L}).then(L=>{const Pe=L.user;return{operationType:L.operationType,credential:Ir(L),additionalUserInfo:N.al(L),user:bn.getOrCreate(Pe)}})}function ni(U,M){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,c.Z)(function*(U,M){const L=yield M;return{verificationId:L.verificationId,confirm:ee=>Pt(U,L.confirm(ee))}})).apply(this,arguments)}class or{constructor(M,L){this.resolver=L,this.auth=function Wn(U){return U.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return Pt(Br(this.auth),this.resolver.resolveSignIn(M))}}class bn{constructor(M){this._delegate=M,this.multiFactor=N.ao(M)}static getOrCreate(M){return bn.USER_MAP.has(M)||bn.USER_MAP.set(M,new bn(M)),bn.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var L=this;return(0,c.Z)(function*(){return Pt(L.auth,N.Z(L._delegate,M))})()}linkWithPhoneNumber(M,L){var ee=this;return(0,c.Z)(function*(){return ni(ee.auth,N.l(ee._delegate,M,L))})()}linkWithPopup(M){var L=this;return(0,c.Z)(function*(){return Pt(L.auth,N.d(L._delegate,M,Dt))})()}linkWithRedirect(M){var L=this;return(0,c.Z)(function*(){return yield yn(N.aE(L.auth)),N.g(L._delegate,M,Dt)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var L=this;return(0,c.Z)(function*(){return Pt(L.auth,N._(L._delegate,M))})()}reauthenticateWithPhoneNumber(M,L){return ni(this.auth,N.r(this._delegate,M,L))}reauthenticateWithPopup(M){return Pt(this.auth,N.e(this._delegate,M,Dt))}reauthenticateWithRedirect(M){var L=this;return(0,c.Z)(function*(){return yield yn(N.aE(L.auth)),N.h(L._delegate,M,Dt)})()}sendEmailVerification(M){return N.ab(this._delegate,M)}unlink(M){var L=this;return(0,c.Z)(function*(){return yield N.ak(L._delegate,M),L})()}updateEmail(M){return N.ag(this._delegate,M)}updatePassword(M){return N.ah(this._delegate,M)}updatePhoneNumber(M){return N.u(this._delegate,M)}updateProfile(M){return N.af(this._delegate,M)}verifyBeforeUpdateEmail(M,L){return N.ac(this._delegate,M,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bn.USER_MAP=new WeakMap;const Je=N.ax;let be=(()=>{class U{constructor(L,ee){if(this.app=L,ee.isInitialized())return this._delegate=ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Pe}=L.options;Je(Pe,"invalid-api-key",{appName:L.name}),Je(Pe,"invalid-api-key",{appName:L.name});const nt=typeof window<"u"?Dt:void 0;this._delegate=ee.initialize({options:{persistence:_t(Pe,L.name),popupRedirectResolver:nt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,ee){N.G(this._delegate,L,ee)}applyActionCode(L){return N.a2(this._delegate,L)}checkActionCode(L){return N.a3(this._delegate,L)}confirmPasswordReset(L,ee){return N.a1(this._delegate,L,ee)}createUserWithEmailAndPassword(L,ee){var Pe=this;return(0,c.Z)(function*(){return Pt(Pe._delegate,N.a5(Pe._delegate,L,ee))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return N.aa(this._delegate,L)}isSignInWithEmailLink(L){return N.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,c.Z)(function*(){Je(Bn(),L._delegate,"operation-not-supported-in-this-environment");const ee=yield N.j(L._delegate,Dt);return ee?Pt(L._delegate,Promise.resolve(ee)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function an(U,M){(0,N.aE)(U)._logFramework(M)}(this._delegate,L)}onAuthStateChanged(L,ee,Pe){const{next:nt,error:rt,complete:De}=Xe(L,ee,Pe);return this._delegate.onAuthStateChanged(nt,rt,De)}onIdTokenChanged(L,ee,Pe){const{next:nt,error:rt,complete:De}=Xe(L,ee,Pe);return this._delegate.onIdTokenChanged(nt,rt,De)}sendSignInLinkToEmail(L,ee){return N.a7(this._delegate,L,ee)}sendPasswordResetEmail(L,ee){return N.a0(this._delegate,L,ee||void 0)}setPersistence(L){var ee=this;return(0,c.Z)(function*(){let Pe;switch(function Ps(U,M){gn(Object.values(jn).includes(M),U,"invalid-persistence-type"),(0,ie.b$)()?gn(M!==jn.SESSION,U,"unsupported-persistence-type"):(0,ie.UG)()?gn(M===jn.NONE,U,"unsupported-persistence-type"):Pr()?gn(M===jn.NONE||M===jn.LOCAL&&(0,ie.hl)(),U,"unsupported-persistence-type"):gn(M===jn.NONE||$i(),U,"unsupported-persistence-type")}(ee._delegate,L),L){case jn.SESSION:Pe=N.a;break;case jn.LOCAL:Pe=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case jn.NONE:Pe=N.L;break;default:return N.as("argument-error",{appName:ee._delegate.name})}return ee._delegate.setPersistence(Pe)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return Pt(this._delegate,N.X(this._delegate))}signInWithCredential(L){return Pt(this._delegate,N.Y(this._delegate,L))}signInWithCustomToken(L){return Pt(this._delegate,N.$(this._delegate,L))}signInWithEmailAndPassword(L,ee){return Pt(this._delegate,N.a6(this._delegate,L,ee))}signInWithEmailLink(L,ee){return Pt(this._delegate,N.a9(this._delegate,L,ee))}signInWithPhoneNumber(L,ee){return ni(this._delegate,N.s(this._delegate,L,ee))}signInWithPopup(L){var ee=this;return(0,c.Z)(function*(){return Je(Bn(),ee._delegate,"operation-not-supported-in-this-environment"),Pt(ee._delegate,N.c(ee._delegate,L,Dt))})()}signInWithRedirect(L){var ee=this;return(0,c.Z)(function*(){return Je(Bn(),ee._delegate,"operation-not-supported-in-this-environment"),yield yn(ee._delegate),N.f(ee._delegate,L,Dt)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return N.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=jn,U})();function Xe(U,M,L){let ee=U;"function"!=typeof U&&({next:ee,error:M,complete:L}=U);const Pe=ee;return{next:rt=>Pe(rt&&bn.getOrCreate(rt)),error:M,complete:L}}function _t(U,M){const L=function hn(U,M){const L=ct();if(!L)return[];const ee=N.aA(hr,U,M);switch(L.getItem(ee)){case jn.NONE:return[N.L];case jn.LOCAL:return[N.i,N.a];case jn.SESSION:return[N.a];default:return[]}}(U,M);if(typeof self<"u"&&!L.includes(N.i)&&L.push(N.i),typeof window<"u")for(const ee of[N.b,N.a])L.includes(ee)||L.push(ee);return L.includes(N.L)||L.push(N.L),L}class vt{constructor(){this.providerId="phone",this._delegate=new N.P(Br(B.Z.auth()))}static credential(M,L){return N.P.credential(M,L)}verifyPhoneNumber(M,L){return this._delegate.verifyPhoneNumber(M,L)}unwrap(){return this._delegate}}vt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,vt.PROVIDER_ID=N.P.PROVIDER_ID;const Wt=N.ax;class G{constructor(M,L,ee=B.Z.app()){var Pe;Wt(null===(Pe=ee.options)||void 0===Pe?void 0:Pe.apiKey,"invalid-api-key",{appName:ee.name}),this._delegate=new N.R(M,L,ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function W(U){U.INTERNAL.registerComponent(new he.wA("auth-compat",M=>{const L=M.getProvider("app-compat").getImmediate(),ee=M.getProvider("auth");return new be(L,ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:vt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:G,TwitterAuthProvider:N.W,Auth:be,AuthCredential:N.H,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.2.24")}(B.Z)},9751:(at,Te,R)=>{R.d(Te,{y:()=>le});var c=R(930),B=R(727),N=R(8822),ie=R(9635),oe=R(2416),ge=R(576),he=R(2806);let le=(()=>{class Y{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Ee=new Y;return Ee.source=this,Ee.operator=Me,Ee}subscribe(Me,Ee,tt){const _e=function H(Y){return Y&&Y instanceof c.Lv||function z(Y){return Y&&(0,ge.m)(Y.next)&&(0,ge.m)(Y.error)&&(0,ge.m)(Y.complete)}(Y)&&(0,B.Nn)(Y)}(Me)?Me:new c.Hp(Me,Ee,tt);return(0,he.x)(()=>{const{operator:fe,source:Qe}=this;_e.add(fe?fe.call(_e,Qe):Qe?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Ee){Me.error(Ee)}}forEach(Me,Ee){return new(Ee=me(Ee))((tt,_e)=>{const fe=new c.Hp({next:Qe=>{try{Me(Qe)}catch(We){_e(We),fe.unsubscribe()}},error:_e,complete:tt});this.subscribe(fe)})}_subscribe(Me){var Ee;return null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(Me)}[N.L](){return this}pipe(...Me){return(0,ie.U)(Me)(this)}toPromise(Me){return new(Me=me(Me))((Ee,tt)=>{let _e;this.subscribe(fe=>_e=fe,fe=>tt(fe),()=>Ee(_e))})}}return Y.create=je=>new Y(je),Y})();function me(Y){var je;return null!==(je=Y??oe.v.Promise)&&void 0!==je?je:Promise}},7579:(at,Te,R)=>{R.d(Te,{x:()=>he});var c=R(9751),B=R(727);const ie=(0,R(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=R(8737),ge=R(2806);let he=(()=>{class me extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Y=new le(this,this);return Y.operator=H,Y}_throwIfClosed(){if(this.closed)throw new ie}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Y}=this;for(;Y.length;)Y.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Y,isStopped:je,observers:Me}=this;return Y||je?B.Lc:(this.currentObservers=null,Me.push(H),new B.w0(()=>{this.currentObservers=null,(0,oe.P)(Me,H)}))}_checkFinalizedStatuses(H){const{hasError:Y,thrownError:je,isStopped:Me}=this;Y?H.error(je):Me&&H.complete()}asObservable(){const H=new c.y;return H.source=this,H}}return me.create=(z,H)=>new le(z,H),me})();class le extends he{constructor(z,H){super(),this.destination=z,this.source=H}next(z){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Y||Y.call(H,z)}error(z){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Y||Y.call(H,z)}complete(){var z,H;null===(H=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===H||H.call(z)}_subscribe(z){var H,Y;return null!==(Y=null===(H=this.source)||void 0===H?void 0:H.subscribe(z))&&void 0!==Y?Y:B.Lc}}},930:(at,Te,R)=>{R.d(Te,{Hp:()=>tt,Lv:()=>Y});var c=R(576),B=R(727),N=R(2416),ie=R(7849),oe=R(5032);const ge=me("C",void 0,void 0);function me(Ne,Ae,we){return{kind:Ne,value:Ae,error:we}}var z=R(3410),H=R(2806);class Y extends B.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,B.Nn)(Ae)&&Ae.add(this)):this.destination=We}static create(Ae,we,He){return new tt(Ae,we,He)}next(Ae){this.isStopped?Qe(function le(Ne){return me("N",Ne,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?Qe(function he(Ne){return me("E",void 0,Ne)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?Qe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Me(Ne,Ae){return je.call(Ne,Ae)}class Ee{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:we}=this;if(we.next)try{we.next(Ae)}catch(He){_e(He)}}error(Ae){const{partialObserver:we}=this;if(we.error)try{we.error(Ae)}catch(He){_e(He)}else _e(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(we){_e(we)}}}class tt extends Y{constructor(Ae,we,He){let ne;if(super(),(0,c.m)(Ae)||!Ae)ne={next:Ae??void 0,error:we??void 0,complete:He??void 0};else{let ue;this&&N.v.useDeprecatedNextContext?(ue=Object.create(Ae),ue.unsubscribe=()=>this.unsubscribe(),ne={next:Ae.next&&Me(Ae.next,ue),error:Ae.error&&Me(Ae.error,ue),complete:Ae.complete&&Me(Ae.complete,ue)}):ne=Ae}this.destination=new Ee(ne)}}function _e(Ne){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ne):(0,ie.h)(Ne)}function Qe(Ne,Ae){const{onStoppedNotification:we}=N.v;we&&z.z.setTimeout(()=>we(Ne,Ae))}const We={closed:!0,next:oe.Z,error:function fe(Ne){throw Ne},complete:oe.Z}},727:(at,Te,R)=>{R.d(Te,{Lc:()=>ge,w0:()=>oe,Nn:()=>he});var c=R(576);const N=(0,R(3888).d)(me=>function(H){me(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Y,je)=>`${je+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ie=R(8737);class oe{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Me of H)Me.remove(this);else H.remove(this);const{initialTeardown:Y}=this;if((0,c.m)(Y))try{Y()}catch(Me){z=Me instanceof N?Me.errors:[Me]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Me of je)try{le(Me)}catch(Ee){z=z??[],Ee instanceof N?z=[...z,...Ee.errors]:z.push(Ee)}}if(z)throw new N(z)}}add(z){var H;if(z&&z!==this)if(this.closed)le(z);else{if(z instanceof oe){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(z)}}_hasParent(z){const{_parentage:H}=this;return H===z||Array.isArray(H)&&H.includes(z)}_addParent(z){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(z),H):H?[H,z]:z}_removeParent(z){const{_parentage:H}=this;H===z?this._parentage=null:Array.isArray(H)&&(0,ie.P)(H,z)}remove(z){const{_finalizers:H}=this;H&&(0,ie.P)(H,z),z instanceof oe&&z._removeParent(this)}}oe.EMPTY=(()=>{const me=new oe;return me.closed=!0,me})();const ge=oe.EMPTY;function he(me){return me instanceof oe||me&&"closed"in me&&(0,c.m)(me.remove)&&(0,c.m)(me.add)&&(0,c.m)(me.unsubscribe)}function le(me){(0,c.m)(me)?me():me.unsubscribe()}},2416:(at,Te,R)=>{R.d(Te,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Te,R)=>{R.d(Te,{E:()=>B});const B=new(R(9751).y)(oe=>oe.complete())},8996:(at,Te,R)=>{R.d(Te,{D:()=>Ae});var c=R(8421),B=R(5363),N=R(9468),ge=R(9751),le=R(2202),me=R(576),z=R(9672);function Y(we,He){if(!we)throw new Error("Iterable cannot be null");return new ge.y(ne=>{(0,z.f)(ne,He,()=>{const ue=we[Symbol.asyncIterator]();(0,z.f)(ne,He,()=>{ue.next().then(ye=>{ye.done?ne.complete():ne.next(ye.value)})},0,!0)})})}var je=R(3670),Me=R(8239),Ee=R(1144),tt=R(6495),_e=R(2206),fe=R(4532),Qe=R(3260);function Ae(we,He){return He?function Ne(we,He){if(null!=we){if((0,je.c)(we))return function ie(we,He){return(0,c.Xf)(we).pipe((0,N.R)(He),(0,B.Q)(He))}(we,He);if((0,Ee.z)(we))return function he(we,He){return new ge.y(ne=>{let ue=0;return He.schedule(function(){ue===we.length?ne.complete():(ne.next(we[ue++]),ne.closed||this.schedule())})})}(we,He);if((0,Me.t)(we))return function oe(we,He){return(0,c.Xf)(we).pipe((0,N.R)(He),(0,B.Q)(He))}(we,He);if((0,_e.D)(we))return Y(we,He);if((0,tt.T)(we))return function H(we,He){return new ge.y(ne=>{let ue;return(0,z.f)(ne,He,()=>{ue=we[le.h](),(0,z.f)(ne,He,()=>{let ye,K;try{({value:ye,done:K}=ue.next())}catch(J){return void ne.error(J)}K?ne.complete():ne.next(ye)},0,!0)}),()=>(0,me.m)(ue?.return)&&ue.return()})}(we,He);if((0,Qe.L)(we))return function We(we,He){return Y((0,Qe.Q)(we),He)}(we,He)}throw(0,fe.z)(we)}(we,He):(0,c.Xf)(we)}},8421:(at,Te,R)=>{R.d(Te,{Xf:()=>je});var c=R(655),B=R(1144),N=R(8239),ie=R(9751),oe=R(3670),ge=R(2206),he=R(4532),le=R(6495),me=R(3260),z=R(576),H=R(7849),Y=R(8822);function je(Ne){if(Ne instanceof ie.y)return Ne;if(null!=Ne){if((0,oe.c)(Ne))return function Me(Ne){return new ie.y(Ae=>{const we=Ne[Y.L]();if((0,z.m)(we.subscribe))return we.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,B.z)(Ne))return function Ee(Ne){return new ie.y(Ae=>{for(let we=0;we<Ne.length&&!Ae.closed;we++)Ae.next(Ne[we]);Ae.complete()})}(Ne);if((0,N.t)(Ne))return function tt(Ne){return new ie.y(Ae=>{Ne.then(we=>{Ae.closed||(Ae.next(we),Ae.complete())},we=>Ae.error(we)).then(null,H.h)})}(Ne);if((0,ge.D)(Ne))return fe(Ne);if((0,le.T)(Ne))return function _e(Ne){return new ie.y(Ae=>{for(const we of Ne)if(Ae.next(we),Ae.closed)return;Ae.complete()})}(Ne);if((0,me.L)(Ne))return function Qe(Ne){return fe((0,me.Q)(Ne))}(Ne)}throw(0,he.z)(Ne)}function fe(Ne){return new ie.y(Ae=>{(function We(Ne,Ae){var we,He,ne,ue;return(0,c.mG)(this,void 0,void 0,function*(){try{for(we=(0,c.KL)(Ne);!(He=yield we.next()).done;)if(Ae.next(He.value),Ae.closed)return}catch(ye){ne={error:ye}}finally{try{He&&!He.done&&(ue=we.return)&&(yield ue.call(we))}finally{if(ne)throw ne.error}}Ae.complete()})})(Ne,Ae).catch(we=>Ae.error(we))})}},6451:(at,Te,R)=>{R.d(Te,{T:()=>ge});var c=R(8189),B=R(8421),N=R(515),ie=R(7669),oe=R(8996);function ge(...he){const le=(0,ie.yG)(he),me=(0,ie._6)(he,1/0),z=he;return z.length?1===z.length?(0,B.Xf)(z[0]):(0,c.J)(me)((0,oe.D)(z,le)):N.E}},5403:(at,Te,R)=>{R.d(Te,{x:()=>B});var c=R(930);function B(ie,oe,ge,he,le){return new N(ie,oe,ge,he,le)}class N extends c.Lv{constructor(oe,ge,he,le,me,z){super(oe),this.onFinalize=me,this.shouldUnsubscribe=z,this._next=ge?function(H){try{ge(H)}catch(Y){oe.error(Y)}}:super._next,this._error=le?function(H){try{le(H)}catch(Y){oe.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(H){oe.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(at,Te,R)=>{R.d(Te,{U:()=>N});var c=R(4482),B=R(5403);function N(ie,oe){return(0,c.e)((ge,he)=>{let le=0;ge.subscribe((0,B.x)(he,me=>{he.next(ie.call(oe,me,le++))}))})}},8189:(at,Te,R)=>{R.d(Te,{J:()=>N});var c=R(5577),B=R(4671);function N(ie=1/0){return(0,c.z)(B.y,ie)}},5577:(at,Te,R)=>{R.d(Te,{z:()=>le});var c=R(4004),B=R(8421),N=R(4482),ie=R(9672),oe=R(5403),he=R(576);function le(me,z,H=1/0){return(0,he.m)(z)?le((Y,je)=>(0,c.U)((Me,Ee)=>z(Y,Me,je,Ee))((0,B.Xf)(me(Y,je))),H):("number"==typeof z&&(H=z),(0,N.e)((Y,je)=>function ge(me,z,H,Y,je,Me,Ee,tt){const _e=[];let fe=0,Qe=0,We=!1;const Ne=()=>{We&&!_e.length&&!fe&&z.complete()},Ae=He=>fe<Y?we(He):_e.push(He),we=He=>{Me&&z.next(He),fe++;let ne=!1;(0,B.Xf)(H(He,Qe++)).subscribe((0,oe.x)(z,ue=>{je?.(ue),Me?Ae(ue):z.next(ue)},()=>{ne=!0},void 0,()=>{if(ne)try{for(fe--;_e.length&&fe<Y;){const ue=_e.shift();Ee?(0,ie.f)(z,Ee,()=>we(ue)):we(ue)}Ne()}catch(ue){z.error(ue)}}))};return me.subscribe((0,oe.x)(z,Ae,()=>{We=!0,Ne()})),()=>{tt?.()}}(Y,je,me,H)))}},5363:(at,Te,R)=>{R.d(Te,{Q:()=>ie});var c=R(9672),B=R(4482),N=R(5403);function ie(oe,ge=0){return(0,B.e)((he,le)=>{he.subscribe((0,N.x)(le,me=>(0,c.f)(le,oe,()=>le.next(me),ge),()=>(0,c.f)(le,oe,()=>le.complete(),ge),me=>(0,c.f)(le,oe,()=>le.error(me),ge)))})}},3099:(at,Te,R)=>{R.d(Te,{B:()=>oe});var c=R(8421),B=R(7579),N=R(930),ie=R(4482);function oe(he={}){const{connector:le=(()=>new B.x),resetOnError:me=!0,resetOnComplete:z=!0,resetOnRefCountZero:H=!0}=he;return Y=>{let je,Me,Ee,tt=0,_e=!1,fe=!1;const Qe=()=>{Me?.unsubscribe(),Me=void 0},We=()=>{Qe(),je=Ee=void 0,_e=fe=!1},Ne=()=>{const Ae=je;We(),Ae?.unsubscribe()};return(0,ie.e)((Ae,we)=>{tt++,!fe&&!_e&&Qe();const He=Ee=Ee??le();we.add(()=>{tt--,0===tt&&!fe&&!_e&&(Me=ge(Ne,H))}),He.subscribe(we),!je&&tt>0&&(je=new N.Hp({next:ne=>He.next(ne),error:ne=>{fe=!0,Qe(),Me=ge(We,me,ne),He.error(ne)},complete:()=>{_e=!0,Qe(),Me=ge(We,z),He.complete()}}),(0,c.Xf)(Ae).subscribe(je))})(Y)}}function ge(he,le,...me){if(!0===le)return void he();if(!1===le)return;const z=new N.Hp({next:()=>{z.unsubscribe(),he()}});return le(...me).subscribe(z)}},9468:(at,Te,R)=>{R.d(Te,{R:()=>B});var c=R(4482);function B(N,ie=0){return(0,c.e)((oe,ge)=>{ge.add(N.schedule(()=>oe.subscribe(ge),ie))})}},8505:(at,Te,R)=>{R.d(Te,{b:()=>oe});var c=R(576),B=R(4482),N=R(5403),ie=R(4671);function oe(ge,he,le){const me=(0,c.m)(ge)||he||le?{next:ge,error:he,complete:le}:ge;return me?(0,B.e)((z,H)=>{var Y;null===(Y=me.subscribe)||void 0===Y||Y.call(me);let je=!0;z.subscribe((0,N.x)(H,Me=>{var Ee;null===(Ee=me.next)||void 0===Ee||Ee.call(me,Me),H.next(Me)},()=>{var Me;je=!1,null===(Me=me.complete)||void 0===Me||Me.call(me),H.complete()},Me=>{var Ee;je=!1,null===(Ee=me.error)||void 0===Ee||Ee.call(me,Me),H.error(Me)},()=>{var Me,Ee;je&&(null===(Me=me.unsubscribe)||void 0===Me||Me.call(me)),null===(Ee=me.finalize)||void 0===Ee||Ee.call(me)}))}):ie.y}},4408:(at,Te,R)=>{R.d(Te,{o:()=>oe});var c=R(727);class B extends c.w0{constructor(he,le){super()}schedule(he,le=0){return this}}const N={setInterval(ge,he,...le){const{delegate:me}=N;return me?.setInterval?me.setInterval(ge,he,...le):setInterval(ge,he,...le)},clearInterval(ge){const{delegate:he}=N;return(he?.clearInterval||clearInterval)(ge)},delegate:void 0};var ie=R(8737);class oe extends B{constructor(he,le){super(he,le),this.scheduler=he,this.work=le,this.pending=!1}schedule(he,le=0){var me;if(this.closed)return this;this.state=he;const z=this.id,H=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(H,z,le)),this.pending=!0,this.delay=le,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(H,this.id,le),this}requestAsyncId(he,le,me=0){return N.setInterval(he.flush.bind(he,this),me)}recycleAsyncId(he,le,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return le;null!=le&&N.clearInterval(le)}execute(he,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(he,le);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,le){let z,me=!1;try{this.work(he)}catch(H){me=!0,z=H||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:he,scheduler:le}=this,{actions:me}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(me,this),null!=he&&(this.id=this.recycleAsyncId(le,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Te,R)=>{R.d(Te,{v:()=>N});var c=R(6063);class B{constructor(oe,ge=B.now){this.schedulerActionCtor=oe,this.now=ge}schedule(oe,ge=0,he){return new this.schedulerActionCtor(this,oe).schedule(he,ge)}}B.now=c.l.now;class N extends B{constructor(oe,ge=B.now){super(oe,ge),this.actions=[],this._active=!1}flush(oe){const{actions:ge}=this;if(this._active)return void ge.push(oe);let he;this._active=!0;do{if(he=oe.execute(oe.state,oe.delay))break}while(oe=ge.shift());if(this._active=!1,he){for(;oe=ge.shift();)oe.unsubscribe();throw he}}}},4986:(at,Te,R)=>{R.d(Te,{z:()=>N});var c=R(4408);const N=new(R(7565).v)(c.o)},6063:(at,Te,R)=>{R.d(Te,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(at,Te,R)=>{R.d(Te,{z:()=>c});const c={setTimeout(B,N,...ie){const{delegate:oe}=c;return oe?.setTimeout?oe.setTimeout(B,N,...ie):setTimeout(B,N,...ie)},clearTimeout(B){const{delegate:N}=c;return(N?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(at,Te,R)=>{R.d(Te,{h:()=>B});const B=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Te,R)=>{R.d(Te,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Te,R)=>{R.d(Te,{_6:()=>ge,jO:()=>ie,yG:()=>oe});var c=R(576);function N(he){return he[he.length-1]}function ie(he){return(0,c.m)(N(he))?he.pop():void 0}function oe(he){return function B(he){return he&&(0,c.m)(he.schedule)}(N(he))?he.pop():void 0}function ge(he,le){return"number"==typeof N(he)?he.pop():le}},8737:(at,Te,R)=>{function c(B,N){if(B){const ie=B.indexOf(N);0<=ie&&B.splice(ie,1)}}R.d(Te,{P:()=>c})},3888:(at,Te,R)=>{function c(B){const ie=B(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}R.d(Te,{d:()=>c})},2806:(at,Te,R)=>{R.d(Te,{O:()=>ie,x:()=>N});var c=R(2416);let B=null;function N(oe){if(c.v.useDeprecatedSynchronousErrorHandling){const ge=!B;if(ge&&(B={errorThrown:!1,error:null}),oe(),ge){const{errorThrown:he,error:le}=B;if(B=null,he)throw le}}else oe()}function ie(oe){c.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=oe)}},9672:(at,Te,R)=>{function c(B,N,ie,oe=0,ge=!1){const he=N.schedule(function(){ie(),ge?B.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(B.add(he),!ge)return he}R.d(Te,{f:()=>c})},4671:(at,Te,R)=>{function c(B){return B}R.d(Te,{y:()=>c})},1144:(at,Te,R)=>{R.d(Te,{z:()=>c});const c=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(at,Te,R)=>{R.d(Te,{D:()=>B});var c=R(576);function B(N){return Symbol.asyncIterator&&(0,c.m)(N?.[Symbol.asyncIterator])}},576:(at,Te,R)=>{function c(B){return"function"==typeof B}R.d(Te,{m:()=>c})},3670:(at,Te,R)=>{R.d(Te,{c:()=>N});var c=R(8822),B=R(576);function N(ie){return(0,B.m)(ie[c.L])}},6495:(at,Te,R)=>{R.d(Te,{T:()=>N});var c=R(2202),B=R(576);function N(ie){return(0,B.m)(ie?.[c.h])}},8239:(at,Te,R)=>{R.d(Te,{t:()=>B});var c=R(576);function B(N){return(0,c.m)(N?.then)}},3260:(at,Te,R)=>{R.d(Te,{L:()=>ie,Q:()=>N});var c=R(655),B=R(576);function N(oe){return(0,c.FC)(this,arguments,function*(){const he=oe.getReader();try{for(;;){const{value:le,done:me}=yield(0,c.qq)(he.read());if(me)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(le)}}finally{he.releaseLock()}})}function ie(oe){return(0,B.m)(oe?.getReader)}},4482:(at,Te,R)=>{R.d(Te,{A:()=>B,e:()=>N});var c=R(576);function B(ie){return(0,c.m)(ie?.lift)}function N(ie){return oe=>{if(B(oe))return oe.lift(function(ge){try{return ie(ge,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,Te,R)=>{function c(){}R.d(Te,{Z:()=>c})},9635:(at,Te,R)=>{R.d(Te,{U:()=>N,z:()=>B});var c=R(4671);function B(...ie){return N(ie)}function N(ie){return 0===ie.length?c.y:1===ie.length?ie[0]:function(ge){return ie.reduce((he,le)=>le(he),ge)}}},7849:(at,Te,R)=>{R.d(Te,{h:()=>N});var c=R(2416),B=R(3410);function N(ie){B.z.setTimeout(()=>{const{onUnhandledError:oe}=c.v;if(!oe)throw ie;oe(ie)})}},4532:(at,Te,R)=>{function c(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Te,{z:()=>c})},655:(at,Te,R)=>{function ie(K,J){var de={};for(var se in K)Object.prototype.hasOwnProperty.call(K,se)&&J.indexOf(se)<0&&(de[se]=K[se]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(se=Object.getOwnPropertySymbols(K);Le<se.length;Le++)J.indexOf(se[Le])<0&&Object.prototype.propertyIsEnumerable.call(K,se[Le])&&(de[se[Le]]=K[se[Le]])}return de}function le(K,J,de,se){return new(de||(de=Promise))(function(Be,pt){function Xt(an){try{ze(se.next(an))}catch(mn){pt(mn)}}function Bt(an){try{ze(se.throw(an))}catch(mn){pt(mn)}}function ze(an){an.done?Be(an.value):function Le(Be){return Be instanceof de?Be:new de(function(pt){pt(Be)})}(an.value).then(Xt,Bt)}ze((se=se.apply(K,J||[])).next())})}function _e(K){return this instanceof _e?(this.v=K,this):new _e(K)}function fe(K,J,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,se=de.apply(K,J||[]),Be=[];return Le={},pt("next"),pt("throw"),pt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function pt(Qt){se[Qt]&&(Le[Qt]=function(Jt){return new Promise(function(Ht,kt){Be.push([Qt,Jt,Ht,kt])>1||Xt(Qt,Jt)})})}function Xt(Qt,Jt){try{!function Bt(Qt){Qt.value instanceof _e?Promise.resolve(Qt.value.v).then(ze,an):mn(Be[0][2],Qt)}(se[Qt](Jt))}catch(Ht){mn(Be[0][3],Ht)}}function ze(Qt){Xt("next",Qt)}function an(Qt){Xt("throw",Qt)}function mn(Qt,Jt){Qt(Jt),Be.shift(),Be.length&&Xt(Be[0][0],Be[0][1])}}function We(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,J=K[Symbol.asyncIterator];return J?J.call(K):(K=function Y(K){var J="function"==typeof Symbol&&Symbol.iterator,de=J&&K[J],se=0;if(de)return de.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&se>=K.length&&(K=void 0),{value:K&&K[se++],done:!K}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),de={},se("next"),se("throw"),se("return"),de[Symbol.asyncIterator]=function(){return this},de);function se(Be){de[Be]=K[Be]&&function(pt){return new Promise(function(Xt,Bt){!function Le(Be,pt,Xt,Bt){Promise.resolve(Bt).then(function(ze){Be({value:ze,done:Xt})},pt)}(Xt,Bt,(pt=K[Be](pt)).done,pt.value)})}}}R.d(Te,{FC:()=>fe,KL:()=>We,_T:()=>ie,mG:()=>le,qq:()=>_e})},4650:(at,Te,R)=>{R.d(Te,{$8M:()=>mu,$Z:()=>e_,AFp:()=>Fv,ALo:()=>Gf,AaK:()=>le,Akn:()=>An,AsE:()=>If,BQk:()=>Rc,CHM:()=>ph,CRH:()=>vE,CZH:()=>vr,CqO:()=>L_,D6c:()=>cp,EJc:()=>YD,EpF:()=>R_,F4k:()=>cC,FYo:()=>Iy,FiY:()=>Ge,G48:()=>VE,Gf:()=>ym,GfV:()=>Dy,Gpc:()=>H,JOm:()=>eo,KtG:()=>po,LFG:()=>Gn,LSH:()=>O0,Lbi:()=>KD,Lck:()=>rE,MAs:()=>N_,MMx:()=>um,NdJ:()=>V_,O4$:()=>Qu,OlP:()=>wn,Oqu:()=>bf,PXZ:()=>Xc,Q6J:()=>Og,QGY:()=>F_,QP$:()=>Pe,Qsj:()=>Hh,R0b:()=>is,RDi:()=>Gp,Rgc:()=>zf,SBq:()=>Oa,Sil:()=>XD,Suo:()=>xu,TTD:()=>cs,TgZ:()=>Pg,Tol:()=>_C,Udp:()=>Fr,W1O:()=>Li,X6Q:()=>LE,XFs:()=>Ye,Xpm:()=>be,Xts:()=>gc,Y36:()=>Sc,YKP:()=>yv,YNc:()=>Mg,Yjl:()=>U,Yz7:()=>Jt,Z0I:()=>Si,ZZ4:()=>ol,_Bn:()=>nE,_UZ:()=>kg,_Vd:()=>$h,_c5:()=>gT,_uU:()=>Ef,aQg:()=>Pm,c2e:()=>xE,cJS:()=>kt,cg1:()=>Sf,dDg:()=>NE,dqk:()=>Dt,eFA:()=>Gv,ekj:()=>Id,eoX:()=>jv,evT:()=>ew,f3M:()=>I,g9A:()=>ku,h0i:()=>Vd,hGG:()=>mT,hij:()=>Td,iGM:()=>Wf,ifc:()=>lt,ip1:()=>Rv,jDz:()=>cm,kL8:()=>Zg,lG2:()=>W,lcZ:()=>xr,lnq:()=>z_,lqb:()=>Ho,lri:()=>Tm,n5z:()=>ps,oAB:()=>Wt,oJD:()=>gy,oxw:()=>fC,q4F:()=>zb,qLn:()=>zh,qOj:()=>D_,qZA:()=>Ng,rWj:()=>Sm,sBO:()=>Cr,sIi:()=>pf,s_b:()=>qf,soG:()=>wr,tb:()=>qd,tp0:()=>bt,uIk:()=>M_,vHH:()=>Ee,vpe:()=>As,wAp:()=>wt,xi3:()=>qc,xp6:()=>ag,ynx:()=>k_,z2F:()=>Fu,zSh:()=>Qp,zs3:()=>Tc});var c=R(7579),B=R(727),N=R(9751),ie=R(6451),oe=R(3099);function ge(i){for(let o in i)if(i[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function he(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function me(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const z=ge({__forward_ref__:ge});function H(i){return i.__forward_ref__=H,i.toString=function(){return le(this())},i}function Y(i){return je(i)?i():i}function je(i){return"function"==typeof i&&i.hasOwnProperty(z)&&i.__forward_ref__===H}class Ee extends Error{constructor(o,a){super(function tt(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function _e(i){return"string"==typeof i?i:null==i?"":String(i)}function Ae(i,o){throw new Ee(-201,!1)}function Bt(i,o){null==i&&function ze(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function kt(i){return{providers:i.providers||[],imports:i.imports||[]}}function br(i){return Or(i,Pr)||Or(i,fi)}function Si(i){return null!==br(i)}function Or(i,o){return i.hasOwnProperty(o)?i[o]:null}function $i(i){return i&&(i.hasOwnProperty(Bn)||i.hasOwnProperty(Hi))?i[Bn]:null}const Pr=ge({\u0275prov:ge}),Bn=ge({\u0275inj:ge}),fi=ge({ngInjectableDef:ge}),Hi=ge({ngInjectorDef:ge});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let Zn;function gn(i){const o=Zn;return Zn=i,o}function hr(i,o,a){const l=br(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ye.Optional?null:void 0!==o?o:void Ae(le(i))}function yn(i){return{toString:i}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),lt=(()=>{return(i=lt||(lt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",lt;var i})();const Dt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ir={},Et=[],Nr=ge({\u0275cmp:ge}),Pt=ge({\u0275dir:ge}),ni=ge({\u0275pipe:ge}),Zt=ge({\u0275mod:ge}),or=ge({\u0275fac:ge}),bn=ge({__NG_ELEMENT_ID__:ge});let Je=0;function be(i){return yn(()=>{const a=!0===i.standalone,l={},h={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Et,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||lt.Emulated,id:"c"+Je++,styles:i.styles||Et,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,y=i.features;return h.inputs=j(i.inputs,l),h.outputs=j(i.outputs),y&&y.forEach(w=>w(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(_t).filter(vt):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(ee).filter(vt):null,h})}function _t(i){return M(i)||L(i)}function vt(i){return null!==i}function Wt(i){return yn(()=>({type:i.type,bootstrap:i.bootstrap||Et,declarations:i.declarations||Et,imports:i.imports||Et,exports:i.exports||Et,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function j(i,o){if(null==i)return Ir;const a={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=l,o&&(o[h]=f)}return a}const W=be;function U(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function M(i){return i[Nr]||null}function L(i){return i[Pt]||null}function ee(i){return i[ni]||null}function Pe(i){const o=M(i)||L(i)||ee(i);return null!==o&&o.standalone}function nt(i,o){const a=i[Zt]||null;if(!a&&!0===o)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function Kn(i){return Array.isArray(i)&&"object"==typeof i[1]}function ii(i){return Array.isArray(i)&&!0===i[1]}function oo(i){return 0!=(8&i.flags)}function ju(i){return 2==(2&i.flags)}function sa(i){return 1==(1&i.flags)}function $r(i){return null!==i.template}function $u(i){return 0!=(256&i[2])}function yr(i,o){return i.hasOwnProperty(or)?i[or]:null}class js{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function cs(){return _l}function _l(i){return i.type.prototype.ngOnChanges&&(i.setInput=Gu),iu}function iu(){const i=lo(this),o=i?.current;if(o){const a=i.previous;if(a===Ir)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Gu(i,o,a,l){const h=lo(i)||function hh(i,o){return i[vl]=o}(i,{previous:Ir,current:null}),f=h.current||(h.current={}),y=h.previous,w=this.declaredInputs[a],E=y[w];f[w]=new js(E&&E.currentValue,o,y===Ir),i[l]=o}cs.ngInherit=!0;const vl="__ngSimpleChanges__";function lo(i){return i[vl]||null}function On(i){for(;Array.isArray(i);)i=i[0];return i}function gi(i,o){return On(o[i])}function _r(i,o){return On(o[i.index])}function Hs(i,o){return i.data[o]}function Ai(i,o){return i[o]}function en(i,o){const a=o[i];return Kn(a)?a:a[0]}function ls(i){return 64==(64&i[2])}function ai(i,o){return null==o?null:i[o]}function aa(i){i[18]=0}function Fn(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const xt={lFrame:ya(null),bindingsEnabled:!0};function Gs(){return xt.bindingsEnabled}function Se(){return xt.lFrame.lView}function qt(){return xt.lFrame.tView}function ph(i){return xt.lFrame.contextLView=i,i[8]}function po(i){return xt.lFrame.contextLView=null,i}function Yn(){let i=go();for(;null!==i&&64===i.type;)i=i.parent;return i}function go(){return xt.lFrame.currentTNode}function Rr(i,o){const a=xt.lFrame;a.currentTNode=i,a.isParent=o}function au(){return xt.lFrame.isParent}function mo(){xt.lFrame.isParent=!1}function Qn(){const i=xt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function xi(){return xt.lFrame.bindingIndex}function pa(){return xt.lFrame.bindingIndex++}function Ki(i){const o=xt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function bl(i,o){const a=xt.lFrame;a.bindingIndex=a.bindingRootIndex=i,yo(o)}function yo(i){xt.lFrame.currentDirectiveIndex=i}function ga(){return xt.lFrame.currentQueryIndex}function Yu(i){xt.lFrame.currentQueryIndex=i}function ma(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Il(i,o,a){if(a&Ye.SkipSelf){let h=o,f=i;for(;!(h=h.parent,null!==h||a&Ye.Host||(h=ma(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,i=f}const l=xt.lFrame=yh();return l.currentTNode=o,l.lView=i,!0}function _o(i){const o=yh(),a=i[1];xt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function yh(){const i=xt.lFrame,o=null===i?null:i.child;return null===o?ya(i):o}function ya(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function _h(){const i=xt.lFrame;return xt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Dl=_h;function ds(){const i=_h();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Dn(){return xt.lFrame.selectedIndex}function Yi(i){xt.lFrame.selectedIndex=i}function Tn(){const i=xt.lFrame;return Hs(i.tView,i.selectedIndex)}function Qu(){xt.lFrame.currentNamespace="svg"}function uu(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:O}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=O&&(i.destroyHooks||(i.destroyHooks=[])).push(a,O)}}function qs(i,o,a){wo(i,o,3,a)}function vo(i,o,a,l){(3&i[2])===a&&wo(i,o,a,l)}function Sl(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function wo(i,o,a,l){const f=l??-1,y=o.length-1;let w=0;for(let E=void 0!==l?65535&i[18]:0;E<y;E++)if("number"==typeof o[E+1]){if(w=o[E],null!=l&&w>=l)break}else o[E]<0&&(i[18]+=65536),(w<f||-1==f)&&(Al(i,a,o,E),i[18]=(4294901760&i[18])+E+2),E++}function Al(i,o,a,l){const h=a[l]<0,f=a[l+1],w=i[h?-a[l]:a[l]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class ui{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Qi(i,o,a){let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const f=a[l++],y=a[l++],w=a[l++];i.setAttribute(o,y,w,f)}else{const f=h,y=a[++l];rc(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),l++}}return l}function _a(i){return 3===i||4===i||6===i}function rc(i){return 64===i.charCodeAt(0)}function va(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||Ml(i,a,h,null,-1===a||2===a?o[++l]:null)}}return i}function Ml(i,o,a,l,h){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==h&&(i[f+1]=h));if(l===i[f+1])return void(i[f+2]=h)}f++,null!==l&&f++,null!==h&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==h&&i.splice(f++,0,h)}function Ch(i){return-1!==i}function Jn(i){return 32767&i}function fs(i,o){let a=function Eh(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let ic=!0;function wa(i){const o=ic;return ic=i,o}let Ol=0;const Gr={};function Ji(i,o){const a=fu(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,sc(l.data,i),sc(o,null),sc(l.blueprint,null));const h=Ca(i,o),f=i.injectorIndex;if(Ch(h)){const y=Jn(h),w=fs(h,o),E=w[1].data;for(let T=0;T<8;T++)o[f+T]=w[y+T]|E[y+T]}return o[f+8]=h,f}function sc(i,o){i.push(0,0,0,0,0,0,0,0,o)}function fu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ca(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){if(l=Ao(h),null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Zs(i,o,a){!function Pl(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(bn)&&(l=a[bn]),null==l&&(l=a[bn]=Ol++);const h=255&l;o.data[i+(h>>5)]|=1<<h}(i,o,a)}function Eo(i,o,a){if(a&Ye.Optional||void 0!==i)return i;Ae()}function bo(i,o,a,l){if(a&Ye.Optional&&void 0===l&&(l=null),0==(a&(Ye.Self|Ye.Host))){const h=i[9],f=gn(void 0);try{return h?h.get(o,l,a&Ye.Optional):hr(o,l,a&Ye.Optional)}finally{gn(f)}}return Eo(l,0,a)}function Io(i,o,a,l=Ye.Default,h){if(null!==i){if(1024&o[2]){const y=function Dh(i,o,a,l,h){let f=i,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=Nl(f,y,a,l|Ye.Self,Gr);if(w!==Gr)return w;let E=f.parent;if(!E){const T=y[21];if(T){const O=T.get(a,Gr,l);if(O!==Gr)return O}E=Ao(y),y=y[15]}f=E}return h}(i,o,a,l,Gr);if(y!==Gr)return y}const f=Nl(i,o,a,l,Gr);if(f!==Gr)return f}return bo(o,a,l,h)}function Nl(i,o,a,l,h){const f=function Ih(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(bn)?i[bn]:void 0;return"number"==typeof o?o>=0?255&o:oc:o}(a);if("function"==typeof f){if(!Il(o,i,l))return l&Ye.Host?Eo(h,0,l):bo(o,a,l,h);try{const y=f(l);if(null!=y||l&Ye.Optional)return y;Ae()}finally{Dl()}}else if("number"==typeof f){let y=null,w=fu(i,o),E=-1,T=l&Ye.Host?o[16][6]:null;for((-1===w||l&Ye.SkipSelf)&&(E=-1===w?Ca(i,o):o[w+8],-1!==E&&gu(l,!1)?(y=o[1],w=Jn(E),o=fs(E,o)):w=-1);-1!==w;){const O=o[1];if(Do(f,w,O.data)){const F=pu(w,o,a,y,l,T);if(F!==Gr)return F}E=o[w+8],-1!==E&&gu(l,o[1].data[w+8]===T)&&Do(f,w,o)?(y=O,w=Jn(E),o=fs(E,o)):w=-1}}return h}function pu(i,o,a,l,h,f){const y=o[1],w=y.data[i+8],O=ba(w,y,a,null==l?ju(w)&&ic:l!=y&&0!=(3&w.type),h&Ye.Host&&f===w);return null!==O?Mi(o,y,O,w):Gr}function ba(i,o,a,l,h){const f=i.providerIndexes,y=o.data,w=1048575&f,E=i.directiveStart,O=f>>20,q=h?w+O:i.directiveEnd;for(let te=l?w:w+O;te<q;te++){const Ce=y[te];if(te<E&&a===Ce||te>=E&&Ce.type===a)return te}if(h){const te=y[E];if(te&&$r(te)&&te.type===a)return E}return null}function Mi(i,o,a,l){let h=i[a];const f=o.data;if(function nc(i){return i instanceof ui}(h)){const y=h;y.resolving&&function Qe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():_e(i)}(f[a]));const w=wa(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?gn(y.injectImpl):null;Il(i,l,Ye.Default);try{h=i[a]=y.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function tc(i,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(l){const y=_l(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==E&&gn(E),wa(w),y.resolving=!1,Dl()}}return h}function Do(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function gu(i,o){return!(i&Ye.Self||i&Ye.Host&&o)}class To{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Io(this._tNode,this._lView,o,l,a)}}function oc(){return new To(Yn(),Se())}function ps(i){return yn(()=>{const o=i.prototype.constructor,a=o[or]||So(o),l=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==l;){const f=h[or]||So(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function So(i){return je(i)?()=>{const o=So(Y(i));return o&&o()}:yr(i)}function Ao(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function mu(i){return function Ea(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const f=a[h];if(_a(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(f===o)return a[h+1];h+=2}}}return null}(Yn(),i)}const xo="__parameters__";function Oo(i,o,a){return yn(()=>{const l=function ac(i){return function(...a){if(i){const l=i(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...f){if(this instanceof h)return l.apply(this,f),this;const y=new h(...f);return w.annotation=y,w;function w(E,T,O){const F=E.hasOwnProperty(xo)?E[xo]:Object.defineProperty(E,xo,{value:[]})[xo];for(;F.length<=O;)F.push(null);return(F[O]=F[O]||[]).push(y),E}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class wn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function sn(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),sn(l,o)):o!==i&&o.push(l)}return o}function _i(i,o){i.forEach(a=>Array.isArray(a)?_i(a,o):o(a))}function vi(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Pn(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function qr(i,o,a){let l=ki(i,o);return l>=0?i[1|l]=a:(l=~l,function Rl(i,o,a,l){let h=i.length;if(h==o)i.push(a,l);else if(1===h)i.push(l,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Ia(i,o){const a=ki(i,o);if(a>=0)return i[1|a]}function ki(i,o){return function Da(i,o,a){let l=0,h=i.length>>a;for(;h!==l;){const f=l+(h-l>>1),y=i[f<<a];if(o===y)return f<<a;y>o?h=f:l=f+1}return~(h<<a)}(i,o,1)}const Ri={},Nn="__NG_DI_FLAG__",gs="ngTempTokenPath",ko=/\n/gm,_u="__source";let Ro;function es(i){const o=Ro;return Ro=i,o}function Vl(i,o=Ye.Default){if(void 0===Ro)throw new Ee(-203,!1);return null===Ro?hr(i,void 0,o):Ro.get(i,o&Ye.Optional?null:void 0,o)}function Gn(i,o=Ye.Default){return(function jn(){return Zn}()||Vl)(Y(i),o)}function I(i,o=Ye.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Gn(i,o)}function D(i){const o=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ee(900,!1);let h,f=Ye.Default;for(let y=0;y<l.length;y++){const w=l[y],E=V(w);"number"==typeof E?-1===E?h=w.token:f|=E:h=w}o.push(Gn(h,f))}else o.push(Gn(l))}return o}function x(i,o){return i[Nn]=o,i.prototype[Nn]=o,i}function V(i){return i[Nn]}const Ge=x(Oo("Optional"),8),bt=x(Oo("SkipSelf"),4);let Mh,li,Ys;function Gp(i){Mh=i}function Aa(i){return function Oh(){if(void 0===li&&(li=null,Dt.trustedTypes))try{li=Dt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return li}()?.createHTML(i)||i}function Qs(i){return function Ph(){if(void 0===Ys&&(Ys=null,Dt.trustedTypes))try{Ys=Dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Ys}()?.createHTML(i)||i}class Js{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Xs(i){return i instanceof Js?i.changingThisBreaksApplicationSecurity:i}function Ma(i,o){const a=function Fh(i){return i instanceof Js&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}class qp{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Aa(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class hy{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Aa(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Aa(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let h=a.length-1;0<h;h--){const y=a.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function m(i){return(i=String(i)).match(p)?i:"unsafe:"+i}function C(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function A(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const k=C("area,br,col,hr,img,wbr"),X=C("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ie=C("rp,rt"),Cn=A(k,A(X,C("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),A(Ie,C("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),A(Ie,X)),Ci=C("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$l=A(Ci,C("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),C("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zp=C("script,style,template");class fy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!Cn.hasOwnProperty(a))return this.sanitizedSomething=!0,!Zp.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let h=0;h<l.length;h++){const f=l.item(h),y=f.name,w=y.toLowerCase();if(!$l.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let E=f.value;Ci[w]&&(E=m(E)),this.buf.push(" ",y,'="',fc(E),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();Cn.hasOwnProperty(a)&&!k.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(fc(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const hc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vu=/([^\#-~ |!])/g;function fc(i){return i.replace(/&/g,"&amp;").replace(hc,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(vu,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $o;function wu(i){return"content"in i&&function py(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var er=(()=>((er=er||{})[er.NONE=0]="NONE",er[er.HTML=1]="HTML",er[er.STYLE=2]="STYLE",er[er.SCRIPT=3]="SCRIPT",er[er.URL=4]="URL",er[er.RESOURCE_URL=5]="RESOURCE_URL",er))();function gy(i){const o=pc();return o?Qs(o.sanitize(er.HTML,i)||""):Ma(i,"HTML")?Qs(Xs(i)):function Vh(i,o){let a=null;try{$o=$o||function jl(i){const o=new hy(i);return function v(){try{return!!(new window.DOMParser).parseFromString(Aa(""),"text/html")}catch{return!1}}()?new qp(o):o}(i);let l=o?String(o):"";a=$o.getInertBodyElement(l);let h=5,f=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=f,f=a.innerHTML,a=$o.getInertBodyElement(l)}while(l!==f);return Aa((new fy).sanitizeChildren(wu(a)||a))}finally{if(a){const l=wu(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}(function vs(){return void 0!==Mh?Mh:typeof document<"u"?document:void 0}(),_e(i))}function O0(i){const o=pc();return o?o.sanitize(er.URL,i)||"":Ma(i,"URL")?Xs(i):m(_e(i))}function pc(){const i=Se();return i&&i[12]}const gc=new wn("ENVIRONMENT_INITIALIZER"),Uh=new wn("INJECTOR",-1),mc=new wn("INJECTOR_DEF_TYPES");class Hl{get(o,a=Ri){if(a===Ri){const l=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw l.name="NullInjectorError",l}return a}}function my(...i){return{\u0275providers:yy(0,i)}}function yy(i,...o){const a=[],l=new Set;let h;return _i(o,f=>{const y=f;Kp(y,a,[],l)&&(h||(h=[]),h.push(y))}),void 0!==h&&Wp(h,a),a}function Wp(i,o){for(let a=0;a<i.length;a++){const{providers:h}=i[a];_i(h,f=>{o.push(f)})}}function Kp(i,o,a,l){if(!(i=Y(i)))return!1;let h=null,f=$i(i);const y=!f&&M(i);if(f||y){if(y&&!y.standalone)return!1;h=i}else{const E=i.ngModule;if(f=$i(E),!f)return!1;h=E}const w=l.has(h);if(y){if(w)return!1;if(l.add(h),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of E)Kp(T,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;l.add(h);try{_i(f.imports,O=>{Kp(O,o,a,l)&&(T||(T=[]),T.push(O))})}finally{}void 0!==T&&Wp(T,o)}if(!w){const T=yr(h)||(()=>new h);o.push({provide:h,useFactory:T,deps:Et},{provide:mc,useValue:h,multi:!0},{provide:gc,useValue:()=>Gn(h),multi:!0})}const E=f.providers;null==E||w||_i(E,O=>{o.push(O)})}}return h!==i&&void 0!==i.providers}const N0=ge({provide:String,useValue:ge});function Yp(i){return null!==i&&"object"==typeof i&&N0 in i}function zl(i){return"function"==typeof i}const Qp=new wn("Set Injector scope."),vy={},Jp={};let yc;function _c(){return void 0===yc&&(yc=new Hl),yc}class Ho{}class k0 extends Ho{constructor(o,a,l,h){super(),this.parent=a,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wy(o,y=>this.processProvider(y)),this.records.set(Uh,vc(void 0,this)),h.has("environment")&&this.records.set(Ho,vc(void 0,this));const f=this.records.get(Qp);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(mc.multi,Et,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=es(this),l=gn(void 0);try{return o()}finally{es(a),gn(l)}}get(o,a=Ri,l=Ye.Default){this.assertNotDestroyed();const h=es(this),f=gn(void 0);try{if(!(l&Ye.SkipSelf)){let w=this.records.get(o);if(void 0===w){const E=function Bb(i){return"function"==typeof i||"object"==typeof i&&i instanceof wn}(o)&&br(o);w=E&&this.injectableDefInScope(E)?vc(jh(o),vy):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&Ye.Self?_c():this.parent).get(o,a=l&Ye.Optional&&a===Ri?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[gs]=y[gs]||[]).unshift(le(o)),h)throw y;return function Q(i,o,a,l){const h=i[gs];throw o[_u]&&h.unshift(o[_u]),i.message=function ae(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=le(o);if(Array.isArray(o))h=o.map(le).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):le(w)))}h=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${i.replace(ko,"\n  ")}`}("\n"+i.message,h,a,l),i.ngTokenPath=h,i[gs]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{gn(f),es(h)}}resolveInjectorInitializers(){const o=es(this),a=gn(void 0);try{const l=this.get(gc.multi,Et,Ye.Self);for(const h of l)h()}finally{es(o),gn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(le(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(o){let a=zl(o=Y(o))?o:Y(o&&o.provide);const l=function Vb(i){return Yp(i)?vc(void 0,i.useValue):vc(R0(i),vy)}(o);if(zl(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=vc(void 0,vy,!0),h.factory=()=>D(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===vy&&(a.value=Jp,a.value=a.factory()),"object"==typeof a.value&&a.value&&function F0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Y(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function jh(i){const o=br(i),a=null!==o?o.factory:yr(i);if(null!==a)return a;if(i instanceof wn)throw new Ee(204,!1);if(i instanceof Function)return function Xp(i){const o=i.length;if(o>0)throw function Sn(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Ee(204,!1);const a=function Mn(i){const o=i&&(i[Pr]||i[fi]);if(o){const a=function ji(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ee(204,!1)}function R0(i,o,a){let l;if(zl(i)){const h=Y(i);return yr(h)||jh(h)}if(Yp(i))l=()=>Y(i.useValue);else if(function Gl(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...D(i.deps||[]));else if(function Bh(i){return!(!i||!i.useExisting)}(i))l=()=>Gn(Y(i.useExisting));else{const h=Y(i&&(i.useClass||i.provide));if(!function Ub(i){return!!i.deps}(i))return yr(h)||jh(h);l=()=>new h(...D(i.deps))}return l}function vc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function LA(i){return!!i.\u0275providers}function wy(i,o){for(const a of i)Array.isArray(a)?wy(a,o):LA(a)?wy(a.\u0275providers,o):o(a)}class jb{}class Ey{resolveComponentFactory(o){throw function Cy(i){const o=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let $h=(()=>{class i{}return i.NULL=new Ey,i})();function VA(){return ql(Yn(),Se())}function ql(i,o){return new Oa(_r(i,o))}let Oa=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=VA,i})();function by(i){return i instanceof Oa?i.nativeElement:i}class Iy{}let Hh=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function UA(){const i=Se(),a=en(Yn().index,i);return(Kn(a)?a:i)[11]}(),i})(),Gb=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class Dy{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const zb=new Dy("14.2.7"),U0={};function tg(i){return i.ngOriginalError}class zh{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&tg(o);for(;a&&tg(a);)a=tg(a);return a||null}}const ky=new Map;let G0=0;const Fy="__ngContext__";function Zr(i,o){Kn(o)?(i[Fy]=o[20],function Ry(i){ky.set(i[20],i)}(o)):i[Fy]=o}function ew(i){return i.ownerDocument}function Go(i){return i instanceof Function?i():i}var eo=(()=>((eo=eo||{})[eo.Important=1]="Important",eo[eo.DashCase=2]="DashCase",eo))();function ig(i,o){return undefined(i,o)}function wc(i){const o=i[3];return ii(o)?o[3]:o}function iw(i){return Fi(i[13])}function In(i){return Fi(i[4])}function Fi(i){for(;null!==i&&!ii(i);)i=i[4];return i}function Pa(i,o,a,l,h){if(null!=l){let f,y=!1;ii(l)?f=l:Kn(l)&&(y=!0,l=l[0]);const w=On(l);0===i&&null!==a?null==h?By(o,a,w):zo(o,a,w,h||null,!0):1===i&&null!==a?zo(o,a,w,h||null,!0):2===i?function bc(i,o,a){const l=to(i,o);l&&function ka(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,w,y):3===i&&o.destroyNode(w),null!=f&&function dw(i,o,a,l,h){const f=a[7];f!==On(a)&&Pa(o,i,l,f,h);for(let w=10;w<a.length;w++){const E=a[w];Qh(E[1],E,i,o,l,f)}}(o,i,f,a,h)}}function Ly(i,o,a){return i.createElement(o,a)}function Yl(i,o){const a=i[9],l=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Fn(h,-1)),a.splice(l,1)}function Na(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const h=l[17];null!==h&&h!==i&&Yl(h,l),o>0&&(i[a-1][4]=l[4]);const f=Pn(i,10+o);!function ow(i,o){Qh(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Uy(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Qh(i,o,a,3,null,null),function Vy(i){let o=i[13];if(!o)return Kh(i[1],i);for(;o;){let a=null;if(Kn(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Kn(o)&&Kh(o[1],o),o=o[3];null===o&&(o=i),Kn(o)&&Kh(o[1],o),a=o&&o[4]}o=a}}(o)}}function Kh(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function tr(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof ui)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=h[f[y]],E=f[y+1];try{E.call(w)}finally{}}else try{f.call(h)}finally{}}}}(i,o),function uw(i,o){const a=i.cleanup,l=o[7];let h=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(o):On(o[y]),E=l[h=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],E,T):T>=0?l[h=T]():l[h=-T].unsubscribe(),f+=2}else{const y=l[h=a[f+1]];a[f].call(y)}if(null!==l){for(let f=h+1;f<l.length;f++)(0,l[f])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&ii(o[3])){a!==o[3]&&Yl(a,o);const l=o[19];null!==l&&l.detachView(i)}!function Jb(i){ky.delete(i[20])}(o)}}function Ql(i,o,a){return function Yh(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=i.data[l.directiveStart].encapsulation;if(h===lt.None||h===lt.Emulated)return null}return _r(l,a)}(i,o.parent,a)}function zo(i,o,a,l,h){i.insertBefore(o,a,l,h)}function By(i,o,a){i.appendChild(o,a)}function cw(i,o,a,l,h){null!==l?zo(i,o,a,l,h):By(i,o,a)}function to(i,o){return i.parentNode(o)}let jy=function sg(i,o,a){return 40&i.type?_r(i,a):null};function Xl(i,o,a,l){const h=Ql(i,l,o),f=o[11],w=function Jl(i,o,a){return jy(i,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let E=0;E<a.length;E++)cw(f,h,a[E],w,!1);else cw(f,h,a,w,!1)}function zt(i,o){if(null!==o){const a=o.type;if(3&a)return _r(o,i);if(4&a)return Hy(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return zt(i,l);{const h=i[o.index];return ii(h)?Hy(-1,h):On(h)}}if(32&a)return ig(o,i)()||On(i[o.index]);{const l=ed(i,o);return null!==l?Array.isArray(l)?l[0]:zt(wc(i[16]),l):zt(i,o.next)}}return null}function ed(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Hy(i,o){const a=10+i+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return zt(l,h)}return o[7]}function Gy(i,o,a,l,h,f,y){for(;null!=a;){const w=l[a.index],E=a.type;if(y&&0===o&&(w&&Zr(On(w),l),a.flags|=4),64!=(64&a.flags))if(8&E)Gy(i,o,a.child,l,h,f,!1),Pa(o,i,h,w,f);else if(32&E){const T=ig(a,l);let O;for(;O=T();)Pa(o,i,h,O,f);Pa(o,i,h,w,f)}else 16&E?zy(i,o,l,a,h,f):Pa(o,i,h,w,f);a=y?a.projectionNext:a.next}}function Qh(i,o,a,l,h,f){Gy(a,l,i.firstChild,o,h,f,!1)}function zy(i,o,a,l,h,f){const y=a[16],E=y[6].projection[l.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)Pa(o,i,h,E[T],f);else Gy(i,o,E,y[3],h,f,!0)}function cI(i,o,a){i.setAttribute(o,"style",a)}function Tr(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Ra(i,o,a){let l=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const f=o.length;if(h+f===l||i.charCodeAt(h+f)<=32)return h}a=h+1}}const pw="ng-template";function lI(i,o,a){let l=0;for(;l<i.length;){let h=i[l++];if(a&&"class"===h){if(h=i[l],-1!==Ra(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<i.length&&"string"==typeof(h=i[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function qy(i){return 4===i.type&&i.value!==pw}function gw(i,o,a){return o===(4!==i.type||a?i.value:pw)}function dI(i,o,a){let l=4;const h=i.attrs||[],f=function og(i){for(let o=0;o<i.length;o++)if(_a(i[o]))return o;return i.length}(h);let y=!1;for(let w=0;w<o.length;w++){const E=o[w];if("number"!=typeof E){if(!y)if(4&l){if(l=2|1&l,""!==E&&!gw(i,E,a)||""===E&&1===o.length){if(Cs(l))return!1;y=!0}}else{const T=8&l?E:o[++w];if(8&l&&null!==i.attrs){if(!lI(i.attrs,T,a)){if(Cs(l))return!1;y=!0}continue}const F=hI(8&l?"class":E,h,qy(i),a);if(-1===F){if(Cs(l))return!1;y=!0;continue}if(""!==T){let q;q=F>f?"":h[F+1].toLowerCase();const te=8&l?q:null;if(te&&-1!==Ra(te,T,0)||2&l&&T!==q){if(Cs(l))return!1;y=!0}}}}else{if(!y&&!Cs(l)&&!Cs(E))return!1;if(y&&Cs(E))continue;y=!1,l=E|1&l}}return Cs(l)||y}function Cs(i){return 0==(1&i)}function hI(i,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let f=!1;for(;h<o.length;){const y=o[h];if(y===i)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function Ic(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function Zy(i,o,a=!1){for(let l=0;l<o.length;l++)if(dI(i,o[l],a))return!0;return!1}function td(i,o){return i?":not("+o.trim()+")":o}function fI(i){let o=i[0],a=1,l=2,h="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const w=i[++a];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?h+="."+y:4&l&&(h+=" "+y);else""!==h&&!Cs(y)&&(o+=td(f,h),h=""),l=y,f=f||!Cs(l);a++}return""!==h&&(o+=td(f,h)),o}const Lt={};function ag(i){yw(qt(),Se(),Dn()+i,!1)}function yw(i,o,a,l){if(!l)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&qs(o,f,a)}else{const f=i.preOrderHooks;null!==f&&vo(o,f,0,a)}Yi(a)}function ww(i,o=null,a=null,l){const h=Cw(i,o,a,l);return h.resolveInjectorInitializers(),h}function Cw(i,o=null,a=null,l,h=new Set){const f=[a||Et,my(i)];return l=l||("object"==typeof i?void 0:le(i)),new k0(f,o||_c(),l||null,h)}let Tc=(()=>{class i{static create(a,l){if(Array.isArray(a))return ww({name:""},l,a,"");{const h=a.name??"";return ww({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Ri,i.NULL=new Hl,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>Gn(Uh)}),i.__NG_ELEMENT_ID__=-1,i})();function Sc(i,o=Ye.Default){const a=Se();return null===a?Gn(i,o):Io(Yn(),a,Y(i),o)}function e_(){throw new Error("invalid")}function od(i,o){return i<<17|o<<2}function Kr(i){return i>>17&32767}function t_(i){return 2|i}function Fa(i){return(131068&i)>>2}function n_(i,o){return-131069&i|o<<2}function r_(i){return 1|i}function TI(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],f=a[l+1];if(-1!==f){const y=i.data[f];Yu(h),y.contentQueries(2,o[f],f)}}}function cd(i,o,a,l,h,f,y,w,E,T,O){const F=o.blueprint.slice();return F[0]=h,F[2]=76|l,(null!==O||i&&1024&i[2])&&(F[2]|=1024),aa(F),F[3]=F[15]=i,F[8]=a,F[10]=y||i&&i[10],F[11]=w||i&&i[11],F[12]=E||i&&i[12]||null,F[9]=T||i&&i[9]||null,F[6]=f,F[20]=function Qb(){return G0++}(),F[21]=O,F[16]=2==o.type?i[16]:F,F}function ld(i,o,a,l,h){let f=i.data[o];if(null===f)f=function l_(i,o,a,l,h){const f=go(),y=au(),E=i.data[o]=function AI(i,o,a,l,h,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,h);return null===i.firstChild&&(i.firstChild=E),null!==f&&(y?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,o,a,l,h),function El(){return xt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=h;const y=function ou(){const i=xt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Rr(f,!0),f}function dd(i,o,a,l){if(0===a)return-1;const h=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function cf(i,o,a){_o(o);try{const l=i.viewQuery;null!==l&&yd(1,l,a);const h=i.template;null!==h&&d_(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&TI(i,o),i.staticViewQueries&&yd(2,i.viewQuery,a);const f=i.components;null!==f&&function ox(i,o){for(let a=0;a<o.length;a++)UI(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,ds()}}function bi(i,o,a,l){const h=o[2];if(128!=(128&h)){_o(o);try{aa(o),function fa(i){return xt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&d_(i,o,a,2,l);const y=3==(3&h);if(y){const T=i.preOrderCheckHooks;null!==T&&qs(o,T,null)}else{const T=i.preOrderHooks;null!==T&&vo(o,T,0,null),Sl(o,0)}if(function bg(i){for(let o=iw(i);null!==o;o=In(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],f=h[3];0==(512&h[2])&&Fn(f,1),h[2]|=512}}}(o),function v_(i){for(let o=iw(i);null!==o;o=In(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];ls(l)&&bi(h,l,h.template,l[8])}}(o),null!==i.contentQueries&&TI(i,o),y){const T=i.contentCheckHooks;null!==T&&qs(o,T)}else{const T=i.contentHooks;null!==T&&vo(o,T,1),Sl(o,1)}!function ix(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)Yi(~h);else{const f=h,y=a[++l],w=a[++l];bl(y,f),w(2,o[f])}}}finally{Yi(-1)}}(i,o);const w=i.components;null!==w&&function sx(i,o){for(let a=0;a<o.length;a++)VI(i,o[a])}(o,w);const E=i.viewQuery;if(null!==E&&yd(2,E,l),y){const T=i.viewCheckHooks;null!==T&&qs(o,T)}else{const T=i.viewHooks;null!==T&&vo(o,T,2),Sl(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Fn(o[3],-1))}finally{ds()}}}function d_(i,o,a,l,h){const f=Dn(),y=2&l;try{Yi(-1),y&&o.length>22&&yw(i,o,22,!1),a(l,h)}finally{Yi(f)}}function hd(i,o,a){if(oo(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}function h_(i,o,a){!Gs()||(function m_(i,o,a,l){const h=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ji(a,o),Zr(l,o);const y=a.initialInputs;for(let w=h;w<f;w++){const E=i.data[w],T=$r(E);T&&FI(o,a,E);const O=Mi(o,i,w,a);Zr(O,o),null!==y&&qw(0,w-h,O,E,0,y),T&&(en(a.index,o)[8]=O)}}(i,o,a,_r(a,o)),128==(128&a.flags)&&function Eg(i,o,a){const l=a.directiveStart,h=a.directiveEnd,f=a.index,y=function mh(){return xt.lFrame.currentDirectiveIndex}();try{Yi(f);for(let w=l;w<h;w++){const E=i.data[w],T=o[w];yo(w),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&xc(E,T)}}finally{Yi(-1),yo(y)}}(i,o,a))}function f_(i,o,a=_r){const l=o.localNames;if(null!==l){let h=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],w=-1===y?a(o,i):i[y];i[h++]=w}}}function p_(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=fd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function fd(i,o,a,l,h,f,y,w,E,T){const O=22+l,F=O+h,q=function SI(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Lt);return a}(O,F),te="function"==typeof T?T():T;return q[1]={type:i,blueprint:q,template:a,queries:null,viewQuery:w,declTNode:o,data:q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:te,incompleteFirstPass:!1}}function gd(i,o,a,l){const h=_d(o);null===a?h.push(l):(h.push(a),i.firstCreatePass&&E_(i).push(l,h.length-1))}function jw(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const h=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function md(i,o){const l=o.directiveEnd,h=i.data,f=o.attrs,y=[];let w=null,E=null;for(let T=o.directiveStart;T<l;T++){const O=h[T],F=O.inputs,q=null===f||qy(o)?null:LI(F,f);y.push(q),w=jw(F,T,w),E=jw(O.outputs,T,E)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=w,o.outputs=E}function $w(i,o){const a=en(o,i);16&a[2]||(a[2]|=32)}function g_(i,o,a,l){let h=!1;if(Gs()){const f=function NI(i,o,a){const l=i.directiveRegistry;let h=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];Zy(a,y.selectors,!1)&&(h||(h=[]),Zs(Ji(a,o),i,y.type),$r(y)?(Hw(i,a),h.unshift(y)):h.push(y))}return h}(i,o,a),y=null===l?null:{"":-1};if(null!==f){h=!0,Gw(a,i.data.length,f.length);for(let O=0;O<f.length;O++){const F=f[O];F.providersResolver&&F.providersResolver(F)}let w=!1,E=!1,T=dd(i,o,f.length,null);for(let O=0;O<f.length;O++){const F=f[O];a.mergedAttrs=va(a.mergedAttrs,F.hostAttrs),zw(i,a,o,T,F),RI(T,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const q=F.type.prototype;!w&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!E&&(q.ngOnChanges||q.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}md(i,a)}y&&function kI(i,o,a){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const f=a[o[h+1]];if(null==f)throw new Ee(-301,!1);l.push(o[h],f)}}}(a,l,y)}return a.mergedAttrs=va(a.mergedAttrs,a.attrs),h}function OI(i,o,a,l,h,f){const y=f.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const E=~o.index;(function PI(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=E&&w.push(E),w.push(l,h,y)}}function xc(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Hw(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function RI(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;$r(o)&&(a[""]=i)}}function Gw(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function zw(i,o,a,l,h){i.data[l]=h;const f=h.factory||(h.factory=yr(h.type)),y=new ui(f,$r(h),Sc);i.blueprint[l]=y,a[l]=y,OI(i,o,0,l,dd(i,a,h.hostVars,Lt),h)}function FI(i,o,a){const l=_r(o,i),h=p_(a),f=i[10],y=Mc(i,cd(i,h,null,a.onPush?32:16,l,o,f,f.createRenderer(l,a),null,null,null));i[o.index]=y}function Wo(i,o,a,l,h,f){const y=_r(i,o);!function y_(i,o,a,l,h,f,y){if(null==f)i.removeAttribute(o,h,a);else{const w=null==y?_e(f):y(f,l||"",h);i.setAttribute(o,h,w,a)}}(o[11],y,f,i.value,a,l,h)}function qw(i,o,a,l,h,f){const y=f[o];if(null!==y){const w=l.setInput;for(let E=0;E<y.length;){const T=y[E++],O=y[E++],F=y[E++];null!==w?l.setInput(a,F,T,O):a[O]=F}}}function LI(i,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function __(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function VI(i,o){const a=en(o,i);if(ls(a)){const l=a[1];48&a[2]?bi(l,a,l.template,a[8]):a[5]>0&&w_(a)}}function w_(i){for(let l=iw(i);null!==l;l=In(l))for(let h=10;h<l.length;h++){const f=l[h];if(ls(f))if(512&f[2]){const y=f[1];bi(y,f,y.template,f[8])}else f[5]>0&&w_(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=en(a[l],i);ls(h)&&h[5]>0&&w_(h)}}function UI(i,o){const a=en(o,i),l=a[1];(function BI(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),cf(l,a,a[8])}function Mc(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Ig(i){for(;i;){i[2]|=32;const o=wc(i);if($u(i)&&!o)return i;i=o}return null}function df(i,o,a,l=!0){const h=o[10];h.begin&&h.begin();try{bi(i,o,i.template,a)}catch(y){throw l&&Kw(o,y),y}finally{h.end&&h.end()}}function yd(i,o,a){Yu(0),o(i,a)}function _d(i){return i[7]||(i[7]=[])}function E_(i){return i.cleanup||(i.cleanup=[])}function Kw(i,o){const a=i[9],l=a?a.get(zh,null):null;l&&l.handleError(o)}function b_(i,o,a,l,h){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],E=o[y],T=i.data[y];null!==T.setInput?T.setInput(E,h,l,w):E[w]=h}}function Ua(i,o,a){const l=gi(o,i);!function sw(i,o,a){i.setValue(o,a)}(i[11],l,a)}function Dg(i,o,a){let l=a?i.styles:null,h=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?f=w:1==f?h=me(h,w):2==f&&(l=me(l,w+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=h:i.classesWithoutHost=h}function Oc(i,o,a,l,h=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(On(f)),ii(f))for(let w=10;w<f.length;w++){const E=f[w],T=E[1].firstChild;null!==T&&Oc(E[1],E,T,l)}const y=a.type;if(8&y)Oc(i,o,a.child,l);else if(32&y){const w=ig(a,o);let E;for(;E=w();)l.push(E)}else if(16&y){const w=ed(o,a);if(Array.isArray(w))l.push(...w);else{const E=wc(o[16]);Oc(E[1],E,w,l,!0)}}a=h?a.projectionNext:a.next}return l}class hf{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Oc(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ii(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Na(o,l),Pn(a,l))}this._attachedToViewContainer=!1}Uy(this._lView[1],this._lView)}onDestroy(o){gd(this._lView[1],this._lView,null,o)}markForCheck(){Ig(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){df(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oI(i,o){Qh(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=o}}class $I extends hf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;df(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class I_ extends $h{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=M(o);return new ff(a,this.ngModule)}}function Yw(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class GI{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const h=this.injector.get(o,U0,l);return h!==U0||a===U0?h:this.parentInjector.get(o,a,l)}}class ff extends jb{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Dc(i){return i.map(fI).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Yw(this.componentDef.inputs)}get outputs(){return Yw(this.componentDef.outputs)}create(o,a,l,h){let f=(h=h||this.ngModule)instanceof Ho?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new GI(o,f):o,w=y.get(Iy,null);if(null===w)throw new Ee(407,!1);const E=y.get(Gb,null),T=w.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",F=l?function pd(i,o,a){return i.selectRootElement(o,a===lt.ShadowDom)}(T,l,this.componentDef.encapsulation):Ly(w.createRenderer(null,this.componentDef),O,function HI(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(O)),q=this.componentDef.onPush?288:272,te=fd(0,null,null,1,0,null,null,null,null,null),Ce=cd(null,te,null,q,null,null,w,T,E,y,null);let $e,Ze;_o(Ce);try{const ot=function Xw(i,o,a,l,h,f){const y=a[1];a[22]=i;const E=ld(y,22,2,"#host",null),T=E.mergedAttrs=o.hostAttrs;null!==T&&(Dg(E,T,!0),null!==i&&(Qi(h,i,T),null!==E.classes&&Tr(h,i,E.classes),null!==E.styles&&cI(h,i,E.styles)));const O=l.createRenderer(i,o),F=cd(a,p_(o),null,o.onPush?32:16,a[22],E,l,O,f||null,null,null);return y.firstCreatePass&&(Zs(Ji(E,a),y,o.type),Hw(y,E),Gw(E,a.length,1)),Mc(a,F),a[22]=F}(F,this.componentDef,Ce,w,T);if(F)if(l)Qi(T,F,["ng-version",zb.full]);else{const{attrs:Ct,classes:Oe}=function pI(i){const o=[],a=[];let l=1,h=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===h?""!==f&&o.push(f,i[++l]):8===h&&a.push(f);else{if(!Cs(h))break;h=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ct&&Qi(T,F,Ct),Oe&&Oe.length>0&&Tr(T,F,Oe.join(" "))}if(Ze=Hs(te,22),void 0!==a){const Ct=Ze.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const At=a[Oe];Ct.push(null!=At?Array.from(At):null)}}$e=function eC(i,o,a,l){const h=a[1],f=function MI(i,o,a){const l=Yn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),zw(i,l,o,dd(i,o,1,null),a),md(i,l));const h=Mi(o,i,l.directiveStart,l);Zr(h,o);const f=_r(l,o);return f&&Zr(f,o),h}(h,a,o);if(i[8]=a[8]=f,null!==l)for(const w of l)w(f,o);if(o.contentQueries){const w=Yn();o.contentQueries(1,f,w.directiveStart)}const y=Yn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Yi(y.index),OI(a[1],y,0,y.directiveStart,y.directiveEnd,o),xc(o,f)),f}(ot,this.componentDef,Ce,[tC]),cf(te,Ce,null)}finally{ds()}return new Jw(this.componentType,$e,ql(Ze,Ce),Ce,Ze)}}class Jw extends class L0{}{constructor(o,a,l,h,f){super(),this.location=l,this._rootLView=h,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new $I(h),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){const f=this._rootLView;b_(f[1],f,h,o,a),$w(f,this._tNode.index)}}get injector(){return new To(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function tC(){const i=Yn();uu(Se()[1],i)}function D_(i){let o=function nC(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let h;if($r(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ee(903,!1);h=o.\u0275dir}if(h){if(a){l.push(h);const y=i;y.inputs=T_(i.inputs),y.declaredInputs=T_(i.declaredInputs),y.outputs=T_(i.outputs);const w=h.hostBindings;w&&rC(i,w);const E=h.viewQuery,T=h.contentQueries;if(E&&ZI(i,E),T&&WI(i,T),he(i.inputs,h.inputs),he(i.declaredInputs,h.declaredInputs),he(i.outputs,h.outputs),$r(h)&&h.data.animation){const O=i.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===D_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function qI(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const h=i[l];h.hostVars=o+=h.hostVars,h.hostAttrs=va(h.hostAttrs,a=va(a,h.hostAttrs))}}(l)}function T_(i){return i===Ir?{}:i===Et?[]:i}function ZI(i,o){const a=i.viewQuery;i.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function WI(i,o){const a=i.contentQueries;i.contentQueries=a?(l,h,f)=>{o(l,h,f),a(l,h,f)}:o}function rC(i,o){const a=i.hostBindings;i.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let A_=null;function Pc(){if(!A_){const i=Dt.Symbol;if(i&&i.iterator)A_=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(A_=l)}}}return A_}function pf(i){return!!Sg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Pc()in i)}function Sg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Es(i,o,a){return i[o]=a}function di(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Ko(i,o,a,l){const h=di(i,o,a);return di(i,o+1,l)||h}function M_(i,o,a,l){const h=Se();return di(h,pa(),o)&&(qt(),Wo(Tn(),h,i,o,a,l)),M_}function ur(i,o,a,l,h,f,y,w){const T=function Ag(i,o,a,l,h){const f=Ko(i,o,a,l);return di(i,o+2,h)||f}(i,xi(),a,h,y);return Ki(3),T?o+_e(a)+l+_e(h)+f+_e(y)+w:Lt}function Mg(i,o,a,l,h,f,y,w){const E=Se(),T=qt(),O=i+22,F=T.firstCreatePass?function bd(i,o,a,l,h,f,y,w,E){const T=o.consts,O=ld(o,i,4,y||null,ai(T,w));g_(o,a,O,ai(T,E)),uu(o,O);const F=O.tViews=fd(2,O,l,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,O),F.queries=o.queries.embeddedTView(O)),O}(O,T,E,o,a,l,h,f,y):T.data[O];Rr(F,!1);const q=E[11].createComment("");Xl(T,E,q,F),Zr(q,E),Mc(E,E[O]=__(q,E,q,F)),sa(F)&&h_(T,E,F),null!=y&&f_(E,F,w)}function N_(i){return Ai(function ha(){return xt.lFrame.contextLView}(),22+i)}function Og(i,o,a){const l=Se();return di(l,pa(),o)&&function ts(i,o,a,l,h,f,y,w){const E=_r(o,a);let O,T=o.inputs;!w&&null!=T&&(O=T[l])?(b_(i,a,O,l,h),ju(o)&&$w(a,o.index)):3&o.type&&(l=function lf(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=y?y(h,o.value||"",l):h,f.setProperty(E,l,h))}(qt(),Tn(),l,i,o,l[11],a,!1),Og}function yf(i,o,a,l,h){const y=h?"class":"style";b_(i,a,o.inputs[y],y,l)}function Pg(i,o,a,l){const h=Se(),f=qt(),y=22+i,w=h[11],E=h[y]=Ly(w,o,function ec(){return xt.lFrame.currentNamespace}()),T=f.firstCreatePass?function XI(i,o,a,l,h,f,y){const w=o.consts,T=ld(o,i,2,h,ai(w,f));return g_(o,a,T,ai(w,y)),null!==T.attrs&&Dg(T,T.attrs,!1),null!==T.mergedAttrs&&Dg(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(y,f,h,0,o,a,l):f.data[y];Rr(T,!0);const O=T.mergedAttrs;null!==O&&Qi(w,E,O);const F=T.classes;null!==F&&Tr(w,E,F);const q=T.styles;return null!==q&&cI(w,E,q),64!=(64&T.flags)&&Xl(f,h,E,T),0===function ca(){return xt.lFrame.elementDepthCount}()&&Zr(E,h),function Cl(){xt.lFrame.elementDepthCount++}(),sa(T)&&(h_(f,h,T),hd(f,T,h)),null!==l&&f_(h,T),Pg}function Ng(){let i=Yn();au()?mo():(i=i.parent,Rr(i,!1));const o=i;!function la(){xt.lFrame.elementDepthCount--}();const a=qt();return a.firstCreatePass&&(uu(a,i),oo(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function lu(i){return 0!=(16&i.flags)}(o)&&yf(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function du(i){return 0!=(32&i.flags)}(o)&&yf(a,o,Se(),o.stylesWithoutHost,!1),Ng}function kg(i,o,a,l){return Pg(i,o,a,l),Ng(),kg}function k_(i,o,a){const l=Se(),h=qt(),f=i+22,y=h.firstCreatePass?function eD(i,o,a,l,h){const f=o.consts,y=ai(f,l),w=ld(o,i,8,"ng-container",y);return null!==y&&Dg(w,y,!0),g_(o,a,w,ai(f,h)),null!==o.queries&&o.queries.elementStart(o,w),w}(f,h,l,o,a):h.data[f];Rr(y,!0);const w=l[f]=l[11].createComment("");return Xl(h,l,w,y),Zr(w,l),sa(y)&&(h_(h,l,y),hd(h,y,l)),null!=a&&f_(l,y),k_}function Rc(){let i=Yn();const o=qt();return au()?mo():(i=i.parent,Rr(i,!1)),o.firstCreatePass&&(uu(o,i),oo(i)&&o.queries.elementEnd(i)),Rc}function R_(){return Se()}function F_(i){return!!i&&"function"==typeof i.then}function cC(i){return!!i&&"function"==typeof i.subscribe}const L_=cC;function V_(i,o,a,l){const h=Se(),f=qt(),y=Yn();return function dC(i,o,a,l,h,f,y,w){const E=sa(l),O=i.firstCreatePass&&E_(i),F=o[8],q=_d(o);let te=!0;if(3&l.type||w){const Ze=_r(l,o),ot=w?w(Ze):Ze,Ct=q.length,Oe=w?pn=>w(On(pn[l.index])):l.index;let At=null;if(!w&&E&&(At=function nD(i,o,a,l){const h=i.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===a&&h[f+1]===l){const w=o[7],E=h[f+2];return w.length>E?w[E]:null}"string"==typeof y&&(f+=2)}return null}(i,o,h,l.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=f,At.__ngLastListenerFn__=f,te=!1;else{f=U_(l,o,F,f,!1);const pn=a.listen(ot,h,f);q.push(f,pn),O&&O.push(h,Oe,Ct,Ct+1)}}else f=U_(l,o,F,f,!1);const Ce=l.outputs;let $e;if(te&&null!==Ce&&($e=Ce[h])){const Ze=$e.length;if(Ze)for(let ot=0;ot<Ze;ot+=2){const qn=o[$e[ot]][$e[ot+1]].subscribe(f),al=q.length;q.push(f,qn),O&&O.push(h,l.index,al,-(al+1))}}}(f,h,h[11],y,i,o,0,l),V_}function hC(i,o,a,l){try{return!1!==a(l)}catch(h){return Kw(i,h),!1}}function U_(i,o,a,l,h){return function f(y){if(y===Function)return l;Ig(2&i.flags?en(i.index,o):o);let E=hC(o,0,l,y),T=f.__ngNextListenerFn__;for(;T;)E=hC(o,0,T,y)&&E,T=T.__ngNextListenerFn__;return h&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function fC(i=1){return function hs(i){return(xt.lFrame.contextLView=function Tl(i,o){for(;i>0;)o=o[15],i--;return o}(i,xt.lFrame.contextLView))[8]}(i)}function Ds(i,o,a,l,h){const f=i[a+1],y=null===o;let w=l?Kr(f):Fa(f),E=!1;for(;0!==w&&(!1===E||y);){const O=i[w+1];px(i[w],o)&&(E=!0,i[w+1]=l?r_(O):t_(O)),w=l?Kr(O):Fa(O)}E&&(i[a+1]=l?t_(f):r_(f))}function px(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ki(i,o)>=0}const Sr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ve(i){return i.substring(Sr.key,Sr.keyEnd)}function oD(i){return i.substring(Sr.value,Sr.valueEnd)}function dt(i,o){const a=Sr.textEnd;return a===o?-1:(o=Sr.keyEnd=function wf(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,Sr.key=o,a),Ha(i,o,a))}function Rt(i,o){const a=Sr.textEnd;let l=Sr.key=Ha(i,o,a);return a===l?-1:(l=Sr.keyEnd=function aD(i,o,a){let l;for(;o<a&&(45===(l=i.charCodeAt(o))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)o++;return o}(i,l,a),l=Rg(i,l,a),l=Sr.value=Ha(i,l,a),l=Sr.valueEnd=function uD(i,o,a){let l=-1,h=-1,f=-1,y=o,w=y;for(;y<a;){const E=i.charCodeAt(y++);if(59===E)return w;34===E||39===E?w=y=yC(i,E,y,a):o===y-4&&85===f&&82===h&&76===l&&40===E?w=y=yC(i,41,y,a):E>32&&(w=y),f=h,h=l,l=-33&E}return w}(i,l,a),Rg(i,l,a))}function vf(i){Sr.key=0,Sr.keyEnd=0,Sr.value=0,Sr.valueEnd=0,Sr.textEnd=i.length}function Ha(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function Rg(i,o,a,l){return(o=Ha(i,o,a))<a&&o++,o}function yC(i,o,a,l){let h=-1,f=a;for(;f<l;){const y=i.charCodeAt(f++);if(y==o&&92!==h)return f;h=92==y&&92===h?0:y}throw new Error}function Fr(i,o,a){return ns(i,o,a,!1),Fr}function Id(i,o){return ns(i,o,null,!0),Id}function An(i){Ts(CC,Du,i,!1)}function Du(i,o){for(let a=function j_(i){return vf(i),Rt(i,Ha(i,0,Sr.textEnd))}(o);a>=0;a=Rt(o,a))CC(i,ve(o),oD(o))}function _C(i){Ts(qr,no,i,!0)}function no(i,o){for(let a=function $a(i){return vf(i),dt(i,Ha(i,0,Sr.textEnd))}(o);a>=0;a=dt(o,a))qr(i,ve(o),!0)}function ns(i,o,a,l){const h=Se(),f=qt(),y=Ki(2);f.firstUpdatePass&&vC(f,i,y,l),o!==Lt&&di(h,y,o)&&H_(f,f.data[Dn()],h,h[11],i,h[y+1]=function lD(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=le(Xs(i)))),i}(o,a),l,y)}function Ts(i,o,a,l){const h=qt(),f=Ki(2);h.firstUpdatePass&&vC(h,null,f,l);const y=Se();if(a!==Lt&&di(y,f,a)){const w=h.data[Dn()];if(G_(w,l)&&!Qr(h,f)){let E=l?w.classesWithoutHost:w.stylesWithoutHost;null!==E&&(a=me(E,a||"")),yf(h,w,y,a,l)}else!function Dd(i,o,a,l,h,f,y,w){h===Lt&&(h=Et);let E=0,T=0,O=0<h.length?h[0]:null,F=0<f.length?f[0]:null;for(;null!==O||null!==F;){const q=E<h.length?h[E+1]:void 0,te=T<f.length?f[T+1]:void 0;let $e,Ce=null;O===F?(E+=2,T+=2,q!==te&&(Ce=F,$e=te)):null===F||null!==O&&O<F?(E+=2,Ce=O):(T+=2,Ce=F,$e=te),null!==Ce&&H_(i,o,a,l,Ce,$e,y,w),O=E<h.length?h[E]:null,F=T<f.length?f[T]:null}}(h,w,y,y[11],y[f+1],y[f+1]=function cD(i,o,a){if(null==a||""===a)return Et;const l=[],h=Xs(a);if(Array.isArray(h))for(let f=0;f<h.length;f++)i(l,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&i(l,f,h[f]);else"string"==typeof h&&o(l,h);return l}(i,o,a),l,f)}}function Qr(i,o){return o>=i.expandoStartIndex}function vC(i,o,a,l){const h=i.data;if(null===h[a+1]){const f=h[Dn()],y=Qr(i,a);G_(f,l)&&null===o&&!y&&(o=!1),o=function Fg(i,o,a,l){const h=function Ku(i){const o=xt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=Fc(a=Ss(null,i,o,a,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==h)if(a=Ss(h,i,o,a,l),null===f){let E=function wC(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Fa(l))return i[Kr(l)]}(i,o,l);void 0!==E&&Array.isArray(E)&&(E=Ss(null,i,o,E[1],l),E=Fc(E,o.attrs,l),function $_(i,o,a,l){i[Kr(a?o.classBindings:o.styleBindings)]=l}(i,o,l,E))}else f=function Lg(i,o,a){let l;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)l=Fc(l,i[f].hostAttrs,a);return Fc(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(h,f,o,l),function iD(i,o,a,l,h,f){let y=f?o.classBindings:o.styleBindings,w=Kr(y),E=Fa(y);i[l]=a;let O,T=!1;if(Array.isArray(a)){const F=a;O=F[1],(null===O||ki(F,O)>0)&&(T=!0)}else O=a;if(h)if(0!==E){const q=Kr(i[w+1]);i[l+1]=od(q,w),0!==q&&(i[q+1]=n_(i[q+1],l)),i[w+1]=function Mw(i,o){return 131071&i|o<<17}(i[w+1],l)}else i[l+1]=od(w,0),0!==w&&(i[w+1]=n_(i[w+1],l)),w=l;else i[l+1]=od(E,0),0===w?w=l:i[E+1]=n_(i[E+1],l),E=l;T&&(i[l+1]=t_(i[l+1])),Ds(i,O,l,!0),Ds(i,O,l,!1),function sD(i,o,a,l,h){const f=h?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&ki(f,o)>=0&&(a[l+1]=r_(a[l+1]))}(o,O,i,l,f),y=od(w,E),f?o.classBindings=y:o.styleBindings=y}(h,f,o,a,y,l)}}function Ss(i,o,a,l,h){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=o[w],l=Fc(l,f.hostAttrs,h),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Fc(i,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),qr(i,y,!!a||o[++f]))}return void 0===i?null:i}function CC(i,o,a){qr(i,o,Xs(a))}function H_(i,o,a,l,h,f,y,w){if(!(3&o.type))return;const E=i.data,T=E[w+1];Cf(function Ow(i){return 1==(1&i)}(T)?Vg(E,o,a,h,Fa(T),y):void 0)||(Cf(f)||function sf(i){return 2==(2&i)}(T)&&(f=Vg(E,null,a,h,w,y)),function hw(i,o,a,l,h){if(o)h?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:eo.DashCase;null==h?i.removeStyle(a,l,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=eo.Important),i.setStyle(a,l,h,f))}}(l,y,gi(Dn(),a),h,f))}function Vg(i,o,a,l,h,f){const y=null===o;let w;for(;h>0;){const E=i[h],T=Array.isArray(E),O=T?E[1]:E,F=null===O;let q=a[h+1];q===Lt&&(q=F?Et:void 0);let te=F?Ia(q,l):O===l?q:void 0;if(T&&!Cf(te)&&(te=Ia(E,l)),Cf(te)&&(w=te,y))return w;const Ce=i[h+1];h=y?Kr(Ce):Fa(Ce)}if(null!==o){let E=f?o.residualClasses:o.residualStyles;null!=E&&(w=Ia(E,l))}return w}function Cf(i){return void 0!==i}function G_(i,o){return 0!=(i.flags&(o?16:32))}function Ef(i,o=""){const a=Se(),l=qt(),h=i+22,f=l.firstCreatePass?ld(l,h,1,o,null):l.data[h],y=a[h]=function Cc(i,o){return i.createText(o)}(a[11],o);Xl(l,a,y,f),Rr(f,!1)}function bf(i){return Td("",i,""),bf}function Td(i,o,a){const l=Se(),h=function wd(i,o,a,l){return di(i,pa(),a)?o+_e(a)+l:Lt}(l,i,o,a);return h!==Lt&&Ua(l,Dn(),h),Td}function If(i,o,a,l,h){const f=Se(),y=function Nc(i,o,a,l,h,f){const w=Ko(i,xi(),a,h);return Ki(2),w?o+_e(a)+l+_e(h)+f:Lt}(f,i,o,a,l,h);return y!==Lt&&Ua(f,Dn(),y),If}function z_(i,o,a,l,h,f,y){const w=Se(),E=ur(w,i,o,a,l,h,f,y);return E!==Lt&&Ua(w,Dn(),E),z_}const Lc=void 0;var pD=["en",[["a","p"],["AM","PM"],Lc],[["AM","PM"],Lc,Lc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lc,"{1} 'at' {0}",Lc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function kC(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Ad={};function Sf(i){const o=function ev(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=X_(o);if(a)return a;const l=o.split("-")[0];if(a=X_(l),a)return a;if("en"===l)return pD;throw new Ee(701,!1)}function Zg(i){return Sf(i)[wt.PluralCase]}function X_(i){return i in Ad||(Ad[i]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[i]),Ad[i]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const xd="en-US";let FC=xd;function Uf(i,o,a,l,h){if(i=Y(i),Array.isArray(i))for(let f=0;f<i.length;f++)Uf(i[f],o,a,l,h);else{const f=qt(),y=Se();let w=zl(i)?i:Y(i.provide),E=R0(i);const T=Yn(),O=1048575&T.providerIndexes,F=T.directiveStart,q=T.providerIndexes>>20;if(zl(i)||!i.multi){const te=new ui(E,h,Sc),Ce=Hc(w,o,h?O:O+q,F);-1===Ce?(Zs(Ji(T,y),f,w),sm(f,i,o.length),o.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(te),y.push(te)):(a[Ce]=te,y[Ce]=te)}else{const te=Hc(w,o,O+q,F),Ce=Hc(w,o,O,O+q),$e=te>=0&&a[te],Ze=Ce>=0&&a[Ce];if(h&&!Ze||!h&&!$e){Zs(Ji(T,y),f,w);const ot=function AD(i,o,a,l,h){const f=new ui(i,a,Sc);return f.multi=[],f.index=o,f.componentProviders=0,Ld(f,h,l&&!a),f}(h?cr:SD,a.length,h,l,E);!h&&Ze&&(a[Ce].providerFactory=ot),sm(f,i,o.length,0),o.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(ot),y.push(ot)}else sm(f,i,te>-1?te:Ce,Ld(a[h?Ce:te],E,!h&&l));!h&&l&&Ze&&a[Ce].componentProviders++}}}function sm(i,o,a,l){const h=zl(o),f=function FA(i){return!!i.useClass}(o);if(h||f){const E=(f?Y(o.useClass):o).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const O=T.indexOf(a);-1===O?T.push(a,[l,E]):T[O+1].push(l,E)}else T.push(a,E)}}}function Ld(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Hc(i,o,a,l){for(let h=a;h<l;h++)if(o[h]===i)return h;return-1}function SD(i,o,a,l){return om(this.multi,[])}function cr(i,o,a,l){const h=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Mi(a,a[1],this.providerFactory.index,l);f=w.slice(0,y),om(h,f);for(let E=y;E<w.length;E++)f.push(w[E])}else f=[],om(h,f);return f}function om(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function nE(i,o=[]){return a=>{a.providersResolver=(l,h)=>function im(i,o,a){const l=qt();if(l.firstCreatePass){const h=$r(i);Uf(a,l.data,l.blueprint,h,!0),Uf(o,l.data,l.blueprint,h,!1)}}(l,h?h(i):i,o)}}class Vd{}class yv{}function rE(i,o){return new Bf(i,o??null)}class Bf extends Vd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new I_(this);const l=nt(o);this._bootstrapComponents=Go(l.bootstrap),this._r3Injector=Cw(o,a,[{provide:Vd,useValue:this},{provide:$h,useValue:this.componentFactoryResolver}],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class am extends yv{constructor(o){super(),this.moduleType=o}create(o){return new Bf(this.moduleType,o)}}class za extends Vd{constructor(o,a,l){super(),this.componentFactoryResolver=new I_(this),this.instance=null;const h=new k0([...o,{provide:Vd,useValue:this},{provide:$h,useValue:this.componentFactoryResolver}],a||_c(),l,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function um(i,o,a=null){return new za(i,o,a).injector}let iE=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=yy(0,a.type),h=l.length>0?um([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Jt({token:i,providedIn:"environment",factory:()=>new i(Gn(Ho))}),i})();function cm(i){i.getStandaloneInjector=o=>o.get(iE).getOrCreateStandaloneInjector(i)}function Hf(i,o){const a=i[o];return a===Lt?void 0:a}function Gf(i,o){const a=qt();let l;const h=i+22;a.firstCreatePass?(l=function kD(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const f=l.factory||(l.factory=yr(l.type)),y=gn(Sc);try{const w=wa(!1),E=f();return wa(w),function dx(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Se(),h,E),E}finally{gn(y)}}function xr(i,o,a){const l=i+22,h=Se(),f=Ai(h,l);return Ve(h,l)?function pm(i,o,a,l,h,f){const y=o+a;return di(i,y,h)?Es(i,y+1,f?l.call(f,h):l(h)):Hf(i,y+1)}(h,Qn(),o,f.transform,a,f):f.transform(a)}function qc(i,o,a,l){const h=i+22,f=Se(),y=Ai(f,h);return Ve(f,h)?function pE(i,o,a,l,h,f,y){const w=o+a;return Ko(i,w,h,f)?Es(i,w+2,y?l.call(y,h,f):l(h,f)):Hf(i,w+2)}(f,Qn(),o,y.transform,a,l,y):y.transform(a,l)}function Ve(i,o){return i[1].data[o].pure}function qa(i){return o=>{setTimeout(i,void 0,o)}}const As=class gr extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let h=o,f=a||(()=>null),y=l;if(o&&"object"==typeof o){const E=o;h=E.next?.bind(E),f=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(f=qa(f),h&&(h=qa(h)),y&&(y=qa(y)));const w=super.subscribe({next:h,error:f,complete:y});return o instanceof B.w0&&o.add(w),w}};function st(){return this._results[Pc()]()}class It{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Pc(),l=It.prototype;l[a]||(l[a]=st)}get changes(){return this._changes||(this._changes=new As)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=sn(o);(this._changesDetected=!function yi(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],f=o[l];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zf=(()=>{class i{}return i.__NG_ELEMENT_ID__=ke,i})();const Ke=zf,pe=class extends Ke{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,h=cd(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(l)),cf(l,h,o),new hf(h)}};function ke(){return lr(Yn(),Se())}function lr(i,o){return 4&i.type?new pe(o,i,ql(i,o)):null}let qf=(()=>{class i{}return i.__NG_ELEMENT_ID__=LD,i})();function LD(){return Tv(Yn(),Se())}const VD=qf,yE=class extends VD{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return ql(this._hostTNode,this._hostLView)}get injector(){return new To(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ca(this._hostTNode,this._hostLView);if(Ch(o)){const a=fs(o,this._hostLView),l=Jn(o);return new To(a[1].data[l+8],a)}return new To(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=_E(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let h,f;"number"==typeof l?h=l:null!=l&&(h=l.index,f=l.injector);const y=o.createEmbeddedView(a||{},f);return this.insert(y,h),y}createComponent(o,a,l,h,f){const y=o&&!function dn(i){return"function"==typeof i}(o);let w;if(y)w=a;else{const F=a||{};w=F.index,l=F.injector,h=F.projectableNodes,f=F.environmentInjector||F.ngModuleRef}const E=y?o:new ff(M(o)),T=l||this.parentInjector;if(!f&&null==E.ngModule){const q=(y?T:this.parentInjector).get(Ho,null);q&&(f=q)}const O=E.create(T,h,void 0,f);return this.insert(O.hostView,w),O}insert(o,a){const l=o._lView,h=l[1];if(function Zu(i){return ii(i[3])}(l)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const F=l[3],q=new yE(F,F[6],F[3]);q.detach(q.indexOf(o))}}const f=this._adjustIndex(a),y=this._lContainer;!function aw(i,o,a,l){const h=10+l,f=a.length;l>0&&(a[h-1][4]=o),l<f-10?(o[4]=a[h],vi(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function aI(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(i),o[2]|=64}(h,l,y,f);const w=Hy(f,y),E=l[11],T=to(E,y[7]);return null!==T&&function Wh(i,o,a,l,h,f){l[0]=h,l[6]=o,Qh(i,l,a,1,h,f)}(h,y[6],E,l,T,w),o.attachToViewContainerRef(),vi(Dv(y),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=_E(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Na(this._lContainer,a);l&&(Pn(Dv(this._lContainer),a),Uy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Na(this._lContainer,a);return l&&null!=Pn(Dv(this._lContainer),a)?new hf(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function _E(i){return i[8]}function Dv(i){return i[8]||(i[8]=[])}function Tv(i,o){let a;const l=o[i.index];if(ii(l))a=l;else{let h;if(8&i.type)h=On(l);else{const f=o[11];h=f.createComment("");const y=_r(i,o);zo(f,to(f,y),h,function uI(i,o){return i.nextSibling(o)}(f,y),!1)}o[i.index]=a=__(l,o,h,i),Mc(o,a)}return new yE(a,i,o)}class gm{constructor(o){this.queryList=o,this.matches=null}clone(){return new gm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Nt{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new Nt(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Sv(o,a).matches&&this.queries[a].setDirty()}}class Zc{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class mm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,h);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new mm(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Rn{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Rn(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const f=l[h];this.matchTNodeWithReadOption(o,a,St(a,f)),this.matchTNodeWithReadOption(o,a,ba(a,o,f,!1,!1))}else l===zf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,ba(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Oa||h===qf||h===zf&&4&a.type)this.addMatch(a.index,-2);else{const f=ba(a,o,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function St(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function tn(i,o,a,l){return-1===a?function Zf(i,o){return 11&i.type?ql(i,o):4&i.type?lr(i,o):null}(o,i):-2===a?function BD(i,o,a){return a===Oa?ql(o,i):a===zf?lr(o,i):a===qf?Tv(o,i):void 0}(i,o,l):Mi(i,i[1],a,o)}function rr(i,o,a,l){const h=o[19].queries[l];if(null===h.matches){const f=i.data,y=a.matches,w=[];for(let E=0;E<y.length;E+=2){const T=y[E];w.push(T<0?null:tn(o,f[T],y[E+1],a.metadata.read))}h.matches=w}return h.matches}function qe(i,o,a,l){const h=i.queries.getByIndex(a),f=h.matches;if(null!==f){const y=rr(i,o,h,a);for(let w=0;w<f.length;w+=2){const E=f[w];if(E>0)l.push(y[w/2]);else{const T=f[w+1],O=o[-E];for(let F=10;F<O.length;F++){const q=O[F];q[17]===q[3]&&qe(q[1],q,T,l)}if(null!==O[9]){const F=O[9];for(let q=0;q<F.length;q++){const te=F[q];qe(te[1],te,T,l)}}}}}return l}function Wf(i){const o=Se(),a=qt(),l=ga();Yu(l+1);const h=Sv(a,l);if(i.dirty&&function qu(i){return 4==(4&i[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const f=h.crossesNgTemplate?qe(a,o,l,[]):rr(a,o,h,l);i.reset(f,by),i.notifyOnChanges()}return!0}return!1}function ym(i,o,a){const l=qt();l.firstCreatePass&&(Bd(l,new Zc(i,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),wE(l,Se(),o)}function xu(i,o,a,l){const h=qt();if(h.firstCreatePass){const f=Yn();Bd(h,new Zc(o,a,l),f.index),function CE(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}wE(h,Se(),a)}function vE(){return function _m(i,o){return i[19].queries[o].queryList}(Se(),ga())}function wE(i,o,a){const l=new It(4==(4&a));gd(i,o,l,l.destroy),null===o[19]&&(o[19]=new Nt),o[19].queries.push(new gm(l))}function Bd(i,o,a){null===i.queries&&(i.queries=new mm),i.queries.track(new Rn(o,a))}function Sv(i,o){return i.queries.getByIndex(o)}function Li(i,o){return lr(i,o)}function bm(...i){}const Rv=new wn("Application Initializer");let vr=(()=>{class i{constructor(a){this.appInits=a,this.resolve=bm,this.reject=bm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(F_(f))a.push(f);else if(L_(f)){const y=new Promise((w,E)=>{f.subscribe({complete:w,error:E})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Gn(Rv,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Fv=new wn("AppId",{providedIn:"root",factory:function xn(){return`${Im()}${Im()}${Im()}`}});function Im(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ku=new wn("Platform Initializer"),KD=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qd=new wn("appBootstrapListener");let xE=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const wr=new wn("LocaleId",{providedIn:"root",factory:()=>I(wr,Ye.Optional|Ye.SkipSelf)||function ME(){return typeof $localize<"u"&&$localize.locale||xd}()}),YD=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class JD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let XD=(()=>{class i{compileModuleSync(a){return new am(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Go(nt(a).declarations).reduce((y,w)=>{const E=M(w);return E&&y.push(new ff(E)),y},[]);return new JD(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ya=(()=>Promise.resolve(0))();function Dm(i){typeof Zone>"u"?Ya.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class is{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new As(!1),this.onMicrotaskEmpty=new As(!1),this.onStable=new As(!1),this.onError=new As(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Zd(){let i=Dt.requestAnimationFrame,o=Dt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Wd(i){const o=()=>{!function Bv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Dt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ei(i),i.isCheckStableRunning=!0,ep(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ei(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,f,y,w)=>{try{return tp(i),a.invokeTask(h,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),Kd(i)}},onInvoke:(a,l,h,f,y,w,E)=>{try{return tp(i),a.invoke(h,f,y,w,E)}finally{i.shouldCoalesceRunChangeDetection&&o(),Kd(i)}},onHasTask:(a,l,h,f)=>{a.hasTask(h,f),l===h&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,ei(i),ep(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,h,f)=>(a.handleError(h,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!is.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(is.isInAngularZone())throw new Ee(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,Uv,bm,bm);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Uv={};function ep(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ei(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function tp(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Kd(i){i._nesting--,ep(i)}class PE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new As,this.onMicrotaskEmpty=new As,this.onStable=new As,this.onError=new As}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}const Tm=new wn(""),Sm=new wn("");let Am,NE=(()=>{class i{constructor(a,l,h){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Am||(function nT(i){Am=i}(h),h.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{is.assertNotInAngularZone(),Dm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Gn(is),Gn(jv),Gn(Sm))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),jv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Am?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Qa=null;const $v=new wn("AllowMultipleToken"),Yd=new wn("PlatformDestroyListeners");class Xc{constructor(o,a){this.name=o,this.token=a}}function Gv(i,o,a=[]){const l=`Platform: ${o}`,h=new wn(l);return(f=[])=>{let y=zv();if(!y||y.injector.get($v,!1)){const w=[...a,...f,{provide:h,useValue:!0}];i?i(w):function kE(i){if(Qa&&!Qa.get($v,!1))throw new Ee(400,!1);Qa=i;const o=i.get(Un);(function Hv(i){const o=i.get(ku,null);o&&o.forEach(a=>a())})(i)}(function Jd(i=[],o){return Tc.create({name:o,providers:[{provide:Qp,useValue:"platform"},{provide:Yd,useValue:new Set([()=>Qa=null])},...i]})}(w,l))}return function RE(i){const o=zv();if(!o)throw new Ee(401,!1);return o}()}}function zv(){return Qa?.get(Un)??null}let Un=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const h=function ip(i,o){let a;return a="noop"===i?new PE:("zone.js"===i?void 0:i)||new is(o),a}(l?.ngZone,function rp(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:is,useValue:h}];return h.run(()=>{const y=Tc.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),E=w.injector.get(zh,null);if(!E)throw new Ee(402,!1);return h.runOutsideAngular(()=>{const T=h.onError.subscribe({next:O=>{E.handleError(O)}});w.onDestroy(()=>{xm(this._modules,w),T.unsubscribe()})}),function qv(i,o,a){try{const l=a();return F_(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(E,h,()=>{const T=w.injector.get(vr);return T.runInitializers(),T.donePromise.then(()=>(function LC(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(FC=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(wr,xd)||xd),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,l=[]){const h=FE({},l);return function rT(i,o,a){const l=new am(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const l=a.injector.get(Fu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Ee(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Yd,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Gn(Tc))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function FE(i,o){return Array.isArray(o)?o.reduce(FE,i):{...i,...o}}let Fu=(()=>{class i{constructor(a,l,h){this._zone=a,this._injector=l,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new N.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new N.y(w=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{is.assertNotInAngularZone(),Dm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{is.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ie.T)(f,y.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const h=a instanceof jb;if(!this._injector.get(vr).done)throw!h&&Pe(a),new Ee(405,false);let y;y=h?a:this._injector.get($h).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function Qd(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Vd),T=y.create(Tc.NULL,[],l||y.selector,w),O=T.location.nativeElement,F=T.injector.get(Tm,null);return F?.registerApplication(O),T.onDestroy(()=>{this.detachView(T.hostView),xm(this.components,T),F?.unregisterApplication(O)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;xm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(qd,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>xm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ee(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Gn(is),Gn(Ho),Gn(zh))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function xm(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let ea=!0,Wv=!1;function LE(){return Wv=!0,ea}function VE(){if(Wv)throw new Error("Cannot enable prod mode after platform setup.");ea=!1}let Cr=(()=>{class i{}return i.__NG_ELEMENT_ID__=nn,i})();function nn(i){return function jE(i,o,a){if(ju(i)&&!a){const l=en(i.index,o);return new hf(l,l)}return 47&i.type?new hf(o[16],o):null}(Yn(),Se(),16==(16&i))}class Yv{constructor(){}supports(o){return pf(o)}create(o){return new lT(o)}}const GE=(i,o)=>o;class lT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||GE}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<Qv(l,h,f)?a:l,w=Qv(y,h,f),E=y.currentIndex;if(y===l)h--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{f||(f=[]);const T=w-h,O=E-h;if(T!=O){for(let q=0;q<T;q++){const te=q<f.length?f[q]:f[q]=0,Ce=te+q;O<=Ce&&Ce<T&&(f[q]=te+1)}f[y.previousIndex]=O-T}}w!==E&&o(y,w,E)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!pf(o))throw new Ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),l=!0),a=a._next}else h=0,function Tg(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Pc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(h,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,h)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,h)):o=this._addAfter(new dT(a,l),f,h),o}_verifyReinsertion(o,a,l,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new th),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new th),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class dT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class th{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new hT,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qv(i,o,a){const l=i.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class zE{constructor(){}supports(o){return o instanceof Map||Sg(o)}create(){return new Ur}}class Ur{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Sg(o)))throw new Ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const l=new Jv(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Jv{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xv(){return new ol([new Yv])}let ol=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Xv()),deps:[[i,new bt,new Ge]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new Ee(901,!1)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Xv}),i})();function Om(){return new Pm([new zE])}let Pm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Om()),deps:[[i,new bt,new Ge]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new Ee(901,!1)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Om}),i})();const gT=Gv(null,"core",[]);let mT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Gn(Fu))},i.\u0275mod=Wt({type:i}),i.\u0275inj=kt({}),i})();function cp(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(at,Te,R)=>{R.d(Te,{Z:()=>Ee});var c=R(2090),B=R(4859),N=R(9681),ie=R(1877);class oe{constructor(_e,fe){this._delegate=_e,this.firebase=fe,(0,N._addComponent)(_e,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(_e,fe=N._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(_e);return!We.isInitialized()&&"EXPLICIT"===(null===(Qe=We.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&We.initialize(),We.getImmediate({identifier:fe})}_removeServiceInstance(_e,fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(fe)}_addComponent(_e){(0,N._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,N._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function me(){const tt=function le(tt){const _e={},fe={__esModule:!0,initializeApp:function Ne(ne,ue={}){const ye=N.initializeApp(ne,ue);if((0,c.r3)(_e,ye.name))return _e[ye.name];const K=new tt(ye,fe);return _e[ye.name]=K,K},app:We,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function we(ne){const ue=ne.name,ye=ue.replace("-compat","");if(N._registerComponent(ne)&&"PUBLIC"===ne.type){const K=(J=We())=>{if("function"!=typeof J[ye])throw he.create("invalid-app-argument",{appName:ue});return J[ye]()};void 0!==ne.serviceProps&&(0,c.ZB)(K,ne.serviceProps),fe[ye]=K,tt.prototype[ye]=function(...J){return this._getService.bind(this,ue).apply(this,ne.multipleInstances?J:[])}}return"PUBLIC"===ne.type?fe[ye]:null},removeApp:function Qe(ne){delete _e[ne]},useAsService:function He(ne,ue){return"serverAuth"===ue?null:ue},modularAPIs:N}};function We(ne){if(!(0,c.r3)(_e,ne=ne||N._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:ne});return _e[ne]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function Ae(){return Object.keys(_e).map(ne=>_e[ne])}}),We.App=tt,fe}(oe);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function _e(fe){(0,c.ZB)(tt,fe)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),tt}(),H=new ie.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ee=z;!function Me(tt){(0,N.registerVersion)("@firebase/app-compat","0.1.39",tt)}()},9681:(at,Te,R)=>{R.r(Te),R.d(Te,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>$i,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>Jt,_apps:()=>an,_clearComponents:()=>Si,_components:()=>mn,_getProvider:()=>kt,_registerComponent:()=>Ht,_removeServiceInstance:()=>br,deleteApp:()=>Hi,getApp:()=>Bn,getApps:()=>fi,initializeApp:()=>Pr,onLog:()=>jn,registerVersion:()=>Zn,setLogLevel:()=>gn});var c=R(5861),B=R(4859),N=R(1877),ie=R(2090),oe=R(8766);class ge{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function he(Je){return"VERSION"===Je.getComponent()?.type}(Xe)){const _t=Xe.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Xe=>Xe).join(" ")}}const le="@firebase/app",z=new N.Yd("@firebase/app"),Bt="[DEFAULT]",ze={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,mn=new Map;function Qt(Je,be){try{Je.container.addComponent(be)}catch(Xe){z.debug(`Component ${be.name} failed to register with FirebaseApp ${Je.name}`,Xe)}}function Jt(Je,be){Je.container.addOrOverwriteComponent(be)}function Ht(Je){const be=Je.name;if(mn.has(be))return z.debug(`There were multiple attempts to register component ${be}.`),!1;mn.set(be,Je);for(const Xe of an.values())Qt(Xe,Je);return!0}function kt(Je,be){const Xe=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Je.container.getProvider(be)}function br(Je,be,Xe=Bt){kt(Je,be).clearInstance(Xe)}function Si(){mn.clear()}const Mn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ji{constructor(be,Xe,_t){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}}const $i="9.14.0";function Pr(Je,be={}){let Xe=Je;"object"!=typeof be&&(be={name:be});const _t=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},be),vt=_t.name;if("string"!=typeof vt||!vt)throw Mn.create("bad-app-name",{appName:String(vt)});if(Xe||(Xe=(0,ie.aH)()),!Xe)throw Mn.create("no-options");const Wt=an.get(vt);if(Wt){if((0,ie.vZ)(Xe,Wt.options)&&(0,ie.vZ)(_t,Wt.config))return Wt;throw Mn.create("duplicate-app",{appName:vt})}const G=new B.H0(vt);for(const W of mn.values())G.addComponent(W);const j=new ji(Xe,_t,G);return an.set(vt,j),j}function Bn(Je=Bt){const be=an.get(Je);if(!be&&Je===Bt)return Pr();if(!be)throw Mn.create("no-app",{appName:Je});return be}function fi(){return Array.from(an.values())}function Hi(Je){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,c.Z)(function*(Je){const be=Je.name;an.has(be)&&(an.delete(be),yield Promise.all(Je.container.getProviders().map(Xe=>Xe.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function Zn(Je,be,Xe){var _t;let vt=null!==(_t=ze[Je])&&void 0!==_t?_t:Je;Xe&&(vt+=`-${Xe}`);const Wt=vt.match(/\s|\//),G=be.match(/\s|\//);if(Wt||G){const j=[`Unable to register library "${vt}" with version "${be}":`];return Wt&&j.push(`library name "${vt}" contains illegal characters (whitespace or "/")`),Wt&&G&&j.push("and"),G&&j.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void z.warn(j.join(" "))}Ht(new B.wA(`${vt}-version`,()=>({library:vt,version:be}),"VERSION"))}function jn(Je,be){if(null!==Je&&"function"!=typeof Je)throw Mn.create("invalid-log-argument");(0,N.Am)(Je,be)}function gn(Je){(0,N.Ub)(Je)}const yn="firebase-heartbeat-store";let _n=null;function hn(){return _n||(_n=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(Je,be)=>{0===be&&Je.createObjectStore(yn)}}).catch(Je=>{throw Mn.create("idb-open",{originalErrorMessage:Je.message})})),_n}function lt(){return(lt=(0,c.Z)(function*(Je){var be;try{return(yield hn()).transaction(yn).objectStore(yn).get(Wn(Je))}catch(Xe){if(Xe instanceof ie.ZR)z.warn(Xe.message);else{const _t=Mn.create("idb-get",{originalErrorMessage:null===(be=Xe)||void 0===be?void 0:be.message});z.warn(_t.message)}}})).apply(this,arguments)}function Dt(Je,be){return Br.apply(this,arguments)}function Br(){return(Br=(0,c.Z)(function*(Je,be){var Xe;try{const vt=(yield hn()).transaction(yn,"readwrite");return yield vt.objectStore(yn).put(be,Wn(Je)),vt.done}catch(_t){if(_t instanceof ie.ZR)z.warn(_t.message);else{const vt=Mn.create("idb-set",{originalErrorMessage:null===(Xe=_t)||void 0===Xe?void 0:Xe.message});z.warn(vt.message)}}})).apply(this,arguments)}function Wn(Je){return`${Je.name}!${Je.options.appId}`}class Nr{constructor(be){this.container=be,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new Zt(Xe),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var be=this;return(0,c.Z)(function*(){const _t=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vt=Pt();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==vt&&!be._heartbeatsCache.heartbeats.some(Wt=>Wt.date===vt))return be._heartbeatsCache.heartbeats.push({date:vt,agent:_t}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Wt=>{const G=new Date(Wt.date).valueOf();return Date.now()-G<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,c.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Xe=Pt(),{heartbeatsToSend:_t,unsentEntries:vt}=function ni(Je,be=1024){const Xe=[];let _t=Je.slice();for(const vt of Je){const Wt=Xe.find(G=>G.agent===vt.agent);if(Wt){if(Wt.dates.push(vt.date),or(Xe)>be){Wt.dates.pop();break}}else if(Xe.push({agent:vt.agent,dates:[vt.date]}),or(Xe)>be){Xe.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:_t}}(be._heartbeatsCache.heartbeats),Wt=(0,ie.L)(JSON.stringify({version:2,heartbeats:_t}));return be._heartbeatsCache.lastSentHeartbeatDate=Xe,vt.length>0?(be._heartbeatsCache.heartbeats=vt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Wt})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,c.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function ct(Je){return lt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Xe=this;return(0,c.Z)(function*(){var _t;if(yield Xe._canUseIndexedDBPromise){const Wt=yield Xe.read();return Dt(Xe.app,{lastSentHeartbeatDate:null!==(_t=be.lastSentHeartbeatDate)&&void 0!==_t?_t:Wt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Xe=this;return(0,c.Z)(function*(){var _t;if(yield Xe._canUseIndexedDBPromise){const Wt=yield Xe.read();return Dt(Xe.app,{lastSentHeartbeatDate:null!==(_t=be.lastSentHeartbeatDate)&&void 0!==_t?_t:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...be.heartbeats]})}})()}}function or(Je){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function bn(Je){Ht(new B.wA("platform-logger",be=>new ge(be),"PRIVATE")),Ht(new B.wA("heartbeat",be=>new Nr(be),"PRIVATE")),Zn(le,"0.8.4",Je),Zn(le,"0.8.4","esm2017"),Zn("fire-js","")}("")},4859:(at,Te,R)=>{R.d(Te,{H0:()=>le,wA:()=>N});var c=R(5861),B=R(2090);class N{constructor(z,H,Y){this.name=z,this.instanceFactory=H,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ie="[DEFAULT]";class oe{constructor(z,H){this.name=z,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const H=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(H)){const Y=new B.BH;if(this.instancesDeferred.set(H,Y),this.isInitialized(H)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:H});je&&Y.resolve(je)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(z){var H;const Y=this.normalizeInstanceIdentifier(z?.identifier),je=null!==(H=z?.optional)&&void 0!==H&&H;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Me){if(je)return null;throw Me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function he(me){return"EAGER"===me.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[H,Y]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(H);try{const Me=this.getOrInitializeService({instanceIdentifier:je});Y.resolve(Me)}catch{}}}}clearInstance(z=ie){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,c.Z)(function*(){const H=Array.from(z.instances.values());yield Promise.all([...H.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...H.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ie){return this.instances.has(z)}getOptions(z=ie){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:H={}}=z,Y=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Y,options:H});for(const[Me,Ee]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Me)&&Ee.resolve(je);return je}onInit(z,H){var Y;const je=this.normalizeInstanceIdentifier(H),Me=null!==(Y=this.onInitCallbacks.get(je))&&void 0!==Y?Y:new Set;Me.add(z),this.onInitCallbacks.set(je,Me);const Ee=this.instances.get(je);return Ee&&z(Ee,je),()=>{Me.delete(z)}}invokeOnInitCallbacks(z,H){const Y=this.onInitCallbacks.get(H);if(Y)for(const je of Y)try{je(z,H)}catch{}}getOrInitializeService({instanceIdentifier:z,options:H={}}){let Y=this.instances.get(z);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(me=z,me===ie?void 0:me),options:H}),this.instances.set(z,Y),this.instancesOptions.set(z,H),this.invokeOnInitCallbacks(Y,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Y)}catch{}var me;return Y||null}normalizeInstanceIdentifier(z=ie){return this.component?this.component.multipleInstances?z:ie:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const H=this.getProvider(z.name);if(H.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);H.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const H=new oe(z,this);return this.providers.set(z,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Te,R)=>{R.d(Te,{Am:()=>me,Ub:()=>le,Yd:()=>he,in:()=>B});const c=[];var B=(()=>{return(z=B||(B={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",B;var z})();const N={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ie=B.INFO,oe={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ge=(z,H,...Y)=>{if(H<z.logLevel)return;const je=(new Date).toISOString(),Me=oe[H];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Me](`[${je}]  ${z.name}:`,...Y)};class he{constructor(H){this.name=H,this._logLevel=ie,this._logHandler=ge,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in B))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...H),this._logHandler(this,B.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...H),this._logHandler(this,B.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,B.INFO,...H),this._logHandler(this,B.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,B.WARN,...H),this._logHandler(this,B.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...H),this._logHandler(this,B.ERROR,...H)}}function le(z){c.forEach(H=>{H.setLogLevel(z)})}function me(z,H){for(const Y of c){let je=null;H&&H.level&&(je=N[H.level]),Y.userLogHandler=null===z?null:(Me,Ee,...tt)=>{const _e=tt.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");Ee>=(je??Me.logLevel)&&z({level:B[Ee].toLowerCase(),message:_e,args:tt,type:Me.name})}}}},8766:(at,Te,R)=>{R.d(Te,{Lj:()=>Ne,X3:()=>We});var c=R(5861);let N,ie;const he=new WeakMap,le=new WeakMap,me=new WeakMap,z=new WeakMap,H=new WeakMap;let Me={get(ue,ye,K){if(ue instanceof IDBTransaction){if("done"===ye)return le.get(ue);if("objectStoreNames"===ye)return ue.objectStoreNames||me.get(ue);if("store"===ye)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return fe(ue[ye])},set:(ue,ye,K)=>(ue[ye]=K,!0),has:(ue,ye)=>ue instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in ue};function _e(ue){return"function"==typeof ue?function tt(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...ye){return ue.apply(Qe(this),ye),fe(he.get(this))}:function(...ye){return fe(ue.apply(Qe(this),ye))}:function(ye,...K){const J=ue.call(Qe(this),ye,...K);return me.set(J,ye.sort?ye.sort():[ye]),fe(J)}}(ue):(ue instanceof IDBTransaction&&function je(ue){if(le.has(ue))return;const ye=new Promise((K,J)=>{const de=()=>{ue.removeEventListener("complete",se),ue.removeEventListener("error",Le),ue.removeEventListener("abort",Le)},se=()=>{K(),de()},Le=()=>{J(ue.error||new DOMException("AbortError","AbortError")),de()};ue.addEventListener("complete",se),ue.addEventListener("error",Le),ue.addEventListener("abort",Le)});le.set(ue,ye)}(ue),((ue,ye)=>ye.some(K=>ue instanceof K))(ue,function oe(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Me):ue)}function fe(ue){if(ue instanceof IDBRequest)return function Y(ue){const ye=new Promise((K,J)=>{const de=()=>{ue.removeEventListener("success",se),ue.removeEventListener("error",Le)},se=()=>{K(fe(ue.result)),de()},Le=()=>{J(ue.error),de()};ue.addEventListener("success",se),ue.addEventListener("error",Le)});return ye.then(K=>{K instanceof IDBCursor&&he.set(K,ue)}).catch(()=>{}),H.set(ye,ue),ye}(ue);if(z.has(ue))return z.get(ue);const ye=_e(ue);return ye!==ue&&(z.set(ue,ye),H.set(ye,ue)),ye}const Qe=ue=>H.get(ue);function We(ue,ye,{blocked:K,upgrade:J,blocking:de,terminated:se}={}){const Le=indexedDB.open(ue,ye),Be=fe(Le);return J&&Le.addEventListener("upgradeneeded",pt=>{J(fe(Le.result),pt.oldVersion,pt.newVersion,fe(Le.transaction))}),K&&Le.addEventListener("blocked",()=>K()),Be.then(pt=>{se&&pt.addEventListener("close",()=>se()),de&&pt.addEventListener("versionchange",()=>de())}).catch(()=>{}),Be}function Ne(ue,{blocked:ye}={}){const K=indexedDB.deleteDatabase(ue);return ye&&K.addEventListener("blocked",()=>ye()),fe(K).then(()=>{})}const Ae=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],He=new Map;function ne(ue,ye){if(!(ue instanceof IDBDatabase)||ye in ue||"string"!=typeof ye)return;if(He.get(ye))return He.get(ye);const K=ye.replace(/FromIndex$/,""),J=ye!==K,de=we.includes(K);if(!(K in(J?IDBIndex:IDBObjectStore).prototype)||!de&&!Ae.includes(K))return;const se=function(){var Le=(0,c.Z)(function*(Be,...pt){const Xt=this.transaction(Be,de?"readwrite":"readonly");let Bt=Xt.store;return J&&(Bt=Bt.index(pt.shift())),(yield Promise.all([Bt[K](...pt),de&&Xt.done]))[0]});return function(pt){return Le.apply(this,arguments)}}();return He.set(ye,se),se}!function Ee(ue){Me=ue(Me)}(ue=>({...ue,get:(ye,K,J)=>ne(ye,K)||ue.get(ye,K,J),has:(ye,K)=>!!ne(ye,K)||ue.has(ye,K)}))},5861:(at,Te,R)=>{function c(N,ie,oe,ge,he,le,me){try{var z=N[le](me),H=z.value}catch(Y){return void oe(Y)}z.done?ie(H):Promise.resolve(H).then(ge,he)}function B(N){return function(){var ie=this,oe=arguments;return new Promise(function(ge,he){var le=N.apply(ie,oe);function me(H){c(le,ge,he,me,z,"next",H)}function z(H){c(le,ge,he,me,z,"throw",H)}me(void 0)})}}R.d(Te,{Z:()=>B})}},at=>{at(at.s=5740)}]);