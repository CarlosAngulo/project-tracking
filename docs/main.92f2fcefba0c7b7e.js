"use strict";(self.webpackChunkproject_tracking=self.webpackChunkproject_tracking||[]).push([[179],{2011:(ot,Ee,R)=>{R.d(Ee,{Dh:()=>de,GT:()=>le,cc:()=>Ae,hO:()=>Le,on:()=>B,pX:()=>re,xv:()=>he});var c=R(4650),J=R(127),N=R(5813);ot=R.hmd(ot);const se=["ngOnDestroy"],re=(fe,Ye,nt,Te={})=>new Proxy(fe,{get:(_e,Ce)=>nt.runOutsideAngular(()=>{var Ue;if(fe[Ce])return!(null===(Ue=Te?.spy)||void 0===Ue)&&Ue.get&&Te.spy.get(Ce,fe[Ce]),fe[Ce];if(se.indexOf(Ce)>-1)return()=>{};const Be=Ye.toPromise().then(U=>{const pe=U&&U[Ce];return"function"==typeof pe?pe.bind(U):pe&&pe.then?pe.then(q=>nt.run(()=>q)):nt.run(()=>pe)});return new Proxy(()=>{},{get:(U,pe)=>Be[pe],apply:(U,pe,q)=>Be.then(Q=>{var ne;const te=Q&&Q(...q);return!(null===(ne=Te?.spy)||void 0===ne)&&ne.apply&&Te.spy.apply(Ce,q,te),te})})})}),le=(fe,Ye)=>{Ye.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Te=>{Object.defineProperty(fe.prototype,Te,Object.getOwnPropertyDescriptor(nt.prototype||nt,Te))})})};class ae{constructor(Ye){return Ye}}const de=new c.OlP("angularfire2.app.options"),he=new c.OlP("angularfire2.app.name");function B(fe,Ye,nt){const _e="object"==typeof nt&&nt||{};_e.name=_e.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ue=J.Z.apps.filter(Be=>Be&&Be.name===_e.name)[0]||Ye.runOutsideAngular(()=>J.Z.initializeApp(fe,_e));try{JSON.stringify(fe)!==JSON.stringify(Ue.options)&&j("error",`${Ue.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae(Ue)}const j=(fe,...Ye)=>{(0,c.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},W={provide:ae,useFactory:B,deps:[de,c.R0b,[new c.FiY,he]]};let Le=(()=>{class fe{constructor(nt){J.Z.registerVersion("angularfire",N.q4.full,"core"),J.Z.registerVersion("angularfire",N.q4.full,"app-compat"),J.Z.registerVersion("angular",c.q4F.full,nt.toString())}static initializeApp(nt,Te){return{ngModule:fe,providers:[{provide:de,useValue:nt},{provide:he,useValue:Te}]}}}return fe.\u0275fac=function(nt){return new(nt||fe)(c.LFG(c.Lbi))},fe.\u0275mod=c.oAB({type:fe}),fe.\u0275inj=c.cJS({providers:[W]}),fe})();function Ae(fe,Ye,nt,Te,_e){const[,Ce,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===fe)||[];if(Ce)return function we(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(_e,Ue)||(ge("error",`${Ye} was already initialized on the ${nt} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:_e,was:Ue})),Ce;{const Be=Te();return globalThis.\u0275AngularfireInstanceCache.push([fe,Be,_e]),Be}}const et=!!ot.hot,ge=(fe,...Ye)=>{(0,c.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Ee,R)=>{R.d(Ee,{q4:()=>Kr,iC:()=>Xi,HU:()=>Mo,vb:()=>eo,JM:()=>xo});var c=R(4650),J=R(5867),N=R(5861),se=R(9681),re=R(2090),le=R(4859),ae=R(1877),de=R(8766);const he="@firebase/installations",B="0.5.16",W=`w:${B}`,Le="FIS_v2",Ye=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(b){return b instanceof re.ZR&&b.code.includes("request-failed")}function Te({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function _e(b){return{token:b.token,requestStatus:2,expiresIn:Q(b.expiresIn),creationTime:Date.now()}}function Ce(b,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*(b,D){const F=(yield D.json()).error;return Ye.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function U(b,{refreshToken:D}){const x=Be(b);return x.append("Authorization",function ne(b){return`${Le} ${b}`}(D)),x}function pe(b){return q.apply(this,arguments)}function q(){return(q=(0,N.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function Q(b){return Number(b.replace("s","000"))}function te(b,D){return ke.apply(this,arguments)}function ke(){return(ke=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const F=Te(b),K=Be(b),ie=D.getImmediate({optional:!0});if(ie){const _t=yield ie.getHeartbeatsHeader();_t&&K.append("x-firebase-client",_t)}const je={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:Le,appId:b.appId,sdkVersion:W})},dt=yield pe(()=>fetch(F,je));if(dt.ok){const _t=yield dt.json();return{fid:_t.fid||x,registrationStatus:2,refreshToken:_t.refreshToken,authToken:_e(_t.authToken)}}throw yield Ce("Create Installation",dt)})).apply(this,arguments)}function Ne(b){return new Promise(D=>{setTimeout(D,b)})}const Wt=/^[cdef][\w-]{21}$/;function Ze(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function sn(b){return function lt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Wt.test(x)?x:""}catch{return""}}function pn(b){return`${b.appName}!${b.appId}`}const qt=new Map;function Kt(b,D){const x=pn(b);on(x,D),function Hi(b,D){const x=function Ar(){return!_i&&"BroadcastChannel"in self&&(_i=new BroadcastChannel("[Firebase] FID Change"),_i.onmessage=b=>{on(b.data.key,b.data.fid)}),_i}();x&&x.postMessage({key:b,fid:D}),function Br(){0===qt.size&&_i&&(_i.close(),_i=null)}()}(x,D)}function on(b,D){const x=qt.get(b);if(x)for(const F of x)F(D)}let _i=null;const si="firebase-installations-store";let oi=null;function na(){return oi||(oi=(0,de.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(si)}})),oi}function We(b,D){return _r.apply(this,arguments)}function _r(){return(_r=(0,N.Z)(function*(b,D){const x=pn(b),K=(yield na()).transaction(si,"readwrite"),ie=K.objectStore(si),De=yield ie.get(x);return yield ie.put(D,x),yield K.done,(!De||De.fid!==D.fid)&&Kt(b,D.fid),D})).apply(this,arguments)}function ds(b){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,N.Z)(function*(b){const D=pn(b),F=(yield na()).transaction(si,"readwrite");yield F.objectStore(si).delete(D),yield F.done})).apply(this,arguments)}function ai(b,D){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,N.Z)(function*(b,D){const x=pn(b),K=(yield na()).transaction(si,"readwrite"),ie=K.objectStore(si),De=yield ie.get(x),je=D(De);return void 0===je?yield ie.delete(x):yield ie.put(je,x),yield K.done,je&&(!De||De.fid!==je.fid)&&Kt(b,je.fid),je})).apply(this,arguments)}function kn(b){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,N.Z)(function*(b){let D;const x=yield ai(b.appConfig,F=>{const K=dn(F),ie=ht(b,K);return D=ie.registrationPromise,ie.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function dn(b){return Dt(b||{fid:Ze(),registrationStatus:0})}function ht(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(b,D){return tn.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:hr(b)}:{installationEntry:D}}function tn(){return(tn=(0,N.Z)(function*(b,D){try{const x=yield te(b,D);return We(b.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield ds(b.appConfig):yield We(b.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function hr(b){return jn.apply(this,arguments)}function jn(){return(jn=(0,N.Z)(function*(b){let D=yield jr(b.appConfig);for(;1===D.registrationStatus;)yield Ne(100),D=yield jr(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield kn(b);return F||x}return D})).apply(this,arguments)}function jr(b){return ai(b,D=>{if(!D)throw Ye.create("installation-not-found");return Dt(D)})}function Dt(b){return function hs(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Qt(b,D){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const F=Jt(b,x),K=U(b,x),ie=D.getImmediate({optional:!0});if(ie){const _t=yield ie.getHeartbeatsHeader();_t&&K.append("x-firebase-client",_t)}const je={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:W,appId:b.appId}})},dt=yield pe(()=>fetch(F,je));if(dt.ok)return _e(yield dt.json());throw yield Ce("Generate Auth Token",dt)})).apply(this,arguments)}function Jt(b,{fid:D}){return`${Te(b)}/${D}/authTokens:generate`}function Yn(b){return xr.apply(this,arguments)}function xr(){return(xr=(0,N.Z)(function*(b,D=!1){let x;const F=yield ai(b.appConfig,ie=>{if(!kt(ie))throw Ye.create("not-registered");const De=ie.authToken;if(!D&&H(De))return ie;if(1===De.requestStatus)return x=Je(b,D),ie;{if(!navigator.onLine)throw Ye.create("app-offline");const je=Z(ie);return x=Ct(b,je),je}});return x?yield x:F.authToken})).apply(this,arguments)}function Je(b,D){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,N.Z)(function*(b,D){let x=yield Qe(b.appConfig);for(;1===x.authToken.requestStatus;)yield Ne(100),x=yield Qe(b.appConfig);const F=x.authToken;return 0===F.requestStatus?Yn(b,D):F})).apply(this,arguments)}function Qe(b){return ai(b,D=>{if(!kt(D))throw Ye.create("not-registered");return function ve(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ct(b,D){return yt.apply(this,arguments)}function yt(){return(yt=(0,N.Z)(function*(b,D){try{const x=yield Qt(b,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield We(b.appConfig,F),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield We(b.appConfig,F)}else yield ds(b.appConfig);throw x}})).apply(this,arguments)}function kt(b){return void 0!==b&&2===b.registrationStatus}function H(b){return 2===b.requestStatus&&!function L(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Z(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function He(){return(He=(0,N.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:F}=yield kn(D);return F?F.catch(console.error):Yn(D).catch(console.error),x.fid})).apply(this,arguments)}function Zt(){return(Zt=(0,N.Z)(function*(b,D=!1){const x=b;return yield ln(x),(yield Yn(x,D)).token})).apply(this,arguments)}function ln(b){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,N.Z)(function*(b){const{registrationPromise:D}=yield kn(b);D&&(yield D)})).apply(this,arguments)}function fs(b){return Ye.create("missing-app-config-values",{valueName:b})}const po="installations",Cn=b=>{const D=b.getProvider("app").getImmediate(),x=function gn(b){if(!b||!b.options)throw fs("App Configuration");if(!b.name)throw fs("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw fs(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Us=b=>{const D=b.getProvider("app").getImmediate(),x=(0,se._getProvider)(D,po).getImmediate();return{getId:()=>function Y(b){return He.apply(this,arguments)}(x),getToken:K=>function at(b){return Zt.apply(this,arguments)}(x,K)}};(function su(){(0,se._registerComponent)(new le.wA(po,Cn,"PUBLIC")),(0,se._registerComponent)(new le.wA("installations-internal",Us,"PRIVATE"))})(),(0,se.registerVersion)(he,B),(0,se.registerVersion)(he,B,"esm2017");const Pi="@firebase/remote-config",Hn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zl{constructor(D,x,F,K){this.client=D,this.storage=x,this.storageCache=F,this.logger=K}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,K=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var x=this;return(0,N.Z)(function*(){const[F,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return K;D.eTag=K&&K.eTag;const ie=yield x.client.fetch(D),De=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&De.push(x.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(De),ie})()}}function wc(b=navigator){return b.languages&&b.languages[0]||b.language}class Cc{constructor(D,x,F,K,ie,De){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=K,this.apiKey=ie,this.appId=De}fetch(D){var x=this;return(0,N.Z)(function*(){var F,K,ie;const[De,je]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),_t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ct={sdk_version:x.sdkVersion,app_instance_id:De,app_instance_id_token:je,app_id:x.appId,language_code:wc()},vn={method:"POST",headers:St,body:JSON.stringify(ct)},ur=fetch(_t,vn),Po=new Promise((No,ko)=>{D.signal.addEventListener(()=>{const tf=new Error("The operation was aborted.");tf.name="AbortError",ko(tf)})});let Ts;try{yield Promise.race([ur,Po]),Ts=yield ur}catch(No){let ko="fetch-client-network";throw"AbortError"===(null===(F=No)||void 0===F?void 0:F.name)&&(ko="fetch-timeout"),Hn.create(ko,{originalErrorMessage:null===(K=No)||void 0===K?void 0:K.message})}let no=Ts.status;const Aa=Ts.headers.get("ETag")||void 0;let ro,io;if(200===Ts.status){let No;try{No=yield Ts.json()}catch(ko){throw Hn.create("fetch-client-parse",{originalErrorMessage:null===(ie=ko)||void 0===ie?void 0:ie.message})}ro=No.entries,io=No.state}if("INSTANCE_STATE_UNSPECIFIED"===io?no=500:"NO_CHANGE"===io?no=304:("NO_TEMPLATE"===io||"EMPTY_CONFIG"===io)&&(ro={}),304!==no&&200!==no)throw Hn.create("fetch-status",{httpStatus:no});return{status:no,eTag:Aa,config:ro}})()}}class tg{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,N.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var K=this;return(0,N.Z)(function*(){yield function Jn(b,D){return new Promise((x,F)=>{const K=Math.max(D-Date.now(),0),ie=setTimeout(x,K);b.addEventListener(()=>{clearTimeout(ie),F(Hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const ie=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function ql(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ie))throw ie;const De={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(De),K.attemptFetch(D,De)}})()}}class Zl{constructor(D,x,F,K,ie){this.app=D,this._client=x,this._storageCache=F,this._storage=K,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function oa(b,D){var x;const F=b.target.error||void 0;return Hn.create(D,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const ys="app_namespace_store";class ig{constructor(D,x,F,K=function rg(){return new Promise((b,D)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=K=>{D(oa(K,"storage-open"))},F.onsuccess=K=>{b(K.target.result)},F.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(ys,{keyPath:"compositeKey"})}}catch(F){D(Hn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,ie)=>{var De;const dt=F.transaction([ys],"readonly").objectStore(ys),_t=x.createCompositeKey(D);try{const St=dt.get(_t);St.onerror=ct=>{ie(oa(ct,"storage-get"))},St.onsuccess=ct=>{const vn=ct.target.result;K(vn?vn.value:void 0)}}catch(St){ie(Hn.create("storage-get",{originalErrorMessage:null===(De=St)||void 0===De?void 0:De.message}))}})})()}set(D,x){var F=this;return(0,N.Z)(function*(){const K=yield F.openDbPromise;return new Promise((ie,De)=>{var je;const _t=K.transaction([ys],"readwrite").objectStore(ys),St=F.createCompositeKey(D);try{const ct=_t.put({compositeKey:St,value:x});ct.onerror=vn=>{De(oa(vn,"storage-set"))},ct.onsuccess=()=>{ie()}}catch(ct){De(Hn.create("storage-set",{originalErrorMessage:null===(je=ct)||void 0===je?void 0:je.message}))}})})()}delete(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,ie)=>{var De;const dt=F.transaction([ys],"readwrite").objectStore(ys),_t=x.createCompositeKey(D);try{const St=dt.delete(_t);St.onerror=ct=>{ie(oa(ct,"storage-delete"))},St.onsuccess=()=>{K()}}catch(St){ie(Hn.create("storage-delete",{originalErrorMessage:null===(De=St)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Kl{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),ie=yield x;ie&&(D.lastFetchStatus=ie);const De=yield F;De&&(D.lastSuccessfulFetchTimestampMillis=De);const je=yield K;je&&(D.activeConfig=je)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function au(){return zh.apply(this,arguments)}function zh(){return(zh=(0,N.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function _s(){(0,se._registerComponent)(new le.wA("remote-config",function b(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Hn.create("registration-window");if(!(0,re.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:ie,apiKey:De,appId:je}=F.options;if(!ie)throw Hn.create("registration-project-id");if(!De)throw Hn.create("registration-api-key");if(!je)throw Hn.create("registration-app-id");const dt=new ig(je,F.name,x=x||"firebase"),_t=new Kl(dt),St=new ae.Yd(Pi);St.logLevel=ae.in.ERROR;const ct=new Cc(K,se.SDK_VERSION,x,ie,De,je),vn=new tg(ct,dt),ur=new zl(vn,dt,_t,St),Po=new Zl(F,ur,_t,dt,St);return function mn(b){const D=(0,re.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Po),Po},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Pi,"0.3.15"),(0,se.registerVersion)(Pi,"0.3.15","esm2017")}();const Ni="/firebase-messaging-sw.js",ki="/firebase-cloud-messaging-push-scope",zi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aa="google.c.a.c_id",uu="google.c.a.c_l",Ec="google.c.a.ts",qh="google.c.a.e";var qi=(()=>{return(b=qi||(qi={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",qi;var b})();function ui(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gr(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),K=new Uint8Array(F.length);for(let ie=0;ie<F.length;++ie)K[ie]=F.charCodeAt(ie);return K}const go="fcm_token_details_db",pr="fcm_token_object_Store";function Zh(b){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(go))return null;let D=null;return(yield(0,de.X3)(go,5,{upgrade:(F=(0,N.Z)(function*(K,ie,De,je){var dt;if(ie<2||!K.objectStoreNames.contains(pr))return;const _t=je.objectStore(pr),St=yield _t.index("fcmSenderId").get(b);if(yield _t.clear(),St)if(2===ie){const ct=St;if(!ct.auth||!ct.p256dh||!ct.endpoint)return;D={token:ct.fcmToken,createTime:null!==(dt=ct.createTime)&&void 0!==dt?dt:Date.now(),subscriptionOptions:{auth:ct.auth,p256dh:ct.p256dh,endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:"string"==typeof ct.vapidKey?ct.vapidKey:ui(ct.vapidKey)}}}else if(3===ie){const ct=St;D={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:ui(ct.auth),p256dh:ui(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:ui(ct.vapidKey)}}}else if(4===ie){const ct=St;D={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:ui(ct.auth),p256dh:ui(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:ui(ct.vapidKey)}}}}),function(ie,De,je,dt){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(go),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),An(D)?D:null;var F}),Wh.apply(this,arguments)}function An(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ci="firebase-messaging-store";let Or=null;function lu(){return Or||(Or=(0,de.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(ci)}})),Or}function $s(b){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,N.Z)(function*(b){const D=Ci(b),F=yield(yield lu()).transaction(ci).objectStore(ci).get(D);if(F)return F;{const K=yield Zh(b.appConfig.senderId);if(K)return yield zt(b,K),K}})).apply(this,arguments)}function zt(b,D){return du.apply(this,arguments)}function du(){return(du=(0,N.Z)(function*(b,D){const x=Ci(b),K=(yield lu()).transaction(ci,"readwrite");return yield K.objectStore(ci).put(D,x),yield K.done,D})).apply(this,arguments)}function Hs(b){return hu.apply(this,arguments)}function hu(){return(hu=(0,N.Z)(function*(b){const D=Ci(b),F=(yield lu()).transaction(ci,"readwrite");yield F.objectStore(ci).delete(D),yield F.done})).apply(this,arguments)}function Ci({appConfig:b}){return b.appId}const bn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function It(b,D){return pu.apply(this,arguments)}function pu(){return(pu=(0,N.Z)(function*(b,D){var x;const F=yield bc(b),K=be(D),ie={method:"POST",headers:F,body:JSON.stringify(K)};let De;try{De=yield(yield fetch(Wi(b.appConfig),ie)).json()}catch(je){throw bn.create("token-subscribe-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(De.error)throw bn.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw bn.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Yh(b,D){return gu.apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(b,D){var x;const F=yield bc(b),K=be(D.subscriptionOptions),ie={method:"PATCH",headers:F,body:JSON.stringify(K)};let De;try{De=yield(yield fetch(`${Wi(b.appConfig)}/${D.token}`,ie)).json()}catch(je){throw bn.create("token-update-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(De.error)throw bn.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw bn.create("token-update-no-token");return De.token})).apply(this,arguments)}function mu(b,D){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,N.Z)(function*(b,D){var x;const K={method:"DELETE",headers:yield bc(b)};try{const De=yield(yield fetch(`${Wi(b.appConfig)}/${D}`,K)).json();if(De.error)throw bn.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(ie){throw bn.create("token-unsubscribe-failed",{errorInfo:null===(x=ie)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Wi({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function bc(b){return ca.apply(this,arguments)}function ca(){return(ca=(0,N.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function be({p256dh:b,auth:D,endpoint:x,vapidKey:F}){const K={web:{endpoint:x,auth:D,p256dh:b}};return F!==zi&&(K.web.applicationPubKey=F),K}const jt=6048e5;function yu(b){return _u.apply(this,arguments)}function _u(){return(_u=(0,N.Z)(function*(b){const D=yield Dc(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:ui(D.getKey("auth")),p256dh:ui(D.getKey("p256dh"))},F=yield $s(b.firebaseDependencies);if(F){if(Xl(F.subscriptionOptions,x))return Date.now()>=F.createTime+jt?mo(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield mu(b.firebaseDependencies,F.token)}catch(K){console.warn(K)}return la(b.firebaseDependencies,x)}return la(b.firebaseDependencies,x)})).apply(this,arguments)}function xn(b){return vu.apply(this,arguments)}function vu(){return(vu=(0,N.Z)(function*(b){const D=yield $s(b.firebaseDependencies);D&&(yield mu(b.firebaseDependencies,D.token),yield Hs(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function mo(b,D){return li.apply(this,arguments)}function li(){return(li=(0,N.Z)(function*(b,D){try{const x=yield Yh(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield zt(b.firebaseDependencies,F),x}catch(x){throw yield xn(b),x}})).apply(this,arguments)}function la(b,D){return da.apply(this,arguments)}function da(){return(da=(0,N.Z)(function*(b,D){const F={token:yield It(b,D),createTime:Date.now(),subscriptionOptions:D};return yield zt(b,F),F.token})).apply(this,arguments)}function Dc(b,D){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,N.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gr(D)})})).apply(this,arguments)}function Xl(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function ha(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Mn(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const F=D.notification.body;F&&(b.notification.body=F);const K=D.notification.image;K&&(b.notification.image=K);const ie=D.notification.icon;ie&&(b.notification.icon=ie)}(D,b),function Ri(b,D){!D.data||(b.data=D.data)}(D,b),function Sc(b,D){var x,F,K,ie,De;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const je=null!==(K=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==K?K:null===(ie=D.notification)||void 0===ie?void 0:ie.click_action;je&&(b.fcmOptions.link=je);const dt=null===(De=D.fcmOptions)||void 0===De?void 0:De.analytics_label;dt&&(b.fcmOptions.analyticsLabel=dt)}(D,b),D}function Gs(b){return"object"==typeof b&&!!b&&aa in b}function Ki(b,D){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function fa(b){return bn.create("missing-app-config-values",{valueName:b})}Ki("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ki("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class og{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function sg(b){if(!b||!b.options)throw fa("App Configuration Object");if(!b.name)throw fa("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of D)if(!x[F])throw fa(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Ac(b){return wu.apply(this,arguments)}function wu(){return(wu=(0,N.Z)(function*(b){var D;try{b.swRegistration=yield navigator.serviceWorker.register(Ni,{scope:ki}),b.swRegistration.update().catch(()=>{})}catch(x){throw bn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function pa(b,D){return xc.apply(this,arguments)}function xc(){return(xc=(0,N.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield Ac(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw bn.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function ga(b,D){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,N.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=zi)})).apply(this,arguments)}function Eu(){return(Eu=(0,N.Z)(function*(b,D){if(!navigator)throw bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bn.create("permission-blocked");return yield ga(b,D?.vapidKey),yield pa(b,D?.serviceWorkerRegistration),yu(b)})).apply(this,arguments)}function Oc(b,D,x){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,N.Z)(function*(b,D,x){const F=Nc(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[aa],message_name:x[uu],message_time:x[Ec],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Nc(b){switch(b){case qi.NOTIFICATION_CLICKED:return"notification_open";case qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zs(){return(zs=(0,N.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===qi.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(ha(x)):b.onMessageHandler.next(ha(x)));const F=x.data;Gs(F)&&"1"===F[qh]&&(yield Oc(b,x.messageType,F))})).apply(this,arguments)}const qs="@firebase/messaging",Xn=b=>{const D=new og(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ed(b,D){return zs.apply(this,arguments)}(D,x)),D},zr=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function Cu(b,D){return Eu.apply(this,arguments)}(D,F)}};function kc(){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,N.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function yn(){(0,se._registerComponent)(new le.wA("messaging",Xn,"PUBLIC")),(0,se._registerComponent)(new le.wA("messaging-internal",zr,"PRIVATE")),(0,se.registerVersion)(qs,"0.11.0"),(0,se.registerVersion)(qs,"0.11.0","esm2017")}();const _o="analytics",rd="firebase_id",Ws="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Tu="https://www.googletagmanager.com/gtag/js",On=new ae.Yd("@firebase/analytics");function Su(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function Au(b,D){const x=document.createElement("script");x.src=`${Tu}?l=${b}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Jh(b,D,x,F,K,ie){return vo.apply(this,arguments)}function vo(){return(vo=(0,N.Z)(function*(b,D,x,F,K,ie){const De=F[K];try{if(De)yield D[De];else{const dt=(yield Su(x)).find(_t=>_t.measurementId===K);dt&&(yield D[dt.appId])}}catch(je){On.error(je)}b("config",K,ie)})).apply(this,arguments)}function wo(b,D,x,F,K){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,N.Z)(function*(b,D,x,F,K){try{let ie=[];if(K&&K.send_to){let De=K.send_to;Array.isArray(De)||(De=[De]);const je=yield Su(x);for(const dt of De){const _t=je.find(ct=>ct.measurementId===dt),St=_t&&D[_t.appId];if(!St){ie=[];break}ie.push(St)}}0===ie.length&&(ie=Object.values(D)),yield Promise.all(ie),b("event",F,K||{})}catch(ie){On.error(ie)}})).apply(this,arguments)}function sd(b){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(Tu)&&x.src.includes(b))return x;return null}const or=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),va=new class Fi{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function ad(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function wa(b){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,N.Z)(function*(b){var D;const{appId:x,apiKey:F}=b,K={method:"GET",headers:ad(F)},ie=Ws.replace("{app-id}",x),De=yield fetch(ie,K);if(200!==De.status&&304!==De.status){let je="";try{const dt=yield De.json();null!==(D=dt.error)&&void 0!==D&&D.message&&(je=dt.error.message)}catch{}throw or.create("config-fetch-failed",{httpStatus:De.status,responseMessage:je})}return De.json()})).apply(this,arguments)}function Rn(b){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,N.Z)(function*(b,D=va,x){const{appId:F,apiKey:K,measurementId:ie}=b.options;if(!F)throw or.create("no-app-id");if(!K){if(ie)return{measurementId:ie,appId:F};throw or.create("no-api-key")}const De=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new Pu;return setTimeout((0,N.Z)(function*(){je.abort()}),void 0!==x?x:6e4),Mu({appId:F,apiKey:K,measurementId:ie},De,je,D)})).apply(this,arguments)}function Mu(b,D,x){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,N.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},F,K=va){var ie,De;const{appId:je,measurementId:dt}=b;try{yield Ca(F,D)}catch(_t){if(dt)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${null===(ie=_t)||void 0===ie?void 0:ie.message}]`),{appId:je,measurementId:dt};throw _t}try{const _t=yield wa(b);return K.deleteThrottleMetadata(je),_t}catch(_t){const St=_t;if(!Ou(St)){if(K.deleteThrottleMetadata(je),dt)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:je,measurementId:dt};throw _t}const ct=503===Number(null===(De=St?.customData)||void 0===De?void 0:De.httpStatus)?(0,re.$s)(x,K.intervalMillis,30):(0,re.$s)(x,K.intervalMillis),vn={throttleEndTimeMillis:Date.now()+ct,backoffCount:x+1};return K.setThrottleMetadata(je,vn),On.debug(`Calling attemptFetch again in ${ct} millis`),Mu(b,vn,F,K)}})).apply(this,arguments)}function Ca(b,D){return new Promise((x,F)=>{const K=Math.max(D-Date.now(),0),ie=setTimeout(x,K);b.addEventListener(()=>{clearTimeout(ie),F(or.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Ou(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Pu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Cs,Ia;function Es(){return(Es=(0,N.Z)(function*(b,D,x,F,K){if(K&&K.global)b("event",x,F);else{const ie=yield D;b("event",x,Object.assign(Object.assign({},F),{send_to:ie}))}})).apply(this,arguments)}function Js(b){Ia=b}function Bc(b){Cs=b}function Qi(){return ku.apply(this,arguments)}function ku(){return(ku=(0,N.Z)(function*(){var b;if(!(0,re.hl)())return On.warn(or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return On.warn(or.create("indexeddb-unavailable",{errorInfo:null===(b=D)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Io(){return(Io=(0,N.Z)(function*(b,D,x,F,K,ie,De){var je;const dt=Rn(b);dt.then(ur=>{x[ur.measurementId]=ur.appId,b.options.measurementId&&ur.measurementId!==b.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ur=>On.error(ur)),D.push(dt);const _t=Qi().then(ur=>{if(ur)return F.getId()}),[St,ct]=yield Promise.all([dt,_t]);sd(ie)||Au(ie,St.measurementId),Ia&&(K("consent","default",Ia),Js(void 0)),K("js",new Date);const vn=null!==(je=De?.config)&&void 0!==je?je:{};return vn.origin="firebase",vn.update=!0,null!=ct&&(vn[rd]=ct),K("config",St.measurementId,vn),Cs&&(K("set",Cs),Bc(void 0)),St.measurementId})).apply(this,arguments)}class Ru{constructor(D){this.app=D}_delete(){return delete qr[this.app.options.appId],Promise.resolve()}}let qr={},Is=[];const bo={};let To,Xs,Do="dataLayer",ba=!1;function vy(b,D,x){!function ag(){const b=[];if((0,re.ru)()&&b.push("This is a browser extension environment."),(0,re.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,K)=>`(${K+1}) ${F}`).join(" "),x=or.create("invalid-analytics-context",{errorInfo:D});On.warn(x.message)}}();const F=b.options.appId;if(!F)throw or.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw or.create("no-api-key");On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=qr[F])throw or.create("already-exists",{id:F});if(!ba){!function id(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(Do);const{wrappedGtag:ie,gtagCore:De}=function ma(b,D,x,F,K){let ie=function(...De){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ie=window[K]),window[K]=function xu(b,D,x,F){function ie(){return(ie=(0,N.Z)(function*(De,je,dt){try{"event"===De?yield wo(b,D,x,je,dt):"config"===De?yield Jh(b,D,x,F,je,dt):"consent"===De?b("consent","update",dt):b("set",je)}catch(_t){On.error(_t)}})).apply(this,arguments)}return function K(De,je,dt){return ie.apply(this,arguments)}}(ie,b,D,x),{gtagCore:ie,wrappedGtag:window[K]}}(qr,Is,bo,Do,"gtag");Xs=ie,To=De,ba=!0}return qr[F]=function Eo(b,D,x,F,K,ie,De){return Io.apply(this,arguments)}(b,Is,bo,D,To,Do,x),new Ru(b)}function Cy(){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,N.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const tt="@firebase/analytics";!function un(){(0,se._registerComponent)(new le.wA(_o,(D,{options:x})=>vy(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new le.wA("analytics-internal",function b(D){try{const x=D.getProvider(_o).getImmediate();return{logEvent:(F,K,ie)=>function bs(b,D,x,F){b=(0,re.m9)(b),function ud(b,D,x,F,K){return Es.apply(this,arguments)}(Xs,qr[b.app.options.appId],D,x,F).catch(K=>On.error(K))}(x,F,K,ie)}}catch(x){throw or.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(tt,"0.8.4"),(0,se.registerVersion)(tt,"0.8.4","esm2017")}();var Wr=R(4408),Pn=R(7565);const wr=new class _n extends Pn.v{}(class Ji extends Wr.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):(D.flush(this),0)}});var Lu=R(4986),Da=R(8505),Pr=R(9468),$c=R(5363);const Kr=new c.GfV("7.4.1"),Ta="__angularfire_symbol__analyticsIsSupportedValue",Ds="__angularfire_symbol__analyticsIsSupported",Vu="__angularfire_symbol__remoteConfigIsSupportedValue",So="__angularfire_symbol__remoteConfigIsSupported",Ao="__angularfire_symbol__messagingIsSupportedValue",Li="__angularfire_symbol__messagingIsSupported";function xo(b,D,x){if(D){if(1===D.length)return D[0];const ie=D.filter(De=>De.app===x);if(1===ie.length)return ie[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Ds]||(globalThis[Ds]=Cy().then(b=>globalThis[Ta]=b).catch(()=>globalThis[Ta]=!1)),globalThis[Li]||(globalThis[Li]=kc().then(b=>globalThis[Ao]=b).catch(()=>globalThis[Ao]=!1)),globalThis[So]||(globalThis[So]=au().then(b=>globalThis[Vu]=b).catch(()=>globalThis[Vu]=!1));const eo=(b,D)=>{const x=D?[D]:(0,J.C6)(),F=[];return x.forEach(K=>{K.container.getProvider(b).instances.forEach(De=>{F.includes(De)||F.push(De)})}),F};function Sa(){}class Nr{constructor(D,x=wr){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const K=this.zone;return this.delegate.schedule(function(De){K.runGuarded(()=>{D.apply(this,[De])})},x,F)}}class Dn{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sa,{},Sa,Sa)),x.pipe((0,Da.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mo=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Nr(Zone.current)),this.insideAngular=x.run(()=>new Nr(Zone.current,Lu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(c.LFG(c.R0b))},b.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ii(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Xi(b){return Ii(),function Gc(b){return function(x){return(x=x.lift(new Dn(b.ngZone))).pipe((0,Pr.R)(b.outsideAngular),(0,$c.Q)(b.insideAngular))}}(Ii())(b)}},2090:(ot,Ee,R)=>{R.d(Ee,{$s:()=>Qe,BH:()=>Vt,G6:()=>Ce,L:()=>de,LL:()=>qt,Pz:()=>Wt,Sg:()=>Ze,UG:()=>we,US:()=>le,ZB:()=>j,ZR:()=>pn,aH:()=>lt,b$:()=>fe,eu:()=>Be,hl:()=>Ue,jU:()=>et,m9:()=>kt,ne:()=>Bn,pd:()=>Mi,r3:()=>vi,ru:()=>ge,tV:()=>he,uI:()=>Ae,vZ:()=>We,w1:()=>nt,xO:()=>Kn,xb:()=>oi,z$:()=>Le,zI:()=>U,zd:()=>ai});const se=function(H){const L=[];let Z=0;for(let ve=0;ve<H.length;ve++){let Y=H.charCodeAt(ve);Y<128?L[Z++]=Y:Y<2048?(L[Z++]=Y>>6|192,L[Z++]=63&Y|128):55296==(64512&Y)&&ve+1<H.length&&56320==(64512&H.charCodeAt(ve+1))?(Y=65536+((1023&Y)<<10)+(1023&H.charCodeAt(++ve)),L[Z++]=Y>>18|240,L[Z++]=Y>>12&63|128,L[Z++]=Y>>6&63|128,L[Z++]=63&Y|128):(L[Z++]=Y>>12|224,L[Z++]=Y>>6&63|128,L[Z++]=63&Y|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,L){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Y=0;Y<H.length;Y+=3){const He=H[Y],at=Y+1<H.length,Zt=at?H[Y+1]:0,ln=Y+2<H.length,Gt=ln?H[Y+2]:0;let Lt=(15&Zt)<<2|Gt>>6,ir=63&Gt;ln||(ir=64,at||(Lt=64)),ve.push(Z[He>>2],Z[(3&He)<<4|Zt>>4],Z[Lt],Z[ir])}return ve.join("")},encodeString(H,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(H):this.encodeByteArray(se(H),L)},decodeString(H,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(H):function(H){const L=[];let Z=0,ve=0;for(;Z<H.length;){const Y=H[Z++];if(Y<128)L[ve++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const He=H[Z++];L[ve++]=String.fromCharCode((31&Y)<<6|63&He)}else if(Y>239&&Y<365){const ln=((7&Y)<<18|(63&H[Z++])<<12|(63&H[Z++])<<6|63&H[Z++])-65536;L[ve++]=String.fromCharCode(55296+(ln>>10)),L[ve++]=String.fromCharCode(56320+(1023&ln))}else{const He=H[Z++],at=H[Z++];L[ve++]=String.fromCharCode((15&Y)<<12|(63&He)<<6|63&at)}}return L.join("")}(this.decodeStringToByteArray(H,L))},decodeStringToByteArray(H,L){this.init_();const Z=L?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Y=0;Y<H.length;){const He=Z[H.charAt(Y++)],Zt=Y<H.length?Z[H.charAt(Y)]:0;++Y;const Gt=Y<H.length?Z[H.charAt(Y)]:64;++Y;const $e=Y<H.length?Z[H.charAt(Y)]:64;if(++Y,null==He||null==Zt||null==Gt||null==$e)throw Error();ve.push(He<<2|Zt>>4),64!==Gt&&(ve.push(Zt<<4&240|Gt>>2),64!==$e&&ve.push(Gt<<6&192|$e))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},de=function(H){return function(H){const L=se(H);return le.encodeByteArray(L,!0)}(H).replace(/\./g,"")},he=function(H){try{return le.decodeString(H,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function j(H,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return L}for(const Z in L)!L.hasOwnProperty(Z)||!W(Z)||(H[Z]=j(H[Z],L[Z]));return H}function W(H){return"__proto__"!==H}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function ge(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){const H=Le();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ce(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){return"object"==typeof indexedDB}function Be(){return new Promise((H,L)=>{try{let Z=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ve);Y.onsuccess=()=>{Y.result.close(),Z||self.indexedDB.deleteDatabase(ve),H(!0)},Y.onupgradeneeded=()=>{Z=!1},Y.onerror=()=>{var He;L((null===(He=Y.error)||void 0===He?void 0:He.message)||"")}}catch(Z){L(Z)}})}function U(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=H&&he(H[1]);return L&&JSON.parse(L)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},lt=()=>{var H;return null===(H=te())||void 0===H?void 0:H.config},Wt=H=>{var L;return null===(L=te())||void 0===L?void 0:L[`_${H}`]};class Vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,Z)=>{this.resolve=L,this.reject=Z})}wrapCallback(L){return(Z,ve)=>{Z?this.reject(Z):this.resolve(ve),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(Z):L(Z,ve))}}}function Ze(H,L){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=L||"demo-project",Y=H.iat||0,He=H.sub||H.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const at=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Y,exp:Y+3600,auth_time:Y,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},H);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(at)),""].join(".")}class pn extends Error{constructor(L,Z,ve){super(Z),this.code=L,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}}class qt{constructor(L,Z,ve){this.service=L,this.serviceName=Z,this.errors=ve}create(L,...Z){const ve=Z[0]||{},Y=`${this.service}/${L}`,He=this.errors[L],at=He?function Kt(H,L){return H.replace(Sr,(Z,ve)=>{const Y=L[ve];return null!=Y?String(Y):`<${ve}?>`})}(He,ve):"Error";return new pn(Y,`${this.serviceName}: ${at} (${Y}).`,ve)}}const Sr=/\{\$([^}]+)}/g;function vi(H,L){return Object.prototype.hasOwnProperty.call(H,L)}function oi(H){for(const L in H)if(Object.prototype.hasOwnProperty.call(H,L))return!1;return!0}function We(H,L){if(H===L)return!0;const Z=Object.keys(H),ve=Object.keys(L);for(const Y of Z){if(!ve.includes(Y))return!1;const He=H[Y],at=L[Y];if(_r(He)&&_r(at)){if(!We(He,at))return!1}else if(He!==at)return!1}for(const Y of ve)if(!Z.includes(Y))return!1;return!0}function _r(H){return null!==H&&"object"==typeof H}function Kn(H){const L=[];for(const[Z,ve]of Object.entries(H))Array.isArray(ve)?ve.forEach(Y=>{L.push(encodeURIComponent(Z)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent(Z)+"="+encodeURIComponent(ve));return L.length?"&"+L.join("&"):""}function ai(H){const L={};return H.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Y,He]=ve.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(He)}}),L}function Mi(H){const L=H.indexOf("?");if(!L)return"";const Z=H.indexOf("#",L);return H.substring(L,Z>0?Z:void 0)}function Bn(H,L){const Z=new dn(H,L);return Z.subscribe.bind(Z)}class dn{constructor(L,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{L(this)}).catch(ve=>{this.error(ve)})}next(L){this.forEachObserver(Z=>{Z.next(L)})}error(L){this.forEachObserver(Z=>{Z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,Z,ve){let Y;if(void 0===L&&void 0===Z&&void 0===ve)throw new Error("Missing Observer.");Y=function it(H,L){if("object"!=typeof H||null===H)return!1;for(const Z of L)if(Z in H&&"function"==typeof H[Z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:Z,complete:ve},void 0===Y.next&&(Y.next=tn),void 0===Y.error&&(Y.error=tn),void 0===Y.complete&&(Y.complete=tn);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),He}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,L)}sendOne(L,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{Z(this.observers[L])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function Qe(H,L=1e3,Z=2){const ve=L*Math.pow(Z,H),Y=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Y)}function kt(H){return H&&H._delegate?H._delegate:H}},1185:(ot,Ee,R)=>{var c=R(4650);let J=null;function N(){return J}const ae=new c.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function he(){return(0,c.LFG)(j)}()},providedIn:"platform"}),n})();const B=new c.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){W()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){W()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ae))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Le(){return new j((0,c.LFG)(ae))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Ye)},providedIn:"root"}),n})();const fe=new c.OlP("appBaseHref");let Ye=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+et(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+et(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+et(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de),c.LFG(fe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de),c.LFG(fe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ue(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+et(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=et,n.joinWithSlash=Ae,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(c.LFG(ge))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function _e(){return new Te((0,c.LFG)(ge))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}var U=(()=>((U=U||{})[U.Decimal=0]="Decimal",U[U.Percent=1]="Percent",U[U.Currency=2]="Currency",U[U.Scientific=3]="Scientific",U))(),te=(()=>((te=te||{})[te.Decimal=0]="Decimal",te[te.Group=1]="Group",te[te.List=2]="List",te[te.PercentSign=3]="PercentSign",te[te.PlusSign=4]="PlusSign",te[te.MinusSign=5]="MinusSign",te[te.Exponential=6]="Exponential",te[te.SuperscriptingExponent=7]="SuperscriptingExponent",te[te.PerMille=8]="PerMille",te[te.Infinity=9]="Infinity",te[te.NaN=10]="NaN",te[te.TimeSeparator=11]="TimeSeparator",te[te.CurrencyDecimal=12]="CurrencyDecimal",te[te.CurrencyGroup=13]="CurrencyGroup",te))();function At(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===te.CurrencyDecimal)return t[c.wAp.NumberSymbols][te.Decimal];if(e===te.CurrencyGroup)return t[c.wAp.NumberSymbols][te.Group]}return r}const ln=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function $n(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ra(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}class ia{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hr=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new ia(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),ms(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{ms(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ms(n,e){n.context.$implicit=e.item}let mn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new _c,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class _c{constructor(){this.$implicit=null,this.ngIf=null}}function sr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let zl=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,u]=t.split("."),d=-1===s.indexOf("-")?void 0:c.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,u?`${r}${u}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,s,d)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();function Jn(n,e){return new c.vHH(2100,!1)}let oa=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Jn();return t.toLowerCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"lowercase",type:n,pure:!0,standalone:!0}),n})();const ys=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Gh=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Jn();return t.replace(ys,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"titlecase",type:n,pure:!0,standalone:!0}),n})(),ki=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function aa(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function Rt(n,e,t){return function gn(n,e,t,r,s,u,d=!1){let m="",v=!1;if(isFinite(n)){let E=function su(n){let r,s,u,d,m,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(m=e.length))r=[0],s=1;else{for(m--;"0"===e.charAt(m);)m--;for(s-=u,r=[],d=0;u<=m;u++,d++)r[d]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);d&&(E=function Us(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(E));let A=e.minInt,P=e.minFrac,V=e.maxFrac;if(u){const Tt=u.match(ln);if(null===Tt)throw new Error(`${u} is not a valid digit info`);const Pt=Tt[1],Nt=Tt[3],Ft=Tt[5];null!=Pt&&(A=$n(Pt)),null!=Nt&&(P=$n(Nt)),null!=Ft?V=$n(Ft):null!=Nt&&P>V&&(V=P)}!function Pi(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let d=u+n.integerLen,m=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let P=d;P<r.length;P++)r[P]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let P=1;P<d;P++)r[P]=0}if(m>=5)if(d-1<0){for(let P=0;P>d;P--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;s<Math.max(0,u);s++)r.push(0);let v=0!==u;const E=e+n.integerLen,A=r.reduceRight(function(P,V,z,ee){return ee[z]=(V+=P)<10?V:V-10,v&&(0===ee[z]&&z>=E?ee.pop():v=!1),V>=10?1:0},0);A&&(r.unshift(A),n.integerLen++)}(E,P,V);let z=E.digits,ee=E.integerLen;const Me=E.exponent;let Pe=[];for(v=z.every(Tt=>!Tt);ee<A;ee++)z.unshift(0);for(;ee<0;ee++)z.unshift(0);ee>0?Pe=z.splice(ee,z.length):(Pe=z,z=[0]);const st=[];for(z.length>=e.lgSize&&st.unshift(z.splice(-e.lgSize,z.length).join(""));z.length>e.gSize;)st.unshift(z.splice(-e.gSize,z.length).join(""));z.length&&st.unshift(z.join("")),m=st.join(At(t,r)),Pe.length&&(m+=At(t,s)+Pe.join("")),Me&&(m+=At(t,te.Exponential)+"+"+Me)}else m=At(t,te.Infinity);return m=n<0&&!v?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,function Cn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],d=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],m=d[0],v=d[1]||"";t.posPre=m.substring(0,m.indexOf("#"));for(let A=0;A<v.length;A++){const P=v.charAt(A);"0"===P?t.minFrac=t.maxFrac=A+1:"#"===P?t.maxFrac=A+1:t.posSuf+=P}const E=m.split(",");if(t.gSize=E[1]?E[1].length:0,t.lgSize=E[2]||E[1]?(E[2]||E[1]).length:0,u){const A=s.length-t.posPre.length-t.posSuf.length,P=u.indexOf("#");t.negPre=u.substring(0,P).replace(/'/g,""),t.negSuf=u.slice(P+A).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function on(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,U.Decimal),At(e,te.MinusSign)),e,te.Group,te.Decimal,t)}(function uu(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(u){throw Jn()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let ua=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function pr(n){return"server"===n}let cu=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Kh((0,c.LFG)(ae),window)}),n})();class Kh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Or(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ci(this.window.history)||ci(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ci(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class $s{}class zs extends class ed extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){J||(J=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Iu(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}();return null==t?null:function zr(n){Xn=Xn||document.createElement("a"),Xn.setAttribute("href",n);const e=Xn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ra(document.cookie,e)}}let Xn,qs=null;const yn=new c.OlP("TRANSITION_ID"),Rc=[{provide:c.ip1,useFactory:function kc(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=N(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[yn,ae,c.zs3],multi:!0}];let Fc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const bu=new c.OlP("EventManagerPlugins");let td=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const d=s[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(bu),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Du{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=N().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Zs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n extends Zs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,s.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(nd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(nd))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ae))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function nd(n){N().remove(n)}const _o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rd=/%COMP%/g;function Au(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Au(n,s,t):(s=s.replace(rd,n),t.push(s))}return t}function id(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vo=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new wo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new sd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new od(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Au(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(td),c.LFG(yo),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class wo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_o[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ma(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ma(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=_o[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=_o[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,id(r)):this.eventManager.addEventListener(e,t,id(r))}}function ma(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class sd extends wo{constructor(e,t,r,s){super(e),this.component=r;const u=Au(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function On(n){return"_ngcontent-%COMP%".replace(rd,n)}(s+"-"+r.id),this.hostAttr=function Su(n){return"_nghost-%COMP%".replace(rd,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class od extends wo{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Au(s.id,s.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let or=(()=>{class n extends Du{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ae))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ya=["alt","control","meta","shift"],_a={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let va=(()=>{class n extends Du{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),ya.forEach(E=>{const A=r.indexOf(E);A>-1&&(r.splice(A,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=s,v.fullKey=d,v}static matchEventFullKeyCode(t,r){let s=_a[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),ya.forEach(d=>{d!==s&&(0,Fi[d])(t)&&(u+=d+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ae))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Mu(){zs.makeCurrent()},multi:!0},{provide:ae,useFactory:function Ca(){return(0,c.RDi)(document),document},deps:[]}]),Cs=new c.OlP(""),ud=[{provide:c.rWj,useClass:class Qh{addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,d=!1;const m=function(v){d=d||v,u--,0==u&&r(d)};s.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Es=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Ys(){return new c.qLn},deps:[]},{provide:bu,useClass:or,multi:!0,deps:[ae,c.R0b,c.Lbi]},{provide:bu,useClass:va,multi:!0,deps:[ae]},{provide:vo,useClass:vo,deps:[td,yo,c.AFp]},{provide:c.FYo,useExisting:vo},{provide:Zs,useExisting:yo},{provide:yo,useClass:yo,deps:[ae]},{provide:td,useClass:td,deps:[bu,c.R0b]},{provide:$s,useClass:Fc,deps:[]},[]];let Vc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:yn,useExisting:c.AFp},Rc]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Cs,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...Es,...ud],imports:[ua,c.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ae))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Co(){return new Yi((0,c.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var bs=R(7669),Xt=R(8996);function tt(...n){const e=(0,bs.yG)(n);return(0,Xt.D)(n,e)}var Zr=R(9751),un=R(5577),Wr=R(576);function Ji(n,e){return(0,Wr.m)(e)?(0,un.z)(n,e,1):(0,un.z)(n,1)}var Pn=R(4482),_n=R(5403);function wr(n,e){return(0,Pn.e)((t,r)=>{let s=0;t.subscribe((0,_n.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var ft=R(4004);class Lu{}class Da{}class Pr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Pr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Pr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Pr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(m=>-1===u.indexOf(m)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Kr{encodeKey(e){return So(e)}encodeValue(e){return So(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ds=/%(\d[a-f0-9])/gi,Vu={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function So(n){return encodeURIComponent(n).replace(Ds,(e,t)=>Vu[t]??e)}function Ao(n){return`${n}`}class Li{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Kr,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ta(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[d,m]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],v=t.get(d)||[];v.push(m),t.set(d,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Ao):[Ao(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Li({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Ao(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Ao(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class cg{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ef(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function xo(n){return typeof Blob<"u"&&n instanceof Blob}function eo(n){return typeof FormData<"u"&&n instanceof FormData}class Nr{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ld(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Pr),this.context||(this.context=new cg),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+d}}else this.params=new Li,this.urlWithParams=t}serializeBody(){return null===this.body?null:ef(this.body)||xo(this.body)||eo(this.body)||function Sa(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Li?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||eo(this.body)?null:xo(this.body)?this.body.type||null:ef(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Li?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,E=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((P,V)=>P.set(V,e.setHeaders[V]),v)),e.setParams&&(E=Object.keys(e.setParams).reduce((P,V)=>P.set(V,e.setParams[V]),E)),new Nr(t,r,u,{params:E,headers:v,context:A,reportProgress:m,responseType:s,withCredentials:d})}}var Dn=(()=>((Dn=Dn||{})[Dn.Sent=0]="Sent",Dn[Dn.UploadProgress=1]="UploadProgress",Dn[Dn.ResponseHeader=2]="ResponseHeader",Dn[Dn.DownloadProgress=3]="DownloadProgress",Dn[Dn.Response=4]="Response",Dn[Dn.User=5]="User",Dn))();class Mo{constructor(e,t=200,r="OK"){this.headers=e.headers||new Pr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ii extends Mo{constructor(e={}){super(e),this.type=Dn.ResponseHeader}clone(e={}){return new Ii({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Oo extends Mo{constructor(e={}){super(e),this.type=Dn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Oo({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Vi extends Mo{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Hc(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let to=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof Nr)u=t;else{let v,E;v=s.headers instanceof Pr?s.headers:new Pr(s.headers),s.params&&(E=s.params instanceof Li?s.params:new Li({fromObject:s.params})),u=new Nr(t,r,void 0!==s.body?s.body:null,{headers:v,context:s.context,params:E,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const d=tt(u).pipe(Ji(v=>this.handler.handle(v)));if(t instanceof Nr||"events"===s.observe)return d;const m=d.pipe(wr(v=>v instanceof Oo));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,ft.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return m.pipe((0,ft.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return m.pipe((0,ft.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return m.pipe((0,ft.U)(v=>v.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Li).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,Hc(s,r))}post(t,r,s={}){return this.request("POST",t,Hc(s,r))}put(t,r,s={}){return this.request("PUT",t,Hc(s,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Lu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Xi{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Gc=new c.OlP("HTTP_INTERCEPTORS");let Fn=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const dt=/^\)\]\}',?\n/;let St=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Zr.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((z,ee)=>s.setRequestHeader(z,ee.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const z=t.detectContentTypeHeader();null!==z&&s.setRequestHeader("Content-Type",z)}if(t.responseType){const z=t.responseType.toLowerCase();s.responseType="json"!==z?z:"text"}const u=t.serializeBody();let d=null;const m=()=>{if(null!==d)return d;const z=s.statusText||"OK",ee=new Pr(s.getAllResponseHeaders()),Me=function _t(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return d=new Ii({headers:ee,status:s.status,statusText:z,url:Me}),d},v=()=>{let{headers:z,status:ee,statusText:Me,url:Pe}=m(),st=null;204!==ee&&(st=typeof s.response>"u"?s.responseText:s.response),0===ee&&(ee=st?200:0);let Tt=ee>=200&&ee<300;if("json"===t.responseType&&"string"==typeof st){const Pt=st;st=st.replace(dt,"");try{st=""!==st?JSON.parse(st):null}catch(Nt){st=Pt,Tt&&(Tt=!1,st={error:Nt,text:st})}}Tt?(r.next(new Oo({body:st,headers:z,status:ee,statusText:Me,url:Pe||void 0})),r.complete()):r.error(new Vi({error:st,headers:z,status:ee,statusText:Me,url:Pe||void 0}))},E=z=>{const{url:ee}=m(),Me=new Vi({error:z,status:s.status||0,statusText:s.statusText||"Unknown Error",url:ee||void 0});r.error(Me)};let A=!1;const P=z=>{A||(r.next(m()),A=!0);let ee={type:Dn.DownloadProgress,loaded:z.loaded};z.lengthComputable&&(ee.total=z.total),"text"===t.responseType&&!!s.responseText&&(ee.partialText=s.responseText),r.next(ee)},V=z=>{let ee={type:Dn.UploadProgress,loaded:z.loaded};z.lengthComputable&&(ee.total=z.total),r.next(ee)};return s.addEventListener("load",v),s.addEventListener("error",E),s.addEventListener("timeout",E),s.addEventListener("abort",E),t.reportProgress&&(s.addEventListener("progress",P),null!==u&&s.upload&&s.upload.addEventListener("progress",V)),s.send(u),r.next({type:Dn.Sent}),()=>{s.removeEventListener("error",E),s.removeEventListener("abort",E),s.removeEventListener("load",v),s.removeEventListener("timeout",E),t.reportProgress&&(s.removeEventListener("progress",P),null!==u&&s.upload&&s.upload.removeEventListener("progress",V)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($s))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ct=new c.OlP("XSRF_COOKIE_NAME"),vn=new c.OlP("XSRF_HEADER_NAME");class ur{}let Po=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ra(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ae),c.LFG(c.Lbi),c.LFG(ct))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ts=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ur),c.LFG(vn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),no=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Gc,[]);this.chain=r.reduceRight((s,u)=>new Xi(s,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Da),c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),io=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Ts,useClass:Fn}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ct,useValue:t.cookieName}:[],t.headerName?{provide:vn,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Ts,{provide:Gc,useExisting:Ts,multi:!0},{provide:ur,useClass:Po},{provide:ct,useValue:"XSRF-TOKEN"},{provide:vn,useValue:"X-XSRF-TOKEN"}]}),n})(),No=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[to,{provide:Lu,useClass:no},St,{provide:Da,useExisting:St}],imports:[io.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const{isArray:dg}=Array,{getPrototypeOf:by,prototype:Dy,keys:hg}=Object;function zc(n){if(1===n.length){const e=n[0];if(dg(e))return{args:e,keys:null};if(function qc(n){return n&&"object"==typeof n&&by(n)===Dy}(e)){const t=hg(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zc=R(8421);const{isArray:fg}=Array;function nf(n){return(0,ft.U)(e=>function uw(n,e){return fg(e)?n(...e):n(e)}(n,e))}function Ty(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let pg=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Ro=(()=>{class n extends pg{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const kr=new c.OlP("NgValueAccessor"),Sy={provide:kr,useExisting:(0,c.Gpc)(()=>so),multi:!0},cw=new c.OlP("CompositionEventMode");let so=(()=>{class n extends pg{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ay(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(cw,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([Sy]),c.qOj]}),n})();function oo(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function uf(n){return null!=n&&"number"==typeof n.length}const Cr=new c.OlP("NgValidators"),es=new c.OlP("NgAsyncValidators"),xy=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ma{static min(e){return function gg(n){return e=>{if(oo(e.value)||oo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function cf(n){return e=>{if(oo(e.value)||oo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function mg(n){return oo(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function ts(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Bu(n){return oo(n.value)||xy.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function lf(n){return e=>oo(e.value)||!uf(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function yg(n){return e=>uf(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function My(n){if(!n)return df;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(oo(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return Fo(e)}static composeAsync(e){return Ss(e)}}function df(n){return null}function Oy(n){return null!=n}function Py(n){return(0,c.QGY)(n)?(0,Xt.D)(n):n}function hf(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ff(n,e){return e.map(t=>t(n))}function ky(n){return n.map(e=>function Ny(n){return!n.validate}(e)?e:t=>e.validate(t))}function Fo(n){if(!n)return null;const e=n.filter(Oy);return 0==e.length?null:function(t){return hf(ff(t,e))}}function Wc(n){return null!=n?Fo(ky(n)):null}function Ss(n){if(!n)return null;const e=n.filter(Oy);return 0==e.length?null:function(t){return function rf(...n){const e=(0,bs.jO)(n),{args:t,keys:r}=zc(n),s=new Zr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let v=d,E=d;for(let A=0;A<d;A++){let P=!1;(0,Zc.Xf)(t[A]).subscribe((0,_n.x)(u,V=>{P||(P=!0,E--),m[A]=V},()=>v--,void 0,()=>{(!v||!P)&&(E||u.next(r?Ty(r,m):m),u.complete())}))}});return e?s.pipe(nf(e)):s}(ff(t,e).map(Py)).pipe((0,ft.U)(hf))}}function ao(n){return null!=n?Ss(ky(n)):null}function pf(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Kc(n){return n._rawValidators}function gf(n){return n._rawAsyncValidators}function _g(n){return n?Array.isArray(n)?n:[n]:[]}function Yc(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ry(n,e){const t=_g(e);return _g(n).forEach(s=>{Yc(t,s)||t.push(s)}),t}function dd(n,e){return _g(e).filter(t=>!Yc(n,t))}class ju{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Wc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ao(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class di extends ju{get formDirective(){return null}get path(){return null}}class Oa extends ju{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mf{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hd=(()=>{class n extends mf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Oa,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),Qc=(()=>{class n extends mf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(di,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();const ka="VALID",Jc="INVALID",Ra="PENDING",$u="DISABLED";function md(n){return(_f(n)?n.validators:n)||null}function Xc(n){return Array.isArray(n)?Wc(n):n||null}function Hu(n,e){return(_f(e)?e.asyncValidators:n)||null}function el(n){return Array.isArray(n)?ao(n):n||null}function _f(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function yd(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")}function _d(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new c.vHH(1002,"")})}class Er{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Xc(this._rawValidators),this._composedAsyncValidatorFn=el(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ka}get invalid(){return this.status===Jc}get pending(){return this.status==Ra}get disabled(){return this.status===$u}get enabled(){return this.status!==$u}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Xc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=el(e)}addValidators(e){this.setValidators(Ry(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ry(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dd(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dd(e,this._rawAsyncValidators))}hasValidator(e){return Yc(this._rawValidators,e)}hasAsyncValidator(e){return Yc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ra,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$u,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ka,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ka||this.status===Ra)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$u:ka}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ra,this._hasOwnPendingAsyncValidator=!0;const t=Py(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?$u:this.errors?Jc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ra)?Ra:this._anyControlsHaveStatus(Jc)?Jc:ka}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_f(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class As extends Er{constructor(e,t,r){super(md(t),Hu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){_d(this,0,e),Object.keys(e).forEach(r=>{yd(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Gu extends As{}function Vo(n,e){nl(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function jy(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&er(n,e)})}(n,e),function Cf(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function wf(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&er(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function vf(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function La(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),wd(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ir(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function nl(n,e){const t=Kc(n);null!==e.validator?n.setValidators(pf(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=gf(n);null!==e.asyncValidator?n.setAsyncValidators(pf(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Ir(e._rawValidators,s),Ir(e._rawAsyncValidators,s)}function wd(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=Kc(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=gf(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Ir(e._rawValidators,r),Ir(e._rawAsyncValidators,r),t}function er(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function w(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function S(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const O=class extends Er{constructor(e=null,t,r){super(md(t),Hu(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_f(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=S(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){w(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){w(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){S(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Df=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Ig={provide:kr,useExisting:(0,c.Gpc)(()=>Tf),multi:!0};let Tf=(()=>{class n extends Ro{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([Ig]),c.qOj]}),n})(),bd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Af=new c.OlP("NgModelWithFormControlWarning"),xf={provide:di,useExisting:(0,c.Gpc)(()=>Mf)};let Mf=(()=>{class n extends di{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Vo(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){La(t.control||null,t,!1),function rl(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Hy(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(La(r||null,t),(n=>n instanceof O)(s)&&(Vo(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Cd(n,e){nl(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function $y(n,e){return wd(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nl(this.form,this),this._oldForm&&wd(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cr,10),c.Y36(es,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([xf]),c.qOj,c.TTD]}),n})();const _b={provide:Oa,useExisting:(0,c.Gpc)(()=>Sg)};let Sg=(()=>{class n extends Oa{constructor(t,r,s,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function bf(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===so?t=u:function Ed(n){return Object.getPrototypeOf(n.constructor)===Ro}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function If(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function vd(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(di,13),c.Y36(Cr,10),c.Y36(es,10),c.Y36(kr,10),c.Y36(Af,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([_b]),c.qOj,c.TTD]}),n})(),Tb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[bd]}),n})(),jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Tb]}),n})(),Mg=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Af,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Tb]}),n})();class Og extends Er{constructor(e,t,r){super(md(t),Hu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){_d(this,0,e),e.forEach((r,s)=>{yd(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Pw(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Sd=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let u={};return Pw(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new As(s,u)}record(t,r=null){const s=this._reduceControls(t);return new Gu(s,r)}control(t,r,s){let u={};return this.useNonNullable?(Pw(r)?u=r:(u.validators=r,u.asyncValidators=s),new O(t,{...u,nonNullable:!0})):new O(t,r,s)}array(t,r,s){const u=t.map(d=>this._createControl(d));return new Og(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof O||t instanceof Er?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:Mg}),n})();var En=R(7579);class ns extends En.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ua=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var sl=R(4671),kw=R(9672);function ol(...n){const e=(0,bs.yG)(n),t=(0,bs.jO)(n),{args:r,keys:s}=zc(n);if(0===r.length)return(0,Xt.D)([],e);const u=new Zr.y(function Jy(n,e,t=sl.y){return r=>{Rw(e,()=>{const{length:s}=n,u=new Array(s);let d=s,m=s;for(let v=0;v<s;v++)Rw(e,()=>{const E=(0,Xt.D)(n[v],e);let A=!1;E.subscribe((0,_n.x)(r,P=>{u[v]=P,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>Ty(s,d):sl.y));return t?u.pipe(nf(t)):u}function Rw(n,e,t){n?(0,kw.f)(t,n,e):e()}var Of=R(8189);function Xy(...n){return function Ab(){return(0,Of.J)(1)}()((0,Xt.D)(n,(0,bs.yG)(n)))}function Fw(n){return new Zr.y(e=>{(0,Zc.Xf)(n()).subscribe(e)})}var xb=R(9635);function Ad(n,e){const t=(0,Wr.m)(n)?n:()=>n,r=s=>s.error(t());return new Zr.y(e?s=>e.schedule(r,0,s):r)}var Ba=R(515),e_=R(727);function Pf(){return(0,Pn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,_n.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Lw extends Zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Pn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new e_.w0;const t=this.getSubject();e.add(this.source.subscribe((0,_n.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=e_.w0.EMPTY)}return e}refCount(){return Pf()(this)}}function Gn(n,e){return(0,Pn.e)((t,r)=>{let s=null,u=0,d=!1;const m=()=>d&&!s&&r.complete();t.subscribe((0,_n.x)(r,v=>{s?.unsubscribe();let E=0;const A=u++;(0,Zc.Xf)(n(v,A)).subscribe(s=(0,_n.x)(r,P=>r.next(e?e(v,P,A,E++):P),()=>{s=null,m()}))},()=>{d=!0,m()}))})}function xd(n){return n<=0?()=>Ba.E:(0,Pn.e)((e,t)=>{let r=0;e.subscribe((0,_n.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Nf(...n){const e=(0,bs.yG)(n);return(0,Pn.e)((t,r)=>{(e?Xy(n,t,e):Xy(n,t)).subscribe(r)})}function $o(n){return(0,Pn.e)((e,t)=>{let r=!1;e.subscribe((0,_n.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function t_(n=Vw){return(0,Pn.e)((e,t)=>{let r=!1;e.subscribe((0,_n.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Vw(){return new Ua}function ja(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wr((s,u)=>n(s,u,r)):sl.y,xd(1),t?$o(e):t_(()=>new Ua))}var Qr=R(8505);function uo(n){return(0,Pn.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,_n.x)(t,void 0,void 0,d=>{u=(0,Zc.Xf)(n(d,uo(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Mb(n,e,t,r,s){return(u,d)=>{let m=t,v=e,E=0;u.subscribe((0,_n.x)(d,A=>{const P=E++;v=m?n(v,A,P):(m=!0,A),r&&d.next(v)},s&&(()=>{m&&d.next(v),d.complete()})))}}function Md(n,e){return(0,Pn.e)(Mb(n,e,arguments.length>=2,!0))}function Pg(n){return n<=0?()=>Ba.E:(0,Pn.e)((e,t)=>{let r=[];e.subscribe((0,_n.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function n_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wr((s,u)=>n(s,u,r)):sl.y,Pg(1),t?$o(e):t_(()=>new Ua))}function Od(n){return(0,Pn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ut="primary",Pd=Symbol("RouteTitle");class i_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function al(n){return new i_(n)}function s_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))s[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Ho(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!o_(n[s],e[s]))return!1;return!0}function o_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Bw(n){return Array.prototype.concat.apply([],n)}function jw(n){return n.length>0?n[n.length-1]:null}function br(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function $a(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Xt.D)(Promise.resolve(n)):tt(n)}const Pb={exact:function xs(n,e,t){if(!cl(n.segments,e.segments)||!Ng(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!xs(n.children[r],e.children[r],t))return!1;return!0},subset:u_},a_={exact:function Nb(n,e){return Ho(n,e)},subset:function kb(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>o_(n[t],e[t]))},ignored:()=>!0};function Gw(n,e,t){return Pb[t.paths](n.root,e.root,t.matrixParams)&&a_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function u_(n,e,t){return zw(n,e,e.segments,t)}function zw(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!cl(s,t)||e.hasChildren()||!Ng(s,t,r))}if(n.segments.length===t.length){if(!cl(n.segments,t)||!Ng(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!u_(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(cl(n.segments,s)&&Ng(n.segments,s,r)&&n.children[Ut])&&zw(n.children[Ut],e,u,r)}}function Ng(n,e,t){return e.every((r,s)=>a_[t](n[s].parameters,r.parameters))}class ul{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=al(this.queryParams)),this._queryParamMap}toString(){return qw.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,br(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rf(this)}}class Nd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=al(this.parameters)),this._parameterMap}toString(){return Vb(this)}}function cl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let xt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new kg},providedIn:"root"}),n})();class kg{parse(e){const t=new XA(e);return new ul(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ff(e.root,!0)}`,r=function Yw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Lf(t)}=${Lf(s)}`).join("&"):`${Lf(t)}=${Lf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Lb(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qw=new kg;function Rf(n){return n.segments.map(e=>Vb(e)).join("/")}function Ff(n,e){if(!n.hasChildren())return Rf(n);if(e){const t=n.children[Ut]?Ff(n.children[Ut],!1):"",r=[];return br(n.children,(s,u)=>{u!==Ut&&r.push(`${u}:${Ff(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Fb(n,e){let t=[];return br(n.children,(r,s)=>{s===Ut&&(t=t.concat(e(r,s)))}),br(n.children,(r,s)=>{s!==Ut&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Ut?[Ff(n.children[Ut],!1)]:[`${s}:${Ff(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ut]?`${Rf(n)}/${t[0]}`:`${Rf(n)}/(${t.join("//")})`}}function Zw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lf(n){return Zw(n).replace(/%3B/gi,";")}function Rg(n){return Zw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fg(n){return decodeURIComponent(n)}function Ww(n){return Fg(n.replace(/\+/g,"%20"))}function Vb(n){return`${Rg(n.path)}${function Kw(n){return Object.keys(n).map(e=>`;${Rg(e)}=${Rg(n[e])}`).join("")}(n.parameters)}`}const ll=/^[^\/()?;=#]+/;function Lg(n){const e=n.match(ll);return e?e[0]:""}const c_=/^[^=?&#]+/,Ub=/^[^&#]+/;class XA{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ut]=new $t(e,t)),r}parseSegment(){const e=Lg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new Nd(Fg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Lg(this.remaining);s&&(r=s,this.capture(r))}e[Fg(t)]=Fg(r)}parseQueryParam(e){const t=function l_(n){const e=n.match(c_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function JA(n){const e=n.match(Ub);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=Ww(t),u=Ww(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lg(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new c.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ut);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Ut]:new $t([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function Qw(n){return n.segments.length>0?new $t([],{[Ut]:n}):n}function Vg(n){const e={};for(const r of Object.keys(n.children)){const u=Vg(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Jw(n){if(1===n.numberOfChildren&&n.children[Ut]){const e=n.children[Ut];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function kd(n){return n instanceof ul}function Ug(n,e,t,r,s){if(0===t.length)return Fd(e.root,e.root,e.root,r,s);const u=function nC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new tC(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return br(u.outlets,(v,E)=>{m[E]="string"==typeof v?v.split("/"):v}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new tC(t,e,r)}(t);return u.toRoot()?Fd(e.root,e.root,new $t([],{}),r,s):function d(v){const E=function jb(n,e,t,r){if(n.isAbsolute)return new Ld(e.root,!0,0);if(-1===r)return new Ld(t,t===e.root,0);return function h_(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new c.vHH(4005,!1);s=r.segments.length}return new Ld(r,!1,s-u)}(t,r+(Uf(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=E.processChildren?Bg(E.segmentGroup,E.index,u.commands):Bf(E.segmentGroup,E.index,u.commands);return Fd(e.root,E.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function Uf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rd(n){return"object"==typeof n&&null!=n&&n.outlets}function Fd(n,e,t,r,s){let d,u={};r&&br(r,(v,E)=>{u[E]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),d=n===e?t:eC(n,e,t);const m=Qw(Vg(d));return new ul(m,u,s)}function eC(n,e,t){const r={};return br(n.children,(s,u)=>{r[u]=s===e?t:eC(s,e,t)}),new $t(n.segments,r)}class tC{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Uf(r[0]))throw new c.vHH(4003,!1);const s=r.find(Rd);if(s&&s!==jw(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ld{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Bf(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return Bg(n,e,t);const r=function f_(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],m=t[r];if(Rd(m))break;const v=`${m}`,E=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&E&&"object"==typeof E&&void 0===E.outlets){if(!g_(v,E,d))return u;r+=2}else{if(!g_(v,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new $t(n.segments.slice(0,r.pathIndex),{});return u.children[Ut]=new $t(n.segments.slice(r.pathIndex),n.children),Bg(u,0,s)}return r.match&&0===s.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?p_(n,e,t):r.match?Bg(n,0,s):p_(n,e,t)}function Bg(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function iC(n){return Rd(n[0])?n[0].outlets:{[Ut]:n}}(t),s={};return br(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[d]=Bf(n.children[d],e,u))}),br(n.children,(u,d)=>{void 0===r[d]&&(s[d]=u)}),new $t(n.segments,s)}}function p_(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Rd(u)){const v=ex(u.outlets);return new $t(r,v)}if(0===s&&Uf(t[0])){r.push(new Nd(n.segments[e].path,dl(t[0]))),s++;continue}const d=Rd(u)?u.outlets[Ut]:`${u}`,m=s<t.length-1?t[s+1]:null;d&&m&&Uf(m)?(r.push(new Nd(d,dl(m))),s+=2):(r.push(new Nd(d,{})),s++)}return new $t(r,{})}function ex(n){const e={};return br(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=p_(new $t([],{}),0,t))}),e}function dl(n){const e={};return br(n,(t,r)=>e[r]=`${t}`),e}function g_(n,e,t){return n==t.path&&Ho(e,t.parameters)}class Go{constructor(e,t){this.id=e,this.url=t}}class Vd extends Go{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jr extends Go{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jf extends Go{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sC extends Go{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class m_ extends Go{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ha extends Go{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y_ extends Go{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oC extends Go{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class __ extends Go{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tx{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aC{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nx{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $g{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $b{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=C_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=C_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=E_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return E_(e,this._root).map(t=>t.value)}}function C_(n,e){if(n===e.value)return e;for(const t of e.children){const r=C_(n,t);if(r)return r}return null}function E_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=E_(n,t);if(r.length)return r.unshift(e),r}return[]}class Ga{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ud(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class I_ extends $b{constructor(e,t){super(e),this.snapshot=t,cC(this,e)}toString(){return this.snapshot.toString()}}function Hb(n,e){const t=function Gb(n,e){const d=new Gg([],{},{},"",{},Ut,e,null,n.root,-1,{});return new zg("",new Ga(d,[]))}(n,e),r=new ns([new Nd("",{})]),s=new ns({}),u=new ns({}),d=new ns({}),m=new ns(""),v=new Bd(r,s,d,m,u,Ut,e,t.root);return v.snapshot=t.root,new I_(new Ga(v,[]),t)}class Bd{constructor(e,t,r,s,u,d,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,ft.U)(E=>E[Pd]))??tt(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>al(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>al(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function b_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function uC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Gg{constructor(e,t,r,s,u,d,m,v,E,A,P,V){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[Pd],this.routeConfig=v,this._urlSegment=E,this._lastPathIndex=A,this._correctedLastPathIndex=V??A,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=al(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=al(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zg extends $b{constructor(e,t){super(t),this.url=e,cC(this,t)}toString(){return zb(this._root)}}function cC(n,e){e.value._routerState=n,e.children.forEach(t=>cC(n,t))}function zb(n){const e=n.children.length>0?` { ${n.children.map(zb).join(", ")} } `:"";return`${n.value}${e}`}function lC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ho(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ho(e.params,t.params)||n.params.next(t.params),function kf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ho(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ho(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function dC(n,e){const t=Ho(n.params,e.params)&&function Rb(n,e){return cl(n,e)&&n.every((t,r)=>Ho(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||dC(n.parent,e.parent))}function qg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function ix(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return qg(n,r,s);return qg(n,r)})}(n,e,t);return new Ga(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>qg(n,m)),d}}const r=function sx(n){return new Bd(new ns(n.url),new ns(n.params),new ns(n.queryParams),new ns(n.fragment),new ns(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>qg(n,u));return new Ga(r,s)}}const hC="ngNavigationCancelingError";function qb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=kd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=za(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function za(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[hC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Zg(n){return fC(n)&&kd(n.url)}function fC(n){return n&&n[hC]}class pC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new hl,this.attachRef=null}}let hl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new pC,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $f=!1;let Hf=(()=>{class n{constructor(t,r,s,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||Ut,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,$f);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,$f);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,$f);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,$f);this._activatedRoute=t;const s=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new Zb(t,m,s.injector);if(r&&function Zu(n){return!!n.resolveComponentFactory}(r)){const E=r.resolveComponentFactory(d);this.activated=s.createComponent(E,s.length,v)}else this.activated=s.createComponent(d,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(hl),c.Y36(c.s_b),c.$8M("name"),c.Y36(c.sBO),c.Y36(c.lqb))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Zb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Bd?this.route:e===hl?this.childContexts:this.parent.get(e,t)}}let Wg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[Hf],encapsulation:2}),n})();function gC(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gf(n){const e=n.children&&n.children.map(Gf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ut&&(t.component=Wg),t}function Ti(n){return n.outlet||Ut}function T_(n,e){const t=n.filter(r=>Ti(r)===e);return t.push(...n.filter(r=>Ti(r)!==e)),t}function Gd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class A_{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Ud(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),br(s,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Ud(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Ud(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Ud(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new v_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new jg(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(lC(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),lC(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Gd(s.snapshot),v=m?.get(c._Vd)??null;d.attachRef=null,d.route=s,d.resolver=v,d.injector=m,d.outlet&&d.outlet.activateWith(s,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class x_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zd{constructor(e,t){this.component=e,this.route=t}}function Kb(n,e,t){const r=n._root;return Zd(r,e?e._root:null,t,[r.value])}function qd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function Zd(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ud(e);return n.children.forEach(d=>{(function Yb(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function mC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!cl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!cl(n.url,e.url)||!Ho(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dC(n,e)||!Ho(n.queryParams,e.queryParams);default:return!dC(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new x_(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Zd(n,e,u.component?m?m.children:null:t,r,s),v&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new zd(m.outlet.component,d))}else d&&Wd(e,m,s),s.canActivateChecks.push(new x_(r)),Zd(n,null,u.component?m?m.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),br(u,(d,m)=>Wd(d,t.getContext(m),s)),s}function Wd(n,e,t){const r=Ud(n),s=n.value;br(r,(u,d)=>{Wd(u,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new zd(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function zf(n){return"function"==typeof n}function O_(n){return n instanceof Ua||"EmptyError"===n?.name}const Kg=Symbol("INITIAL_VALUE");function fl(){return Gn(n=>ol(n.map(e=>e.pipe(xd(1),Nf(Kg)))).pipe((0,ft.U)(e=>{for(const t of e)if(!0!==t){if(t===Kg)return Kg;if(!1===t||t instanceof ul)return t}return!0}),wr(e=>e!==Kg),xd(1)))}function CC(n){return(0,xb.z)((0,Qr.b)(e=>{if(kd(e))throw qb(0,e)}),(0,ft.U)(e=>!0===e))}const EC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function N_(n,e,t,r,s){const u=k_(n,e,t);return u.matched?function sD(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?tt(s.map(d=>{const m=qd(d,n);return $a(function M_(n){return n&&zf(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(fl(),CC()):tt(!0)}(r=gC(e,r),e,t).pipe((0,ft.U)(d=>!0===d?u:{...EC})):tt(u)}function k_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...EC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||s_)(t,n,e);if(!s)return{...EC};const u={};br(s.posParams,(m,v)=>{u[v]=m.path});const d=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:s.posParams??{}}}function Yg(n,e,t,r,s="corrected"){if(t.length>0&&function aD(n,e,t){return t.some(r=>pl(n,e,r)&&Ti(r)!==Ut)}(n,t,r)){const d=new $t(e,function R_(n,e,t,r){const s={};s[Ut]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ti(u)!==Ut){const d=new $t([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[Ti(u)]=d}return s}(n,e,r,new $t(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function uD(n,e,t){return t.some(r=>pl(n,e,r))}(n,t,r)){const d=new $t(n.segments,function oD(n,e,t,r,s,u){const d={};for(const m of r)if(pl(n,t,m)&&!s[Ti(m)]){const v=new $t([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Ti(m)]=v}return{...s,...d}}(n,e,t,r,n.children,s));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new $t(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function pl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Qg(n,e,t,r){return!!(Ti(n)===r||r!==Ut&&pl(e,t,n))&&("**"===n.path||k_(e,n,t).matched)}function qf(n,e,t){return 0===e.length&&!n.children[t]}const F_=!1;class Kd{constructor(e){this.segmentGroup=e||null}}class cD{constructor(e){this.urlTree=e}}function Yd(n){return Ad(new Kd(n))}function L_(n){return Ad(new cD(n))}class qa{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=Yg(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ut).pipe((0,ft.U)(u=>this.createUrlTree(Vg(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(uo(u=>{if(u instanceof cD)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Kd?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ut).pipe((0,ft.U)(s=>this.createUrlTree(Vg(s),e.queryParams,e.fragment))).pipe(uo(s=>{throw s instanceof Kd?this.noMatchError(s):s}))}noMatchError(e){return new c.vHH(4002,F_)}createUrlTree(e,t,r){const s=Qw(e);return new ul(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(u=>new $t([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Xt.D)(s).pipe(Ji(u=>{const d=r.children[u],m=T_(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,ft.U)(v=>({segment:v,outlet:u})))}),Md((u,d)=>(u[d.outlet]=d.segment,u),{}),n_())}expandSegment(e,t,r,s,u,d){return(0,Xt.D)(r).pipe(Ji(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,d).pipe(uo(E=>{if(E instanceof Kd)return tt(null);throw E}))),ja(m=>!!m),uo((m,v)=>{if(O_(m))return qf(t,s,u)?tt(new $t([],{})):Yd(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,d,m){return Qg(s,t,u,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d):Yd(t):Yd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?L_(u):this.lineralizeSegments(r,u).pipe((0,un.z)(d=>{const m=new $t(d,{});return this.expandSegment(e,m,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){const{matched:m,consumedSegments:v,remainingSegments:E,positionalParamSegments:A}=k_(t,s,u);if(!m)return Yd(t);const P=this.applyRedirectCommands(v,s.redirectTo,A);return s.redirectTo.startsWith("/")?L_(P):this.lineralizeSegments(s,P).pipe((0,un.z)(V=>this.expandSegment(e,t,r,V.concat(E),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=gC(r,e),r.loadChildren?(r._loadedRoutes?tt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ft.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new $t(s,{})))):tt(new $t(s,{}))):N_(t,r,s,e).pipe(Gn(({matched:d,consumedSegments:m,remainingSegments:v})=>d?this.getChildConfig(e=r._injector??e,r,s).pipe((0,un.z)(A=>{const P=A.injector??e,V=A.routes,{segmentGroup:z,slicedSegments:ee}=Yg(t,m,v,V),Me=new $t(z.segments,z.children);if(0===ee.length&&Me.hasChildren())return this.expandChildren(P,V,Me).pipe((0,ft.U)(Pt=>new $t(m,Pt)));if(0===V.length&&0===ee.length)return tt(new $t(m,{}));const Pe=Ti(r)===u;return this.expandSegment(P,Me,V,ee,Pe?Ut:u,!0).pipe((0,ft.U)(Tt=>new $t(m.concat(Tt.segments),Tt.children)))})):Yd(t)))}getChildConfig(e,t,r){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function P_(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?tt(!0):tt(s.map(d=>{const m=qd(d,n);return $a(function yC(n){return n&&zf(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(fl(),CC())}(e,t,r).pipe((0,un.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Qr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function bC(n){return Ad(za(F_,3))}())):tt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return tt(r);if(s.numberOfChildren>1||!s.children[Ut])return Ad(new c.vHH(4e3,F_));s=s.children[Ut]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ul(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return br(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return br(t.children,(m,v)=>{d[v]=this.createSegmentGroup(e,m,r,s)}),new $t(u,d)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new c.vHH(4001,F_);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Zf{}class DC{constructor(e,t,r,s,u,d,m,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=v}recognize(){const e=Yg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ut).pipe((0,ft.U)(t=>{if(null===t)return null;const r=new Gg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ut,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Ga(r,t),u=new zg(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=b_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Xt.D)(Object.keys(r.children)).pipe(Ji(s=>{const u=r.children[s],d=T_(t,s);return this.processSegmentGroup(e,d,u,s)}),Md((s,u)=>s&&u?(s.push(...u),s):null),function r_(n,e=!1){return(0,Pn.e)((t,r)=>{let s=0;t.subscribe((0,_n.x)(r,u=>{const d=n(u,s++);(d||e)&&r.next(u),!d&&r.complete()}))})}(s=>null!==s),$o(null),n_(),(0,ft.U)(s=>{if(null===s)return null;const u=TC(s);return function dD(n){n.sort((e,t)=>e.value.outlet===Ut?-1:t.value.outlet===Ut?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,Xt.D)(t).pipe(Ji(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,s,u)),ja(d=>!!d),uo(d=>{if(O_(d))return qf(r,s,u)?tt([]):tt(null);throw d}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!Qg(t,r,s,u))return tt(null);let d;if("**"===t.path){const m=s.length>0?jw(s).parameters:{},v=fD(r)+s.length;d=tt({snapshot:new Gg(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xC(t),Ti(t),t.component??t._loadedComponent??null,t,SC(r),v,MC(t),v),consumedSegments:[],remainingSegments:[]})}else d=N_(r,t,s,e).pipe((0,ft.U)(({matched:m,consumedSegments:v,remainingSegments:E,parameters:A})=>{if(!m)return null;const P=fD(r)+v.length;return{snapshot:new Gg(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xC(t),Ti(t),t.component??t._loadedComponent??null,t,SC(r),P,MC(t),P),consumedSegments:v,remainingSegments:E}}));return d.pipe(Gn(m=>{if(null===m)return tt(null);const{snapshot:v,consumedSegments:E,remainingSegments:A}=m;e=t._injector??e;const P=t._loadedInjector??e,V=function hD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:ee}=Yg(r,E,A,V.filter(Pe=>void 0===Pe.redirectTo),this.relativeLinkResolution);if(0===ee.length&&z.hasChildren())return this.processChildren(P,V,z).pipe((0,ft.U)(Pe=>null===Pe?null:[new Ga(v,Pe)]));if(0===V.length&&0===ee.length)return tt([new Ga(v,[])]);const Me=Ti(t)===u;return this.processSegment(P,V,z,ee,Me?Ut:u).pipe((0,ft.U)(Pe=>null===Pe?null:[new Ga(v,Pe)]))}))}}function Wf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function TC(n){const e=[],t=new Set;for(const r of n){if(!Wf(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=TC(r.children);e.push(new Ga(r.value,s))}return e.filter(r=>!t.has(r))}function SC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function fD(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function xC(n){return n.data||{}}function MC(n){return n.resolve||{}}function PC(n){return"string"==typeof n.title||null===n.title}function $_(n){return Gn(e=>{const t=n(e);return t?(0,Xt.D)(t).pipe((0,ft.U)(()=>e)):tt(e)})}let NC=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Ut);return r}getResolvedTitleForRoute(t){return t.data[Pd]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(kC)},providedIn:"root"}),n})(),kC=(()=>{class n extends NC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Yi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ml{}class Kf extends class hx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Xg=new c.OlP("",{providedIn:"root",factory:()=>({})}),G_=new c.OlP("ROUTES");let Ms=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=$a(t.loadComponent()).pipe((0,Qr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Od(()=>{this.componentLoaders.delete(t)})),s=new Lw(r,()=>new En.x).pipe(Pf());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ft.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,E,A=!1;Array.isArray(m)?E=m:(v=m.create(t).injector,E=Bw(v.get(G_,[],c.XFs.Self|c.XFs.Optional)));return{routes:E.map(Gf),injector:v}}),Od(()=>{this.childrenLoaders.delete(r)})),d=new Lw(u,()=>new En.x).pipe(Pf());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return $a(t()).pipe((0,un.z)(r=>r instanceof c.YKP||Array.isArray(r)?tt(r):(0,Xt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3),c.LFG(c.Sil))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Yf{}class hi{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function tm(n){throw n}function Os(n,e,t){return e.parse("/")}const z_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function yl(){const n=(0,c.f3M)(xt),e=(0,c.f3M)(hl),t=(0,c.f3M)(Te),r=(0,c.f3M)(c.zs3),s=(0,c.f3M)(c.Sil),u=(0,c.f3M)(G_,{optional:!0})??[],d=(0,c.f3M)(Xg,{optional:!0})??{},m=(0,c.f3M)(kC),v=(0,c.f3M)(NC,{optional:!0}),E=(0,c.f3M)(Yf,{optional:!0}),A=(0,c.f3M)(ml,{optional:!0}),P=new tr(null,n,e,t,r,s,Bw(u));return E&&(P.urlHandlingStrategy=E),A&&(P.routeReuseStrategy=A),P.titleStrategy=v??m,function Jd(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,P),P}let tr=(()=>{class n{constructor(t,r,s,u,d,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new En.x,this.errorHandler=tm,this.malformedUriErrorHandler=Os,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>tt(void 0),this.urlHandlingStrategy=new hi,this.routeReuseStrategy=new Kf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Ms),this.configLoader.onLoadEndListener=V=>this.triggerEvent(new aC(V)),this.configLoader.onLoadStartListener=V=>this.triggerEvent(new tx(V)),this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const P=d.get(c.R0b);this.isNgZoneEnabled=P instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Hw(){return new ul(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hb(this.currentUrlTree,this.rootComponentType),this.transitions=new ns({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(wr(s=>0!==s.id),(0,ft.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Gn(s=>{let u=!1,d=!1;return tt(s).pipe((0,Qr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Gn(m=>{const v=this.browserUrlTree.toString(),E=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return _l(m.source)&&(this.browserUrlTree=m.extractedUrl),tt(m).pipe(Gn(P=>{const V=this.transitions.getValue();return r.next(new Vd(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),V!==this.transitions.getValue()?Ba.E:Promise.resolve(P)}),function Jg(n,e,t,r){return Gn(s=>function V_(n,e,t,r,s){return new qa(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,ft.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qr.b)(P=>{this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects},s.urlAfterRedirects=P.urlAfterRedirects}),function OC(n,e,t,r,s,u){return(0,un.z)(d=>function U_(n,e,t,r,s,u,d="emptyOnly",m="legacy"){return new DC(n,e,t,r,s,d,m,u).recognize().pipe(Gn(v=>null===v?function lD(n){return new Zr.y(e=>e.error(n))}(new Zf):tt(v)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,s,u).pipe((0,ft.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qr.b)(P=>{if(s.targetSnapshot=P.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!P.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl);this.setBrowserUrl(z,P)}this.browserUrlTree=P.urlAfterRedirects}const V=new m_(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);r.next(V)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:z,source:ee,restoredState:Me,extras:Pe}=m,st=new Vd(V,this.serializeUrl(z),ee,Me);r.next(st);const Tt=Hb(z,this.rootComponentType).snapshot;return tt(s={...m,targetSnapshot:Tt,urlAfterRedirects:z,extras:{...Pe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Ba.E}),(0,Qr.b)(m=>{const v=new Ha(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,ft.U)(m=>s={...m,guards:Kb(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function tD(n,e){return(0,un.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?tt({...t,guardsResult:!0}):function _C(n,e,t,r){return(0,Xt.D)(n).pipe((0,un.z)(s=>function zo(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?tt(u.map(m=>{const v=Gd(e)??s,E=qd(m,v);return $a(function Jb(n){return n&&zf(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):v.runInContext(()=>E(n,e,t,r))).pipe(ja())})).pipe(fl()):tt(!0)}(s.component,s.route,t,e,r)),ja(s=>!0!==s,!0))}(d,r,s,n).pipe((0,un.z)(m=>m&&function rs(n){return"boolean"==typeof n}(m)?function nD(n,e,t,r){return(0,Xt.D)(e).pipe(Ji(s=>Xy(function vC(n,e){return null!==n&&e&&e(new nx(n)),tt(!0)}(s.route.parent,r),function rD(n,e){return null!==n&&e&&e(new $g(n)),tt(!0)}(s.route,r),function iD(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function cx(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Fw(()=>tt(d.guards.map(v=>{const E=Gd(d.node)??t,A=qd(v,E);return $a(function lx(n){return n&&zf(n.canActivateChild)}(A)?A.canActivateChild(r,n):E.runInContext(()=>A(r,n))).pipe(ja())})).pipe(fl())));return tt(u).pipe(fl())}(n,s.path,t),function wC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const s=r.map(u=>Fw(()=>{const d=Gd(e)??t,m=qd(u,d);return $a(function Qb(n){return n&&zf(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(ja())}));return tt(s).pipe(fl())}(n,s.route,t))),ja(s=>!0!==s,!0))}(r,u,n,e):tt(m)),(0,ft.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Qr.b)(m=>{if(s.guardsResult=m.guardsResult,kd(m.guardsResult))throw qb(0,m.guardsResult);const v=new y_(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),wr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),$_(m=>{if(m.guards.canActivateChecks.length)return tt(m).pipe((0,Qr.b)(v=>{const E=new oC(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(E)}),Gn(v=>{let E=!1;return tt(v).pipe(function B_(n,e){return(0,un.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return tt(t);let u=0;return(0,Xt.D)(s).pipe(Ji(d=>function pD(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!PC(s)&&(u[Pd]=s.title),function j_(n,e,t,r){const s=function gD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return tt({});const u={};return(0,Xt.D)(s).pipe((0,un.z)(d=>function mD(n,e,t,r){const s=Gd(e)??r,u=qd(n,s);return $a(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ja(),(0,Qr.b)(m=>{u[d]=m}))),Pg(1),function Uw(n){return(0,ft.U)(()=>n)}(u),uo(d=>O_(d)?Ba.E:Ad(d)))}(u,n,e,r).pipe((0,ft.U)(d=>(n._resolvedData=d,n.data=b_(n,t).resolve,s&&PC(s)&&(n.data[Pd]=s.title),null)))}(d.route,r,n,e)),(0,Qr.b)(()=>u++),Pg(1),(0,un.z)(d=>u===s.length?tt(t):Ba.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qr.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Qr.b)(v=>{const E=new __(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(E)}))}),$_(m=>{const v=E=>{const A=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,Qr.b)(P=>{E.component=P}),(0,ft.U)(()=>{})));for(const P of E.children)A.push(...v(P));return A};return ol(v(m.targetSnapshot.root)).pipe($o(),xd(1))}),$_(()=>this.afterPreactivation()),(0,ft.U)(m=>{const v=function rx(n,e,t){const r=qg(n,e._root,t?t._root:void 0);return new I_(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:v}}),(0,Qr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new A_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Qr.b)({next(){u=!0},complete(){u=!0}}),Od(()=>{u||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),uo(m=>{if(d=!0,fC(m)){Zg(m)||(this.navigated=!0,this.restoreHistory(s,!0));const v=new jf(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(v),Zg(m)){const E=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_l(s.source)};this.scheduleNavigation(E,"imperative",null,A,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new sC(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(v);try{s.resolve(this.errorHandler(m))}catch(E){s.reject(E)}}return Ba.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Gf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:v}=r,E=s||this.routerState.root,A=v?this.currentUrlTree.fragment:d;let P=null;switch(m){case"merge":P={...this.currentUrlTree.queryParams,...u};break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=u||null}return null!==P&&(P=this.removeEmptyProps(P)),Ug(E,this.currentUrlTree,t,P,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=kd(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Xd(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...z_}:!1===r?{...Qd}:r,kd(t))return Gw(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Gw(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Jr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,d){if(this.disposed)return Promise.resolve(!1);let m,v,E;d?(m=d.resolve,v=d.reject,E=d.promise):E=new Promise((V,z)=>{m=V,v=z});const A=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),P=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):P=0,this.setTransition({id:A,targetPageId:P,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new jf(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:function(){return yl()},providedIn:"root"}),n})();function _l(n){return"imperative"!==n}let Za=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new En.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(tr),c.Y36(Bd),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})();class q_{}let FC=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(wr(t=>t instanceof Jr),Ji(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,c.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Xt.D)(s).pipe((0,Of.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):tt(null);const u=s.pipe((0,un.z)(d=>null===d?tt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,Xt.D)([u,d]).pipe((0,Of.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(tr),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(q_),c.LFG(Ms))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nm=new c.OlP("");let Z_=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jr&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Hg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function th(n,e){return{\u0275kind:n,\u0275providers:e}}function rm(n){return[{provide:G_,multi:!0,useValue:n}]}function W_(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(tr),s=n.get(im);1===n.get(Jf)&&r.initialNavigation(),n.get(am,null,c.XFs.Optional)?.setUpPreloading(),n.get(nm,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const im=new c.OlP("",{factory:()=>new En.x}),Jf=new c.OlP("",{providedIn:"root",factory:()=>1});const am=new c.OlP("");function ED(n){return th(0,[{provide:am,useExisting:FC},{provide:q_,useExisting:n}])}const Y_=new c.OlP("ROUTER_FORROOT_GUARD"),Q_=[Te,{provide:xt,useClass:kg},{provide:tr,useFactory:yl},hl,{provide:Bd,useFactory:function LC(n){return n.routerState.root},deps:[tr]},Ms];function VC(){return new c.PXZ("Router",tr)}let J_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Q_,[],rm(t),{provide:Y_,useFactory:BC,deps:[[tr,new c.FiY,new c.tp0]]},{provide:Xg,useValue:r||{}},r?.useHash?{provide:ge,useClass:nt}:{provide:ge,useClass:Ye},{provide:nm,useFactory:()=>{const n=(0,c.f3M)(tr),e=(0,c.f3M)(cu),t=(0,c.f3M)(Xg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Z_(n,e,t)}},r?.preloadingStrategy?ED(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:VC},r?.initialNavigation?jC(r):[],[{provide:ev,useFactory:W_},{provide:c.tb,multi:!0,useExisting:ev}]]}}static forChild(t){return{ngModule:n,providers:[rm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Y_,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Wg]}),n})();function BC(n){return"guarded"}function jC(n){return["disabled"===n.initialNavigation?th(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(tr);return()=>{e.setUpLocationChangeListener()}}},{provide:Jf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?th(2,[{provide:Jf,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(tr),m=e.get(im);(function s(u){e.get(tr).events.pipe(wr(m=>m instanceof Jr||m instanceof jf||m instanceof sC),(0,ft.U)(m=>m instanceof Jr||m instanceof jf&&(0===m.code||1===m.code)&&null),wr(m=>null!==m),xd(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?tt(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const ev=new c.OlP("");var DD=R(5032);function is(n){return(0,Pn.e)((e,t)=>{(0,Zc.Xf)(n).subscribe((0,_n.x)(t,()=>t.complete(),DD.Z)),!t.closed&&e.subscribe(t)})}var Xr_gap_x=12,Xr_gap_y=46,Xr_margin_x=40,Xr_margin_y=50;const Xf_jira={user:"<your jira user>",token:"<your token>"},Xf_firebaseConfig={apiKey:"AIzaSyBgVfJJ6uZIjmW6nT_C7b4cfgiOGur_6Cs",authDomain:"kinesso-project-tracking.firebaseapp.com",projectId:"kinesso-project-tracking",storageBucket:"kinesso-project-tracking.appspot.com",messagingSenderId:"166399580136",appId:"1:166399580136:web:441192dfdd120bdcae365d",measurementId:"G-QES9FQS6BG"};let HC=(()=>{class n{constructor(t){this.http=t,this.credentials=Xf_jira}getEpic(){return this.http.get("https://projects.mbww.com/rest/api/3/issue/AMC-10451",{headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(`${this.credentials.user}:${this.credentials.token}`)}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(to))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ss={undefined:"UNDEFINED",new:"NEW",done:"DONE",progress:"PROGRESS",review:"REVIEW",blocked:"BLOCKED"};let Ku=(()=>{class n{constructor(){this._mvps=new En.x,this.mvps$=this._mvps.asObservable(),this._name=new En.x,this.name$=this._name.asObservable(),this._leader=new En.x,this.leader$=this._leader.asObservable(),this._constraints=new En.x,this.constraints$=this._constraints.asObservable(),this.nodeTree=[],this._nodeTree=new En.x,this.nodeTree$=this._nodeTree.asObservable(),this._treeProgress=new En.x,this.treeProgress$=this._treeProgress.asObservable(),this._isLoadWindowOpen=new En.x,this.isLoadWindowOpen$=this._isLoadWindowOpen.asObservable(),this.isProjectLoaded=!1}getStaticNodeTree(){return this.nodeTree}getConstraints(){return this.constraints}getNodeTree(){return this.nodeTree$}getMVPs(){return this.mvps$}getProgress(){return this.treeProgress$}getProjectName(){return this.name$}getLeader(){return this.leader$}getconstraints(){return this.constraints$}loadFromLocalStorage(){let t=localStorage.getItem("project");if(t){const r=JSON.parse(t);this.loadProject(r)}}loadProject(t,r){r&&(this.people=r),localStorage.setItem("project",JSON.stringify(t)),this._name.next(t.name),this.name=t.name,this._leader.next(t.leader),this.leader=t.leader,this.isProjectLoaded=!0;const s=this.parseProject(t,r||this.people);this.sortDependencies(s.tickets)}parseProject(t,r){return{...t,tickets:t.tickets.map(s=>({...s,assigned:r.find(u=>u.id===s.assigned),parents:s.parents||[],children:[],childrenTree:[],childrenTreeSimple:[],index:0,level:0,childrenWidth:0,enabled:!0,position:{x:0,y:0,offsetX:0},blockedByParents:!1,selected:!1}))}}openLoadWindow(){this._isLoadWindowOpen.next(!0)}isLoadWindowOpen(){return this.isLoadWindowOpen$}sortDependencies(t){let r=this.sortNodes(t);r=this.nodesTree(t),r=this.addChildren(r),r=this.addChildrenWidth(r),r=this.addNewPositions(r),r=this.addParentCoodrs(r),r=this.blockByParents(r),r=this.disableNodes(r),this.nodeTree=r,this._nodeTree.next(r),this.calculateTreeProgress(this.nodeTree),this.extractMVPs(t)}sortNodes(t){return t.sort((r,s)=>r.order<s.order?1:r.order>s.order?-1:0)}nodesTree(t,r=[],s=0){if(0===t.length)return r;let u=t.filter(d=>0===d.parents?.length||void 0===d.parents).map((d,m)=>({...d,level:s,index:m}));return 0===u?.length&&(r.map(d=>{u=u.concat(t.filter(m=>m.parents[0]===d.id).map(m=>({...m,level:s,index:0})))}),u=u.filter((d,m,v)=>m===v.findIndex(E=>E.id===d.id)).map((d,m)=>({...d,index:m}))),r=r.concat(u),t=t.filter(d=>!r.map(m=>m.id).includes(d.id)),s++,this.nodesTree(t,r,s)}addChildren(t){let r=[...t];t.forEach(s=>{s.parents?.forEach(u=>{const d=r.findIndex(m=>m.id===u);r[d].children=r[d]?.children?.concat(s.id),r[d].childrenTree=[r[d].children]})}),r=r.map(s=>({...s,childrenTreeSimple:[t.filter(u=>u.parents[0]===s.id).map(u=>u.id)]}));for(const s of r)this.addChildrenTree(t,s),this.addSimpleChildrenTree(t,s);return r}addChildrenTree(t,r){if(!r)return;const s=this.addTreeChildrenNextLevel(t,r);return 0===s.length?r:(r.childrenTree.push(s),this.addChildrenTree(t,r))}addTreeChildrenNextLevel(t,r){if(!r)return[];const s=r.childrenTree[r.childrenTree.length-1];let u=[];return s&&(u=s.map(d=>t.find(m=>m.id===d)?.childrenTree[0]||[]).flat()),[...new Set(u)]}addSimpleChildrenTree(t,r){if(!r)return;const s=this.addSimpleTreeChildrenNextLevel(t,r);return 0===s.length?r:(r.childrenTreeSimple.push(s),this.addSimpleChildrenTree(t,r))}addSimpleTreeChildrenNextLevel(t,r){if(!r)return[];const s=r.childrenTreeSimple[r.childrenTreeSimple.length-1];return t.filter(u=>s.includes(u.parents[0])).map(u=>u.id)}addChildrenWidth(t){return t.reverse().map(r=>{const s=r.childrenTreeSimple[0].length,u=t.filter(d=>r.childrenTreeSimple[0].includes(d.id)).reduce((d,m)=>d+m.childrenWidth,0);return r.childrenWidth=Math.max(s,u)||1,r}).reverse()}addNewPositions(t){const r=[...t];return r.forEach(s=>{const u=t.find(m=>s.parents[0]===m.id),d=this.previousPositions(s,t,u);s.position.x=(u?.position.x||0)-((u?.childrenWidth||0)-s.childrenWidth)*(190+Xr_gap_x)/2+d,s.position.y=s.level*(95+Xr_gap_y)+Xr_margin_y}),this.constraints=this.calculateconstraints(t),this._constraints.next(this.constraints),r.map(s=>({...s,position:{y:s.position.y,x:s.position.x-this.constraints.left+Xr_margin_x}}))}previousPositions(t,r,s){return t?r.filter(u=>{const m=u.index<t.index;return void 0===s?m&&u.level===t.level:m&&s?.childrenTreeSimple[0].includes(u.id)}).map(u=>u.childrenWidth*(190+Xr_gap_x)).reduce((u,d)=>u+d,0):0}addParentCoodrs(t){return t?.map(r=>({...r,paretsPosition:r.parents?.map(s=>{const u=t.find(d=>d.id===s)?.position;return{id:s,x:u?.x||0,y:u?.y||0}})}))}calculateconstraints(t){return t.reduce((r,s)=>(r.left=s.position.x<r.left?s.position.x:r.left,r.top=s.position.y<r.top?s.position.y:r.top,r.right=s.position.x>r.right?s.position.x:r.right,r.bottom=s.position.y>r.bottom?s.position.y:r.bottom,r),{left:2e5,top:0,right:0,bottom:0})}selectDescendant(t,r,s=[]){if(s[0]){let u=[];if(s[s.length-1].map(d=>{const m=t.find(v=>v.id===d)?.childrenTree[0];m&&(u=u.concat(m))}),0===u.length)return s.flat();s.push([...new Set(u)])}else{const u=t.find(d=>d.id===r);u&&(s[0]=[u.id],s.push(u.childrenTree[0]))}return this.selectDescendant(t,r,s)}blockByParents(t){const r=t.filter(s=>s.status===ss.blocked).map(s=>this.selectDescendant(t,s.id)).flat();return t.map(s=>({...s,blockedByParents:r.includes(s.id)}))}highlightNodes(t,r,s){return t.map(u=>({...u,selected:r.includes(u.id)}))}extractMVPs(t){const r=t.reduce((s,u)=>{if(void 0===u.mvp)return s;const d=u.mvp.name,m=u.mvp.id;return-1===s.findIndex(E=>E.value===u.mvp.id)?[...s,{name:d,value:m}]:s},[]);this._mvps.next(r.sort((s,u)=>s.value>u.value?1:s.value<u.value?-1:0))}calculateTreeProgress(t){const r=t.reduce((s,u)=>{const d=u.estimation,m=u.status,v=s.findIndex(A=>A.name===m)||0,E={name:m,count:(s[v]?.count||0)+1,points:(s[v]?.points||0)+d};return v>-1?s[v]=E:s.push(E),s},[]);this._treeProgress.next(r),localStorage.setItem("progress",JSON.stringify(r))}disableNodes(t){return t.map(r=>({...r,enabled:t.filter(s=>r.parents.includes(s.id)).every(s=>s.status===ss.done)}))}onSelectNode(t){const r=this.selectDescendant(this.nodeTree,t);this.nodeTree=this.highlightNodes(this.nodeTree,r,!0),this._nodeTree.next(this.nodeTree)}onSelectMVP(t){const r=this.nodeTree.filter(d=>d.mvp?.id===t),s=r.map(d=>d.id)||[];this.nodeTree=this.highlightNodes(this.nodeTree,s,!1);const u=""===t?this.nodeTree:r;this._nodeTree.next(this.nodeTree),this.calculateTreeProgress(u)}onSelectStatus(t){const s=this.nodeTree.filter(u=>u.status===t).map(u=>u.id)||[];this.nodeTree=this.highlightNodes(this.nodeTree,s,!1),this._nodeTree.next(this.nodeTree)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tv=(()=>{class n{constructor(){this.currentZoom=0,this._zoom=new ns(this.currentZoom),this.zoom$=this._zoom.asObservable()}setZoom(t){this.currentZoom+=t,this._zoom.next(this.currentZoom)}getZoom(){return this.zoom$}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var wl=R(127),gx=R(4986),fi=R(5813);function nv(){return(0,Pn.e)((n,e)=>{let t,r=!1;n.subscribe((0,_n.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function xD(n,e){return n===e}var ut,fn=R(2011),OD=(R(1277),R(3942)),ye=R(5861),Yu=R(9681),um=R(4859),Wa=R(1877),nn=R(2090),nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ka={},cm=cm||{},Mt=nh||self;function ep(){}function rv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Cl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var os="closure_uid_"+(1e9*Math.random()>>>0),PD=0;function zC(n,e,t){return n.call.apply(n.bind,arguments)}function Zo(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Tn(n,e,t){return(Tn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zC:Zo).apply(null,arguments)}function Ui(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Rr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[s].apply(r,d)}}function Ya(){this.s=this.s,this.o=this.o}Ya.prototype.s=!1,Ya.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function iv(n){Object.prototype.hasOwnProperty.call(n,os)&&n[os]||(n[os]=++PD)}(this)},Ya.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function sv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ZC(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(rv(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let d=0;d<u;d++)n[s+d]=r[d]}else n.push(r)}}function Fr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Fr.prototype.h=function(){this.defaultPrevented=!0};var tp=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",ep,e),Mt.removeEventListener("test",ep,e)}catch{}return n}();function lm(n){return/^[\s\xa0]*$/.test(n)}var ov=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function av(n,e){return n<e?-1:n>e?1:0}function np(){var n=Mt.navigator;return n&&(n=n.userAgent)?n:""}function co(n){return-1!=np().indexOf(n)}function rh(n){return rh[" "](n),n}rh[" "]=ep;var rp,n,WC=co("Opera"),El=co("Trident")||co("MSIE"),dm=co("Edge"),ih=dm||El,hm=co("Gecko")&&!(-1!=np().toLowerCase().indexOf("webkit")&&!co("Edge"))&&!(co("Trident")||co("MSIE"))&&!co("Edge"),uv=-1!=np().toLowerCase().indexOf("webkit")&&!co("Edge");function cv(){var n=Mt.document;return n?n.documentMode:void 0}e:{var fm="",pm=(n=np(),hm?/rv:([^\);]+)(\)|;)/.exec(n):dm?/Edge\/([\d\.]+)/.exec(n):El?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uv?/WebKit\/(\S+)/.exec(n):WC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(pm&&(fm=pm?pm[1]:""),El){var gm=cv();if(null!=gm&&gm>parseFloat(fm)){rp=String(gm);break e}}rp=fm}var KC={};var FD=Mt.document&&El&&(cv()||parseInt(rp,10))||void 0;function ip(n,e){if(Fr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hm){e:{try{rh(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:LD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ip.X.h.call(this)}}Rr(ip,Fr);var LD={2:"touch",3:"pen",4:"mouse"};ip.prototype.h=function(){ip.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sp="closure_listenable_"+(1e6*Math.random()|0),VD=0;function UD(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++VD,this.ba=this.ea=!1}function mm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function dv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function QC(n){const e={};for(const t in n)e[t]=n[t];return e}const JC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function XC(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<JC.length;u++)t=JC[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ym(n){this.src=n,this.g={},this.h=0}function hv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=qC(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(mm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function fv(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}ym.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=fv(n,e,r,s);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new UD(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var pv="closure_lm_"+(1e6*Math.random()|0),_m={};function gv(n,e,t,r,s){if(r&&r.once)return yv(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)gv(n,e[u],t,r,s);return null}return t=Qa(t),n&&n[sp]?n.N(e,t,Cl(r)?!!r.capture:!!r,s):mv(n,e,t,!1,r,s)}function mv(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var d=Cl(s)?!!s.capture:!!s,m=wm(n);if(m||(n[pv]=m=new ym(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function eE(){const e=tE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tp||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(vv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yv(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)yv(n,e[u],t,r,s);return null}return t=Qa(t),n&&n[sp]?n.O(e,t,Cl(r)?!!r.capture:!!r,s):mv(n,e,t,!0,r,s)}function _v(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)_v(n,e[u],t,r,s);else r=Cl(r)?!!r.capture:!!r,t=Qa(t),n&&n[sp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=fv(u=n.g[e],t,r,s))&&(mm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=wm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=fv(e,t,r,s)),(t=-1<n?e[n]:null)&&vm(t))}function vm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[sp])hv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(vv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=wm(e))?(hv(t,n),0==t.h&&(t.src=null,e[pv]=null)):mm(n)}}}function vv(n){return n in _m?_m[n]:_m[n]="on"+n}function tE(n,e){if(n.ba)n=!0;else{e=new ip(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&vm(n),n=t.call(r,e)}return n}function wm(n){return(n=n[pv])instanceof ym?n:null}var Cm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qa(n){return"function"==typeof n?n:(n[Cm]||(n[Cm]=function(e){return n.handleEvent(e)}),n[Cm])}function Lr(){Ya.call(this),this.i=new ym(this),this.P=this,this.I=null}function ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Fr(e,n);else if(e instanceof Fr)e.target=e.target||n;else{var s=e;XC(e=new Fr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];s=Ja(d,r,!0,e)&&s}if(s=Ja(d=e.g=n,r,!0,e)&&s,s=Ja(d,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Ja(d=e.g=t[u],r,!1,e)&&s}function Ja(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,v=d.ha||d.src;d.ea&&hv(n.i,d),s=!1!==m.call(v,r)&&s}}return s&&!r.defaultPrevented}Rr(Lr,Ya),Lr.prototype[sp]=!0,Lr.prototype.removeEventListener=function(n,e,t,r){_v(this,n,e,t,r)},Lr.prototype.M=function(){if(Lr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)mm(t[r]);delete n.g[e],n.h--}}this.I=null},Lr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Lr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nE=Mt.JSON.stringify;function wv(){var n=Il;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ev,Cv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new rE,n=>n.reset());class rE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yx(n){Mt.setTimeout(()=>{throw n},0)}function vt(n,e){Ev||function BD(){var n=Mt.Promise.resolve(void 0);Ev=function(){n.then(jD)}}(),Iv||(Ev(),Iv=!0),Il.add(n,e)}var Iv=!1,Il=new class mx{constructor(){this.h=this.g=null}add(e,t){const r=Cv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function jD(){for(var n;n=wv();){try{n.h.call(n.g)}catch(t){yx(t)}var e=Cv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Iv=!1}function bl(n,e){Lr.call(this),this.h=n||1,this.g=e||Mt,this.j=Tn(this.lb,this),this.l=Date.now()}function sh(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Ln(n,e,t){if("function"==typeof n)t&&(n=Tn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Tn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function $D(n){n.g=Ln(()=>{n.g=null,n.i&&(n.i=!1,$D(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Rr(bl,Lr),(ut=bl.prototype).ca=!1,ut.R=null,ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ei(this,"tick"),this.ca&&(sh(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){bl.X.M.call(this),sh(this),delete this.g};class iE extends Ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$D(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oh(n){Ya.call(this),this.h=n,this.g={}}Rr(oh,Ya);var sE=[];function bv(n,e,t,r){Array.isArray(t)||(t&&(sE[0]=t.toString()),t=sE);for(var s=0;s<t.length;s++){var u=gv(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Dv(n){dv(n.g,function(e,t){this.g.hasOwnProperty(t)&&vm(e)},n),n.g={}}function op(){this.g=!0}function ah(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ap(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<s.length;d++)s[d]=""}}}return nE(t)}catch{return e}}(n,t)+(r?" "+r:"")})}oh.prototype.M=function(){oh.X.M.call(this),Dv(this)},oh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},op.prototype.Aa=function(){this.g=!1},op.prototype.info=function(){};var Dl={},aE=null;function Em(){return aE=aE||new Lr}function up(n){Fr.call(this,Dl.Pa,n)}function uh(n){const e=Em();ei(e,new up(e))}function Tv(n,e){Fr.call(this,Dl.STAT_EVENT,n),this.stat=e}function pi(n){const e=Em();ei(e,new Tv(e,n))}function uE(n,e){Fr.call(this,Dl.Qa,n),this.size=e}function Xa(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}Dl.Pa="serverreachability",Rr(up,Fr),Dl.STAT_EVENT="statevent",Rr(Tv,Fr),Dl.Qa="timingevent",Rr(uE,Fr);var Qu={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},cE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Sv(){}function Av(){}Sv.prototype.h=null;var bm,ch={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Im(){Fr.call(this,"d")}function xv(){Fr.call(this,"c")}function Dm(){}function cp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new oh(this),this.O=_x,this.T=new bl(n=ih?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new zD}function zD(){this.i=null,this.g="",this.h=!1}Rr(Im,Fr),Rr(xv,Fr),Rr(Dm,Sv),Dm.prototype.g=function(){return new XMLHttpRequest},Dm.prototype.i=function(){return{}},bm=new Dm;var _x=45e3,dE={},Mv={};function Tm(n,e,t){n.K=1,n.v=dh(tu(e)),n.s=t,n.P=!0,lp(n,null)}function lp(n,e){n.F=Date.now(),eu(n),n.A=tu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),EE(t.i,"t",r),n.C=0,t=n.l.H,n.h=new zD,n.g=jE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new iE(Tn(n.La,n,n.g),n.N)),bv(n.S,n.g,"readystatechange",n.ib),e=n.H?QC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),uh(),function oE(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),v=0;v<m.length;v++){var E=m[v].split("=");if(1<E.length){var A=E[0];E=E[1];var P=A.split("_");d=2<=P.length&&"type"==P[1]?d+(A+"=")+E+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function hE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function fE(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=pE(n,t),s==Mv){4==e&&(n.o=4,pi(14),r=!1),ah(n.j,n.m,null,"[Incomplete Response]");break}if(s==dE){n.o=4,pi(15),ah(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ah(n.j,n.m,s,null),Ov(n,s)}hE(n)&&s!=Mv&&s!=dE&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zv(e),e.K=!0,pi(11))):(ah(n.j,n.m,t,"[Invalid Chunked Response]"),Tl(n),dp(n))}function pE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Mv:(t=Number(e.substring(t,r)),isNaN(t)?dE:(r+=1)+t>e.length?Mv:(e=e.substr(r,t),n.C=r+t,e))}function eu(n){n.V=Date.now()+n.O,gE(n,n.O)}function gE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xa(Tn(n.gb,n),e)}function Sm(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function dp(n){0==n.l.G||n.I||LE(n.l,n)}function Tl(n){Sm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,sh(n.T),Dv(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ov(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Rv(t.h,n)))if(!n.J&&Rv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Nm(t),yp(t)}qv(t),pi(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=Xa(Tn(t.cb,t),6e3));if(1>=DE(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Sl(t,11)}else if((n.J||t.g==n)&&Nm(t),!lm(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let E=s[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const A=E[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const P=E[4];null!=P&&(t.Ca=P,t.j.info("SVER="+t.Ca));const V=E[5];null!=V&&"number"==typeof V&&0<V&&(t.J=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const z=n.g;if(z){const ee=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var u=r.h;u.g||-1==ee.indexOf("spdy")&&-1==ee.indexOf("quic")&&-1==ee.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(xm(u,u.h),u.h=null))}if(r.D){const Me=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.za=Me,Vn(r.F,r.D,Me))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=BE(r,r.H?r.ka:null,r.V),d.J){TE(r.h,d);var m=d,v=r.J;v&&m.setTimeout(v),m.B&&(Sm(m),eu(m)),r.g=d}else RE(r);0<t.i.length&&_p(t)}else"stop"!=E[0]&&"close"!=E[0]||Sl(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Sl(t,7):zv(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}uh()}catch{}}function yE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(rv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function qD(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(rv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function mE(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(rv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ut=cp.prototype).setTimeout=function(n){this.O=n},ut.ib=function(n){n=n.target;const e=this.L;e&&3==Ko(n)?e.l():this.La(n)},ut.La=function(n){try{if(n==this.g)e:{const A=Ko(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||ih||this.g&&(this.h.h||this.g.fa()||$v(this.g)))){this.I||4!=A||7==e||uh(),Sm(this);var t=this.g.aa();this.Y=t;t:if(hE(this)){var r=$v(this.g);n="";var s=r.length,u=4==Ko(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Tl(this),dp(this);var d="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function HD(n,e,t,r,s,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lm(m)){var E=m;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,pi(12),Tl(this),dp(this);break e}ah(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ov(this,t)}this.P?(fE(this,A,d),ih&&this.i&&3==A&&(bv(this.S,this.T,"tick",this.hb),this.T.start())):(ah(this.j,this.m,d,null),Ov(this,d)),4==A&&Tl(this),this.i&&!this.I&&(4==A?LE(this.l,this):(this.i=!1,eu(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),Tl(this),dp(this)}}}catch{}},ut.hb=function(){if(this.g){var n=Ko(this.g),e=this.g.fa();this.C<e.length&&(Sm(this),fE(this,n,e),this.i&&4!=n&&eu(this))}},ut.cancel=function(){this.I=!0,Tl(this)},ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function GD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(uh(),pi(17)),Tl(this),this.o=2,dp(this)):gE(this,this.V-n)};var lh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ju(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ju){this.h=void 0!==e?e:n.h,hp(this,n.j),this.s=n.s,this.g=n.g,Am(this,n.m),this.l=n.l,e=n.i;var t=new fh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Pv(this,t),this.o=n.o}else n&&(t=String(n).match(lh))?(this.h=!!e,hp(this,t[1]||"",!0),this.s=fp(t[2]||""),this.g=fp(t[3]||"",!0),Am(this,t[4]),this.l=fp(t[5]||"",!0),Pv(this,t[6]||"",!0),this.o=fp(t[7]||"")):(this.h=!!e,this.i=new fh(null,this.h))}function tu(n){return new Ju(n)}function hp(n,e,t){n.j=t?fp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Am(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Pv(n,e,t){e instanceof fh?(n.i=e,function QD(n,e){e&&!n.j&&(Xu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(wE(this,r),EE(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=hh(e,Nv)),n.i=new fh(e,n.h))}function Vn(n,e,t){n.i.set(e,t)}function dh(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function fp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_E),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _E(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ju.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hh(e,vE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hh(e,vE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(hh(t,"/"==t.charAt(0)?KD:WD,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hh(t,YD)),n.join("")};var vE=/[#\/\?@]/g,WD=/[#\?:]/g,KD=/[#\?]/g,Nv=/[#\?@]/g,YD=/#/g;function fh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xu(n){n.g||(n.g=new Map,n.h=0,n.i&&function ZD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function wE(n,e){Xu(n),e=ph(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function CE(n,e){return Xu(n),e=ph(n,e),n.g.has(e)}function EE(n,e,t){wE(n,e),0<t.length&&(n.i=null,n.g.set(ph(n,e),sv(t)),n.h+=t.length)}function ph(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function IE(n){this.l=n||bE,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ga&&Mt.g.Ga()&&Mt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=fh.prototype).add=function(n,e){Xu(this),this.i=null,n=ph(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){Xu(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ut.oa=function(){Xu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ut.W=function(n){Xu(this);let e=[];if("string"==typeof n)CE(this,n)&&(e=e.concat(this.g.get(ph(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return Xu(this),this.i=null,CE(this,n=ph(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var s=u;""!==d[r]&&(s+="="+encodeURIComponent(String(d[r]))),n.push(s)}}return this.i=n.join("&")};var bE=10;function kv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DE(n){return n.h?1:n.g?n.g.size:0}function Rv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function xm(n,e){n.g?n.g.add(e):n.h=e}function TE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function SE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return sv(n.i)}function Fv(){}function Lv(){this.g=new Fv}function Vv(n,e,t){const r=t||"";try{yE(n,function(s,u){let d=s;Cl(s)&&(d=nE(s)),e.push(r+u+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function gh(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function pp(n){this.l=n.ac||null,this.j=n.jb||!1}function Mm(n,e){Lr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=gp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}IE.prototype.cancel=function(){if(this.i=SE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Fv.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},Fv.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},Rr(pp,Sv),pp.prototype.g=function(){return new Mm(this.l,this.j)},pp.prototype.i=function(n){return function(){return n}}({}),Rr(Mm,Lr);var gp=0;function xE(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function mh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Wo(n)}function Wo(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=Mm.prototype).open=function(n,e){if(this.readyState!=gp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Wo(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mh(this)),this.readyState=gp},ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Mt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xE(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?mh(this):Wo(this),3==this.readyState&&xE(this)}},ut.Va=function(n){this.g&&(this.response=this.responseText=n,mh(this))},ut.Ua=function(n){this.g&&(this.response=n,mh(this))},ut.ga=function(){this.g&&mh(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Mm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ME=Mt.JSON.parse;function nr(n){Lr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=XD,this.K=this.L=!1}Rr(nr,Lr);var XD="",OE=/^https?$/i,Uv=["POST","PUT"];function Om(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,PE(n),yh(n)}function PE(n){n.D||(n.D=!0,ei(n,"complete"),ei(n,"error"))}function Bv(n){if(n.h&&typeof cm<"u"&&(!n.C[1]||4!=Ko(n)||2!=n.aa()))if(n.v&&4==Ko(n))Ln(n.Ha,0,n);else if(ei(n,"readystatechange"),4==Ko(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(lh)[1]||null;if(!s&&Mt.self&&Mt.self.location){var u=Mt.self.location.protocol;s=u.substr(0,u.length-1)}r=!OE.test(s?s.toLowerCase():"")}t=r}if(t)ei(n,"complete"),ei(n,"success");else{n.m=6;try{var d=2<Ko(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",PE(n)}}finally{yh(n)}}}function yh(n,e){if(n.g){jv(n);const t=n.g,r=n.C[0]?ep:null;n.g=null,n.C=null,e||ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function jv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function Ko(n){return n.g?n.g.readyState:0}function $v(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case XD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Hv(n){let e="";return dv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Gv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Hv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function mp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NE(n){this.Ca=0,this.i=[],this.j=new op,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=mp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=mp("baseRetryDelayMs",5e3,n),this.bb=mp("retryDelaySeedMs",1e4,n),this.$a=mp("forwardChannelMaxRetries",2,n),this.ta=mp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new IE(n&&n.concurrentRequestLimit),this.Fa=new Lv,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function zv(n){if(tT(n),3==n.G){var e=n.U++,t=tu(n.F);Vn(t,"SID",n.I),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),Pm(n,t),(e=new cp(n,n.j,e,void 0)).K=2,e.v=dh(tu(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=jE(e.l,null),e.g.da(e.v)),e.F=Date.now(),eu(e)}UE(n)}function yp(n){n.g&&(Zv(n),n.g.cancel(),n.g=null)}function tT(n){yp(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),Nm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function _p(n){kv(n.h)||n.m||(n.m=!0,vt(n.Ja,n),n.C=0)}function kE(n,e){var t;t=e?e.m:n.U++;const r=tu(n.F);Vn(r,"SID",n.I),Vn(r,"RID",t),Vn(r,"AID",n.T),Pm(n,r),n.o&&n.s&&Gv(r,n.o,n.s),t=new cp(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=rT(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),xm(n.h,t),Tm(t,r,e)}function Pm(n,e){n.ia&&dv(n.ia,function(t,r){Vn(e,r,t)}),n.l&&yE({},function(t,r){Vn(e,r,t)})}function rT(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Tn(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=s[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let E=s[v].h;const A=s[v].g;if(E-=u,0>E)u=Math.max(0,s[v].h-100),m=!1;else try{Vv(A,d,"req"+E+"_")}catch{r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function RE(n){n.g||n.u||(n.Z=1,vt(n.Ia,n),n.A=0)}function qv(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Xa(Tn(n.Ia,n),VE(n,n.A)),n.A++,0))}function Zv(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function FE(n){n.g=new cp(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=tu(n.sa);Vn(e,"RID","rpc"),Vn(e,"SID",n.I),Vn(e,"CI",n.L?"0":"1"),Vn(e,"AID",n.T),Vn(e,"TYPE","xmlhttp"),Pm(n,e),n.o&&n.s&&Gv(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=dh(tu(e)),t.s=null,t.P=!0,lp(t,n)}function Nm(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function LE(n,e){var t=null;if(n.g==e){Nm(n),Zv(n),n.g=null;var r=2}else{if(!Rv(n.h,e))return;t=e.D,TE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ei(r=Em(),new uE(r,t)),_p(n)}else RE(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function nT(n,e){return!(DE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Xa(Tn(n.Ja,n,e),VE(n,n.C)),n.C++,0)))}(n,e)||2==r&&qv(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Sl(n,5);break;case 4:Sl(n,10);break;case 3:Sl(n,6);break;default:Sl(n,2)}}function VE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Sl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Tn(n.kb,n);t||(t=new Ju("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||hp(t,"https"),dh(t)),function AE(n,e){const t=new op;if(Mt.Image){const r=new Image;r.onload=Ui(gh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ui(gh,t,r,"TestLoadImage: error",!1,e),r.onabort=Ui(gh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ui(gh,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.l&&n.l.va(e),UE(n),tT(n)}function UE(n){if(n.G=0,n.la=[],n.l){const e=SE(n.h);(0!=e.length||0!=n.i.length)&&(ZC(n.la,e),ZC(n.la,n.i),n.h.i.length=0,sv(n.i),n.i.length=0),n.l.ua()}}function BE(n,e,t){var r=t instanceof Ju?tu(t):new Ju(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Am(r,r.m);else{var s=Mt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ju(null,void 0);r&&hp(u,r),e&&(u.g=e),s&&Am(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Vn(r,t,e),Vn(r,"VER",n.ma),Pm(n,r),r}function jE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Da&&!n.ra?new pp({jb:!0}):n.ra)).Ka(n.H),e}function $E(){}function ec(){if(El&&!(10<=Number(FD)))throw Error("Environmental error: no available transport.")}function Bi(n,e){Lr.call(this),this.g=new NE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!lm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Al(this)}function Wv(n){Im.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Kv(){xv.call(this),this.status=1}function Al(n){this.g=n}(ut=nr.prototype).Ka=function(n){this.L=n},ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bm.g(),this.C=function lE(n){return n.h||(n.h=n.i())}(this.u?this.u:bm),this.g.onreadystatechange=Tn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Om(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Mt.FormData&&n instanceof Mt.FormData,!(0<=qC(Uv,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jv(this),0<this.B&&((this.K=function eT(n){return El&&function RD(){return function kD(n){var e=KC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ov(String(rp)).split("."),t=ov("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",u=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=av(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||av(0==s[2].length,0==u[2].length)||av(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tn(this.qa,this)):this.A=Ln(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Om(this,u)}},ut.qa=function(){typeof cm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ei(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ei(this,"complete"),ei(this,"abort"),yh(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yh(this,!0)),nr.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?Bv(this):this.fb())},ut.fb=function(){Bv(this)},ut.aa=function(){try{return 2<Ko(this)?this.g.status:-1}catch{return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ME(e)}},ut.Ea=function(){return this.m},ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=NE.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new cp(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=QC(u),XC(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rT(this,s,e),Vn(t=tu(this.F),"RID",n),Vn(t,"CVER",22),this.D&&Vn(t,"X-HTTP-Session-Id",this.D),Pm(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Hv(u)))+"&"+e:this.o&&Gv(t,this.o,u)),xm(this.h,s),this.Ya&&Vn(t,"TYPE","init"),this.O?(Vn(t,"$req",e),Vn(t,"SID","null"),s.Z=!0,Tm(s,t,null)):Tm(s,t,e),this.G=2}}else 3==this.G&&(n?kE(this,n):0==this.i.length||kv(this.h)||kE(this))},ut.Ia=function(){if(this.u=null,FE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Xa(Tn(this.eb,this),n)}},ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,pi(10),yp(this),FE(this))},ut.cb=function(){null!=this.v&&(this.v=null,yp(this),qv(this),pi(19))},ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))},(ut=$E.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Ra=function(){},ec.prototype.g=function(n,e){return new Bi(n,e)},Rr(Bi,Lr),Bi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;pi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=BE(n,null,n.V),_p(n)},Bi.prototype.close=function(){zv(this.g)},Bi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=nE(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&_p(e)},Bi.prototype.M=function(){this.g.l=null,delete this.j,zv(this.g),delete this.g,Bi.X.M.call(this)},Rr(Wv,Im),Rr(Kv,xv),Rr(Al,$E),Al.prototype.xa=function(){ei(this.g,"a")},Al.prototype.wa=function(n){ei(this.g,new Wv(n))},Al.prototype.va=function(n){ei(this.g,new Kv)},Al.prototype.ua=function(){ei(this.g,"b")},ec.prototype.createWebChannel=ec.prototype.g,Bi.prototype.send=Bi.prototype.u,Bi.prototype.open=Bi.prototype.m,Bi.prototype.close=Bi.prototype.close,Qu.NO_ERROR=0,Qu.TIMEOUT=8,Qu.HTTP_ERROR=6,cE.COMPLETE="complete",Av.EventType=ch,ch.OPEN="a",ch.CLOSE="b",ch.ERROR="c",ch.MESSAGE="d",Lr.prototype.listen=Lr.prototype.N,nr.prototype.listenOnce=nr.prototype.O,nr.prototype.getLastError=nr.prototype.Oa,nr.prototype.getLastErrorCode=nr.prototype.Ea,nr.prototype.getStatus=nr.prototype.aa,nr.prototype.getResponseJson=nr.prototype.Sa,nr.prototype.getResponseText=nr.prototype.fa,nr.prototype.send=nr.prototype.da,nr.prototype.setWithCredentials=nr.prototype.Ka;var HE=Ka.createWebChannelTransport=function(){return new ec},GE=Ka.getStatEventTarget=function(){return Em()},Yv=Ka.ErrorCode=Qu,vx=Ka.EventType=cE,zE=Ka.Event=Dl,Qv=Ka.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},iT=Ka.FetchXmlHttpFactory=pp,km=Ka.WebChannel=Av,sT=Ka.XhrIo=nr;const _h="@firebase/firestore";class Vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vr.UNAUTHENTICATED=new Vr(null),Vr.GOOGLE_CREDENTIALS=new Vr("google-credentials-uid"),Vr.FIRST_PARTY=new Vr("first-party-uid"),Vr.MOCK_USER=new Vr("mock-user");let tc="9.14.0";const ti=new Wa.Yd("@firebase/firestore");function Jv(){return ti.logLevel}function Oe(n,...e){if(ti.logLevel<=Wa.in.DEBUG){const t=e.map(e0);ti.debug(`Firestore (${tc}): ${n}`,...t)}}function lr(n,...e){if(ti.logLevel<=Wa.in.ERROR){const t=e.map(e0);ti.error(`Firestore (${tc}): ${n}`,...t)}}function xl(n,...e){if(ti.logLevel<=Wa.in.WARN){const t=e.map(e0);ti.warn(`Firestore (${tc}): ${n}`,...t)}}function e0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function wt(n,e){n||Xe()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class t0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vr.UNAUTHENTICATED))}shutdown(){}}class uT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wx{constructor(e){this.t=e,this.currentUser=Vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let d=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new dr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const E=d;e.enqueueRetryable((0,ye.Z)(function*(){yield E.promise,yield u(r.currentUser)}))},v=E=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(E=>v(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new dr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new t0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Vr(e)}}class n0{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Vr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(wt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class r0{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new n0(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o0{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.A=t.token,new s0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ZE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=cT(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function vh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function a0(n){return n+"\0"}class Sn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Sn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Sn(0,0))}static max(){return new Et(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends wh{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const WE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends wh{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return WE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===m?(d=!d,s++):"."!==m||d?(r+=m,s++):(u(),s++)}if(u(),d)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Yt.fromString(e))}static fromName(e){return new Ge(Yt.fromString(e).popFirst(5))}static empty(){return new Ge(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Yt(e.slice()))}}class vp{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function u0(n){return n.fields.find(e=>2===e.kind)}function nc(n){return n.fields.filter(e=>2!==e.kind)}vp.UNKNOWN_ID=-1;class Ur{constructor(e,t){this.fieldPath=e,this.kind=t}}class wp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wp(0,Ps.min())}}function YE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Et.fromTimestamp(1e9===r?new Sn(t+1,0):new Sn(t,r));return new Ps(s,Ge.empty(),e)}function lT(n){return new Ps(n.readTime,n.key,-1)}class Ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ps(Et.min(),Ge.empty(),-1)}static max(){return new Ps(Et.max(),Ge.empty(),-1)}}function Rm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}const c0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Eh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function rc(n){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==c0)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Cp.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let s=0,u=0,d=!1;e.forEach(m=>{++s,m.next(()=>{++u,d&&u===s&&t()},v=>r(v))}),d=!0,u===s&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(s=>s?oe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,s)=>{const u=e.length,d=new Array(u);let m=0;for(let v=0;v<u;v++){const E=v;t(e[E]).next(A=>{d[E]=A,++m,m===u&&r(d)},A=>s(A))}})}static doWhile(e,t){return new oe((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Ep{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new dr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ip(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=Dp(r.target.error);this.P.reject(new Ip(e,s))}}static open(e,t,r,s){try{return new Ep(t,e.transaction(s,r))}catch(u){throw new Ip(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QE(t)}}class lo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===lo.D((0,nn.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),ic(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,nn.hl)())return!1;if(lo.N())return!0;const e=(0,nn.z$)(),t=lo.D(e),r=0<t&&t<10,s=lo.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{s(new Ip(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;s("VersionError"===m.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Ip(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const v=Ep.open(u.db,e,d?"readonly":"readwrite",r),E=s(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),oe.reject(A))).toPromise();return E.catch(()=>{}),yield v.v,E}catch(v){const E=v,A="FirebaseError"!==E.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",A),u.close(),!A)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class dT{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ic(this.U.delete())}}class Ip extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yo(n){return"IndexedDbTransactionError"===n.name}class QE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ic(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),ic(this.store.add(e))}get(e){return ic(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),ic(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),ic(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(d,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new oe((u,d)=>{s.onerror=m=>{d(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new oe((r,s)=>{t.onerror=u=>{const d=Dp(u.target.error);s(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new oe((s,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void s();const v=new dT(m),E=t(m.primaryKey,m.value,v);if(E instanceof oe){const A=E.catch(P=>(v.done(),oe.reject(P)));r.push(A)}v.isDone?s():null===v.G?m.continue():m.continue(v.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ic(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Dp(r.target.error);t(s)}})}let bp=!1;function Dp(n){const e=lo.D((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bp||(bp=!0,setTimeout(()=>{throw r},0)),r}}return n}class Cx{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Yo(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield rc(r)}yield t.nt(6e4)}))}}class JE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return oe.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Oe("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,s).next(m=>{s-=m,r.add(d)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(s,u)).next(m=>(Oe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const d=lT(u);Rm(d,r)>0&&(r=d)}),new Ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function l0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ns(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ji.at=-1;class zn{constructor(e,t){this.comparator=e,this.root=t||gi.EMPTY}insert(e,t){return new zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gi{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??gi.RED,this.left=s??gi.EMPTY,this.right=u??gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new gi(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return gi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1,gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,s){return this}insert(n,e,t){return new gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hT(this.data.getIterator())}getIteratorFrom(e){return new hT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class hT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bh(n){return n.hasNext()?n.getNext():void 0}class as{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new as([])}unionWith(e){let t=new wn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new mr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const eI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sc(n){if(wt(!!n),"string"==typeof n){let e=0;const t=eI.exec(n);if(wt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function oc(n){return"string"==typeof n?mr.fromBase64String(n):mr.fromUint8Array(n)}function d0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tI(n){const e=n.mapValue.fields.__previous_value__;return d0(e)?tI(e):e}function Dh(n){const e=sc(n.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}class pT{constructor(e,t,r,s,u,d,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}function Th(n){return null==n}function Sh(n){return 0===n&&1/n==-1/0}function h0(n){return"number"==typeof n&&Number.isInteger(n)&&!Sh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ac={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fm={nullValue:"NULL_VALUE"};function Ah(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d0(n)?4:f0(n)?9007199254740991:10:Xe()}function ho(n,e){if(n===e)return!0;const t=Ah(n);if(t!==Ah(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dh(n).isEqual(Dh(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=sc(r.timestampValue),d=sc(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,oc(n.bytesValue).isEqual(oc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return qn(r.geoPointValue.latitude)===qn(s.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return qn(r.integerValue)===qn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=qn(r.doubleValue),d=qn(s.doubleValue);return u===d?Sh(u)===Sh(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return vh(n.arrayValue.values||[],e.arrayValue.values||[],ho);case 10:return function(r,s){const u=r.mapValue.fields||{},d=s.mapValue.fields||{};if(l0(u)!==l0(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!ho(u[m],d[m])))return!1;return!0}(n,e);default:return Xe()}var s}function Lm(n,e){return void 0!==(n.values||[]).find(t=>ho(t,e))}function Ml(n,e){if(n===e)return 0;const t=Ah(n),r=Ah(e);if(t!==r)return Ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=qn(s.integerValue||s.doubleValue),m=qn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return gT(n.timestampValue,e.timestampValue);case 4:return gT(Dh(n),Dh(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(s,u){const d=oc(s),m=oc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),m=u.split("/");for(let v=0;v<d.length&&v<m.length;v++){const E=Ot(d[v],m[v]);if(0!==E)return E}return Ot(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Ot(qn(s.latitude),qn(u.latitude));return 0!==d?d:Ot(qn(s.longitude),qn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],m=u.values||[];for(let v=0;v<d.length&&v<m.length;++v){const E=Ml(d[v],m[v]);if(E)return E}return Ot(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===ac.mapValue&&u===ac.mapValue)return 0;if(s===ac.mapValue)return 1;if(u===ac.mapValue)return-1;const d=s.fields||{},m=Object.keys(d),v=u.fields||{},E=Object.keys(v);m.sort(),E.sort();for(let A=0;A<m.length&&A<E.length;++A){const P=Ot(m[A],E[A]);if(0!==P)return P;const V=Ml(d[m[A]],v[E[A]]);if(0!==V)return V}return Ot(m.length,E.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function gT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=sc(n),r=sc(e),s=Ot(t.seconds,r.seconds);return 0!==s?s:Ot(t.nanos,r.nanos)}function Tp(n){return nI(n)}function nI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=sc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?oc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=nI(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of s)d?d=!1:u+=",",u+=`${m}:${nI(r.fields[m])}`;return u+"}"}(n.mapValue):Xe();var e}function xh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rI(n){return!!n&&"integerValue"in n}function Vm(n){return!!n&&"arrayValue"in n}function Sp(n){return!!n&&"nullValue"in n}function mT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ap(n){return!!n&&"mapValue"in n}function uc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ns(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function f0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function iI(n){return"nullValue"in n?Fm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xh(nu.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function Ex(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xh(nu.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ac:Xe()}function Um(n,e){const t=Ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function p0(n,e){const t=Ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ap(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}setAll(e){let t=rr.emptyPath(),r={},s=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=m.popLast()}d?r[m.lastSegment()]=uc(d):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Ap(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ap(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ns(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new ni(uc(this.value))}}function g0(n){const e=[];return Ns(n.fields,(t,r)=>{const s=new rr([t]);if(Ap(r)){const u=g0(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new as(e)}class Nn{constructor(e,t,r,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Nn(e,0,Et.min(),Et.min(),ni.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,Et.min(),ni.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Et.min(),ni.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ix{constructor(e,t=null,r=[],s=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function sI(n,e=null,t=[],r=[],s=null,u=null,d=null){return new Ix(n,e,t,r,s,u,d)}function Ol(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Tp(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Th(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Tp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Tp(r)).join(",")),e.ht=t}return e.ht}function xp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!ks(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!ho(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jm(n.startAt,e.startAt)&&jm(n.endAt,e.endAt)}function m0(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function y0(n,e){return n.filters.filter(t=>t instanceof ri&&t.field.isEqual(e))}function yT(n,e,t){let r=Fm,s=!0;for(const u of y0(n,e)){let d=Fm,m=!0;switch(u.op){case"<":case"<=":d=iI(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Fm}Um({value:r,inclusive:s},{value:d,inclusive:m})<0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Um({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function oI(n,e,t){let r=ac,s=!0;for(const u of y0(n,e)){let d=ac,m=!0;switch(u.op){case">=":case">":d=Ex(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=ac}p0({value:r,inclusive:s},{value:d,inclusive:m})>0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];p0({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class ri extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new _T(e,t,r):"array-contains"===t?new aI(e,r):"in"===t?new Dx(e,r):"not-in"===t?new fo(e,r):"array-contains-any"===t?new wT(e,r):new ri(e,t,r)}static lt(e,t,r){return"in"===t?new bx(e,r):new vT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ml(t,this.value)):null!==t&&Ah(this.value)===Ah(t)&&this.ft(Ml(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _T extends ri{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.ft(t)}}class bx extends ri{constructor(e,t){super(e,"in",t),this.keys=_0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vT extends ri{constructor(e,t){super(e,"not-in",t),this.keys=_0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class aI extends ri{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vm(t)&&Lm(t.arrayValue,this.value)}}class Dx extends ri{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lm(this.value.arrayValue,t)}}class fo extends ri{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lm(this.value.arrayValue,t)}}class wT extends ri{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lm(this.value.arrayValue,r))}}class Qo{constructor(e,t){this.position=e,this.inclusive=t}}class Mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function ks(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function uI(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(d.referenceValue),t.key):Ml(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function jm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ho(n.position[t],e.position[t]))return!1;return!0}class ru{constructor(e,t=null,r=[],s=[],u=null,d="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=v,this._t=null,this.wt=null}}function cI(n,e,t,r,s,u,d,m){return new ru(n,e,t,r,s,u,d,m)}function cc(n){return new ru(n)}function v0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function $m(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function w0(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Hm(n){return null!==n.collectionGroup}function Pl(n){const e=qe(n);if(null===e._t){e._t=[];const t=w0(e),r=$m(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Mh(t)),e._t.push(new Mh(rr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Mh(rr.keyField(),u))}}}return e._t}function Si(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=sI(e.path,e.collectionGroup,Pl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Pl(e))t.push(new Mh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Qo(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Qo(e.startAt.position,e.startAt.inclusive):null;e.wt=sI(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function Mp(n,e,t){return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Op(n,e){return xp(Si(n),Si(e))&&n.limitType===e.limitType}function Gm(n){return`${Ol(Si(n))}|lt:${n.limitType}`}function Jo(n){return`Query(target=${function Bm(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Tp(r.value)}`;var r}).join(", ")}]`),Th(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Tp(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Tp(t)).join(",")),`Target(${e})`}(Si(n))}; limitType=${n.limitType})`}function zm(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,d){const m=uI(s,u,d);return s.inclusive?m<=0:m<0}(t.startAt,Pl(t),r)||t.endAt&&!function(s,u,d){const m=uI(s,u,d);return s.inclusive?m>=0:m>0}(t.endAt,Pl(t),r)));var t,r}function qm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Xo(n){return(e,t)=>{let r=!1;for(const s of Pl(n)){const u=CT(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function CT(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,d){const m=u.data.field(s),v=d.data.field(s);return null!==m&&null!==v?Ml(m,v):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function ET(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function lI(n){return{integerValue:""+n}}function dI(n,e){return h0(e)?lI(e):ET(n,e)}class Zm{constructor(){this._=void 0}}function IT(n,e,t){return n instanceof Nl?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof kl?C0(n,e):n instanceof Oh?Wm(n,e):function(r,s){const u=bT(r,s),d=E0(u)+E0(r.yt);return rI(u)&&rI(r.yt)?lI(d):ET(r.It,d)}(n,e)}function hI(n,e,t){return n instanceof kl?C0(n,e):n instanceof Oh?Wm(n,e):t}function bT(n,e){return n instanceof Rl?rI(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Nl extends Zm{}class kl extends Zm{constructor(e){super(),this.elements=e}}function C0(n,e){const t=I0(e);for(const r of n.elements)t.some(s=>ho(s,r))||t.push(r);return{arrayValue:{values:t}}}class Oh extends Zm{constructor(e){super(),this.elements=e}}function Wm(n,e){let t=I0(e);for(const r of n.elements)t=t.filter(s=>!ho(s,r));return{arrayValue:{values:t}}}class Rl extends Zm{constructor(e,t){super(),this.It=e,this.yt=t}}function E0(n){return qn(n.integerValue||n.doubleValue)}function I0(n){return Vm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ph{constructor(e,t){this.field=e,this.transform=t}}class Km{constructor(e,t){this.version=e,this.transformResults=t}}class In{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ym{}function b0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Rp(n.key,In.none()):new kp(n.key,n.data,In.none());{const t=n.data,r=ni.empty();let s=new wn(rr.comparator);for(let u of e.fields)if(!s.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),s=s.add(u)}return new ea(n.key,r,new as(s.toArray()),In.none())}}function pI(n,e,t){n instanceof kp?function(r,s,u){const d=r.value.clone(),m=mI(r.fieldTransforms,s,u.transformResults);d.setAll(m),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ea?function(r,s,u){if(!Pp(r.precondition,s))return void s.convertToUnknownDocument(u.version);const d=mI(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(gI(r)),m.setAll(d),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Np(n,e,t,r){return n instanceof kp?function(s,u,d,m){if(!Pp(s.precondition,u))return d;const v=s.value.clone(),E=yI(s.fieldTransforms,m,u);return v.setAll(E),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof ea?function(s,u,d,m){if(!Pp(s.precondition,u))return d;const v=yI(s.fieldTransforms,m,u),E=u.data;return E.setAll(gI(s)),E.setAll(v),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,Pp(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function DT(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=bT(r.transform,s||null);null!=u&&(null===t&&(t=ni.empty()),t.set(r.field,u))}return t||null}function TT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&vh(t,r,(s,u)=>function fI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof kl&&r instanceof kl||t instanceof Oh&&r instanceof Oh?vh(t.elements,r.elements,ho):t instanceof Rl&&r instanceof Rl?ho(t.yt,r.yt):t instanceof Nl&&r instanceof Nl);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class kp extends Ym{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ea extends Ym{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function gI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mI(n,e,t){const r=new Map;wt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,m=e.data.field(u.field);r.set(u.field,hI(d,m,t[s]))}return r}function yI(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,IT(u,d,e))}return r}class Rp extends Ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _I extends Ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tx{constructor(e){this.count=e}}var Dr,rn;function vI(n){switch(n){default:return Xe();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function Fp(n){if(void 0===n)return lr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Dr.OK:return ce.OK;case Dr.CANCELLED:return ce.CANCELLED;case Dr.UNKNOWN:return ce.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return ce.INTERNAL;case Dr.UNAVAILABLE:return ce.UNAVAILABLE;case Dr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Dr.NOT_FOUND:return ce.NOT_FOUND;case Dr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Dr.ABORTED:return ce.ABORTED;case Dr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Dr.DATA_LOSS:return ce.DATA_LOSS;default:return Xe()}}(rn=Dr||(Dr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class lc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return XE(this.inner)}size(){return this.innerSize}}const ST=new zn(Ge.comparator);function Ai(){return ST}const dc=new zn(Ge.comparator);function Nh(...n){let e=dc;for(const t of n)e=e.insert(t.key,t);return e}function Qm(n){let e=dc;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rs(){return Fl()}function wI(){return Fl()}function Fl(){return new lc(n=>n.toString(),(n,e)=>n.isEqual(e))}const D0=new zn(Ge.comparator),Jm=new wn(Ge.comparator);function Bt(...n){let e=Jm;for(const t of n)e=e.add(t);return e}const Sx=new wn(Ot);function T0(){return Sx}class Xm{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Xm(Et.min(),s,T0(),Ai(),Bt())}}class kh{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kh(r,t,Bt(),Bt(),Bt())}}class ey{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class CI{constructor(e,t){this.targetId=e,this.At=t}}class EI{constructor(e,t,r=mr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class II{constructor(){this.Rt=0,this.bt=A0(),this.Pt=mr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Bt(),t=Bt(),r=Bt();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Xe()}}),new kh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=A0()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class bI{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ai(),this.qt=S0(),this.Kt=new wn(Ot)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(m0(u))if(0===r){const d=new Ge(u.path);this.jt(t,d,Nn.newNoDocument(d,Et.min()))}else wt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&m0(m.target)){const v=new Ge(m.target.path);null!==this.Ut.get(v)||this.ee(d,v)||this.jt(d,v,Nn.newNoDocument(v,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Bt();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(v=>{const E=this.Xt(v);return!E||2===E.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const s=new Xm(e,t,this.Kt,this.Ut,r);return this.Ut=Ai(),this.qt=S0(),this.Kt=new wn(Ot),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new II,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new wn(Ot),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new II),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function S0(){return new zn(Ge.comparator)}function A0(){return new zn(Ge.comparator)}const AT={asc:"ASCENDING",desc:"DESCENDING"},xT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class DI{constructor(e,t){this.databaseId=e,this.gt=t}}function Ll(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MT(n,e){return n.gt?e.toBase64():e.toUint8Array()}function TI(n,e){return Ll(n,e.toTimestamp())}function yr(n){return wt(!!n),Et.fromTimestamp(function(e){const t=sc(e);return new Sn(t.seconds,t.nanos)}(n))}function x0(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function SI(n){const e=Yt.fromString(n);return wt(I(e)),e}function ty(n,e){return x0(n.databaseId,e.path)}function iu(n,e){const t=SI(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(OT(t))}function M0(n,e){return x0(n.databaseId,e)}function AI(n){const e=SI(n);return 4===e.length?Yt.emptyPath():OT(e)}function Lp(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OT(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function PT(n,e,t){return{name:ty(n,e),fields:t.value.mapValue.fields}}function NT(n,e,t){const r=iu(n,e.name),s=yr(e.updateTime),u=new ni({mapValue:{fields:e.fields}}),d=Nn.newFoundDocument(r,s,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Vp(n,e){let t;if(e instanceof kp)t={update:PT(n,e.key,e.value)};else if(e instanceof Rp)t={delete:ty(n,e.key)};else if(e instanceof ea)t={update:PT(n,e.key,e.data),updateMask:C(e.fieldMask)};else{if(!(e instanceof _I))return Xe();t={verify:ty(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof Nl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof kl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Oh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Rl)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:TI(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Xe()),t;var s}function xI(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?In.updateTime(yr(s.updateTime)):void 0!==s.exists?In.exists(s.exists):In.none():In.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,d){let m=null;"setToServerValue"in d?(wt("REQUEST_TIME"===d.setToServerValue),m=new Nl):"appendMissingElements"in d?m=new kl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Oh(d.removeAllFromArray.values||[]):"increment"in d?m=new Rl(u,d.increment):Xe();const v=rr.fromServerFormat(d.fieldPath);return new Ph(v,m)}(n,s)):[];var s;if(e.update){const s=iu(n,e.update.name),u=new ni({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new as((e.updateMask.fieldPaths||[]).map(E=>rr.fromServerFormat(E)));return new ea(s,u,d,t,r)}return new kp(s,u,t,r)}if(e.delete){const s=iu(n,e.delete);return new Rp(s,t)}if(e.verify){const s=iu(n,e.verify);return new _I(s,t)}return Xe()}function kT(n,e){return{documents:[M0(n,e.path)]}}function MI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=M0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=M0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const E=v.map(A=>function(P){if("=="===P.op){if(mT(P.value))return{unaryFilter:{field:l(P.field),op:"IS_NAN"}};if(Sp(P.value))return{unaryFilter:{field:l(P.field),op:"IS_NULL"}}}else if("!="===P.op){if(mT(P.value))return{unaryFilter:{field:l(P.field),op:"IS_NOT_NAN"}};if(Sp(P.value))return{unaryFilter:{field:l(P.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:l(P.field),op:a(P.op),value:P.value}}}(A));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(E=>{return{field:l((A=E).field),direction:o(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(E=e.limit,n.gt||Th(E)?E:{value:E});var E,m,v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function RT(n){let e=AI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){wt(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=i(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Mh(h((P=A).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let m=null;t.limit&&(m=function(A){let P;return P="object"==typeof A?A.value:A,Th(P)?null:P}(t.limit));let v=null;var A;t.startAt&&(v=new Qo((A=t.startAt).values||[],!!A.before));let E=null;return t.endAt&&(E=function(A){return new Qo(A.values||[],!A.before)}(t.endAt)),cI(e,s,d,u,m,"F",v,E)}function i(n){return n?void 0!==n.unaryFilter?[_(n)]:void 0!==n.fieldFilter?[p(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>i(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function o(n){return AT[n]}function a(n){return xT[n]}function l(n){return{fieldPath:n.canonicalString()}}function h(n){return rr.fromServerFormat(n.fieldPath)}function p(n){return ri.create(h(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function _(n){switch(n.unaryFilter.op){case"IS_NAN":const e=h(n.unaryFilter.field);return ri.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=h(n.unaryFilter.field);return ri.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=h(n.unaryFilter.field);return ri.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=h(n.unaryFilter.field);return ri.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function C(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function I(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function T(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=k(e)),e=M(n.get(t),e);return k(e)}function M(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function k(n){return n+"\x01\x01"}function $(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&Xe(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let v;0===s.length?v=m:(s+=m,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,d),s+="\0";break;case"\x11":s+=n.substring(u,d+1);break;default:Xe()}u=d+2}return new Yt(r)}const X=["userId","batchId"];function me(n,e){return[n,T(e)]}function Re(n,e,t){return[n,T(e),t]}const ze={},rt=["prefixPath","collectionGroup","readTime","documentId"],mt=["prefixPath","collectionGroup","documentId"],Se=["collectionGroup","readTime","prefixPath","documentId"],bt=["canonicalId","targetId"],cn=["targetId","path"],Un=["path","targetId"],Vl=["collectionId","parent"],O0=["indexId","uid"],P0=["uid","sequenceNumber"],N0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],k0=["indexId","uid","orderedDocumentKey"],R0=["userId","collectionPath","documentId"],F0=["userId","collectionPath","largestBatchId"],L0=["userId","collectionGroup","largestBatchId"],ny=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],V0=[...ny,"documentOverlays"],Px=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nx=Px,_1=[...Nx,"indexConfiguration","indexState","indexEntries"];class FT extends Eh{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function mi(n,e){const t=qe(n);return lo.M(t.ie,e)}class LT{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&pI(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Np(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Np(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wI();return this.mutations.forEach(s=>{const u=e.get(s.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(s.key)?null:m;const v=b0(d,m);null!==v&&r.set(s.key,v),d.isValidDocument()||d.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&vh(this.mutations,e.mutations,(t,r)=>TT(t,r))&&vh(this.baseMutations,e.baseMutations,(t,r)=>TT(t,r))}}class VT{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){wt(e.mutations.length===r.length);let s=D0;const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new VT(e,t,r,s)}}class UT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rh{constructor(e,t,r,s,u=Et.min(),d=Et.min(),m=mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Rh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Rh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kx{constructor(e){this.re=e}}function Rx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ty(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ll(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Up(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:Up(e.version)}}var s,u;return r}function OI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Up(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bp(n){const e=new Sn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function jp(n,e){const t=(e.baseMutations||[]).map(u=>xI(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>xI(n.re,u)),s=Sn.fromMillis(e.localWriteTimeMs);return new LT(e.batchId,s,t,r)}function U0(n){const e=Bp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Bp(n.lastLimboFreeSnapshotVersion):Et.min();let r;var s;return void 0!==n.query.documents?(wt(1===(s=n.query).documents.length),r=Si(cc(AI(s.documents[0])))):r=Si(RT(n.query)),new Rh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,mr.fromBase64String(n.resumeToken))}function Fx(n,e){const t=Up(e.snapshotVersion),r=Up(e.lastLimboFreeSnapshotVersion);let s;s=m0(e.target)?kT(n.re,e.target):MI(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ol(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function BT(n){const e=RT({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Mp(e,e.limit,"L"):e}function jT(n,e){return new UT(e.largestBatchId,xI(n.re,e.overlayMutation))}function Lx(n,e){const t=e.path.lastSegment();return[n,T(e.path.popLast()),t]}function Vx(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Up(r.readTime),documentKey:T(r.documentKey.path),largestBatchId:r.largestBatchId}}class w1{getBundleMetadata(e,t){return Ux(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Bp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Ux(e).put({bundleId:(r=t).id,createTime:Up(yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Bx(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:BT(s.bundledQuery),readTime:Bp(s.readTime)};var s})}saveNamedQuery(e,t){return Bx(e).put({name:(r=t).name,readTime:Up(yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Ux(n){return mi(n,"bundles")}function Bx(n){return mi(n,"namedQueries")}class PI{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new PI(e,t.uid||"")}getOverlay(e,t){return B0(e).get(Lx(this.userId,t)).next(r=>r?jT(this.It,r):null)}getOverlays(e,t){const r=Rs();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,d)=>{const m=new UT(t,d);s.push(this.ue(e,m))}),oe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(T(d.getCollectionPath())));const u=[];return s.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(B0(e).Y("collectionPathOverlayIndex",m))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Rs(),u=T(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return B0(e).W("collectionPathOverlayIndex",d).next(m=>{for(const v of m){const E=jT(this.It,v);s.set(E.getKey(),E)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Rs();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return B0(e).Z({index:"collectionGroupOverlayIndex",range:m},(v,E,A)=>{const P=jT(this.It,E);u.size()<s||P.largestBatchId===d?(u.set(P.getKey(),P),d=P.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return B0(e).put(function(r,s,u){const[d,m,v]=Lx(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Vp(r.re,u.mutation)}}(this.It,this.userId,t))}}function B0(n){return mi(n,"documentOverlays")}class $p{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Sh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(oc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?f0(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Xe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),Ge.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function C1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function jx(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=C1(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}$p.Te=new $p;class E1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=jx(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=jx(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class I1{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class b1{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class j0{constructor(){this.Be=new E1,this.Le=new I1(this.Be),this.Ue=new b1(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Hp{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hp(this.indexId,this.documentKey,this.arrayValue,r)}}function Gp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$x(n.arrayValue,e.arrayValue),0!==t?t:(t=$x(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function $x(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class D1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=u0(e);if(void 0!==t&&!this.ze(t))return!1;const r=nc(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const d=r[s];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++s}for(;s<r.length;++s){const d=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class T1{constructor(){this.Ye=new $T}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ps.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class $T{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new wn(Yt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new wn(Yt.comparator)).toArray()}}const NI=new Uint8Array(0);class S1{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new $T,this.Ze=new lc(r=>Ol(r),(r,s)=>xp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:T(s)};return Hx(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[a0(t),""],!1,!0);return Hx(e).W(s).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push($(d.parent))}return r})}addFieldIndex(e,t){const r=kI(e),s={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete s.indexId;const u=r.add(s);if(t.indexState){const d=H0(e);return u.next(m=>{d.put(Vx(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=kI(e),s=H0(e),u=$0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=$0(e);let s=!0;const u=new Map;return oe.forEach(this.tn(t),d=>this.en(e,d).next(m=>{s&&(s=!!m),u.set(d,m)})).next(()=>{if(s){let d=Bt();const m=[];return oe.forEach(u,(v,E)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Pt=>`${Pt.fieldPath}:${Pt.kind}`).join(",")}`} to execute ${Ol(t)}`);const P=function(Pt,Nt){const Ft=u0(Nt);if(void 0===Ft)return null;for(const Ht of y0(Pt,Ft.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(E,v),V=function(Pt,Nt){const Ft=new Map;for(const Ht of nc(Nt))for(const ii of y0(Pt,Ht.fieldPath))switch(ii.op){case"==":case"in":Ft.set(Ht.fieldPath.canonicalString(),ii.value);break;case"not-in":case"!=":return Ft.set(Ht.fieldPath.canonicalString(),ii.value),Array.from(Ft.values())}return null}(E,v),z=function(Pt,Nt){const Ft=[];let Ht=!0;for(const ii of nc(Nt)){const ow=0===ii.kind?yT(Pt,ii.fieldPath,Pt.startAt):oI(Pt,ii.fieldPath,Pt.startAt);Ft.push(ow.value),Ht&&(Ht=ow.inclusive)}return new Qo(Ft,Ht)}(E,v),ee=function(Pt,Nt){const Ft=[];let Ht=!0;for(const ii of nc(Nt)){const ow=0===ii.kind?oI(Pt,ii.fieldPath,Pt.endAt):yT(Pt,ii.fieldPath,Pt.endAt);Ft.push(ow.value),Ht&&(Ht=ow.inclusive)}return new Qo(Ft,Ht)}(E,v),Me=this.nn(v,E,z),Pe=this.nn(v,E,ee),st=this.sn(v,E,V),Tt=this.rn(v.indexId,P,Me,z.inclusive,Pe,ee.inclusive,st);return oe.forEach(Tt,Pt=>r.J(Pt,t.limit).next(Nt=>{Nt.forEach(Ft=>{const Ht=Ge.fromSegments(Ft.documentKey);d.has(Ht)||(d=d.add(Ht),m.push(Ht))})}))}).next(()=>m)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,d,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),E=v/(null!=t?t.length:1),A=[];for(let P=0;P<v;++P){const V=t?this.on(t[P/E]):NI,z=this.un(e,V,r[P%E],s),ee=this.cn(e,V,u[P%E],d),Me=m.map(Pe=>this.un(e,V,Pe,!0));A.push(...this.createRange(z,ee,Me))}return A}un(e,t,r,s){const u=new Hp(e,Ge.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new Hp(e,Ge.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new D1(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new wn(rr.comparator),v=!1;for(const E of d.filters){const A=E;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field))}for(const E of d.orderBy)E.field.isKeyField()||(m=m.add(E.field));return m.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new j0;for(const s of nc(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const d=r.qe(s.kind);$p.Te.ce(u,d)}return r.$e()}on(e){const t=new j0;return $p.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new j0;return $p.Te.ce(xh(this.databaseId,t),r.qe(function(s){const u=nc(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new j0);let u=0;for(const d of nc(e)){const m=r[u++];for(const v of s)if(this.ln(t,d.fieldPath)&&Vm(m))s=this.fn(s,d,m);else{const E=v.qe(d.kind);$p.Te.ce(m,E)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of s){const v=new j0;v.seed(m.$e()),$p.Te.ce(d,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof ri&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=kI(e),s=H0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return oe.forEach(u,m=>s.get([m.indexId,this.uid]).next(v=>{d.push(function(E,A){const P=A?new wp(A.sequenceNumber,new Ps(Bp(A.readTime),new Ge($(A.documentKey)),A.largestBatchId)):wp.empty(),V=E.fields.map(([z,ee])=>new Ur(rr.fromServerFormat(z),ee));return new vp(E.indexId,E.collectionGroup,V,P)}(m,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ot(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=kI(e),u=H0(e);return this._n(e).next(d=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,v=>u.put(Vx(v.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(s,u)=>{const d=r.get(s.collectionGroup);return(d?oe.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),oe.forEach(m,v=>this.wn(e,s,v).next(E=>{const A=this.mn(u,v);return E.isEqual(A)?oe.resolve():this.gn(e,u,v,E,A)}))))})}yn(e,t,r,s){return $0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return $0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=$0(e);let u=new wn(Gp);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new Hp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new wn(Gp);const s=this.an(t,e);if(null==s)return r;const u=u0(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Vm(d))for(const m of d.arrayValue.values||[])r=r.add(new Hp(t.indexId,e.key,this.on(m),s))}else r=r.add(new Hp(t.indexId,e.key,NI,s));return r}gn(e,t,r,s,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,v,E,A,P){const V=m.getIterator(),z=v.getIterator();let ee=bh(V),Me=bh(z);for(;ee||Me;){let Pe=!1,st=!1;if(ee&&Me){const Tt=E(ee,Me);Tt<0?st=!0:Tt>0&&(Pe=!0)}else null!=ee?st=!0:Pe=!0;Pe?(A(Me),Me=bh(z)):st?(P(ee),ee=bh(V)):(ee=bh(V),Me=bh(z))}}(s,u,Gp,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),oe.waitFor(d)}_n(e){let t=1;return H0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Gp(d,m)).filter((d,m,v)=>!m||0!==Gp(d,v[m-1]));const s=[];s.push(e);for(const d of r){const m=Gp(d,e),v=Gp(d,t);if(0===m)s[0]=e.Ke();else if(m>0&&v<0)s.push(d),s.push(d.Ke());else if(v>0)break}s.push(t);const u=[];for(let d=0;d<s.length;d+=2)u.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,NI,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,NI,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gx)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||Xe())).next(Gx)}}function Hx(n){return mi(n,"collectionParents")}function $0(n){return mi(n,"indexEntries")}function kI(n){return mi(n,"indexConfiguration")}function H0(n){return mi(n,"indexState")}function Gx(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Rm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ps(e.readTime,e.documentKey,t)}const zx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fs(e,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qx(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const v=r.Z({range:d},(A,P,V)=>(m++,V.delete()));u.push(v.next(()=>{wt(1===m)}));const E=[];for(const A of t.mutations){const P=Re(e,A.key.path,t.batchId);u.push(s.delete(P)),E.push(A.key)}return oe.waitFor(u).next(()=>E)}function RI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Fs.DEFAULT_COLLECTION_PERCENTILE=10,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fs.DEFAULT=new Fs(41943040,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fs.DISABLED=new Fs(-1,0,0);class FI{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new FI(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fh(e).Z({index:"userMutationsIndex",range:r},(s,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=ry(e),d=Fh(e);return d.add({}).next(m=>{wt("number"==typeof m);const v=new LT(m,t,r,s),E=function(V,z,ee){const Me=ee.baseMutations.map(st=>Vp(V.re,st)),Pe=ee.mutations.map(st=>Vp(V.re,st));return{userId:z,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:Me,mutations:Pe}}(this.It,this.userId,v),A=[];let P=new wn((V,z)=>Ot(V.canonicalString(),z.canonicalString()));for(const V of s){const z=Re(this.userId,V.key.path,m);P=P.add(V.key.path.popLast()),A.push(d.put(E)),A.push(u.put(z,ze))}return P.forEach(V=>{A.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.In[m]=v.keys()}),oe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return Fh(e).get(t).next(r=>r?(wt(r.userId===this.userId),jp(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Fh(e).Z({index:"userMutationsIndex",range:s},(d,m,v)=>{m.userId===this.userId&&(wt(m.batchId>=r),u=jp(this.It,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Fh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fh(e).W("userMutationsIndex",t).next(r=>r.map(s=>jp(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=me(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return ry(e).Z({range:s},(d,m,v)=>{const[E,A,P]=d,V=$(A);if(E===this.userId&&t.path.isEqual(V))return Fh(e).get(P).next(z=>{if(!z)throw Xe();wt(z.userId===this.userId),u.push(jp(this.It,z))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Ot);const s=[];return t.forEach(u=>{const d=me(this.userId,u.path),m=IDBKeyRange.lowerBound(d),v=ry(e).Z({range:m},(E,A,P)=>{const[V,z,ee]=E,Me=$(z);V===this.userId&&u.path.isEqual(Me)?r=r.add(ee):P.done()});s.push(v)}),oe.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=me(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new wn(Ot);return ry(e).Z({range:d},(v,E,A)=>{const[P,V,z]=v,ee=$(V);P===this.userId&&r.isPrefixOf(ee)?ee.length===s&&(m=m.add(z)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Fh(e).get(u).next(d=>{if(null===d)throw Xe();wt(d.userId===this.userId),r.push(jp(this.It,d))}))}),oe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return qx(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return ry(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const v=$(u[1]);s.push(v)}else m.done()}).next(()=>{wt(0===s.length)})})}containsKey(e,t){return Zx(e,this.userId,t)}Rn(e){return Wx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Zx(n,e,t){const r=me(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return ry(n).Z({range:u,X:!0},(m,v,E)=>{const[A,P,V]=m;A===e&&P===s&&(d=!0),E.done()}).next(()=>d)}function Fh(n){return mi(n,"mutations")}function ry(n){return mi(n,"documentMutations")}function Wx(n){return mi(n,"mutationQueues")}class zp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new zp(0)}static vn(){return new zp(-1)}}class A1{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new zp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Et.fromTimestamp(new Sn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>iy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return iy(e).Z((d,m)=>{const v=U0(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>oe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return iy(e).Z((r,s)=>{const u=U0(s);t(u)})}Vn(e){return Kx(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}Sn(e,t){return Kx(e).put("targetGlobalKey",t)}Dn(e,t){return iy(e).put(Fx(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ol(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return iy(e).Z({range:s,index:"queryTargetsIndex"},(d,m,v)=>{const E=U0(m);xp(t,E.target)&&(u=E,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Lh(e);return t.forEach(d=>{const m=T(d.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,d))}),oe.waitFor(s)}removeMatchingKeys(e,t,r){const s=Lh(e);return oe.forEach(t,u=>{const d=T(u.path);return oe.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Lh(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Lh(e);let u=Bt();return s.Z({range:r,X:!0},(d,m,v)=>{const E=$(d[1]),A=new Ge(E);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=T(t.path),s=IDBKeyRange.bound([r],[a0(r)],!1,!0);let u=0;return Lh(e).Z({index:"documentTargetsIndex",X:!0,range:s},([d,m],v,E)=>{0!==d&&(u++,E.done())}).next(()=>u>0)}se(e,t){return iy(e).get(t).next(r=>r?U0(r):null)}}function iy(n){return mi(n,"targets")}function Kx(n){return mi(n,"targetGlobal")}function Lh(n){return mi(n,"targetDocuments")}function Yx([n,e],[t,r]){const s=Ot(n,t);return 0===s?Ot(e,r):s}class x1{constructor(e){this.xn=e,this.buffer=new wn(Yx),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Yx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class M1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Yo(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield rc(r)}yield t.Fn(3e5)}))}}class O1{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(ji.at);const r=new x1(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(zx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zx):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,d,m,v,E;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),s=this.params.maximumSequenceNumbersToCollect):s=P,d=Date.now(),this.nthSequenceNumber(e,s))).next(P=>(r=P,m=Date.now(),this.removeTargets(e,r,t))).next(P=>(u=P,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(E=Date.now(),Jv()<=Wa.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${s} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${P} documents in `+(E-v)+`ms\nTotal Duration: ${E-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:P})))}}class P1{constructor(e,t){this.db=e,this.garbageCollector=new O1(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return LI(e,r)}removeReference(e,t,r){return LI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return LI(e,t)}Gn(e,t){return function(r,s){let u=!1;return Wx(r).tt(d=>Zx(r,d,s).next(m=>(m&&(u=!0),oe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const v=this.Gn(e,d).next(E=>{if(!E)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Et.min()),Lh(e).delete([0,T(d.path)])))});s.push(v)}}).next(()=>oe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return LI(e,t)}Kn(e,t){const r=Lh(e);let s,u=ji.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:v,sequenceNumber:E})=>{0===d?(u!==ji.at&&t(new Ge($(s)),u),u=E,s=v):u=ji.at}).next(()=>{u!==ji.at&&t(new Ge($(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LI(n,e){return Lh(n).put((r=n.currentSequenceNumber,{targetId:0,path:T(e.path),sequenceNumber:r}));var r}class Qx{constructor(){this.changes=new lc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N1{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qp(e).put(r)}removeEntry(e,t,r){return qp(e).delete(function(s,u){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],OI(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return qp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(G0(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return qp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(G0(t))},(s,u)=>{r={document:this.jn(t,u),size:RI(u)}}).next(()=>r)}getEntries(e,t){let r=Ai();return this.zn(e,t,(s,u)=>{const d=this.jn(s,u);r=r.insert(s,d)}).next(()=>r)}Hn(e,t){let r=Ai(),s=new zn(Ge.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),s=s.insert(u,RI(d))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let s=new wn(tM);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(G0(s.first()),G0(s.last())),d=s.getIterator();let m=d.getNext();return qp(e).Z({index:"documentKeyIndex",range:u},(v,E,A)=>{const P=Ge.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;m&&tM(m,P)<0;)r(m,null),m=d.getNext();m&&m.isEqual(P)&&(r(m,E),m=d.hasNext()?d.getNext():null),m?A.j(G0(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),OI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qp(e).W(IDBKeyRange.bound(s,u,!0)).next(d=>{let m=Ai();for(const v of d){const E=this.jn(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(E.key,E)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Ai();const d=eM(t,r),m=eM(t,Ps.max());return qp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(v,E,A)=>{const P=this.jn(Ge.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);u=u.insert(P.key,P),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new k1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Xx(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Qn(e,t){return Xx(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function v1(n,e){let t;if(e.document)t=NT(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=Bp(e.noDocument.readTime);t=Nn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=Ge.fromSegments(e.unknownDocument.path),s=Bp(e.unknownDocument.version);t=Nn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Sn(r[0],r[1]);return Et.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Nn.newInvalidDocument(e)}}function Jx(n){return new N1(n)}class k1 extends Qx{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new lc(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new wn((u,d)=>Ot(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const v=Rx(this.Yn.It,d);s=s.add(u.path.popLast()),r+=RI(v)-m.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=Rx(this.Yn.It,d.convertToNoDocument(Et.min()));t.push(this.Yn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Xx(n){return mi(n,"remoteDocumentGlobal")}function qp(n){return mi(n,"remoteDocumentsV14")}function G0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eM(n,e){const t=e.documentKey.path.toArray();return[n,OI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tM(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ot(t[u],r[u]),s)return s;return s=Ot(t.length,r.length),s||(s=Ot(t[t.length-2],r[r.length-2]),s||Ot(t[t.length-1],r[r.length-1]))}class R1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&Np(r.mutation,s,as.empty(),Sn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const s=Rs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let d=Nh();return u.forEach((m,v)=>{d=d.insert(m,v.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Rs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,s){let u=Ai();const d=Fl(),m=Fl();return t.forEach((v,E)=>{const A=r.get(E.key);s.has(E.key)&&(void 0===A||A.mutation instanceof ea)?u=u.insert(E.key,E):void 0!==A&&(d.set(E.key,A.mutation.getFieldMask()),Np(A.mutation,E,A.mutation.getFieldMask(),Sn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((E,A)=>d.set(E,A)),t.forEach((E,A)=>{var P;return m.set(E,new R1(A,null!==(P=d.get(E))&&void 0!==P?P:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Fl();let s=new zn((d,m)=>d-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(v=>{const E=t.get(v);if(null===E)return;let A=r.get(v)||as.empty();A=m.applyToLocalView(E,A),r.set(v,A);const P=(s.get(m.batchId)||Bt()).add(v);s=s.insert(m.batchId,P)})}).next(()=>{const d=[],m=s.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),E=v.key,A=v.value,P=wI();A.forEach(V=>{if(!u.has(V)){const z=b0(t.get(V),r.get(V));null!==z&&P.set(V,z),u=u.add(V)}}),d.push(this.documentOverlayCache.saveOverlays(e,E,P))}return oe.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Hm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const d=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):oe.resolve(Rs());let m=-1,v=u;return d.next(E=>oe.forEach(E,(A,P)=>(m<P.largestBatchId&&(m=P.largestBatchId),u.get(A)?oe.resolve():this.getBaseDocument(e,A,P).next(V=>{v=v.insert(A,V)}))).next(()=>this.populateOverlays(e,E,u)).next(()=>this.computeViews(e,v,E,Bt())).next(A=>({batchId:m,changes:Qm(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let s=Nh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Nh();return this.indexManager.getCollectionParents(e,s).next(d=>oe.forEach(d,m=>{const v=(E=t,A=m.child(s),new ru(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(E=>{E.forEach((A,P)=>{u=u.insert(A,P)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const E=v.getKey();null===s.get(E)&&(s=s.insert(E,Nn.newInvalidDocument(E)))});let d=Nh();return s.forEach((m,v)=>{const E=u.get(m);void 0!==E&&Np(E.mutation,v,as.empty(),Sn.now()),zm(t,v)&&(d=d.insert(m,v))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(Nn.newInvalidDocument(t))}}class F1{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:yr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:BT(r.bundledQuery),readTime:yr(r.readTime)}),oe.resolve();var r}}class L1{constructor(){this.overlays=new zn(Ge.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Rs();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const s=Rs(),u=t.length+1,d=new Ge(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const v=m.getNext().value,E=v.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new zn((E,A)=>E-A);const d=this.overlays.getIterator();for(;d.hasNext();){const E=d.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let A=u.get(E.largestBatchId);null===A&&(A=Rs(),u=u.insert(E.largestBatchId,A)),A.set(E.getKey(),E)}}const m=Rs(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((E,A)=>m.set(E,A)),!(m.size()>=s)););return oe.resolve(m)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new UT(t,r));let u=this.es.get(t);void 0===u&&(u=Bt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class HT{constructor(){this.ns=new wn(yi.ss),this.rs=new wn(yi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new yi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new yi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new Yt([])),r=new yi(t,e),s=new yi(t,e+1),u=[];return this.rs.forEachInRange([r,s],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new Yt([])),r=new yi(t,e),s=new yi(t,e+1);let u=Bt();return this.rs.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new yi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class yi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||Ot(e._s,t._s)}static os(e,t){return Ot(e._s,t._s)||Ge.comparator(e.key,t.key)}}class V1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new wn(yi.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const d=new LT(u,t,r,s);this.mutationQueue.push(d);for(const m of s)this.gs=this.gs.add(new yi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yi(t,0),s=new yi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],d=>{const m=this.ys(d._s);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Ot);return t.forEach(s=>{const u=new yi(s,0),d=new yi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const d=new yi(new Ge(u),0);let m=new wn(Ot);return this.gs.forEachWhile(v=>{const E=v.key.path;return!!r.isPrefixOf(E)&&(E.length===s&&(m=m.add(v._s)),!0)},d),oe.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){wt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,s=>{const u=new yi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new yi(t,0),s=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class U1{constructor(e){this.Es=e,this.docs=new zn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=Ai();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Nn.newInvalidDocument(s))}),oe.resolve(r)}getAllFromCollection(e,t,r){let s=Ai();const u=new Ge(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Rm(lT(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){Xe()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new B1(this)}getSize(e){return oe.resolve(this.size)}}class B1 extends Qx{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class j1{constructor(e){this.persistence=e,this.Rs=new lc(t=>Ol(t),xp),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.bs=0,this.Ps=new HT,this.targetCount=0,this.vs=zp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new zp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),oe.waitFor(u).next(()=>s)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class rM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ji(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new j1(this),this.indexManager=new T1,this.remoteDocumentCache=new U1(r=>this.referenceDelegate.xs(r)),this.It=new kx(t),this.Ns=new F1(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new L1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new V1(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const s=new $1(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class $1 extends Eh{constructor(e){super(),this.currentSequenceNumber=e}}class VI{constructor(e){this.persistence=e,this.Fs=new HT,this.$s=null}static Bs(e){return new VI(e)}get Ls(){if(this.$s)return this.$s;throw Xe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const s=Ge.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,Et.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class H1{constructor(e){this.It=e}$(e,t,r,s){const u=new Ep("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X,{unique:!0}),m.createObjectStore("documentMutations"),iM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=oe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),iM(e)),d=d.next(()=>function(m){const v=m.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",E)}(u))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(m,v){return v.store("mutations").W().next(E=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X,{unique:!0});const A=v.store("mutations"),P=E.map(V=>A.put(V));return oe.waitFor(P)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.qs(u))),r<6&&s>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(d=d.next(()=>this.Gs(u))),r<8&&s>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&s>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.js(u))),r<11&&s>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:R0});v.createIndex("collectionPathOverlayIndex",F0,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",L0,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:rt});v.createIndex("documentKeyIndex",mt),v.createIndex("collectionGroupIndex",Se)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&s>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:O0}).createIndex("sequenceNumberIndex",P0,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:N0}).createIndex("documentKeyIndex",k0,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=RI(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>oe.forEach(s,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>oe.forEach(m,v=>{wt(v.userId===u.userId);const E=jp(this.It,v);return qx(e,u.userId,E).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((d,m)=>{const v=new Yt(d),E=[0,T(v)];u.push(t.get(E).next(A=>A?oe.resolve():t.put({targetId:0,path:T(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Vl});const r=t.store("collectionParents"),s=new $T,u=d=>{if(s.add(d)){const m=d.lastSegment(),v=d.popLast();return r.put({collectionId:m,parent:T(v)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const v=new Yt(d);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,v],E)=>{const A=$(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=U0(s),d=Fx(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),v=(E=d,E.document?new Ge(Yt.fromString(E.document.name).popFirst(5)):E.noDocument?Ge.fromSegments(E.noDocument.path):E.unknownDocument?Ge.fromSegments(E.unknownDocument.path):Xe()).path.toArray();var E;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(m.put(A))}).next(()=>oe.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=Jx(this.It),u=new rM(VI.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(v=>{var E;let A=null!==(E=m.get(v.userId))&&void 0!==E?E:Bt();jp(this.It,v).keys().forEach(P=>A=A.add(P)),m.set(v.userId,A)}),oe.forEach(m,(v,E)=>{const A=new Vr(E),P=PI.oe(this.It,A),V=u.getIndexManager(A),z=FI.oe(A,this.It,V,u.referenceDelegate);return new nM(s,z,P,V).recalculateAndSaveOverlaysForDocumentKeys(new FT(t,ji.at),v).next()})})}}function iM(n){n.createObjectStore("targetDocuments",{keyPath:cn}).createIndex("documentTargetsIndex",Un,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bt,{unique:!0}),n.createObjectStore("targetGlobal")}const GT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zT{constructor(e,t,r,s,u,d,m,v,E,A,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=E,this.Ys=A,this.Xs=P,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=V=>Promise.resolve(),!zT.C())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new P1(this,s),this.ii=t+"main",this.It=new kx(v),this.ri=new lo(this.ii,this.Xs,new H1(this.It)),this.Cs=new A1(this.referenceDelegate,this.It),this.remoteDocumentCache=Jx(this.It),this.Ns=new w1,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,GT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ji(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>UI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Yo(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return z0(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return UI(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=mi(r,"clientMetadata");return s.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(v=>-1===d.indexOf(v));return oe.forEach(m,v=>s.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):z0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,GT);return!1}}return!(!this.networkEnabled||!this.inForeground)||UI(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const d=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new FT(t,ji.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>UI(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return FI.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S1(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return PI.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?_1:14===d?Nx:13===d?Px:12===d?V0:11===d?ny:void Xe();var d;let m;return this.ri.runTransaction(e,s,u,v=>(m=new FT(v,this.Ss?this.Ss.next():ji.at),"readwrite-primary"===t?this.fi(m).next(E=>!!E||this.di(m)).next(E=>{if(!E)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(ce.FAILED_PRECONDITION,c0);return r(m)}).next(E=>this.wi(m).next(()=>E)):this.Vi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Vi(e){return z0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,GT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return z0(e).put("owner",t)}static C(){return lo.C()}_i(e){const t=z0(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function z0(n){return mi(n,"owner")}function UI(n){return mi(n,"clientMetadata")}function qT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ZT{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Bt(),s=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new ZT(e,t.fromCache,r,s)}}class sM{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(v0(t))return oe.resolve(null);let r=Si(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Mp(t,null,"F"),r=Si(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Bt(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const E=this.Fi(t,m);return this.$i(t,E,d,v.readTime)?this.ki(e,Mp(t,null,"F")):this.Bi(e,E,t,v)}))})))}Oi(e,t,r,s){return v0(t)||s.isEqual(Et.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,s)?this.Mi(e,t):(Jv()<=Wa.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Jo(t)),this.Bi(e,d,t,YE(s,-1)))})}Fi(e,t){let r=new wn(Xo(e));return t.forEach((s,u)=>{zm(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return Jv()<=Wa.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ps.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class G1{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new zn(Ot),this.qi=new lc(u=>Ol(u),xp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function oM(n,e,t,r){return new G1(n,e,t,r)}function aM(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,ye.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let v=Bt();for(const E of s){d.push(E.batchId);for(const A of E.mutations)v=v.add(A.key)}for(const E of u){m.push(E.batchId);for(const A of E.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(E=>({ji:E,removedBatchIds:d,addedBatchIds:m}))})})}),WT.apply(this,arguments)}function z1(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,v,E){const A=v.batch,P=A.keys();let V=oe.resolve();return P.forEach(z=>{V=V.next(()=>E.getEntry(m,z)).next(ee=>{const Me=v.docVersions.get(z);wt(null!==Me),ee.version.compareTo(Me)<0&&(A.applyToRemoteDocument(ee,v),ee.isValidDocument()&&(ee.setReadTime(v.commitVersion),E.addEntry(ee)))})}),V.next(()=>d.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Bt();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(m=m.add(d.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function uM(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function q1(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const m=[];e.targetChanges.forEach((A,P)=>{const V=s.get(P);if(!V)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,P).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,P)));let z=V.withSequenceNumber(u.currentSequenceNumber);var ee,Me,Pe;e.targetMismatches.has(P)?z=z.withResumeToken(mr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):A.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(A.resumeToken,r)),s=s.insert(P,z),Me=z,Pe=A,(0===(ee=V).resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,z))});let v=Ai(),E=Bt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(cM(u,d,e.documentUpdates).next(A=>{v=A.Wi,E=A.zi})),!r.isEqual(Et.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(P=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return oe.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,E)).next(()=>v)}).then(u=>(t.Ui=s,u))}function cM(n,e,t){let r=Bt(),s=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Ai();return t.forEach((m,v)=>{const E=u.get(m);v.isFoundDocument()!==E.isFoundDocument()&&(s=s.add(m)),v.isNoDocument()&&v.version.isEqual(Et.min())?(e.removeEntry(m,v.readTime),d=d.insert(m,v)):!E.isValidDocument()||v.version.compareTo(E.version)>0||0===v.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(v),d=d.insert(m,v)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",v.version)}),{Wi:d,zi:s}})}function Z1(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sy(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,oe.resolve(s)):t.Cs.allocateTargetId(r).next(d=>(s=new Rh(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function oy(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,ye.Z)(function*(n,e,t){const r=qe(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!Yo(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),KT.apply(this,arguments)}function BI(n,e,t){const r=qe(n);let s=Et.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,v,E){const A=qe(m),P=A.qi.get(E);return void 0!==P?oe.resolve(A.Ui.get(P)):A.Cs.getTargetData(v,E)}(r,d,Si(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?s:Et.min(),t?u:Bt())).next(m=>(hM(r,qm(e),m),{documents:m,Hi:u})))}function lM(n,e){const t=qe(n),r=qe(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function dM(n,e){const t=qe(n),r=t.Ki.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,YE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(hM(t,e,s),s))}function hM(n,e,t){let r=n.Ki.get(e)||Et.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function YT(){return YT=(0,ye.Z)(function*(n,e,t,r){const s=qe(n);let u=Bt(),d=Ai();for(const E of t){const A=e.Ji(E.metadata.name);E.document&&(u=u.add(A));const P=e.Yi(E);P.setReadTime(e.Xi(E.metadata.readTime)),d=d.insert(A,P)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),v=yield sy(s,(E=r,Si(cc(Yt.fromString(`__bundle__/docs/${E}`)))));var E;return s.persistence.runTransaction("Apply bundle documents","readwrite",E=>cM(E,m,d).next(A=>(m.apply(E),A)).next(A=>s.Cs.removeMatchingKeysForTargetId(E,v.targetId).next(()=>s.Cs.addMatchingKeys(E,u,v.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(E,A.Wi,A.zi)).next(()=>A.Wi)))}),YT.apply(this,arguments)}function K1(n,e){return QT.apply(this,arguments)}function QT(){return QT=(0,ye.Z)(function*(n,e,t=Bt()){const r=yield sy(n,Si(BT(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const d=yr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(mr.EMPTY_BYTE_STRING,d);return s.Ui=s.Ui.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),QT.apply(this,arguments)}function fM(n,e){return`firestore_clients_${n}_${e}`}function pM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function JT(n,e){return`firestore_targets_${n}_${e}`}class jI{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new xe(s.error.code,s.error.message))),d?new jI(e,t,s.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class q0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new xe(r.error.code,r.error.message))),u?new q0(e,r.state,s):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $I{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=T0();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=h0(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return s?new $I(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class XT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new XT(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class eS{constructor(){this.activeTargetIds=T0()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tS{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new zn(Ot),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=fM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new eS),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(fM(e.persistenceKey,s));if(u){const d=$I.Zi(s,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(JT(this.persistenceKey,e));if(r){const s=q0.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(JT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let d=ji.at;if(null!=u)try{const m=JSON.parse(u);wt("number"==typeof m),d=m}catch(m){lr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);s!==ji.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new jI(this.currentUser,e,t,r),u=pM(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=pM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=JT(this.persistenceKey,e),u=new q0(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return $I.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return jI.Zi(new Vr(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return q0.Zi(s,t)}yr(e){return XT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(v=>{s.has(v)||d.push(v)}),s.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=T0();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class gM{constructor(){this.Lr=new eS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new eS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Y1{qr(e){}shutdown(){}}class mM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Q1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class J1{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class X1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const d=this.ho(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.lo(m,s,u),this.fo(e,d,m,r).then(v=>(Oe("RestConnection","Received: ",v),v),v=>{throw xl("RestConnection",`${e} failed with error: `,v,"url: ",d,"request:",r),v})}_o(e,t,r,s,u,d){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+tc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${Q1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,d)=>{const m=new sT;m.setWithCredentials(!0),m.listenOnce(vx.COMPLETE,()=>{var E;try{switch(m.getLastErrorCode()){case Yv.NO_ERROR:const A=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(A)),u(A);break;case Yv.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Yv.HTTP_ERROR:const P=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',P,"response text:",m.getResponseText()),P>0){let V=m.getResponseJson();Array.isArray(V)&&(V=V[0]);const z=null===(E=V)||void 0===E?void 0:E.error;if(z&&z.status&&z.message){const ee=function(Me){const Pe=Me.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Pe)>=0?Pe:ce.UNKNOWN}(z.status);d(new xe(ee,z.message))}else d(new xe(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);m.send(t,"POST",v,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=HE(),d=GE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new iT({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=s.join("");Oe("Connection","Creating WebChannel: "+v,m);const E=u.createWebChannel(v,m);let A=!1,P=!1;const V=new J1({Hr:ee=>{P?Oe("Connection","Not sending because WebChannel is closed:",ee):(A||(Oe("Connection","Opening WebChannel transport."),E.open(),A=!0),Oe("Connection","WebChannel sending:",ee),E.send(ee))},Jr:()=>E.close()}),z=(ee,Me,Pe)=>{ee.listen(Me,st=>{try{Pe(st)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return z(E,km.EventType.OPEN,()=>{P||Oe("Connection","WebChannel transport opened.")}),z(E,km.EventType.CLOSE,()=>{P||(P=!0,Oe("Connection","WebChannel transport closed"),V.io())}),z(E,km.EventType.ERROR,ee=>{P||(P=!0,xl("Connection","WebChannel transport errored:",ee),V.io(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),z(E,km.EventType.MESSAGE,ee=>{var Me;if(!P){const Pe=ee.data[0];wt(!!Pe);const st=Pe,Tt=st.error||(null===(Me=st[0])||void 0===Me?void 0:Me.error);if(Tt){Oe("Connection","WebChannel received error:",Tt);const Pt=Tt.status;let Nt=function(Ht){const ii=Dr[Ht];if(void 0!==ii)return Fp(ii)}(Pt),Ft=Tt.message;void 0===Nt&&(Nt=ce.INTERNAL,Ft="Unknown error status: "+Pt+" with message "+Tt.message),P=!0,V.io(new xe(Nt,Ft)),E.close()}else Oe("Connection","WebChannel received:",Pe),V.ro(Pe)}}),z(d,zE.STAT_EVENT,ee=>{ee.stat===Qv.PROXY?Oe("Connection","Detected buffering proxy"):ee.stat===Qv.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.so()},0),V}}function yM(){return typeof window<"u"?window:null}function HI(){return typeof document<"u"?document:null}function Z0(n){return new DI(n,!0)}class nS{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class _M{constructor(e,t,r,s,u,d,m,v){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new nS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eP extends _M{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function xx(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:Xe(),s=e.targetChange.targetIds||[],u=function(v,E){return v.gt?(wt(void 0===E||"string"==typeof E),mr.fromBase64String(E||"")):(wt(void 0===E||E instanceof Uint8Array),mr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(v){const E=void 0===v.code?ce.UNKNOWN:Fp(v.code);return new xe(E,v.message||"")}(d);t=new EI(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=iu(n,r.document.name),u=yr(r.document.updateTime),d=new ni({mapValue:{fields:r.document.fields}}),m=Nn.newFoundDocument(s,u,d);t=new ey(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=iu(n,r.document),u=r.readTime?yr(r.readTime):Et.min(),d=Nn.newNoDocument(s,u);t=new ey([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=iu(n,r.document);t=new ey([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,u=new Tx(r.count||0);t=new CI(r.targetId,u)}}var v;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return Et.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?yr(u.readTime):Et.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Lp(this.It),t.addTarget=function(s,u){let d;const m=u.target;return d=m0(m)?{documents:kT(s,m)}:{query:MI(s,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=MT(s,u.resumeToken):u.snapshotVersion.compareTo(Et.min())>0&&(d.readTime=Ll(s,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function Ox(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Lp(this.It),t.removeTarget=e,this.Bo(t)}}class tP extends _M{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Mx(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,s){let u=yr(r.updateTime?r.updateTime:s);return u.isEqual(Et.min())&&(u=yr(s)),new Km(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.Zo(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Lp(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Vp(this.It,r))};this.Bo(t)}}class nP extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(ce.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class iP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(lr(t),this.ou=!1):Oe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class sP{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var v;Ul(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ye.Z)(function*(E){const A=qe(E);A._u.add(4),yield ay(A),A.gu.set("Unknown"),A._u.delete(4),yield W0(A)}),function(E){return v.apply(this,arguments)})(d))}))}),this.gu=new iP(r,s)}}function W0(n){return iS.apply(this,arguments)}function iS(){return iS=(0,ye.Z)(function*(n){if(Ul(n))for(const e of n.wu)yield e(!0)}),iS.apply(this,arguments)}function ay(n){return sS.apply(this,arguments)}function sS(){return sS=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),sS.apply(this,arguments)}function GI(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),uS(t)?aS(t):cy(t).ko()&&oS(t,e))}function K0(n,e){const t=qe(n),r=cy(t);t.du.delete(e),r.ko()&&vM(t,e),0===t.du.size&&(r.ko()?r.Fo():Ul(t)&&t.gu.set("Unknown"))}function oS(n,e){n.yu.Mt(e.targetId),cy(n).zo(e)}function vM(n,e){n.yu.Mt(e),cy(n).Ho(e)}function aS(n){n.yu=new bI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),cy(n).start(),n.gu.uu()}function uS(n){return Ul(n)&&!cy(n).No()&&n.du.size>0}function Ul(n){return 0===qe(n)._u.size}function wM(n){n.yu=void 0}function oP(n){return cS.apply(this,arguments)}function cS(){return cS=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{oS(n,e)})}),cS.apply(this,arguments)}function aP(n,e){return lS.apply(this,arguments)}function lS(){return lS=(0,ye.Z)(function*(n,e){wM(n),uS(n)?(n.gu.hu(e),aS(n)):n.gu.set("Unknown")}),lS.apply(this,arguments)}function uP(n,e,t){return dS.apply(this,arguments)}function dS(){return dS=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof EI&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(s,u){const d=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,d),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zI(n,r)}else if(e instanceof ey?n.yu.Gt(e):e instanceof CI?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Et.min()))try{const r=yield uM(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.yu.te(u);return d.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const E=s.du.get(v);E&&s.du.set(v,E.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const v=s.du.get(m);if(!v)return;s.du.set(m,v.withResumeToken(mr.EMPTY_BYTE_STRING,v.snapshotVersion)),vM(s,m);const E=new Rh(v.target,m,1,v.sequenceNumber);oS(s,E)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield zI(n,r)}var r}),dS.apply(this,arguments)}function zI(n,e,t){return hS.apply(this,arguments)}function hS(){return hS=(0,ye.Z)(function*(n,e,t){if(!Yo(e))throw e;n._u.add(1),yield ay(n),n.gu.set("Offline"),t||(t=()=>uM(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield W0(n)}))}),hS.apply(this,arguments)}function CM(n,e){return e().catch(t=>zI(n,t,e))}function uy(n){return fS.apply(this,arguments)}function fS(){return fS=(0,ye.Z)(function*(n){const e=qe(n),t=Vh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;cP(e);)try{const s=yield Z1(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,lP(e,s)}catch(s){yield zI(e,s)}EM(e)&&IM(e)}),fS.apply(this,arguments)}function cP(n){return Ul(n)&&n.fu.length<10}function lP(n,e){n.fu.push(e);const t=Vh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function EM(n){return Ul(n)&&!Vh(n).No()&&n.fu.length>0}function IM(n){Vh(n).start()}function dP(n){return pS.apply(this,arguments)}function pS(){return pS=(0,ye.Z)(function*(n){Vh(n).eu()}),pS.apply(this,arguments)}function hP(n){return gS.apply(this,arguments)}function gS(){return gS=(0,ye.Z)(function*(n){const e=Vh(n);for(const t of n.fu)e.Xo(t.mutations)}),gS.apply(this,arguments)}function fP(n,e,t){return mS.apply(this,arguments)}function mS(){return mS=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),s=VT.from(r,e,t);yield CM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield uy(n)}),mS.apply(this,arguments)}function pP(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,ye.Z)(function*(n,e){var t;e&&Vh(n).Yo&&(yield(t=(0,ye.Z)(function*(r,s){if(vI(u=s.code)&&u!==ce.ABORTED){const d=r.fu.shift();Vh(r).Mo(),yield CM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield uy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),EM(n)&&IM(n)}),yS.apply(this,arguments)}function bM(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,ye.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Ul(t);t._u.add(3),yield ay(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield W0(t)}),_S.apply(this,arguments)}function vS(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,ye.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield W0(t)):e||(t._u.add(2),yield ay(t),t.gu.set("Unknown"))}),wS.apply(this,arguments)}function cy(n){return n.pu||(n.pu=function(e,t,r){const s=qe(e);return s.su(),new eP(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:oP.bind(null,n),Zr:aP.bind(null,n),Wo:uP.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Mo(),uS(n)?aS(n):n.gu.set("Unknown")):(yield n.pu.stop(),wM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Vh(n){return n.Iu||(n.Iu=function(e,t,r){const s=qe(e);return s.su(),new tP(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:dP.bind(null,n),Zr:pP.bind(null,n),tu:hP.bind(null,n),Zo:fP.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Mo(),yield uy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class CS{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,m=new CS(e,t,d,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ly(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Yo(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class dy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Nh(),this.sortedSet=new zn(this.comparator)}static emptySet(e){return new dy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new dy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DM{constructor(){this.Tu=new zn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Xe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class hy{constructor(e,t,r,s,u,d,m,v,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,s,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new hy(e,t,dy.emptySet(t),d,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class gP{constructor(){this.Au=void 0,this.listeners=[]}}class mP{constructor(){this.queries=new lc(e=>Gm(e),Op),this.onlineState="Unknown",this.Ru=new Set}}function ES(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new gP),s)try{u.Au=yield t.onListen(r)}catch(d){const m=ly(d,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&TS(t)}),IS.apply(this,arguments)}function bS(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),DS.apply(this,arguments)}function yP(n,e){const t=qe(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const m of d.listeners)m.Pu(s)&&(r=!0);d.Au=s}}r&&TS(t)}function _P(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function TS(n){n.Ru.forEach(e=>{e.next()})}class SS{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new hy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=hy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class vP{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class TM{constructor(e){this.It=e}Ji(e){return iu(this.It,e)}Yi(e){return e.metadata.exists?NT(this.It,e.document,!1):Nn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return yr(e)}}class wP{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Yt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new TM(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const d of s.metadata.queries){const m=(t.get(d)||Bt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function W1(n,e,t,r){return YT.apply(this,arguments)}(e.localStore,new TM(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield K1(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function SM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class AM{constructor(e){this.key=e}}class xM{constructor(e){this.key=e}}class MM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Bt(),this.mutatedKeys=Bt(),this.Gu=Xo(e),this.Qu=new dy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new DM,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,m=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,E="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,P)=>{const V=s.get(A),z=zm(this.query,P)?P:null,ee=!!V&&this.mutatedKeys.has(V.key),Me=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Pe=!1;V&&z?V.data.isEqual(z.data)?ee!==Me&&(r.track({type:3,doc:z}),Pe=!0):this.Hu(V,z)||(r.track({type:2,doc:z}),Pe=!0,(v&&this.Gu(z,v)>0||E&&this.Gu(z,E)<0)&&(m=!0)):!V&&z?(r.track({type:0,doc:z}),Pe=!0):V&&!z&&(r.track({type:1,doc:V}),Pe=!0,(v||E)&&(m=!0)),Pe&&(z?(d=d.add(z),u=Me?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((E,A)=>function(P,V){const z=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return z(P)-z(V)}(E.type,A.type)||this.Gu(E.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,v=m!==this.qu;return this.qu=m,0!==u.length||v?{snapshot:new hy(this.query,e.Qu,s,u,e.mutatedKeys,0===m,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new DM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Bt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new xM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new AM(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Bt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return hy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class CP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class EP{constructor(e){this.key=e,this.nc=!1}}class IP{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new lc(m=>Gm(m),Op),this.rc=new Map,this.oc=new Set,this.uc=new zn(Ge.comparator),this.cc=new Map,this.ac=new HT,this.hc={},this.lc=new Map,this.fc=zp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function bP(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,ye.Z)(function*(n,e){const t=QS(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const d=yield sy(t.localStore,Si(e));t.isPrimaryClient&&GI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield xS(t,e,r,"current"===m,d.resumeToken)}return s}),AS.apply(this,arguments)}function xS(n,e,t,r,s){return MS.apply(this,arguments)}function MS(){return MS=(0,ye.Z)(function*(n,e,t,r,s){n._c=(P,V,z)=>{return(ee=(0,ye.Z)(function*(Me,Pe,st,Tt){let Pt=Pe.view.Wu(st);Pt.$i&&(Pt=yield BI(Me.localStore,Pe.query,!1).then(({documents:Ht})=>Pe.view.Wu(Ht,Pt)));const Nt=Tt&&Tt.targetChanges.get(Pe.targetId),Ft=Pe.view.applyChanges(Pt,Me.isPrimaryClient,Nt);return BS(Me,Pe.targetId,Ft.Xu),Ft.snapshot}),function(Me,Pe,st,Tt){return ee.apply(this,arguments)})(n,P,V,z);var ee};const u=yield BI(n.localStore,e,!0),d=new MM(e,u.Hi),m=d.Wu(u.documents),v=kh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),E=d.applyChanges(m,n.isPrimaryClient,v);BS(n,t,E.Xu);const A=new CP(e,t,d);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),E.snapshot}),MS.apply(this,arguments)}function DP(n,e){return OS.apply(this,arguments)}function OS(){return OS=(0,ye.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!Op(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield oy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),K0(t.remoteStore,r.targetId),fy(t,r.targetId)}).catch(rc))):(fy(t,r.targetId),yield oy(t.localStore,r.targetId,!0))}),OS.apply(this,arguments)}function PS(){return PS=(0,ye.Z)(function*(n,e,t){const r=JS(n);try{const s=yield function(u,d){const m=qe(u),v=Sn.now(),E=d.reduce((V,z)=>V.add(z.key),Bt());let A,P;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let z=Ai(),ee=Bt();return m.Gi.getEntries(V,E).next(Me=>{z=Me,z.forEach((Pe,st)=>{st.isValidDocument()||(ee=ee.add(Pe))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,z)).next(Me=>{A=Me;const Pe=[];for(const st of d){const Tt=DT(st,A.get(st.key).overlayedDocument);null!=Tt&&Pe.push(new ea(st.key,Tt,g0(Tt.value.mapValue),In.exists(!0)))}return m.mutationQueue.addMutationBatch(V,v,Pe,d)}).next(Me=>{P=Me;const Pe=Me.applyToLocalDocumentSet(A,ee);return m.documentOverlayCache.saveOverlays(V,Me.batchId,Pe)})}).then(()=>({batchId:P.batchId,changes:Qm(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,m){let v=u.hc[u.currentUser.toKey()];v||(v=new zn(Ot)),v=v.insert(d,m),u.hc[u.currentUser.toKey()]=v}(r,s.batchId,t),yield Bl(r,s.changes),yield uy(r.remoteStore)}catch(s){const u=ly(s,"Failed to persist write");t.reject(u)}}),PS.apply(this,arguments)}function OM(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,ye.Z)(function*(n,e){const t=qe(n);try{const r=yield q1(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.cc.get(u);d&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.nc=!0:s.modifiedDocuments.size>0?wt(d.nc):s.removedDocuments.size>0&&(wt(d.nc),d.nc=!1))}),yield Bl(t,r,e)}catch(r){yield rc(r)}}),NS.apply(this,arguments)}function PM(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let v=!1;m.queries.forEach((E,A)=>{for(const P of A.listeners)P.bu(d)&&(v=!0)}),v&&TS(m)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SP(n,e,t){return kS.apply(this,arguments)}function kS(){return kS=(0,ye.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let d=new zn(Ge.comparator);d=d.insert(u,Nn.newNoDocument(u,Et.min()));const m=Bt().add(u),v=new Xm(Et.min(),new Map,new wn(Ot),d,m);yield OM(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),jS(r)}else yield oy(r.localStore,e,!1).then(()=>fy(r,e,t)).catch(rc)}),kS.apply(this,arguments)}function AP(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield z1(t.localStore,e);US(t,r,null),VS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bl(t,s)}catch(s){yield rc(s)}}),RS.apply(this,arguments)}function xP(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,ye.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return m.mutationQueue.lookupMutationBatch(v,d).next(A=>(wt(null!==A),E=A.keys(),m.mutationQueue.removeMutationBatch(v,A))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,E,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>m.localDocuments.getDocuments(v,E))})}(r.localStore,e);US(r,e,t),VS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bl(r,s)}catch(s){yield rc(s)}}),FS.apply(this,arguments)}function LS(){return LS=(0,ye.Z)(function*(n,e){const t=qe(n);Ul(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=ly(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),LS.apply(this,arguments)}function VS(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function US(n,e,t){const r=qe(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function fy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||NM(n,r)})}function NM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(K0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),jS(n))}function BS(n,e,t){for(const r of t)r instanceof AM?(n.ac.addReference(r.key,e),OP(n,r)):r instanceof xM?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||NM(n,r.key)):Xe()}function OP(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oc.add(r),jS(n))}function jS(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ge(Yt.fromString(e)),r=n.fc.next();n.cc.set(r,new EP(t)),n.uc=n.uc.insert(t,r),GI(n.remoteStore,new Rh(Si(cc(t.path)),r,2,ji.at))}}function Bl(n,e,t){return $S.apply(this,arguments)}function $S(){return $S=(0,ye.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],d=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,v)=>{d.push(r._c(v,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,E?.fromCache?"not-current":"current"),E){s.push(E);const A=ZT.Ci(v.targetId,E);u.push(A)}}))}),yield Promise.all(d),r.sc.Wo(s),yield(m=(0,ye.Z)(function*(v,E){const A=qe(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>oe.forEach(E,V=>oe.forEach(V.Si,z=>A.persistence.referenceDelegate.addReference(P,V.targetId,z)).next(()=>oe.forEach(V.Di,z=>A.persistence.referenceDelegate.removeReference(P,V.targetId,z)))))}catch(P){if(!Yo(P))throw P;Oe("LocalStore","Failed to update sequence numbers: "+P)}for(const P of E){const V=P.targetId;if(!P.fromCache){const z=A.Ui.get(V),Me=z.withLastLimboFreeSnapshotVersion(z.snapshotVersion);A.Ui=A.Ui.insert(V,Me)}}}),function(v,E){return m.apply(this,arguments)})(r.localStore,u))}),$S.apply(this,arguments)}function PP(n,e){return HS.apply(this,arguments)}function HS(){return HS=(0,ye.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield aM(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(d=>{d.forEach(m=>{m.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bl(t,r.ji)}var s}),HS.apply(this,arguments)}function NP(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return Bt().add(r.key);{let s=Bt();const u=t.rc.get(e);if(!u)return s;for(const d of u){const m=t.ic.get(d);s=s.unionWith(m.view.ju)}return s}}function kP(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,ye.Z)(function*(n,e){const t=qe(n),r=yield BI(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&BS(t,e.targetId,s.Xu),s}),GS.apply(this,arguments)}function RP(n,e){return zS.apply(this,arguments)}function zS(){return zS=(0,ye.Z)(function*(n,e){const t=qe(n);return dM(t.localStore,e).then(r=>Bl(t,r))}),zS.apply(this,arguments)}function FP(n,e,t,r){return qS.apply(this,arguments)}function qS(){return qS=(0,ye.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(d,m){const v=qe(d),E=qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>E.Tn(A,m).next(P=>P?v.localDocuments.getDocuments(A,P):oe.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield uy(s.remoteStore):"acknowledged"===t||"rejected"===t?(US(s,e,r||null),VS(s,e),m=e,qe(qe(s.localStore).mutationQueue).An(m)):Xe(),yield Bl(s,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),qS.apply(this,arguments)}function ZS(){return ZS=(0,ye.Z)(function*(n,e){const t=qe(n);if(QS(t),JS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield kM(t,r.toArray());t.dc=!0,yield vS(t.remoteStore,!0);for(const u of s)GI(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(fy(t,d),oy(t.localStore,d,!0))),K0(t.remoteStore,d)}),yield s,yield kM(t,r),function(u){const d=qe(u);d.cc.forEach((m,v)=>{K0(d.remoteStore,v)}),d.ac.fs(),d.cc=new Map,d.uc=new zn(Ge.comparator)}(t),t.dc=!1,yield vS(t.remoteStore,!1)}}),ZS.apply(this,arguments)}function kM(n,e,t){return WS.apply(this,arguments)}function WS(){return WS=(0,ye.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const d of e){let m;const v=r.rc.get(d);if(v&&0!==v.length){m=yield sy(r.localStore,Si(v[0]));for(const E of v){const A=r.ic.get(E),P=yield kP(r,A);P.snapshot&&u.push(P.snapshot)}}else{const E=yield lM(r.localStore,d);m=yield sy(r.localStore,E),yield xS(r,RM(E),d,!1,m.resumeToken)}s.push(m)}return r.sc.Wo(u),s}),WS.apply(this,arguments)}function RM(n){return cI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function VP(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function UP(n,e,t,r){return KS.apply(this,arguments)}function KS(){return KS=(0,ye.Z)(function*(n,e,t,r){const s=qe(n);if(s.dc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield dM(s.localStore,qm(u[0])),m=Xm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,mr.EMPTY_BYTE_STRING);yield Bl(s,d,m);break}case"rejected":yield oy(s.localStore,e,!0),fy(s,e,r);break;default:Xe()}}),KS.apply(this,arguments)}function BP(n,e,t){return YS.apply(this,arguments)}function YS(){return YS=(0,ye.Z)(function*(n,e,t){const r=QS(n);if(r.dc){for(const s of e){if(r.rc.has(s)){Oe("SyncEngine","Adding an already active target "+s);continue}const u=yield lM(r.localStore,s),d=yield sy(r.localStore,u);yield xS(r,RM(u),d.targetId,!1,d.resumeToken),GI(r.remoteStore,d)}for(const s of t)r.rc.has(s)&&(yield oy(r.localStore,s,!1).then(()=>{K0(r.remoteStore,s),fy(r,s)}).catch(rc))}}),YS.apply(this,arguments)}function QS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SP.bind(null,e),e.sc.Wo=yP.bind(null,e.eventManager),e.sc.wc=_P.bind(null,e.eventManager),e}function JS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,e),e}class FM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.It=Z0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return oM(this.persistence,new sM,e.initialUser,this.It)}yc(e){return new rM(VI.Bs,this.It)}gc(e){return new gM}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class LM extends FM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield JS(r.Ac.syncEngine),yield uy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return oM(this.persistence,new sM,e.initialUser,this.It)}Tc(e,t){return new M1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new JE(t,this.persistence);return new Cx(e.asyncQueue,r)}yc(e){const t=qT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fs.withCacheSize(this.cacheSizeBytes):Fs.DEFAULT;return new zT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yM(),HI(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gM}}class $P extends LM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof tS&&(r.sharedClientState.syncEngine={Fr:FP.bind(null,s),$r:UP.bind(null,s),Br:BP.bind(null,s),vi:VP.bind(null,s),Mr:RP.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ye.Z)(function*(d){yield function LP(n,e){return ZS.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=yM();if(!tS.C(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class XS{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>PM(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=PP.bind(null,r.syncEngine),yield vS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mP}createDatastore(e){const t=Z0(e.databaseInfo.databaseId),r=new X1(e.databaseInfo);return new nP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>PM(this.syncEngine,m,0),d=mM.C()?new mM:new Y1,new sP(t,r,s,u,d);var t,r,s,u,d}createSyncEngine(e,t){return function(r,s,u,d,m,v,E){const A=new IP(r,s,u,d,m,v);return E&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=qe(t);Oe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield ay(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function eA(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VM(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UM(n){if(!Ge.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BM(n){if(Ge.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qI(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jM(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const $M=new Map;class HM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aT;switch(t.type){case"gapi":return new r0(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$M.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),$M.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class $i{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class hc extends $i{constructor(e,t,r){super(e,t,cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Ge(e))}withConverter(e){return new hc(this.firestore,e,this._path)}}function zM(n,e,...t){if(n=(0,nn.m9)(n),eA("collection","path",e),n instanceof Y0){const r=Yt.fromString(e,...t);return BM(r),new hc(n,null,r)}{if(!(n instanceof Zn||n instanceof hc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return BM(r),new hc(n.firestore,null,r)}}function ZI(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=ZE.R()),eA("doc","path",e),n instanceof Y0){const r=Yt.fromString(e,...t);return UM(r),new Zn(n,null,new Ge(r))}{if(!(n instanceof Zn||n instanceof hc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return UM(r),new Zn(n.firestore,n instanceof hc?n.converter:null,new Ge(r))}}function qM(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof Zn||n instanceof hc)&&(e instanceof Zn||e instanceof hc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function tA(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof $i&&e instanceof $i&&n.firestore===e.firestore&&Op(n._query,e._query)&&n.converter===e.converter}function ZM(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class WI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class GP{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new dr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new vP(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ye.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ZP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ye.Z)(function*(u,d){const m=qe(u),v=Lp(m.It)+"/documents",E={documents:d.map(z=>ty(m.It,z))},A=yield m._o("BatchGetDocuments",v,E,d.length),P=new Map;A.forEach(z=>{const ee=function Ax(n,e){return"found"in e?function(t,r){wt(!!r.found);const s=iu(t,r.found.name),u=yr(r.found.updateTime),d=new ni({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(s,u,d)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const s=iu(t,r.missing),u=yr(r.readTime);return Nn.newNoDocument(s,u)}(n,e):Xe()}(m.It,z);P.set(ee.key.toString(),ee)});const V=[];return d.forEach(z=>{const ee=P.get(z.toString());wt(!!ee),V.push(ee)}),V}),function(u,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new _I(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(s,u){const d=qe(s),m=Lp(d.It)+"/documents",v={writes:u.map(E=>Vp(d.It,E))};yield d.ao("Commit",m,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?In.exists(!1):In.updateTime(t):In.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return In.updateTime(t)}return In.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WP{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new nS(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ye.Z)(function*(){const t=new ZP(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Th(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!vI(t)}return!1}}class KP{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Vr.UNAUTHENTICATED,this.clientId=ZE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=ly(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function WM(n,e){return nA.apply(this,arguments)}function nA(){return nA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ye.Z)(function*(u){r.isEqual(u)||(yield aM(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),nA.apply(this,arguments)}function KM(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield iA(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>bM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>bM(e.remoteStore,u)),n.onlineComponents=e}),rA.apply(this,arguments)}function iA(n){return sA.apply(this,arguments)}function sA(){return sA=(0,ye.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield WM(n,new FM)),n.offlineComponents}),sA.apply(this,arguments)}function KI(n){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield KM(n,new XS)),n.onlineComponents}),oA.apply(this,arguments)}function YM(n){return iA(n).then(e=>e.persistence)}function YI(n){return iA(n).then(e=>e.localStore)}function aA(n){return KI(n).then(e=>e.remoteStore)}function uA(n){return KI(n).then(e=>e.syncEngine)}function py(n){return cA.apply(this,arguments)}function cA(){return cA=(0,ye.Z)(function*(n){const e=yield KI(n),t=e.eventManager;return t.onListen=bP.bind(null,e.syncEngine),t.onUnlisten=DP.bind(null,e.syncEngine),t}),cA.apply(this,arguments)}function JM(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,d,m,v){const E=new WI({next:P=>{u.enqueueAndForget(()=>bS(s,A));const V=P.docs.has(d);!V&&P.fromCache?v.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&P.fromCache&&m&&"server"===m.source?v.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(P)},error:P=>v.reject(P)}),A=new SS(cc(d.path),E,{includeMetadataChanges:!0,Nu:!0});return ES(s,A)}(yield py(n),n.asyncQueue,e,t,r)})),r.promise}function XM(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,d,m,v){const E=new WI({next:P=>{u.enqueueAndForget(()=>bS(s,A)),P.fromCache&&"server"===m.source?v.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(P)},error:P=>v.reject(P)}),A=new SS(d,E,{includeMetadataChanges:!0,Nu:!0});return ES(s,A)}(yield py(n),n.asyncQueue,e,t,r)})),r.promise}class rN{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new nS(this,"async_queue_retry"),this.Wc=()=>{const t=HI();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=HI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=HI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new dr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Yo(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=CS.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(s),s}zc(){this.Kc&&Xe()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function lA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class iN{constructor(){this._progressObserver={},this._taskCompletionResolver=new dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends Y0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new rN,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||eO(this),this._firestoreClient.terminate()}}function Tr(n){return n._firestoreClient||eO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function eO(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pT(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new KP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function tO(n,e,t){const r=new dr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield WM(n,t),yield KM(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(d=u).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;xl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function nO(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fc(mr.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fc(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zp{constructor(e){this._methodName=e}}class QI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const pN=/^__.*__$/;class gN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ea(e,this.data,this.fieldMask,t,this.fieldTransforms):new kp(e,this.data,t,this.fieldTransforms)}}class rO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ea(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class JI{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new JI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return tb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(iO(this.sa)&&pN.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class mN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Z0(e)}da(e,t,r,s=!1){return new JI({sa:e,methodName:t,fa:r,path:rr.emptyPath(),oa:!1,la:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Wp(n){const e=n._freezeSettings(),t=Z0(n._databaseId);return new mN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XI(n,e,t,r,s,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,s);pA("Data must be an object, but it was:",d,r);const m=aO(r,d);let v,E;if(u.merge)v=new as(d.fieldMask),E=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const P of u.mergeFields){const V=gA(e,P,t);if(!d.contains(V))throw new xe(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);cO(A,V)||A.push(V)}v=new as(A),E=d.fieldTransforms.filter(P=>v.covers(P.field))}else v=null,E=d.fieldTransforms;return new gN(new ni(m),v,E)}class Q0 extends Zp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Q0}}function sO(n,e,t){return new JI({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class dA extends Zp{_toFieldTransform(e){return new Ph(e.path,new Nl)}isEqual(e){return e instanceof dA}}class yN extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sO(this,e,!0),r=this._a.map(u=>Kp(u,t)),s=new kl(r);return new Ph(e.path,s)}isEqual(e){return this===e}}class _N extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sO(this,e,!0),r=this._a.map(u=>Kp(u,t)),s=new Oh(r);return new Ph(e.path,s)}isEqual(e){return this===e}}class vN extends Zp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Rl(e.It,dI(e.It,this.wa));return new Ph(e.path,t)}isEqual(e){return this===e}}function hA(n,e,t,r){const s=n.da(1,e,t);pA("Data must be an object, but it was:",s,r);const u=[],d=ni.empty();Ns(r,(v,E)=>{const A=eb(e,v,t);E=(0,nn.m9)(E);const P=s.ca(A);if(E instanceof Q0)u.push(A);else{const V=Kp(E,P);null!=V&&(u.push(A),d.set(A,V))}});const m=new as(u);return new rO(d,m,s.fieldTransforms)}function fA(n,e,t,r,s,u){const d=n.da(1,e,t),m=[gA(e,r,t)],v=[s];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(gA(e,u[V])),v.push(u[V+1]);const E=[],A=ni.empty();for(let V=m.length-1;V>=0;--V)if(!cO(E,m[V])){const z=m[V];let ee=v[V];ee=(0,nn.m9)(ee);const Me=d.ca(z);if(ee instanceof Q0)E.push(z);else{const Pe=Kp(ee,Me);null!=Pe&&(E.push(z),A.set(z,Pe))}}const P=new as(E);return new rO(A,P,d.fieldTransforms)}function oO(n,e,t,r=!1){return Kp(t,n.da(r?4:3,e))}function Kp(n,e){if(uO(n=(0,nn.m9)(n)))return pA("Unsupported field value:",e,n),aO(n,e);if(n instanceof Zp)return function(t,r){if(!iO(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const d of t){let m=Kp(d,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Sn.fromDate(t);return{timestampValue:Ll(r.It,s)}}if(t instanceof Sn){const s=new Sn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ll(r.It,s)}}if(t instanceof QI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fc)return{bytesValue:MT(r.It,t._byteString)};if(t instanceof Zn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:x0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${qI(t)}`)}(n,e)}function aO(n,e){const t={};return XE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(n,(r,s)=>{const u=Kp(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function uO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sn||n instanceof QI||n instanceof fc||n instanceof Zn||n instanceof Zp)}function pA(n,e,t){if(!uO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=qI(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function gA(n,e,t){if((e=(0,nn.m9)(e))instanceof jl)return e._internalPath;if("string"==typeof e)return eb(n,e);throw tb("Field path arguments must be of type string or ",n,!1,void 0,t)}const wN=new RegExp("[~\\*/\\[\\]]");function eb(n,e,t){if(e.search(wN)>=0)throw tb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jl(...e.split("."))._internalPath}catch{throw tb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tb(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${s}`),v+=")"),new xe(ce.INVALID_ARGUMENT,m+n+v)}function cO(n,e){return n.some(t=>t.isEqual(e))}class J0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new CN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class CN extends J0{data(){return super.data()}}function nb(n,e){return"string"==typeof e?eb(n,e):e instanceof jl?e._internalPath:e._delegate._internalPath}function lO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X0{}function Uh(n,...e){for(const t of e)n=t._apply(n);return n}class EN extends X0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Wp(e.firestore),r=function(s,u,d,m,v,E,A){let P;if(v.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){mO(A,E);const z=[];for(const ee of A)z.push(gO(m,s,ee));P={arrayValue:{values:z}}}else P=gO(m,s,A)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||mO(A,E),P=oO(d,"where",A,"in"===E||"not-in"===E);const V=ri.create(v,E,P);return function(z,ee){if(ee.dt()){const Pe=w0(z);if(null!==Pe&&!Pe.isEqual(ee.field))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${ee.field.toString()}'`);const st=$m(z);null!==st&&yO(0,ee.field,st)}const Me=function(Pe,st){for(const Tt of Pe.filters)if(st.indexOf(Tt.op)>=0)return Tt.op;return null}(z,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==Me)throw new xe(ce.INVALID_ARGUMENT,Me===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${Me.toString()}' filters.`)}(s,V),V}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new $i(e.firestore,e.converter,function(s,u){const d=s.filters.concat([u]);return new ru(s.path,s.collectionGroup,s.explicitOrderBy.slice(),d,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class bN extends X0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Mh(s,u);return function(m,v){if(null===$m(m)){const E=w0(m);null!==E&&yO(0,E,v.field)}}(r,d),d}(e._query,this.ma,this.pa);return new $i(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ru(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class dO extends X0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new $i(e.firestore,e.converter,Mp(e._query,this.Ia,this.Ta))}}class hO extends X0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=pO(e,this.type,this.Ea,this.Aa);return new $i(e.firestore,e.converter,(s=t,new ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class fO extends X0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=pO(e,this.type,this.Ea,this.Aa);return new $i(e.firestore,e.converter,(s=t,new ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function pO(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof J0)return function(s,u,d,m,v){if(!m)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const E=[];for(const A of Pl(s))if(A.field.isKeyField())E.push(xh(u,m.key));else{const P=m.data.field(A.field);if(d0(P))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const V=A.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}E.push(P)}return new Qo(E,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Wp(n.firestore);return function(u,d,m,v,E,A){const P=u.explicitOrderBy;if(E.length>P.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let z=0;z<E.length;z++){const ee=E[z];if(P[z].field.isKeyField()){if("string"!=typeof ee)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ee}`);if(!Hm(u)&&-1!==ee.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ee}' contains a slash.`);const Me=u.path.child(Yt.fromString(ee));if(!Ge.isDocumentKey(Me))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const Pe=new Ge(Me);V.push(xh(d,Pe))}else{const Me=oO(m,v,ee);V.push(Me)}}return new Qo(V,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function gO(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hm(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!Ge.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xh(n,new Ge(r))}if(t instanceof Zn)return xh(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qI(t)}.`)}function mO(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yO(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class mA{convertValue(e,t="none"){switch(Ah(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Ns(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new QI(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dh(e));default:return null}}convertTimestamp(e){const t=sc(e);return new Sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);wt(I(r));const s=new nu(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function rb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class PN extends mA{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class Yp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $l extends J0{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ew(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ew extends $l{data(e={}){return super.data(e)}}class Bh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Yp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ew(this._firestore,this._userDataWriter,r.key,r,new Yp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new ew(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Yp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const m=new ew(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Yp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,E=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),E=u.indexOf(d.doc.key)),{type:NN(d.type),doc:m,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function _O(n,e){return n instanceof $l&&e instanceof $l?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bh&&e instanceof Bh&&n._firestore===e._firestore&&tA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class jh extends mA{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function vO(n,e,t){n=en(n,Zn);const r=en(n.firestore,Wn),s=rb(n.converter,e,t);return gy(r,[XI(Wp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,In.none())])}function wO(n,e,t,...r){n=en(n,Zn);const s=en(n.firestore,Wn),u=Wp(s);let d;return d="string"==typeof(e=(0,nn.m9)(e))||e instanceof jl?fA(u,"updateDoc",n._key,e,t,r):hA(u,"updateDoc",n._key,e),gy(s,[d.toMutation(n._key,In.exists(!0))])}function CO(n,...e){var t,r,s;n=(0,nn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||lA(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(lA(e[d])){const P=e[d];e[d]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[d+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[d+2]=null===(s=P.complete)||void 0===s?void 0:s.bind(P)}let v,E,A;if(n instanceof Zn)E=en(n.firestore,Wn),A=cc(n._key.path),v={next:P=>{e[d]&&e[d](yA(E,n,P))},error:e[d+1],complete:e[d+2]};else{const P=en(n,$i);E=en(P.firestore,Wn),A=P._query;const V=new jh(E);v={next:z=>{e[d]&&e[d](new Bh(E,V,P,z))},error:e[d+1],complete:e[d+2]},lO(n._query)}return function(P,V,z,ee){const Me=new WI(ee),Pe=new SS(V,Me,z);return P.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return ES(yield py(P),Pe)})),()=>{Me.bc(),P.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return bS(yield py(P),Pe)}))}}(Tr(E),A,m,v)}function gy(n,e){return function(t,r){const s=new dr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function TP(n,e,t){return PS.apply(this,arguments)}(yield uA(t),r,s)})),s.promise}(Tr(n),e)}function yA(n,e,t){const r=t.docs.get(e._key),s=new jh(n);return new $l(n,s,e._key,r,new Yp(t.hasPendingWrites,t.fromCache),e.converter)}const HN={maxAttempts:5};class EO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wp(e)}set(e,t,r){this._verifyNotCommitted();const s=$h(e,this._firestore),u=rb(s.converter,t,r),d=XI(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,In.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=$h(e,this._firestore);let d;return d="string"==typeof(t=(0,nn.m9)(t))||t instanceof jl?fA(this._dataReader,"WriteBatch.update",u._key,t,r,s):hA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,In.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$h(e,this._firestore);return this._mutations=this._mutations.concat(new Rp(t._key,In.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $h(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class GN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wp(e)}get(e){const t=$h(e,this._firestore),r=new PN(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Xe();const u=s[0];if(u.isFoundDocument())return new J0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new J0(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const s=$h(e,this._firestore),u=rb(s.converter,t,r),d=XI(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const u=$h(e,this._firestore);let d;return d="string"==typeof(t=(0,nn.m9)(t))||t instanceof jl?fA(this._dataReader,"Transaction.update",u._key,t,r,s):hA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=$h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$h(e,this._firestore),r=new jh(this._firestore);return super.get(e).then(s=>new $l(this._firestore,r,t._key,s._document,new Yp(!1,!1),t.converter))}}function _A(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bO(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function DO(){if(!function fT(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){tc=Yu.SDK_VERSION,(0,Yu._registerComponent)(new um.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),d=new Wn(new wx(t.getProvider("auth-internal")),new o0(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(m.options.projectId,v)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,Yu.registerVersion)(_h,"3.7.3",n),(0,Yu.registerVersion)(_h,"3.7.3","esm2017")}();class tw{constructor(e){this._delegate=e}static fromBase64String(e){return DO(),new tw(fc.fromBase64String(e))}static fromUint8Array(e){return bO(),new tw(fc.fromUint8Array(e))}toBase64(){return DO(),this._delegate.toBase64()}toUint8Array(){return bO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vA(n){return function XN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ek{enableIndexedDbPersistence(e,t){return function oN(n,e){nO(n=en(n,Wn));const t=Tr(n),r=n._freezeSettings(),s=new XS;return tO(t,s,new LM(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function aN(n){nO(n=en(n,Wn));const e=Tr(n),t=n._freezeSettings(),r=new XS;return tO(e,r,new $P(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uN(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!lo.C())return Promise.resolve();const s=r+"main";yield lo.delete(s)}),function(r){return t.apply(this,arguments)})(qT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class TO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function GM(n,e,t,r={}){var s;const u=(n=en(n,Y0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&xl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Vr.MOCK_USER;else{d=(0,nn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Vr(v)}n._authCredentials=new uT(new t0(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function lN(n){return function YP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield YM(n),t=yield aA(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s._u.delete(0),W0(s)}(t)}))}(Tr(n=en(n,Wn)))}(this._delegate)}disableNetwork(){return function dN(n){return function QP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield YM(n),t=yield aA(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(s){const u=qe(s);u._u.add(0),yield ay(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Tr(n=en(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function cN(n){return function(e){const t=new dr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function MP(n,e){return LS.apply(this,arguments)}(yield uA(e),t)})),t.promise}(Tr(n=en(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function $N(n,e){return function eN(n,e){const t=new WI(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield py(n),s=t,qe(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield py(n),s=t,void qe(r).Ru.delete(s);var r,s}))}}(Tr(n=en(n,Wn)),lA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new my(this,zM(this._delegate,e))}catch(t){throw us(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,ZI(this._delegate,e))}catch(t){throw us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new cs(this,function HP(n,e){if(n=en(n,Y0),eA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $i(n,null,(t=e,new ru(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function zN(n,e,t){n=en(n,Wn);const r=Object.assign(Object.assign({},HN),t);return function(s){if(s.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,d){const m=new dr;return s.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const v=yield function QM(n){return KI(n).then(e=>e.datastore)}(s);new WP(s.asyncQueue,v,d,u,m).run()})),m.promise}(Tr(n),s=>e(new GN(n,s)),r)}(this._delegate,t=>e(new SO(this,t)))}batch(){return Tr(this._delegate),new AO(new EO(this._delegate,e=>gy(this._delegate,e)))}loadBundle(e){return function hN(n,e){const t=Tr(n=en(n,Wn)),r=new iN;return function tN(n,e,t,r){const s=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,E){if(v instanceof Uint8Array)return ZM(v,E);if(v instanceof ArrayBuffer)return ZM(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new GP(v,d);var v}(t,Z0(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function jP(n,e,t){const r=qe(n);var s;(s=(0,ye.Z)(function*(u,d,m){try{const v=yield d.getMetadata();if(yield function(V,z){const ee=qe(V),Me=yr(z.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Pe=>ee.Ns.getBundleMetadata(Pe,z.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(Me)>=0)}(u.localStore,v))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=v).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(SM(v));const E=new wP(v,u.localStore,d.It);let A=yield d.mc();for(;A;){const V=yield E.Fu(A);V&&m._updateProgress(V),A=yield d.mc()}const P=yield E.complete();return yield Bl(u,P.Lu,void 0),yield function(V,z){const ee=qe(V);return ee.persistence.runTransaction("Save bundle","readwrite",Me=>ee.Ns.saveBundleMetadata(Me,z))}(u.localStore,v),m._completeWith(P.progress),Promise.resolve(P.Bu)}catch(v){return xl("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var V}),function(u,d,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield uA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function fN(n,e){return function nN(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield YI(n),e)}))}(Tr(n=en(n,Wn)),e).then(t=>t?new $i(n,null,t.query):null)}(this._delegate,e).then(t=>t?new cs(this,t):null)}}class ib extends mA{constructor(e){super(),this.firestore=e}convertBytes(e){return new tw(new fc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class SO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}get(e){const t=Jp(e);return this._delegate.get(t).then(r=>new nw(this._firestore,new $l(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Jp(e);return r?(_A("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Jp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}}class AO{constructor(e){this._delegate=e}set(e,t,r){const s=Jp(e);return r?(_A("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Jp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ew(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Qp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Qp(e,new ib(e),t),s.set(t,u)),u}}Qp.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new Zn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new ta(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new my(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new my(this.firestore,zM(this._delegate,e))}catch(t){throw us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof Zn&&qM(this._delegate,e)}set(e,t){t=_A("DocumentReference.set",t);try{return t?vO(this._delegate,e,t):vO(this._delegate,e)}catch(r){throw us(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?wO(this._delegate,e):wO(this._delegate,e,t,...r)}catch(s){throw us(s,"updateDoc()","DocumentReference.update()")}}delete(){return function BN(n){return gy(en(n.firestore,Wn),[new Rp(n._key,In.none())])}(this._delegate)}onSnapshot(...e){const t=xO(e),r=MO(e,s=>new nw(this.firestore,new $l(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return CO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function RN(n){n=en(n,Zn);const e=en(n.firestore,Wn),t=Tr(e),r=new jh(e);return function JP(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,d){try{const m=yield function(v,E){const A=qe(v);return A.persistence.runTransaction("read document","readonly",P=>A.localDocuments.getDocument(P,E))}(s,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=ly(m,`Failed to get document '${u} from cache`);d.reject(v)}}),function(s,u,d){return r.apply(this,arguments)})(yield YI(n),e,t);var r})),t.promise}(t,n._key).then(s=>new $l(e,r,n._key,s,new Yp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function FN(n){n=en(n,Zn);const e=en(n.firestore,Wn);return JM(Tr(e),n._key,{source:"server"}).then(t=>yA(e,n,t))}(this._delegate):function kN(n){n=en(n,Zn);const e=en(n.firestore,Wn);return JM(Tr(e),n._key).then(t=>yA(e,n,t))}(this._delegate),t.then(r=>new nw(this.firestore,new $l(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}function us(n,e,t){return n.message=n.message.replace(e,t),n}function xO(n){for(const e of n)if("object"==typeof e&&!vA(e))return e;return{}}function MO(n,e){var t,r;let s;return s=vA(n[0])?n[0]:vA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class nw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _O(this._delegate,e._delegate)}}class rw extends nw{data(e){const t=this._delegate.data(e);return function oT(n,e){n||Xe()}(void 0!==t),t}}class cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}where(e,t,r){try{return new cs(this.firestore,Uh(this._delegate,function IN(n,e,t){const r=e,s=nb("where",n);return new EN(s,r,t)}(e,t,r)))}catch(s){throw us(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new cs(this.firestore,Uh(this._delegate,function DN(n,e="asc"){const t=e,r=nb("orderBy",n);return new bN(r,t)}(e,t)))}catch(r){throw us(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new cs(this.firestore,Uh(this._delegate,function TN(n){return jM("limit",n),new dO("limit",n,"F")}(e)))}catch(t){throw us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new cs(this.firestore,Uh(this._delegate,function SN(n){return jM("limitToLast",n),new dO("limitToLast",n,"L")}(e)))}catch(t){throw us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new cs(this.firestore,Uh(this._delegate,function AN(...n){return new hO("startAt",n,!0)}(...e)))}catch(t){throw us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new cs(this.firestore,Uh(this._delegate,function xN(...n){return new hO("startAfter",n,!1)}(...e)))}catch(t){throw us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new cs(this.firestore,Uh(this._delegate,function MN(...n){return new fO("endBefore",n,!1)}(...e)))}catch(t){throw us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new cs(this.firestore,Uh(this._delegate,function ON(...n){return new fO("endAt",n,!0)}(...e)))}catch(t){throw us(t,"endAt()","Query.endAt()")}}isEqual(e){return tA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function VN(n){n=en(n,$i);const e=en(n.firestore,Wn),t=Tr(e),r=new jh(e);return function XP(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,d){try{const m=yield BI(s,u,!0),v=new MM(u,m.Hi),E=v.Wu(m.documents),A=v.applyChanges(E,!1);d.resolve(A.snapshot)}catch(m){const v=ly(m,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(s,u,d){return r.apply(this,arguments)})(yield YI(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Bh(e,r,n,s))}(this._delegate):"server"===e?.source?function UN(n){n=en(n,$i);const e=en(n.firestore,Wn),t=Tr(e),r=new jh(e);return XM(t,n._query,{source:"server"}).then(s=>new Bh(e,r,n,s))}(this._delegate):function LN(n){n=en(n,$i);const e=en(n.firestore,Wn),t=Tr(e),r=new jh(e);return lO(n._query),XM(t,n._query).then(s=>new Bh(e,r,n,s))}(this._delegate),t.then(r=>new wA(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xO(e),r=MO(e,s=>new wA(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return CO(this._delegate,t,r)}withConverter(e){return new cs(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}class nk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new rw(this._firestore,r))})}isEqual(e){return _O(this._delegate,e._delegate)}}class my extends cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?ZI(this._delegate):ZI(this._delegate,e))}catch(t){throw us(t,"doc()","CollectionReference.doc()")}}add(e){return function jN(n,e){const t=en(n.firestore,Wn),r=ZI(n),s=rb(n.converter,e);return gy(t,[XI(Wp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,In.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return qM(this._delegate,e._delegate)}withConverter(e){return new my(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}function Jp(n){return en(n,Zn)}class CA{constructor(...e){this._delegate=new jl(...e)}static documentId(){return new CA(rr.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof jl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ZN(){return new dA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xp(e)}static delete(){const e=function qN(){return new Q0("deleteField")}();return e._methodName="FieldValue.delete",new Xp(e)}static arrayUnion(...e){const t=function WN(...n){return new yN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xp(t)}static arrayRemove(...e){const t=function KN(...n){return new _N("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xp(t)}static increment(e){const t=function YN(n){return new vN("increment",n)}(e);return t._methodName="FieldValue.increment",new Xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rk={Firestore:TO,GeoPoint:QI,Timestamp:Sn,Blob:tw,Transaction:SO,WriteBatch:AO,DocumentReference:ta,DocumentSnapshot:nw,Query:cs,QueryDocumentSnapshot:rw,QuerySnapshot:wA,CollectionReference:my,FieldPath:CA,FieldValue:Xp,setLogLevel:function tk(n){!function Xv(n){ti.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function sk(n){(function ik(n,e){n.INTERNAL.registerComponent(new um.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},rk)))})(n,(e,t)=>new TO(e,t,new ek)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(OD.Z);var ok=R(6451),sb=R(5363),ak=R(6063);class uk extends En.x{constructor(e=1/0,t=1/0,r=ak.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!s&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const d=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)m=v;m&&r.splice(0,m+1)}}}var ck=R(3099);function OO(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,ck.B)({connector:()=>new uk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function PO(n,e){return(0,Wr.m)(e)?Gn(()=>n,e):Gn(()=>n)}var EA=R(9468);R(5867);const bA=new Map,kO={activated:!1,tokenObservers:[]},pk={initialized:!1,enabled:!1};function xi(n){return bA.get(n)||Object.assign({},kO)}function ab(){return pk}class wk{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function Ck(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ls=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function FO(n){if(!xi(n).activated)throw ls.create("use-before-activation",{appName:n.name})}function SA(n,e){return AA.apply(this,arguments)}function AA(){return AA=(0,ye.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const z=yield d.getHeartbeatsHeader();z&&(u["X-Firebase-Client"]=z)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,E;try{v=yield fetch(n,m)}catch(z){throw ls.create("fetch-network-error",{originalErrorMessage:null===(r=z)||void 0===r?void 0:r.message})}if(200!==v.status)throw ls.create("fetch-status-error",{httpStatus:v.status});try{E=yield v.json()}catch(z){throw ls.create("fetch-parse-error",{originalErrorMessage:null===(s=z)||void 0===s?void 0:s.message})}const A=E.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ls.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const P=1e3*Number(A[1]),V=Date.now();return{token:E.token,expireTimeMillis:V+P,issuedAtTimeMillis:V}}),AA.apply(this,arguments)}function Dk(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const iw="firebase-app-check-store";let lb=null;function VO(){return lb||(lb=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(ls.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(iw,{keyPath:"compositeKey"})}}catch(r){e(ls.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),lb)}function xA(){return xA=(0,ye.Z)(function*(n,e){const r=(yield VO()).transaction(iw,"readwrite"),u=r.objectStore(iw).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var E;m(ls.create("storage-set",{originalErrorMessage:null===(E=v.target.error)||void 0===E?void 0:E.message}))}})}),xA.apply(this,arguments)}const sw=new Wa.Yd("@firebase/app-check");function PA(n,e){return(0,nn.hl)()?function xk(n,e){return function UO(n,e){return xA.apply(this,arguments)}(function jO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{sw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $O(){return ab().enabled}function HO(){return kA.apply(this,arguments)}function kA(){return kA=(0,ye.Z)(function*(){const n=ab();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),kA.apply(this,arguments)}const Rk={error:"UNKNOWN_ERROR"};function Fk(n){return nn.US.encodeString(JSON.stringify(n),!1)}function db(n){return RA.apply(this,arguments)}function RA(){return RA=(0,ye.Z)(function*(n,e=!1){const t=n.app;FO(t);const r=xi(t);let u,s=r.token;if(s&&!yy(s)&&(r.token=void 0,s=void 0),!s){const v=yield r.cachedTokenPromise;v&&(yy(v)?s=v:yield PA(t,void 0))}if(!e&&s&&yy(s))return{token:s.token};let m,d=!1;if($O()){r.exchangeTokenPromise||(r.exchangeTokenPromise=SA(Dk(t,yield HO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const v=yield r.exchangeTokenPromise;return yield PA(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),s=yield xi(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?sw.warn(v.message):sw.error(v),u=v}return s?u?m=yy(s)?{token:s.token,internalError:u}:qO(u):(m={token:s.token},r.token=s,yield PA(t,s)):m=qO(u),d&&zO(t,m),m}),RA.apply(this,arguments)}function LA(n,e){const t=xi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function GO(n){const{app:e}=n,t=xi(e);let r=t.tokenRefresher;r||(r=function Lk(n){const{app:e}=n;return new wk((0,ye.Z)(function*(){let r;if(r=xi(e).token?yield db(n,!0):yield db(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=xi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zO(n,e){const t=xi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function yy(n){return n.expireTimeMillis-Date.now()>0}function qO(n){return{token:Fk(Rk),error:n}}class Vk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xi(this.app);for(const t of e)LA(this.app,t.next);return Promise.resolve()}}const e1="app-check-internal";!function Jk(){(0,Yu._registerComponent)(new um.wA("app-check",n=>function Uk(n,e){return new Vk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(e1).initialize()})),(0,Yu._registerComponent)(new um.wA(e1,n=>function Bk(n){return{getToken:e=>db(n,e),addTokenListener:e=>function FA(n,e,t,r){const{app:s}=n,u=xi(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&yy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),GO(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>GO(n))}(n,"INTERNAL",e),removeTokenListener:e=>LA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Yu.registerVersion)("@firebase/app-check","0.5.17")}();class jA{constructor(){return(0,fi.vb)("app-check")}}typeof window<"u"&&window;const n1=new c.OlP("angularfire2.auth.use-emulator"),r1=new c.OlP("angularfire2.auth.settings"),i1=new c.OlP("angularfire2.auth.tenant-id"),s1=new c.OlP("angularfire2.auth.langugage-code"),o1=new c.OlP("angularfire2.auth.use-device-language"),a1=new c.OlP("angularfire.auth.persistence"),u1=(n,e,t,r,s,u,d,m)=>(0,fn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),d)for(const[E,A]of Object.entries(d))v.settings[E]=A;return m&&v.setPersistence(m),v},[t,r,s,u,d,m]);let c1=(()=>{class n{constructor(t,r,s,u,d,m,v,E,A,P,V,z){const ee=new En.x,Me=tt(void 0).pipe((0,sb.Q)(d.outsideAngular),Gn(()=>u.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,1277)))),(0,ft.U)(()=>(0,fn.on)(t,u,r)),(0,ft.U)(Pe=>u1(Pe,u,m,E,A,P,v,V)),OO({bufferSize:1,refCount:!1}));if(pr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{Me.pipe(ja()).subscribe();const st=Me.pipe(Gn(Nt=>Nt.getRedirectResult().then(Ft=>Ft,()=>null)),fi.iC,OO({bufferSize:1,refCount:!1})),Tt=Me.pipe(Gn(Nt=>new Zr.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>Nt.onAuthStateChanged(Ht=>Ft.next(Ht),Ht=>Ft.error(Ht),()=>Ft.complete()))})))),Pt=Me.pipe(Gn(Nt=>new Zr.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>Nt.onIdTokenChanged(Ht=>Ft.next(Ht),Ht=>Ft.error(Ht),()=>Ft.complete()))}))));this.authState=st.pipe(PO(Tt),(0,EA.R)(d.outsideAngular),(0,sb.Q)(d.insideAngular)),this.user=st.pipe(PO(Pt),(0,EA.R)(d.outsideAngular),(0,sb.Q)(d.insideAngular)),this.idToken=this.user.pipe(Gn(Nt=>Nt?(0,Xt.D)(Nt.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(Gn(Nt=>Nt?(0,Xt.D)(Nt.getIdTokenResult()):tt(null))),this.credential=(0,ok.T)(st,ee,this.authState.pipe(wr(Nt=>!Nt))).pipe((0,ft.U)(Nt=>Nt?.user?Nt:null),(0,EA.R)(d.outsideAngular),(0,sb.Q)(d.insideAngular))}return(0,fn.pX)(this,Me,u,{spy:{apply:(Pe,st,Tt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&Tt.then(Pt=>ee.next(Pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fn.Dh),c.LFG(fn.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(fi.HU),c.LFG(n1,8),c.LFG(r1,8),c.LFG(i1,8),c.LFG(s1,8),c.LFG(o1,8),c.LFG(a1,8),c.LFG(jA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function l1(n,e){return function iR(n,e=gx.z){return new Zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function HA(n,e){return l1(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function fb(n,e){return HA(n,e).pipe(Nf(void 0),nv(),(0,ft.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const v=s.find(A=>A.doc.ref.isEqual(d.ref)),E=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&E&&JSON.stringify(E.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function d1(n,e,t){return fb(n,t).pipe(Md((r,s)=>function oR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function aR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function GC(n,e=sl.y){return n=n??xD,(0,Pn.e)((t,r)=>{let s,u=!0;t.subscribe((0,_n.x)(r,d=>{const m=e(d);(u||!n(s,m))&&(u=!1,s=m,r.next(d))}))})}(),(0,ft.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function GA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function h1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class f1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=fb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Nf(void 0),nv(),wr(([r,s])=>s.length>0||!r),(0,ft.U)(([r,s])=>s),fi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Md((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=h1(e);return d1(this.query,t,this.afs.schedulers.outsideAngular).pipe(fi.iC)}valueChanges(e={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),fi.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(fi.iC)}add(e){return this.ref.add(e)}doc(e){return new p1(this.ref.doc(e),this.afs)}}class p1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=g1(r,t);return new f1(s,u,this.afs)}snapshotChanges(){return function sR(n,e){return l1(n,e).pipe(Nf(void 0),nv(),(0,ft.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(fi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Xt.D)(this.ref.get(e)).pipe(fi.iC)}}class uR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?fb(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),wr(t=>t.length>0),fi.iC):fb(this.query,this.afs.schedulers.outsideAngular).pipe(fi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Md((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=h1(e);return d1(this.query,t,this.afs.schedulers.outsideAngular).pipe(fi.iC)}valueChanges(e={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),fi.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(fi.iC)}}const cR=new c.OlP("angularfire2.enableFirestorePersistence"),lR=new c.OlP("angularfire2.firestore.persistenceSettings"),dR=new c.OlP("angularfire2.firestore.settings"),hR=new c.OlP("angularfire2.firestore.use-emulator");function g1(n,e=(t=>t)){return{query:e(n),ref:n}}let fR=(()=>{class n{constructor(t,r,s,u,d,m,v,E,A,P,V,z,ee,Me,Pe,st,Tt){this.schedulers=v;const Pt=(0,fn.on)(t,m,r),Nt=A;P&&u1(Pt,m,V,ee,Me,Pe,z,st),[this.firestore,this.persistenceEnabled$]=(0,fn.cc)(`${Pt.name}.firestore`,"AngularFirestore",Pt.name,()=>{const Ft=m.runOutsideAngular(()=>Pt.firestore());if(u&&Ft.settings(u),Nt&&Ft.useEmulator(...Nt),s&&!pr(d)){const Ht=()=>{try{return(0,Xt.D)(Ft.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(ii){return typeof console<"u"&&console.warn(ii),tt(!1)}};return[Ft,m.runOutsideAngular(Ht)]}return[Ft,tt(!1)]},[u,Nt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=g1(s,r),m=this.schedulers.ngZone.run(()=>u);return new f1(m,d,this)}collectionGroup(t,r){const s=r||(d=>d),u=this.firestore.collectionGroup(t);return new uR(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new p1(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fn.Dh),c.LFG(fn.xv,8),c.LFG(cR,8),c.LFG(dR,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(fi.HU),c.LFG(lR,8),c.LFG(hR,8),c.LFG(c1,8),c.LFG(n1,8),c.LFG(r1,8),c.LFG(i1,8),c.LFG(s1,8),c.LFG(o1,8),c.LFG(a1,8),c.LFG(jA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eg=(()=>{class n{constructor(t){this.firestore=t}getAllProjects(){return this.firestore.collection("epics").valueChanges({idField:"docId"})}getProject(t){return this.firestore.doc(`epics/${t}`).valueChanges({idField:"docId"})}getProjectsByID(t){return this.firestore.collection("epics",r=>r.where(wl.Z.firestore.FieldPath.documentId(),"in",t)).valueChanges({idField:"docId"})}getProjecsByCompany(t){return ol(this.sliceIntoChunks(t,10).map(s=>this.getProjectsByID(s)))}addTicketsToProject(t,r){return this.firestore.doc(`epics/${t}`).update({tickets:r})}addTicketToProject(t,r){return this.firestore.doc(`epics/${t}`).update({tickets:wl.Z.firestore.FieldValue.arrayUnion(r)})}getCompanies(){return this.firestore.collection("companies").valueChanges({idField:"docId"})}getCompany(t){return this.firestore.doc(`companies/${t}`).valueChanges({idField:"docId"})}getPeople(t){return ol(this.sliceIntoChunks(t,10).map(s=>this.getPeopleByID(s)))}getPeopleByID(t){return this.firestore.collection("people",r=>r.where(wl.Z.firestore.FieldPath.documentId(),"in",t)).valueChanges({idField:"docId"})}getPerson(t){return this.firestore.doc(`people/${t}`).valueChanges()}getTickets(t){return ol(this.sliceIntoChunks(t,10).map(s=>this.getTicketsByID(s)))}getTicketsByID(t){return this.firestore.collection("tickets",r=>r.where(wl.Z.firestore.FieldPath.documentId(),"in",t)).valueChanges({idField:"id"})}getTicket(t){return this.firestore.doc(`tickets/${t}`).valueChanges()}createTicket(t,r){return this.firestore.collection("tickets").add(t).then(s=>this.addTicketToProject(r,s))}sliceIntoChunks(t,r){const s=[];for(;t.length>0;){const u=t.splice(0,r);s.push(u)}return s}deleteParentsOnTickets(t,r){return ol(t.map(s=>this.deleteParents(s,r)))}deleteParents(t,r){return console.log(t,r),this.firestore.doc(`tickets/${t}`).update({parents:wl.Z.firestore.FieldValue.arrayRemove(...r)})}updateTicket(t,r){return this.firestore.collection("tickets").doc(t).update(r)}deleteTicketFromProject(t,r){return this.firestore.doc(`epics/${r}`).update({tickets:wl.Z.firestore.FieldValue.arrayRemove(t)})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fR))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zA=(()=>{class n{constructor(t){this.firebaseService=t}set people(t){this._peopleIDs=t.map(r=>r.id),this._people=t.filter(r=>!0===r.active).map(r=>({id:r.docId,name:r.name,roles:r.roles||[]}))}get people(){return this._people}getPerson(t){return void 0===t?"--":this._people.find(r=>r.id===t)}getPersonRef(t){return void 0===t?"--":this._peopleRefs.find(r=>r.docId===t)}loadPeople(t){return this._peopleIDs=t,this.firebaseService.getPeople(t).pipe((0,ft.U)(r=>(this.people=r.flat(),r.flat())))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(eg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qA=(()=>{class n{constructor(t,r,s){this.firebaseService=t,this.nodeTreeService=r,this.peopleService=s,this._project=new En.x,this.project$=this._project.asObservable(),this._projects=new En.x,this.projects$=this._projects.asObservable()}set project(t){this._project.next(t),this.currentProject=t}get project(){return this.currentProject}get ticketsRef(){return this._ticketsRef}getTicketRefById(t){return this._ticketsRef.find(r=>r.id===t)}getProject(){return this.project$}getProjectsByCompany(t){return this.firebaseService.getProjecsByCompany(t).pipe((0,ft.U)(r=>r.flat()),(0,Qr.b)(r=>{this.projects=r,this._projects.next(r)}))}getProjects(){return this.projects$}getProjectsByID(t){return this.projects$}getCurrentProject$(){return this.project$}loadProjectData(t){return this._ticketsRef=t?.tickets||[],ol([this.firebaseService.getPeopleByID([t.leader]),this.firebaseService.getTickets(this._ticketsRef.map(r=>r.id))]).pipe((0,ft.U)(r=>{const s={leader:"res[0][0].name",docId:t.docId,name:t.name,tickets:r[1].flat()};return this.nodeTreeService.loadProject(s,this.peopleService.people),this.project={...s,tickets:this.nodeTreeService.getStaticNodeTree()},this.project}))}moveTicketToTrash(t){return void 0===t?tt({}):this.firebaseService.deleteTicketFromProject(t,this.project.docId)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(eg),c.LFG(Ku),c.LFG(zA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var pc=(()=>(function(n){n.CREATE="create",n.EDIT="edit"}(pc||(pc={})),pc))();class pR{constructor(){this.id="",this.code="",this.status=ss.new,this.title="",this.estimation=0,this.effort=[],this.parents=[],this.assigned={name:"",id:""},this.children=[],this.order=0,this.enabled=!0,this.mvp={name:"",id:0},this.position={x:0,y:0},this.level=0,this.index=0,this.childrenTree=[],this.childrenTreeSimple=[],this.childrenWidth=0,this.selected=!1,this.blockedByParents=!1}}let pb=(()=>{class n{constructor(t,r){this.firebaseService=t,this.projectService=r,this._ticket=new En.x,this.ticket$=this._ticket.asObservable(),this._mode=pc.EDIT,this._showDetailsPanel=new En.x,this.showDetailsPanel$=this._showDetailsPanel.asObservable()}openDetailsPanel(t){this._showDetailsPanel.next(t)}isDetailsPanelOpen(){return this.showDetailsPanel$}setNodeData(t){this._showDetailsPanel.next(!0),this._mode=t?pc.EDIT:pc.CREATE,this.ticket=t||new pR,this._ticket.next(this.ticket)}getNodeData$(){return this.ticket$}getnodeData(){return this.ticket}get mode(){return this._mode}moveToTrash(t,r){return void 0===t?tt({}):this.firebaseService.deleteParentsOnTickets(r,[t.id]).pipe(Gn(s=>this.projectService.moveTicketToTrash(t)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(eg),c.LFG(qA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZA=(()=>{class n{transform(t){return t?.split(" ").map(r=>r.substring(0,1)).join("")||""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"initials",type:n,pure:!0}),n})();const gR=["card"];function mR(n,e){if(1&n&&(c.TgZ(0,"div",12),c._uU(1),c.ALo(2,"initials"),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Oqu(c.lcZ(2,1,t.nodeData.assigned.name))}}function yR(n,e){if(1&n&&(c.O4$(),c._UZ(0,"path",19)),2&n){const t=c.oxw().index,r=c.oxw(2);c.uIk("d",r.bezierCoordString[t])}}function _R(n,e){if(1&n&&(c.O4$(),c._UZ(0,"line",20)),2&n){const t=c.oxw().index,r=c.oxw(2);c.uIk("x1",r.svgCoords[t].x1+"%")("y1",r.svgCoords[t].y1+"%")("x2",r.svgCoords[t].x2+"%")("y2",r.svgCoords[t].y2+"%")}}function vR(n,e){if(1&n&&(c.TgZ(0,"div",15),c.O4$(),c.TgZ(1,"svg",16),c.YNc(2,yR,1,1,"path",17),c.YNc(3,_R,1,4,"line",18),c.qZA()()),2&n){const t=e.index,r=c.oxw(2);c.Akn(r.arrowContainerStyles[t]),c.xp6(1),c.uIk("viewBox",r.arrowViewBox[t]),c.xp6(1),c.Q6J("ngIf",!0===r.bezier[t]),c.xp6(1),c.Q6J("ngIf",!1===r.bezier[t])}}function wR(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,vR,4,5,"div",14),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.nodeData.paretsPosition)}}let CR=(()=>{class n{constructor(){this.selectNode=new c.vpe,this.infoNode=new c.vpe,this.nodeStatus=ss,this.arrowContainerStyles=[],this.arrowViewBox=[],this.svgCoords=[],this.bezierCoords=[],this.bezier=[],this.childLeft=!1,this.cardHeight=0,this.estimated=!1}set node(t){this.nodeData={...t},this.estimated=this.nodeData.estimation>0,this.nodeData.paretsPosition?.forEach(r=>this.calculateArrows(r,95))}ngAfterViewInit(){this.cardHeight=this.card.nativeElement.clientHeight}calculateArrows(t,r){let s=t.x+95,u=t.y+r-5,d=Math.abs(this.nodeData.position.x-t.x),m=Math.abs(this.nodeData.position?.y-t.y-r)+5;this.svgCoords.push({x1:0,y1:0,x2:100,y2:100}),this.bezierCoords.push({M:[1,0],c:[[1,m/2],[d-1,m/2],[d-1,m]]});const v=this.svgCoords.length-1;this.bezier[v]=!0,t.x===this.nodeData.position.x&&(d=4,this.svgCoords[v].x1=0,this.svgCoords[v].x2=0,this.bezier[v]=!1),t.x>this.nodeData.position.x&&(s=this.nodeData.position.x+95,d=Math.abs(t.x-this.nodeData.position.x),this.svgCoords[v]={x1:100,y1:0,x2:0,y2:100},this.bezierCoords[v]={M:[1,m],c:[[1,-m/2],[d-1,-m/2],[d-1,-m]]}),t.y===this.nodeData.position.y&&(m=4,this.childLeft=!0,u=t.y+r/2-3,this.svgCoords[v].x1=0,this.svgCoords[v].x2=100,this.svgCoords[v].y1=0,this.svgCoords[v].y2=0,this.bezier[v]=!1),t.y>this.nodeData.position.y&&(u=this.nodeData.position.y+r/2-3,m=t.y-this.nodeData.position.y,s=t.x+190,d=this.nodeData.position.x-s,this.bezierCoords[v]={M:[0,m],c:[[d/2,0],[d/2,-m],[d,-m]]},this.bezier[v]=!0),this.arrowContainerStyles.push({left:`${s}px`,top:`${u}px`,width:`${d+1}px`,height:`${m}px`}),this.arrowViewBox.push(`0 0 \n      ${d} \n      ${m}\n    `),this.bezierCoordString=this.bezierCoords.map(E=>`\n      M ${E.M.toString()} \n      c ${E.c.map(A=>A.toString()).join(" ")}\n    `)}ngOnInit(){}onNodeClick(){}onTreeClick(){this.selectNode.next(this.nodeData.id)}onInfoClick(){this.infoNode.next(this.nodeData)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-card"]],viewQuery:function(t,r){if(1&t&&c.Gf(gR,5),2&t){let s;c.iGM(s=c.CRH())&&(r.card=s.first)}},inputs:{node:"node"},outputs:{selectNode:"selectNode",infoNode:"infoNode"},decls:23,vars:29,consts:[[1,"card",3,"click"],["card",""],[1,"card-iconset"],[1,"material-symbols-outlined",3,"click"],[1,"card-header"],["class","card-header-assigned",4,"ngIf"],[1,"card-header-code"],[1,"card-header-status"],[1,"card-body"],[1,"card-header-title"],[1,"card-footer"],["class","svg",4,"ngIf"],[1,"card-header-assigned"],[1,"svg"],["class","svg-container",3,"style",4,"ngFor","ngForOf"],[1,"svg-container"],["xmlns","http://www.w3.org/2000/svg"],["class","connector","stroke","#888","stroke-width","0.8","fill","none",4,"ngIf"],["class","connector","stroke","#888","stroke-width","2",4,"ngIf"],["stroke","#888","stroke-width","0.8","fill","none",1,"connector"],["stroke","#888","stroke-width","2",1,"connector"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0,1),c.NdJ("click",function(){return r.onInfoClick()}),c.TgZ(2,"div",2)(3,"span",3),c.NdJ("click",function(){return r.onInfoClick()}),c._uU(4," info "),c.qZA(),c.TgZ(5,"span",3),c.NdJ("click",function(){return r.onTreeClick()}),c._uU(6," account_tree "),c.qZA()(),c.TgZ(7,"div",4),c.YNc(8,mR,3,3,"div",5),c.TgZ(9,"div",6),c._uU(10),c.qZA(),c.TgZ(11,"div",7),c.ALo(12,"lowercase"),c._uU(13),c.qZA()(),c.TgZ(14,"div",8)(15,"span",9),c._uU(16),c.qZA()(),c.TgZ(17,"div",10)(18,"div"),c._uU(19),c.qZA(),c.TgZ(20,"div"),c._uU(21),c.qZA()()(),c.YNc(22,wR,2,1,"div",11)),2&t&&(c.Tol("type--"+r.nodeData.type),c.Udp("transform","translate("+r.nodeData.position.x+"px, "+r.nodeData.position.y+"px)"),c.ekj("blocked",r.nodeData.status==r.nodeStatus.blocked||1==r.nodeData.blockedByParents)("done",r.nodeData.status==r.nodeStatus.done)("selected",r.nodeData.selected)("disabled",!r.nodeData.enabled)("child-left",r.childLeft)("child",(r.nodeData.parents.length||0)>0),c.xp6(8),c.Q6J("ngIf",r.nodeData.assigned),c.xp6(2),c.Oqu(r.nodeData.code),c.xp6(1),c.Tol(c.lcZ(12,27,r.nodeData.status)),c.xp6(2),c.Oqu(r.nodeData.status),c.xp6(3),c.Oqu(r.nodeData.title),c.xp6(1),c.ekj("unestimated",!r.estimated),c.xp6(2),c.Oqu(r.nodeData.effort),c.xp6(2),c.hij("",r.nodeData.estimation," PTS"),c.xp6(1),c.Q6J("ngIf",r.bezier.length>0))},dependencies:[Hr,mn,oa,ZA],styles:['.card[_ngcontent-%COMP%]{font-size:10px;border-radius:4px;background-color:#fff;position:absolute;width:190px;box-shadow:0 0 1px #091e424f,0 2px 4px -1px #09244240;transition:.3s box-shadow;z-index:10;cursor:pointer}.card.disabled[_ngcontent-%COMP%]{box-shadow:unset}.card.disabled[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{opacity:.5}.card.disabled[_ngcontent-%COMP%] + .svg[_ngcontent-%COMP%]{opacity:.3}.card.selected[_ngcontent-%COMP%]{border:1px solid #333;background-color:#ddd}.card.selected[_ngcontent-%COMP%] + .svg[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{stroke-width:1.5;stroke:#006ec3}.card.selected[_ngcontent-%COMP%] + .svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke-width:3}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 1px #091e424f,0 2px 4px #09244273}.card[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{opacity:1}.card[_ngcontent-%COMP%]:hover   .card-iconset[_ngcontent-%COMP%]{display:flex}.card[_ngcontent-%COMP%]:hover + .svg[_ngcontent-%COMP%]{opacity:1}.card[_ngcontent-%COMP%]:hover + .svg[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{stroke-width:1.5;stroke:#90f}.card[_ngcontent-%COMP%]:hover + .svg[_ngcontent-%COMP%]   line.connector[_ngcontent-%COMP%]{stroke-width:3}.card.child[_ngcontent-%COMP%]:after{content:"";position:absolute;width:4px;height:4px;border-radius:50%;background-color:#888;display:block;top:-2px;left:50%;margin-left:-1px}.card.child-left[_ngcontent-%COMP%]:before{content:"";position:absolute;width:4px;height:4px;border-radius:50%;background-color:#888;display:block;top:44px;left:-2px;margin-left:-1px;margin-top:-2px}.card.child[_ngcontent-%COMP%]:hover:after, .card.child-left[_ngcontent-%COMP%]:hover:before{background-color:#006ec3}.card.blocked[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#f500003d}.card.done[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#004dff3d}.card.type--e2e[_ngcontent-%COMP%]{box-shadow:0 0 1px #091e424f,0 2px 4px -1px #0006,4px 3px #cacaca,4px 3px 1px #03091466,4px 5px 4px -1px #09244240,8px 6px #cacaca,8px 6px 1px #0006,8px 8px 4px -1px #00000059}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;border-radius:4px 4px 0 0}.card-header-code[_ngcontent-%COMP%]{font-weight:500;color:#013198}.card-header-code[_ngcontent-%COMP%]:hover{text-decoration:underline}.card-header-assigned[_ngcontent-%COMP%]{color:#fff;background-color:#333;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:8px;padding:0}.card-header-title[_ngcontent-%COMP%]{font-size:10px;margin:0;color:#444}.card-header-status[_ngcontent-%COMP%]{color:#fff;font-size:8px;background-color:#333;border-radius:4px;padding:1px 4px}.card-body[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.07);border-bottom:1px solid rgba(0,0,0,.07);padding:10px}.card-footer[_ngcontent-%COMP%]{padding:4px 10px;display:flex;justify-content:space-between;border-radius:0 0 4px 4px}.card-footer.unestimated[_ngcontent-%COMP%]{background-color:#ffc90042}.card-iconset[_ngcontent-%COMP%]{position:absolute;top:-21px;right:2px;background-color:#0080d0;border-radius:6px 6px 0 0;padding:3px 6px;display:none;gap:12px}.card-iconset[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{color:#fff;font-size:14px}.card-header-status.blocked[_ngcontent-%COMP%]{background-color:red}.card-header-status.new[_ngcontent-%COMP%]{background-color:#08a13c}.card-header-status.progress[_ngcontent-%COMP%]{background-color:#009dff}.card-header-status.done[_ngcontent-%COMP%]{background-color:#953ac0}.card-header-status.undefined[_ngcontent-%COMP%]{background-color:#333028}.card-header-status.review[_ngcontent-%COMP%]{background-color:#08bf1a}svg[_ngcontent-%COMP%]{display:block}.svg[_ngcontent-%COMP%]{position:relative}.svg-container[_ngcontent-%COMP%]{position:absolute;z-index:9}']}),n})();function ER(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"app-card",4),c.NdJ("selectNode",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onSelectNode(s))})("infoNode",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onInfoNode(s))}),c.qZA()}2&n&&c.Q6J("node",e.$implicit)}let IR=(()=>{class n{constructor(t,r,s,u){this.jiraService=t,this.nodeTreeService=r,this.viewService=s,this.ticketService=u,this.bgStyles={},this.nodeTree=[],this.unsub$=new En.x,localStorage.getItem("project")&&(this.bgStyles=this.calculateBg(r.getConstraints()),this.nodeTree=r.getStaticNodeTree()),this.nodeTreeService.getNodeTree().pipe(is(this.unsub$)).subscribe(d=>{this.nodeTree=d}),this.nodeTreeService.getconstraints().pipe(is(this.unsub$)).subscribe(d=>{this.bgStyles=this.calculateBg(d)}),this.viewService.getZoom().pipe(is(this.unsub$)).subscribe(d=>{this.bgStyles={...this.bgStyles,transform:`scale(${.9+.1*d})`},this.zoomStyle={transform:`scale(${1+.1*d})`}})}calculateBg(t){return{width:t.right-t.left+190+2*Xr_margin_x+"px",height:t.bottom-t.top+95+Xr_margin_y+"px"}}ngOnInit(){}onSelectNode(t){this.nodeTreeService.onSelectNode(t)}onInfoNode(t){this.ticketService.setNodeData(t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(HC),c.Y36(Ku),c.Y36(tv),c.Y36(pb))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dependency"]],decls:4,vars:2,consts:[[1,"graph"],[1,"graph-viewer",3,"ngStyle"],["container",""],[3,"node","selectNode","infoNode",4,"ngFor","ngForOf"],[3,"node","selectNode","infoNode"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1,2),c.YNc(3,ER,1,1,"app-card",3),c.qZA()()),2&t&&(c.xp6(1),c.Q6J("ngStyle",r.bgStyles),c.xp6(2),c.Q6J("ngForOf",r.nodeTree))},dependencies:[Hr,zl,CR],styles:[".graph[_ngcontent-%COMP%]{height:calc(100vh - 52px);overflow:auto;background-color:#eeeef1}.graph-viewer[_ngcontent-%COMP%]{transform-origin:10% top;transform:scale(.9);position:relative;margin:auto}"]}),n})();function bR(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.ALo(2,"initials"),c.BQk()),2&n){const t=c.oxw().$implicit;c.xp6(1),c.hij(" ",c.lcZ(2,1,t.assigned.name)," ")}}function DR(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw().$implicit;c.xp6(1),c.AsE(" ",t.mvp.id,". ",t.mvp.name," ")}}function TR(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"tr")(2,"td")(3,"a",2),c._uU(4),c.qZA()(),c.TgZ(5,"td"),c.YNc(6,bR,3,3,"ng-container",3),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c.YNc(10,DR,2,2,"ng-container",3),c.qZA(),c.TgZ(11,"td"),c._uU(12),c.qZA(),c.TgZ(13,"td"),c._uU(14),c.qZA(),c.TgZ(15,"td"),c._uU(16),c.qZA(),c.TgZ(17,"td"),c._uU(18),c.qZA()(),c.BQk()),2&n){const t=e.$implicit;c.xp6(1),c.ekj("selected",t.selected),c.xp6(2),c.Q6J("href",t.link,c.LSH),c.xp6(1),c.Oqu(t.code),c.xp6(2),c.Q6J("ngIf",t.assigned),c.xp6(2),c.Oqu(t.title),c.xp6(2),c.Q6J("ngIf",t.mvp),c.xp6(2),c.Oqu(t.estimation),c.xp6(2),c.Oqu(t.status),c.xp6(2),c.Oqu(t.effort),c.xp6(2),c.Oqu(t.parents.join(", "))}}const SR=[{path:"",pathMatch:"full",redirectTo:"dependency"},{path:"dependency",component:IR},{path:"table",component:(()=>{class n{constructor(t){this.nodeTreeService=t,this.ticketList=[],this.unsub$=new En.x,localStorage.getItem("project")&&(this.ticketList=t.getStaticNodeTree()),t.getNodeTree().pipe(is(this.unsub$)).subscribe(r=>{this.ticketList=r.map(s=>({...s,parents:s.parents.map(u=>r.find(d=>d.id===u)?.code||"")}))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ku))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-ticket-list"]],decls:22,vars:1,consts:[[1,"table-container"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[4,"ngIf"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"table")(2,"thead")(3,"tr")(4,"th"),c._uU(5,"Code"),c.qZA(),c.TgZ(6,"th"),c._uU(7,"Assigned"),c.qZA(),c.TgZ(8,"th"),c._uU(9,"title"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"MVP"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"estimation"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"status"),c.qZA(),c.TgZ(16,"th"),c._uU(17,"effort"),c.qZA(),c.TgZ(18,"th"),c._uU(19,"parents"),c.qZA()()(),c.TgZ(20,"tbody"),c.YNc(21,TR,19,11,"ng-container",1),c.qZA()()()),2&t&&(c.xp6(21),c.Q6J("ngForOf",r.ticketList))},dependencies:[Hr,mn,ZA],styles:["[_nghost-%COMP%]{background-color:#eeeef1;height:calc(100vh - 52px);overflow:auto}.table-container[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;padding-top:30px}table[_ngcontent-%COMP%]{margin:25px auto;font-size:.8em;font-family:sans-serif;min-width:400px;border-collapse:separate;border-spacing:0 4px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fff;padding:8px 12px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-radius:4px 0 0 4px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:0 4px 4px 0}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#33325c;color:#fff;text-align:left;text-transform:uppercase}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:2px solid #33325c}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#d1dbff;border-bottom:1px solid #33325c}"]}),n})()}];let AR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[J_.forRoot(SR),J_]}),n})(),xR=(()=>{class n{constructor(t){this.firebaseService=t}set companyData(t){this._company={id:t.docId,name:t.name,people:t.people.map(r=>r.id),projects:t.projects.map(r=>r.id)}}get company(){return this._company}loadCompany(t){return this.firebaseService.getCompany(t).pipe((0,Qr.b)(r=>this.companyData=r))}loadCompanies(){return this.firebaseService.getCompanies()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(eg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MR(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.hij("",t.label,":")}}function OR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",6),c.NdJ("click",function(){const u=c.CHM(t).index,d=c.oxw();return c.KtG(d.onElementClick(u))}),c._uU(1),c.qZA()}if(2&n){const t=e.$implicit,r=e.index,s=c.oxw();c.ekj("selected",s.selectedIndex===r),c.xp6(1),c.hij(" ",t.name," ")}}let gb=(()=>{class n{constructor(t){this.elRef=t,this.onSelect=new c.vpe,this.clickable=!1,this.isActive=!1,this.selectedIndex=0,this.selectedValue=this.defaultOption,this.propagateChange=r=>{}}clickout(t){!this.elRef.nativeElement.contains(t.target)&&this.clickable&&(this.onSelect.next(this.selectedValue),this.isActive=!1)}set defaultOption(t){this._defaultOption={name:t,value:""}}set options(t){if(this._options=t.every(r=>this.dropDownType(r))?t:t.map(r=>({name:r,value:r})),0!==this._options.length)if(this._defaultOption){const r=this._options.map(s=>s.name).indexOf(this._defaultOption.name);r>=0?this.selectElement(r):""!==this._defaultOption.name&&void 0!==this._defaultOption.name&&(this._options.unshift(this._defaultOption),this.selectElement(0))}else this.selectElement(0)}dropDownType(t){return"string"!=typeof t&&"name"in t&&"value"in t}selectElement(t){t<0||0===this._options.length||(this.selectedIndex=t,this.selectedValue=this._options[t]?.name,this.isActive=!1)}onElementClick(t){t<0||0===this._options.length||(this.selectElement(t),this.onSelect.next(this._options[t].value))}onMouseOver(){this.clickable||(this.isActive=!0)}onMouseOut(){this.clickable||(this.isActive=!1)}onLabelClick(){this.clickable&&(this.isActive=!0)}writeValue(t){this.propagateChange(this.selectedValue)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.propagateChange=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dropdown"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.clickout(u)},!1,c.evT)},inputs:{label:"label",clickable:"clickable",defaultOption:"defaultOption",options:"options"},outputs:{onSelect:"onSelect"},features:[c._Bn([{provide:kr,useExisting:(0,c.Gpc)(()=>n),multi:!0}])],decls:9,vars:5,consts:[[1,"dropdown",3,"mouseover","mouseout"],[1,"dropdown-selector",3,"click"],[1,"dropdown-selector-label"],[4,"ngIf"],[1,"material-symbols-outlined","dropdown-selector-expand"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.NdJ("mouseover",function(){return r.onMouseOver()})("mouseout",function(){return r.onMouseOut()}),c.TgZ(1,"div",1),c.NdJ("click",function(){return r.onLabelClick()}),c.TgZ(2,"span",2),c.YNc(3,MR,2,1,"span",3),c._uU(4),c.qZA(),c.TgZ(5,"span",4),c._uU(6," expand_more "),c.qZA()(),c.TgZ(7,"ul"),c.YNc(8,OR,2,3,"li",5),c.qZA()()),2&t&&(c.ekj("active",r.isActive),c.xp6(3),c.Q6J("ngIf",r.label),c.xp6(1),c.hij(" ",r.selectedValue," "),c.xp6(4),c.Q6J("ngForOf",r._options))},dependencies:[Hr,mn],styles:[".dropdown[_ngcontent-%COMP%]{position:relative;padding:6px;width:100%;cursor:pointer}.dropdown-selector[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:4px}.dropdown-selector-expand[_ngcontent-%COMP%]{font-size:20px}.dropdown.active[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]{z-index:1000;display:none;position:absolute;margin:6px 0 0 -12px;padding:0;list-style:none;background-color:#fff;font-weight:400;font-size:13px;border-radius:4px;box-shadow:1px 1px 4px #0006;min-width:100%;max-height:200px;overflow-y:auto;color:#333}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 12px}ul[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#eee}"]}),n})();function PR(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"number"),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.lnq("",t.completed[t.selectBy]," / ",t.total[t.selectBy]," : ",c.xi3(2,3,100*t.completed[t.selectBy]/t.total[t.selectBy],"1.0-0"),"")}}function NR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.onStatusSelect(u.name))}),c.TgZ(1,"span",11),c.ALo(2,"lowercase"),c.qZA(),c._uU(3),c.ALo(4,"titlecase"),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw();c.ekj("selected",r.selectedStatus===t.name),c.xp6(1),c.Tol(c.lcZ(2,5,t.name)),c.xp6(2),c.hij(" ",c.lcZ(4,7,t.name)," ")}}function kR(n,e){if(1&n&&(c.TgZ(0,"div"),c.ALo(1,"lowercase"),c._uU(2),c.ALo(3,"number"),c.qZA()),2&n){const t=e.$implicit,r=c.oxw();c.Tol(c.lcZ(1,6,t.name)),c.Udp("width",100*t[r.selectBy]/r.total[r.selectBy]+"%"),c.xp6(2),c.AsE(" ",t[r.selectBy]," : ",c.xi3(3,8,100*t[r.selectBy]/r.total[r.selectBy],"1.1-1")," % ")}}var _y=(()=>(function(n){n.COUNT="count",n.POINTS="points"}(_y||(_y={})),_y))();let RR=(()=>{class n{constructor(){this.statuses=[],this.onStatusSelected=new c.vpe,this.selectedStatus="",this.selectBy=_y.COUNT,this.selectByOpts=[_y.COUNT,_y.POINTS]}ngOnChanges(){this.statuses&&(this.total=this.statuses.reduce((t,r)=>({count:r.count+t.count,points:t.points+r.points}),{count:0,points:0}),this.completed=this.statuses.find(t=>t.name===ss.done)||{name:"DONE",count:0,points:0})}selectType(t){this.selectBy=t}onStatusSelect(t){this.selectedStatus=this.selectedStatus===t?"":t,this.onStatusSelected.next(this.selectedStatus)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-progress-bar"]],inputs:{statuses:"statuses"},outputs:{onStatusSelected:"onStatusSelected"},features:[c.TTD],decls:13,vars:4,consts:[[1,"container"],[1,"selector"],[3,"options","onSelect"],[1,"bar"],[1,"info"],[4,"ngIf"],[1,"convention"],["class","convention-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"partial"],[3,"class","width",4,"ngFor","ngForOf"],[1,"convention-item",3,"click"],[1,"dot"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"app-dropdown",2),c.NdJ("onSelect",function(u){return r.selectType(u)}),c.qZA()(),c.TgZ(3,"div",3)(4,"div",4)(5,"span"),c._uU(6,"Completed: "),c.YNc(7,PR,3,6,"span",5),c._uU(8,"% "),c.qZA(),c.TgZ(9,"div",6),c.YNc(10,NR,5,9,"div",7),c.qZA()(),c.TgZ(11,"div",8),c.YNc(12,kR,4,11,"div",9),c.qZA()()()),2&t&&(c.xp6(2),c.Q6J("options",r.selectByOpts),c.xp6(5),c.Q6J("ngIf",r.completed),c.xp6(3),c.Q6J("ngForOf",r.statuses),c.xp6(2),c.Q6J("ngForOf",r.statuses))},dependencies:[Hr,mn,gb,oa,ki,Gh],styles:[".container[_ngcontent-%COMP%]{display:flex;gap:20px}.selector[_ngcontent-%COMP%]{display:flex;align-items:center}.bar[_ngcontent-%COMP%]{color:#fff;font-size:9px;font-weight:700;padding:10px 0;flex-grow:1}.partial[_ngcontent-%COMP%]{display:flex;margin-top:6px;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,.8)}.partial[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:1px 12px;overflow:hidden;white-space:nowrap;background-color:#333}.info[_ngcontent-%COMP%]{display:flex;color:#fff;gap:20px}.convention[_ngcontent-%COMP%]{display:flex;gap:40px;justify-content:center;color:#fff;flex-grow:2}.convention-item[_ngcontent-%COMP%]{opacity:.6;display:flex;align-items:center;cursor:pointer}.convention-item[_ngcontent-%COMP%]:hover, .convention-item.selected[_ngcontent-%COMP%]{opacity:1}.convention[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;display:inline-block;margin-right:5px;border-radius:50%;border:1px solid white}app-dropdown[_ngcontent-%COMP%]{width:90px;display:block}.partial[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]{background-color:red}.partial[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%]{background-color:#08a13c}.partial[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background-color:#009dff}.partial[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{background-color:#953ac0}.partial[_ngcontent-%COMP%]   .undefined[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .undefined[_ngcontent-%COMP%]{background-color:#333028}.partial[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%], .convention[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]{background-color:#08bf1a}"]}),n})(),FR=(()=>{class n{constructor(){this.onUploadClick=new c.vpe,this.onZoomClick=new c.vpe,this.onCreateNode=new c.vpe}ngOnInit(){}onUploadFile(){this.onUploadClick.next(!0)}onZoom(t){this.onZoomClick.next(t)}onCreate(){this.onCreateNode.next()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-menu"]],outputs:{onUploadClick:"onUploadClick",onZoomClick:"onZoomClick",onCreateNode:"onCreateNode"},decls:21,vars:2,consts:[[1,"menu"],[1,"material-symbols-outlined",3,"routerLink"],[1,"material-symbols-outlined",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"ul")(2,"li")(3,"span",1),c._uU(4," account_tree "),c.qZA()(),c.TgZ(5,"li")(6,"span",1),c._uU(7," table_chart "),c.qZA()(),c.TgZ(8,"li")(9,"span",2),c.NdJ("click",function(){return r.onUploadFile()}),c._uU(10," upload_file "),c.qZA()(),c.TgZ(11,"li")(12,"span",2),c.NdJ("click",function(){return r.onCreate()}),c._uU(13," add_circle "),c.qZA()()(),c.TgZ(14,"ul")(15,"li")(16,"span",2),c.NdJ("click",function(){return r.onZoom(-1)}),c._uU(17," zoom_out "),c.qZA()(),c.TgZ(18,"li")(19,"span",2),c.NdJ("click",function(){return r.onZoom(1)}),c._uU(20," zoom_in "),c.qZA()()()()),2&t&&(c.xp6(3),c.Q6J("routerLink","dependency"),c.xp6(3),c.Q6J("routerLink","table"))},dependencies:[Za],styles:[".menu[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;padding:12px}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{background-color:#33325c;border-radius:20px;padding:6px 8px;list-style:none;margin:0;display:flex;gap:10px;color:#fff}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;font-size:20px;display:block;font-weight:300}"]}),n})();function LR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",7)(1,"app-dropdown",8),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onSelectMVP(s))}),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("options",t.mvps)("label","MVP")("defaultOption","None")}}let VR=(()=>{class n{constructor(t,r,s){this.nodeTreeService=t,this.ticketService=r,this.viewService=s,this.mvps=[],this.leader="",this.title="",this.unsub$=new En.x,t.getMVPs().pipe(is(this.unsub$)).subscribe(u=>this.mvps=u),t.getProgress().pipe(is(this.unsub$)).subscribe(u=>this.progressStatus=u),t.getProjectName().pipe(is(this.unsub$)).subscribe(u=>this.title=u),t.getLeader().pipe(is(this.unsub$)).subscribe(u=>this.leader=u)}onSelectMVP(t){this.nodeTreeService.onSelectMVP(t)}onUploadClick(t){this.nodeTreeService.openLoadWindow()}onZoomClick(t){this.viewService.setZoom(t)}onCreateNode(){this.ticketService.setNodeData()}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}statusSelect(t){this.nodeTreeService.onSelectStatus(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ku),c.Y36(pb),c.Y36(tv))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-header"]],decls:12,vars:6,consts:[[1,"header"],[1,"header-leader"],[1,"header-title"],["class","header-sprint",4,"ngIf"],[1,"header-progress"],[3,"statuses","onStatusSelected"],[3,"onUploadClick","onZoomClick","onCreateNode"],[1,"header-sprint"],[3,"options","label","defaultOption","onSelect"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"span"),c._uU(3),c.ALo(4,"initials"),c.qZA()(),c.TgZ(5,"div",2)(6,"h1"),c._uU(7),c.qZA()(),c.YNc(8,LR,2,3,"div",3),c.TgZ(9,"div",4)(10,"app-progress-bar",5),c.NdJ("onStatusSelected",function(u){return r.statusSelect(u)}),c.qZA()()(),c.TgZ(11,"app-menu",6),c.NdJ("onUploadClick",function(u){return r.onUploadClick(u)})("onZoomClick",function(u){return r.onZoomClick(u)})("onCreateNode",function(){return r.onCreateNode()}),c.qZA()),2&t&&(c.xp6(3),c.Oqu(c.lcZ(4,4,r.leader)),c.xp6(4),c.Oqu(r.title),c.xp6(1),c.Q6J("ngIf",r.mvps),c.xp6(2),c.Q6J("statuses",r.progressStatus))},dependencies:[mn,RR,gb,FR,ZA],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px;font-weight:700;height:52px;background-color:#33325c;color:#fff}.header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.3);padding:0 16px;align-items:center;display:flex;flex-shrink:1}.header-title[_ngcontent-%COMP%]{font-size:16px}.header-progress[_ngcontent-%COMP%]{flex-basis:50%;flex-grow:2;display:block!important}.header-leader[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-right:1px solid #CCC;padding:0 30px}.header-leader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#fff;display:flex;justify-content:center;align-items:center;font-weight:700;border-radius:50%;width:30px;height:30px;color:#333}h1[_ngcontent-%COMP%]{font-size:16px;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}app-menu[_ngcontent-%COMP%]{position:absolute;width:100%;z-index:900}app-dropdown[_ngcontent-%COMP%]{width:210px;display:block}"]}),n})(),UR=(()=>{class n{constructor(){this.onDelete=new c.vpe,this.confirmationVisible=!1}ngOnInit(){}onDeleteClick(){this.confirmationVisible=!0}confirmDelete(){!this.id||this.onDelete.next(this.id)}cancelDelete(){this.confirmationVisible=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-chip-item"]],inputs:{id:"id",text:"text",confirmation:"confirmation"},outputs:{onDelete:"onDelete"},decls:18,vars:4,consts:[[1,"chip"],[1,"chip-content"],[1,"material-symbols-outlined"],[1,"material-symbols-outlined","aligned_right",3,"click"],[1,"chip-confirmation"],["type","button",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"li",0)(1,"div",1)(2,"span",2),c._uU(3," more_vert "),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.TgZ(6,"span",3),c.NdJ("click",function(){return r.onDeleteClick()}),c._uU(7," delete "),c.qZA()(),c.TgZ(8,"div",4)(9,"div")(10,"span",2),c._uU(11," warning "),c.qZA(),c._uU(12),c.qZA(),c.TgZ(13,"div")(14,"button",5),c.NdJ("click",function(){return r.confirmDelete()}),c._uU(15,"Confirm"),c.qZA(),c.TgZ(16,"button",5),c.NdJ("click",function(){return r.cancelDelete()}),c._uU(17,"Cancel"),c.qZA()()()()),2&t&&(c.xp6(5),c.hij(" ",r.text," "),c.xp6(3),c.ekj("visible",r.confirmationVisible),c.xp6(4),c.hij(" ",r.confirmation," "))},styles:[".chip[_ngcontent-%COMP%]{background-color:#f4edff;border-radius:4px;overflow:hidden;cursor:pointer;position:relative}.chip[_ngcontent-%COMP%]:hover{background-color:#e9dbff}.chip[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:16px;color:#0006}.chip-content[_ngcontent-%COMP%]{display:flex;gap:8px;padding:6px}.chip-confirmation[_ngcontent-%COMP%]{padding:5px 12px;height:100%;position:absolute;left:110%;width:100%;display:flex;justify-content:space-between;align-items:center;transition:left .3s ease-in-out;background-color:#33325c;color:#fff;top:0;font-size:12px}.chip-confirmation.visible[_ngcontent-%COMP%]{left:0}.chip-confirmation[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{color:#e583e1}.chip-confirmation[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{align-items:center;display:flex;gap:8px}button[_ngcontent-%COMP%]{background-color:#f4edff;border:medium none;border-radius:8px;font-size:10px;margin-left:8px;padding:3px 8px}.aligned_right[_ngcontent-%COMP%]{margin-left:auto}"]}),n})();function BR(n,e){if(1&n&&(c.ynx(0),c._UZ(1,"input",27),c.BQk()),2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.ekj("field_error",(null==(r=t.form.get("code"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("code"))?null:r.touched))}}function jR(n,e){if(1&n&&(c.TgZ(0,"span",28),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);let r,s;c.ekj("field_error",(null==(r=t.form.get("code"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("code"))?null:r.touched)),c.xp6(1),c.Oqu(null==(s=t.form.get("code"))?null:s.value)}}function $R(n,e){if(1&n&&(c.ynx(0),c._UZ(1,"input",30),c.BQk()),2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.ekj("field_error",(null==(r=t.form.get("estimation"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("estimation"))?null:r.touched))}}function HR(n,e){if(1&n&&(c.TgZ(0,"p",28),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.hij("",t.data.estimation," pts")}}function GR(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"app-dropdown",31),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw(2);return c.KtG(u.onStatusChange(s))}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.Q6J("defaultOption",null==(r=t.form.get(t.editableFields.STATUS))?null:r.value)("options",t.statuses)}}function zR(n,e){if(1&n&&(c.TgZ(0,"span",32),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);let r;c.Tol(t.data.status),c.xp6(1),c.Oqu(null==(r=t.form.get(t.editableFields.STATUS))?null:r.value)}}function qR(n,e){if(1&n&&(c.ynx(0),c._UZ(1,"input",33),c.BQk()),2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.ekj("field_error",(null==(r=t.form.get("title"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("title"))?null:r.touched))}}function ZR(n,e){if(1&n&&(c.TgZ(0,"h3",34),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);let r;c.xp6(1),c.Oqu(null==(r=t.form.get("title"))?null:r.value)}}function WR(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"app-dropdown",35),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw(2);return c.KtG(u.onAssignedChanged(s))}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw(2);let r;c.xp6(1),c.Tol(t.mode),c.ekj("field_error",(null==(r=t.form.get("assigned"))||null==r.status?null:r.status.includes("INVALID"))&&(null==(r=t.form.get("assigned"))?null:r.touched)),c.Q6J("defaultOption",null==t.assigned?null:t.assigned.name)("options",t.filteredPeople)}}function KR(n,e){if(1&n&&(c.TgZ(0,"span",28),c._uU(1),c.qZA(),c.TgZ(2,"span",29),c._uU(3," edit "),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Oqu((null==t.assigned?null:t.assigned.name)||"--")}}function YR(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"span",36),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onShowDropdown(s.editableFields.PARENTS))}),c._uU(2," add_box "),c.qZA(),c.BQk()}}function QR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span",36),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onShowDropdown(s.editableFields.NONE))}),c._uU(1," disabled_by_default "),c.qZA()}}function JR(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"app-chip-item",37),c.NdJ("onDelete",function(s){c.CHM(t);const u=c.oxw(2);return c.KtG(u.onParentDelete(s))}),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("id",t.id)("text",t.code+" - "+t.title)("confirmation","Are you sure you want to remove this parent?")}}function XR(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"app-dropdown",38),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw(2);return c.KtG(u.onParentSelect(s))}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("defaultOption","Select a parent node")("options",t.ticketListFiltered)}}function eF(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"textarea",39),c._uU(2,"                                "),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(1),c.Tol(t.mode)}}function tF(n,e){if(1&n&&(c._UZ(0,"div",40),c.TgZ(1,"span",29),c._uU(2," edit "),c.qZA()),2&n){const t=c.oxw(2);let r;c.Q6J("innerHTML",null==(r=t.form.get("description"))?null:r.value,c.oJD)}}function nF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",41),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.moveToTrash())}),c.TgZ(1,"span",42),c._uU(2,"delete"),c.qZA(),c._uU(3," Move to trash "),c.qZA()}}function rF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",3)(2,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.CODE))}),c.YNc(3,BR,2,4,"ng-container",5),c.YNc(4,jR,4,3,"ng-template",null,6,c.W1O),c.qZA(),c.TgZ(6,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.ESTIMATION))}),c.YNc(7,$R,2,4,"ng-container",5),c.YNc(8,HR,4,1,"ng-template",null,7,c.W1O),c.qZA(),c.TgZ(10,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.STATUS))}),c.YNc(11,GR,2,4,"ng-container",5),c.YNc(12,zR,4,3,"ng-template",null,8,c.W1O),c.qZA(),c.TgZ(14,"span",9),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.closeModal())}),c._uU(15," close "),c.qZA()(),c.TgZ(16,"div",10)(17,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.TITLE))}),c.YNc(18,qR,2,4,"ng-container",5),c.YNc(19,ZR,4,1,"ng-template",null,11,c.W1O),c.qZA(),c.TgZ(21,"section",12)(22,"h5",13)(23,"span",14),c._uU(24," expand_more "),c.qZA(),c._uU(25," Assigned: "),c.qZA(),c.TgZ(26,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.ASSIGNED))}),c.YNc(27,WR,2,6,"ng-container",5),c.YNc(28,KR,4,1,"ng-template",null,15,c.W1O),c.qZA()(),c.TgZ(30,"section",12)(31,"h5",13)(32,"span",14),c._uU(33," expand_more "),c.qZA(),c._uU(34," Parents: "),c.TgZ(35,"div",16),c.YNc(36,YR,3,0,"ng-container",5),c.YNc(37,QR,2,0,"ng-template",null,17,c.W1O),c.qZA()(),c.TgZ(39,"div")(40,"ul",18),c.YNc(41,JR,2,3,"li",19),c.qZA()(),c.YNc(42,XR,2,2,"ng-container",2),c.qZA(),c.TgZ(43,"section",12)(44,"h5",13)(45,"span",14),c._uU(46," expand_more "),c.qZA(),c._uU(47," Description: "),c.qZA(),c.TgZ(48,"div",4),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onEditField(s,u.editableFields.DESCRIPTION))}),c.YNc(49,eF,3,2,"ng-container",5),c.YNc(50,tF,3,1,"ng-template",null,20,c.W1O),c.qZA()()(),c.TgZ(52,"div",21)(53,"div",22),c.YNc(54,nF,4,0,"button",23),c.TgZ(55,"div",24),c._UZ(56,"input",25)(57,"input",26),c.qZA()()(),c.BQk()}if(2&n){const t=c.MAs(5),r=c.MAs(9),s=c.MAs(13),u=c.MAs(20),d=c.MAs(29),m=c.MAs(38),v=c.MAs(51),E=c.oxw();c.xp6(3),c.Q6J("ngIf",E.editingField===E.editableFields.CODE||E.mode===E.modes.CREATE)("ngIfElse",t),c.xp6(4),c.Q6J("ngIf",E.editingField===E.editableFields.ESTIMATION||E.mode===E.modes.CREATE)("ngIfElse",r),c.xp6(4),c.Q6J("ngIf",E.editingField===E.editableFields.STATUS||E.mode===E.modes.CREATE)("ngIfElse",s),c.xp6(7),c.Q6J("ngIf",E.editingField===E.editableFields.TITLE||E.mode===E.modes.CREATE)("ngIfElse",u),c.xp6(9),c.Q6J("ngIf",E.editingField===E.editableFields.ASSIGNED||E.mode===E.modes.CREATE)("ngIfElse",d),c.xp6(9),c.Q6J("ngIf",E.activeDropdown!==E.editableFields.PARENTS)("ngIfElse",m),c.xp6(5),c.Q6J("ngForOf",E.parents),c.xp6(1),c.Q6J("ngIf",E.activeDropdown===E.editableFields.PARENTS),c.xp6(7),c.Q6J("ngIf",E.editingField===E.editableFields.DESCRIPTION||E.mode===E.modes.CREATE)("ngIfElse",v),c.xp6(5),c.Q6J("ngIf",E.mode!==E.modes.CREATE),c.xp6(3),c.Q6J("disabled",!E.form.dirty||!E.form.valid)}}var Hl=(()=>(function(n){n.NONE="",n.STATUS="status",n.TITLE="title",n.ESTIMATION="estimation",n.DESCRIPTION="description",n.CODE="code",n.ASSIGNED="assigned",n.PARENTS="parents"}(Hl||(Hl={})),Hl))();let iF=(()=>{class n{constructor(t,r,s,u,d,m){this.ticketService=t,this.nodeTreeService=r,this.firebaseService=s,this.projectService=u,this.peopleService=d,this.fb=m,this.nodeStaus=ss,this.editableFields=Hl,this.modes=pc,this.mode=pc.CREATE,this.editingField=Hl.NONE,this.peopleList=[],this.ticketList=[],this.ticketListFiltered=[],this.parents=[],this.activeDropdown=Hl.NONE,this.unsub$=new En.x,this.statuses=[ss.blocked,ss.done,ss.new,ss.progress,ss.review,ss.undefined]}ngOnInit(){this.peopleList=this.peopleService.people,this.setupData(this.projectService.project,this.ticketService.getnodeData()),this.nodeTreeService.getNodeTree().pipe(is(this.unsub$)).subscribe(t=>this.ticketList=t),this.ticketService.getNodeData$().pipe(is(this.unsub$)).subscribe(t=>{this.onEditField(void 0,Hl.NONE),this.setupData(this.projectService.project,t)})}setupData(t,r){this.project=t,this.ticketList=t.tickets.map(s=>({code:s.code,id:s.id,title:s.title,childrenTree:s.childrenTree})),this.mode=this.ticketService.mode,this.data=r,this.parents=[],this.data.parents.forEach(s=>{const u=this.ticketList.find(d=>d.id===s);void 0!==u&&this.parents.push(u)}),this.assigned=this.data?.assigned,this.updateFilteredParentList(),this.updateFilteredPeople(),this.setupForm()}setupForm(){this.form=this.fb.group({assigned:[this.assigned?.name],code:[this.data?.code,Ma.required],description:[this.data?.description],estimation:[this.data?.estimation,Ma.required],status:[this.data?.status,Ma.required],title:[this.data?.title,Ma.required],parents:[this.data.parents]})}closeModal(){this.ticketService.openDetailsPanel(!1)}onSave(){if(this.mode==pc.EDIT){const t=this.form.controls;let r={};for(const s in t)!0===t[s].dirty&&(r={...r,[s]:t[s].value},s===this.editableFields.ASSIGNED&&(r.assigned=t[s].value.id));this.closeModal(),this.firebaseService.updateTicket(this.data?.id,r).catch(console.error)}else this.mode==pc.CREATE&&this.firebaseService.createTicket(this.form.value,this.project.docId).then(t=>{this.closeModal()}).catch(console.error)}onEditField(t,r){this.editingField=r}onStatusChange(t){this.editingField=Hl.NONE;const r=this.form.get("status");r?.patchValue(t),this.markAsDirty(r)}onShowDropdown(t){this.activeDropdown=t}onParentSelect(t){if(""===t)return;const r=this.ticketList.find(s=>s.id===t);if(r){this.parents.push(r);const s=this.form.get("parents");s?.patchValue(this.parents.map(u=>u.id)),this.markAsDirty(s),this.updateFilteredParentList()}}onParentDelete(t){this.parents=this.parents.filter(s=>s.id!==t);const r=this.form.get("parents");r?.patchValue(this.parents.map(s=>s.id)),this.markAsDirty(r),this.updateFilteredParentList(t)}onAssignedChanged(t){if(""===t)return;const r=this.peopleList.find(s=>s.id===t);if(r){this.assigned={name:r.name,value:r.id},this.editingField=Hl.NONE;const s=this.form.get("assigned");this.updateFilteredPeople(),s?.patchValue(r),this.markAsDirty(s),this.updateFilteredPeople()}}updateFilteredParentList(t){this.ticketListFiltered=this.ticketList.filter(r=>r.id!==this.data.id&&!this.parents.map(s=>s.id).includes(r.id)&&r.id&&!this.ticketList.find(s=>s.id===this.data.id)?.childrenTree?.flat().includes(r.id)&&!r.childrenTree?.flat().includes(this.data.id)).map(r=>({name:r.code+" - "+r.title,value:r.id})),t&&(this.ticketListFiltered=this.ticketListFiltered.concat(this.ticketList.filter(r=>r.id===t||r.childrenTree?.flat().includes(t)).map(r=>({name:r.code+" - "+r.title,value:r.id}))))}updateFilteredPeople(){this.filteredPeople=this.peopleList.filter(t=>t.id!==this.assigned?.id).map(t=>({name:t.name,value:t.id}))}markAsDirty(t){t?.markAsDirty({onlySelf:!0}),this.form.markAsDirty()}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}moveToTrash(){this.closeModal(),this.ticketService.moveToTrash(this.projectService.getTicketRefById(this.data.id),this.data.children).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(pb),c.Y36(Ku),c.Y36(eg),c.Y36(qA),c.Y36(zA),c.Y36(Sd))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-ticket-detail"]],decls:3,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"modal-window"],[4,"ngIf"],[1,"modal-window-header"],[1,"field_editable",3,"click"],[4,"ngIf","ngIfElse"],["codeEdit",""],["estimationEdit",""],["statusEdit",""],[1,"material-symbols-outlined","close-modal",3,"click"],[1,"modal-window-body"],["titleEdit",""],[1,"field_section"],[1,"field_section_title"],[1,"material-symbols-outlined","field_section_expand"],["assignedEdit",""],[1,"field_section_title_right"],["hideLoadParents",""],[1,"parents"],[4,"ngFor","ngForOf"],["descriptionEdit",""],[1,"modal-window-footer"],[1,"btn-section-between"],["class","btn btn-alert","type","button",3,"click",4,"ngIf"],[1,"btn-section"],["type","button","value","cancel",1,"btn","btn-primary"],["type","submit","value","save",1,"btn","btn-primary",3,"disabled"],["type","text","formControlName","code","placeholder","Ticket Code",1,"field_paragraph"],[1,"field_paragraph"],[1,"material-symbols-outlined","field_editable_icon"],["type","number","placeholder","estimation","formControlName","estimation",1,"field_paragraph"],["formControlName","status",3,"defaultOption","options","onSelect"],[1,"status"],["type","text","formControlName","title","placeholder","Ticket title",1,"field_title"],[1,"field_title"],["formControlName","assigned",1,"field_section_dropdown",3,"defaultOption","options","onSelect"],[1,"material-symbols-outlined",3,"click"],[3,"id","text","confirmation","onDelete"],[1,"field_section_dropdown",3,"defaultOption","options","onSelect"],["formControlName","description",1,"field_textarea"],[1,"field_textarea",3,"innerHTML"],["type","button",1,"btn","btn-alert",3,"click"],[1,"material-symbols-outlined"]],template:function(t,r){1&t&&(c.TgZ(0,"form",0),c.NdJ("ngSubmit",function(){return r.onSave()}),c.TgZ(1,"div",1),c.YNc(2,rF,58,18,"ng-container",2),c.qZA()()),2&t&&(c.Q6J("formGroup",r.form),c.xp6(2),c.Q6J("ngIf",void 0!==r.data||r.mode===r.modes.CREATE))},dependencies:[Hr,mn,Df,so,Tf,hd,Qc,Mf,Sg,gb,UR],styles:[".btn[_ngcontent-%COMP%]{background-color:#33325c;border-radius:4px;color:#fff;font-size:14px;padding:8px 12px;border:medium none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px}.btn[_ngcontent-%COMP%]:hover{background-color:#33325ccc}.btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:default}.btn[disabled][_ngcontent-%COMP%]:hover{background-color:#33325c}.btn-alert[_ngcontent-%COMP%]{background-color:#e849d4}.btn[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:18px}h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.modal-window[_ngcontent-%COMP%]{position:fixed;right:0;top:52px;bottom:0;width:600px;background-color:#fff;border-radius:8px 0 0 8px;box-shadow:-1px 0 2px #0003;z-index:2000;font-size:.8em;display:flex;flex-direction:column}.modal-window-header[_ngcontent-%COMP%]{padding:20px 36px 0 20px;display:flex;gap:12px;justify-content:space-between}.modal-window-header[_ngcontent-%COMP%]   .field_editable[_ngcontent-%COMP%]{flex-basis:120px}.modal-window-footer[_ngcontent-%COMP%]{padding:10px 20px 20px}.modal-window-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:10px 20px;flex-grow:2;overflow-Y:auto}.field_editable[_ngcontent-%COMP%]{display:flex;align-items:stretch;cursor:pointer}.field_editable_icon[_ngcontent-%COMP%]{display:none;color:#666;font-size:16px;background-color:#f0f0f0;padding:2px 4px;border-radius:0 4px 4px 0;align-items:center}.field_editable[_ngcontent-%COMP%]:hover   .field_editable_icon[_ngcontent-%COMP%]{display:flex}.field_editable[_ngcontent-%COMP%]:hover   .field_title[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]:hover   .field_paragraph[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]:hover   .field_textarea[_ngcontent-%COMP%]{border-color:#0000000d}.field_editable[_ngcontent-%COMP%]   .field_title.create[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]   .field_paragraph.create[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]   .field_textarea.create[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.2);border-radius:4px}.field_editable[_ngcontent-%COMP%]   .field_title.create.field_error[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]   .field_paragraph.create.field_error[_ngcontent-%COMP%], .field_editable[_ngcontent-%COMP%]   .field_textarea.create.field_error[_ngcontent-%COMP%]{border-color:red}.field_editable[_ngcontent-%COMP%]   .field_title[_ngcontent-%COMP%]:focus, .field_editable[_ngcontent-%COMP%]   .field_paragraph[_ngcontent-%COMP%]:focus, .field_editable[_ngcontent-%COMP%]   .field_textarea[_ngcontent-%COMP%]:focus{border-radius:4px}.field_title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;line-height:1.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:5px 8px;margin:0;border:1px solid transparent;border-radius:4px 0 0 4px}.field_section_title[_ngcontent-%COMP%]{cursor:pointer;margin:0 0 6px 6px;display:flex;gap:4px;align-items:center}.field_section_title_right[_ngcontent-%COMP%]{justify-self:flex-end;margin-left:auto}.field_section[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:16px}.field_section_dropdown[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-radius:4px;padding:0 4px;margin:4px 0 8px 8px;display:block;width:100%}.field_paragraph[_ngcontent-%COMP%], .field_textarea[_ngcontent-%COMP%], .field_title[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid transparent;border-radius:4px 0 0 4px;width:100%}.field_paragraph[_ngcontent-%COMP%]:focus-visible, .field_textarea[_ngcontent-%COMP%]:focus-visible, .field_title[_ngcontent-%COMP%]:focus-visible{border:1px solid #F0F0F0;outline:medium none}.field_textarea[_ngcontent-%COMP%]{height:320px;font-family:inherit;width:100%;padding:8px}.field_error[_ngcontent-%COMP%]{border-color:#e849d4!important}.field_error[_ngcontent-%COMP%] + .field_editable_icon[_ngcontent-%COMP%]{display:flex;color:#fff;background-color:#e849d4}.close-modal[_ngcontent-%COMP%]{position:absolute;cursor:pointer;right:16px;top:16px;font-size:14px}.status[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:6px 8px;background-color:#333;border-radius:4px;color:#fff;font-size:11px}.parents[_ngcontent-%COMP%]{list-style:none;margin:0 0 0 8px;padding:0}.parents[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 0 4px}.parents[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin:0}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.btn-section-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),n})();function sF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",17),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw(3);return c.KtG(d.onLoadProject(u.value))}),c.TgZ(1,"span",18),c._uU(2," family_history "),c.qZA(),c._uU(3),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t.name," ")}}function oF(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"ul"),c.YNc(2,sF,4,1,"li",16),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(2),c.Q6J("ngForOf",t.projectNames)}}function aF(n,e){1&n&&c._uU(0," Loading projects... ")}function uF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",11),c.YNc(2,oF,3,1,"ng-container",5),c.YNc(3,aF,1,0,"ng-template",null,12,c.W1O),c.qZA(),c.TgZ(5,"div",13)(6,"div",14),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.goToView(s.modes.NEW))}),c._UZ(7,"img",15),c.TgZ(8,"p"),c._uU(9,"Create a new project"),c.qZA()()(),c.BQk()}if(2&n){const t=c.MAs(4),r=c.oxw();c.xp6(2),c.Q6J("ngIf",r.projectNames.length>0)("ngIfElse",t)}}function cF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",19),c.NdJ("ngSubmit",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.onCreateNewProject())}),c.TgZ(1,"div",20)(2,"p",21),c._uU(3,"Project name"),c.qZA(),c._UZ(4,"input",22),c.TgZ(5,"p",21),c._uU(6,"Please select a leader for this project."),c.qZA(),c.TgZ(7,"app-dropdown",23),c.NdJ("onSelect",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.selectProjectAssigned(s))}),c.qZA()()()}if(2&n){const t=c.oxw();c.Q6J("formGroup",t.form),c.xp6(7),c.Q6J("defaultOption","None")("options",t.peopleNames)}}function lF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",24),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.onCreateNewProject())}),c._uU(1," Create "),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("disabled",!t.form.dirty||!t.form.valid)}}var gc=(()=>(function(n){n.NEW="Create a new project",n.LOAD="Select your project"}(gc||(gc={})),gc))();let dF=(()=>{class n{constructor(t,r){this.nodeTreeService=t,this.fb=r,this.onLoad=new c.vpe,this.onCancel=new c.vpe,this.parseJSONError=!1,this.projectLoaded=!1,this.title=gc.LOAD,this.mode=gc.LOAD,this.modes=gc,this.creationBtnDisabled=!1;const s=localStorage.getItem("project");s&&(this.project=JSON.parse(s))}set projects(t){this.projectNames=t.map(r=>({name:r.name,value:r.docId}))}set people(t){this.peopleNames=t.map(r=>({name:r.name,value:r.id}))}setupForm(){this.form=this.fb.group({assigned:[this.projectAssigned,Ma.required],title:[this.projectTitle]})}onSelecProject(t){this.selectedProjectID=t.toString()}onLoadProject(t){this.onLoad.next(t.toString())}ngOnInit(){this.projectLoaded=this.nodeTreeService.isProjectLoaded,this.setupForm()}onInsert(){this.projectLoaded=!0}onClose(){this.onCancel.next(!1)}onCancelClick(){this.mode!==gc.NEW?this.mode===gc.LOAD&&this.projectLoaded&&this.onClose():this.goToView(gc.LOAD)}onCreateNewProject(){}goToView(t){this.title=this.mode=t}goToLoadingView(){this.title=this.mode=gc.LOAD}selectProjectAssigned(t){""!==t&&(this.projectAssigned=this.people.find(s=>s.id===t),this.form.get("parents"))}onSave(){const t=this.form.controls;let r={};for(const s in t)t[s].dirty&&(r={...r,[s]:t[s].value});console.log(r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ku),c.Y36(Sd))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-project-loader"]],inputs:{projects:"projects",people:"people"},outputs:{onLoad:"onLoad",onCancel:"onCancel"},decls:16,vars:5,consts:[[1,"overlay"],[1,"modal"],[1,"modal-header"],[1,"modal-close","material-symbols-outlined",3,"disabled","click"],[1,"modal-body"],[4,"ngIf","ngIfElse"],["createProject",""],[1,"modal-footer"],[1,"btn-section"],["type","button",1,"btn","btn_primary",3,"click"],["class","btn btn_primary","type","submit",3,"disabled","click",4,"ngIf"],[1,"projects"],["projects",""],[1,"file-container"],[1,"file-button",3,"click"],["src","assets/file_001.png","alt","",1,"file-img"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"material-symbols-outlined"],[3,"formGroup","ngSubmit"],[1,"new_project"],[1,"new_project_label"],["type","text","placeholder","Project Name","formControlName","title",1,"new_project_input"],[1,"new_project_dropdown",3,"defaultOption","options","onSelect"],["type","submit",1,"btn","btn_primary",3,"disabled","click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),c._uU(4),c.qZA(),c.TgZ(5,"button",3),c.NdJ("click",function(){return r.onClose()}),c._uU(6," close "),c.qZA()(),c.TgZ(7,"div",4),c.YNc(8,uF,10,2,"ng-container",5),c.YNc(9,cF,8,3,"ng-template",null,6,c.W1O),c.qZA(),c.TgZ(11,"div",7)(12,"div",8)(13,"button",9),c.NdJ("click",function(){return r.onCancelClick()}),c._uU(14,"Cancel"),c.qZA(),c.YNc(15,lF,2,1,"button",10),c.qZA()()()()),2&t){const s=c.MAs(10);c.xp6(4),c.Oqu(r.title),c.xp6(1),c.Q6J("disabled",!r.projectLoaded),c.xp6(3),c.Q6J("ngIf",r.mode===r.modes.LOAD)("ngIfElse",s),c.xp6(7),c.Q6J("ngIf",r.mode===r.modes.NEW)}},dependencies:[Hr,mn,Df,so,hd,Qc,Mf,Sg,gb],styles:[".btn[_ngcontent-%COMP%]{background-color:#33325c;border-radius:4px;color:#fff;font-size:14px;padding:8px 12px;border:medium none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px}.btn[_ngcontent-%COMP%]:hover{background-color:#33325ccc}.btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:default}.btn[disabled][_ngcontent-%COMP%]:hover{background-color:#33325c}.btn-alert[_ngcontent-%COMP%]{background-color:#e849d4}.btn[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:18px}.overlay[_ngcontent-%COMP%]{position:fixed;z-index:20000;width:100vw;height:100vh;background-color:#b4b4b466;left:0;top:0;display:flex;justify-content:center;align-items:center;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;border:1px solid #CCC;box-shadow:2px 2px 6px #00000080;width:720px}.modal-header[_ngcontent-%COMP%]{padding:28px;position:relative}.modal-body[_ngcontent-%COMP%]{padding:0 28px}.modal-footer[_ngcontent-%COMP%]{padding:28px}.modal-close[_ngcontent-%COMP%]{position:absolute;right:-12px;top:-12px;background-color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:1px 1px 1px #0000001a;border:medium none}.modal-close[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}h2[_ngcontent-%COMP%]{font-size:26px;margin:0}.projects[_ngcontent-%COMP%]{overflow-y:auto;padding:2px;margin-bottom:20px;max-height:210px}.projects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:12px}.projects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{opacity:.6;background-color:#f0f0f0;box-shadow:0 0 0 1px #0000001a;padding:16px;border-radius:12px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:opacity .2s;font-size:20px;color:#333;font-weight:700}.projects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{opacity:1}.projects[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{color:#33325c}.file-container[_ngcontent-%COMP%]{display:flex;gap:30px;justify-content:center}.file-button[_ngcontent-%COMP%]{opacity:.4;background-color:#f0f0f0;box-shadow:0 0 0 1px #0000001a;padding:30px;border-radius:12px;display:flex;flex-direction:column;flex:0 0 50%;justify-content:center;align-items:center;text-align:center;max-width:260px;gap:12px;cursor:pointer;transition:opacity .2s;font-size:13px}.file-button-hidden[_ngcontent-%COMP%]{display:none}.file-button[_ngcontent-%COMP%]:hover{opacity:.7}.file-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.file-img[_ngcontent-%COMP%]{display:block;height:68px}.new_project[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.new_project_label[_ngcontent-%COMP%]{margin:0}.new_project_input[_ngcontent-%COMP%]{font-size:20px;font-weight:700;border:1px solid rgba(0,0,0,.5);border-radius:4px;display:block;width:100%;padding:8px 12px;margin-bottom:26px}.new_project_input[_ngcontent-%COMP%]:focus-visible{outline:medium none;box-shadow:0 0 2px #8925eb80;border:1px solisd rgb(137,37,235)}.new_project_dropdown[_ngcontent-%COMP%]{display:block;border:1px solid rgba(0,0,0,.5);border-radius:4px;padding:4px;margin-bottom:12px}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}"]}),n})();function hF(n,e){1&n&&c._UZ(0,"app-ticket-detail")}function fF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"app-project-loader",3),c.NdJ("onCancel",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.onShowLoader(s))})("onLoad",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.loadProject(s))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("projects",t.projects)("people",t.people)}}let pF=(()=>{class n{constructor(t,r,s,u,d,m){this.nodeTreeService=t,this.ticketService=r,this.projectService=s,this.companyService=u,this.peopleService=d,this.firebaseService=m,this.showProjectLoader=!0,this.isDetailPanelOpen=!1,this.projects=[],this.people=[],this.currentCompanyID="frCRG0OZ2ytX2GvgYk50",this.unsub$=new En.x}ngOnInit(){localStorage.clear(),this.nodeTreeService.loadFromLocalStorage(),localStorage.getItem("project")&&(this.showProjectLoader=!1),this.companyService.loadCompanies().pipe(is(this.unsub$),Gn(t=>{const r=t.find(s=>s.docId===this.currentCompanyID);return this.companyService.loadCompany(r.docId)}),Gn(t=>this.peopleService.loadPeople(this.companyService.company.people)),Gn(t=>this.projectService.getProjectsByCompany(this.companyService.company.projects))).subscribe(t=>{this.projects=t,this.people=this.peopleService.people}),this.nodeTreeService.isLoadWindowOpen().pipe(is(this.unsub$)).subscribe(t=>this.showProjectLoader=t),this.ticketService.isDetailsPanelOpen().pipe(is(this.unsub$)).subscribe(t=>{this.isDetailPanelOpen=t})}loadProject(t){this.firebaseService.getProject(t).pipe(Gn(r=>this.projectService.loadProjectData(r))).subscribe(r=>this.onShowLoader(!1))}onShowLoader(t){this.showProjectLoader=t}ngOnDestroy(){this.unsub$.next(),this.unsub$.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ku),c.Y36(pb),c.Y36(qA),c.Y36(xR),c.Y36(zA),c.Y36(eg))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:2,consts:[[1,"main-container"],[4,"ngIf"],[3,"projects","people","onCancel","onLoad",4,"ngIf"],[3,"projects","people","onCancel","onLoad"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"app-header")(2,"router-outlet"),c.YNc(3,hF,1,0,"app-ticket-detail",1),c.YNc(4,fF,1,2,"app-project-loader",2),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngIf",r.isDetailPanelOpen),c.xp6(1),c.Q6J("ngIf",r.showProjectLoader))},dependencies:[mn,Hf,VR,iF,dF],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}app-header[_ngcontent-%COMP%]{display:block}"]}),n})(),gF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[pF]}),n.\u0275inj=c.cJS({providers:[eg,{provide:ge,useClass:nt}],imports:[Vc,AR,No,jo,Mg,fn.hO.initializeApp(Xf_firebaseConfig)]}),n})();(0,c.G48)(),Pu().bootstrapModule(gF).catch(n=>console.error(n))},5867:(ot,Ee,R)=>{R.d(Ee,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=R(9681);(0,c.registerVersion)("firebase","9.14.0","app")},127:(ot,Ee,R)=>{R.d(Ee,{Z:()=>c.Z});var c=R(3942);c.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(ot,Ee,R)=>{R.r(Ee);var c=R(5861),J=R(3942),N=R(2090),se=R(9681),re=R(1877),le=R(655),ae=R(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new re.Yd("@firebase/auth");function nt(y,...f){Ye.logLevel<=re.in.ERROR&&Ye.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Te(y,...f){throw Be(y,...f)}function _e(y,...f){return Be(y,...f)}function Ce(y,f,g){const w=Object.assign(Object.assign({},et()),{[f]:g});return new N.LL("auth","Firebase",w).create(f,{appName:y.name})}function Ue(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Te(y,"argument-error"),Ce(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return ge.create(y,...f)}function U(y,f,...g){if(!y)throw Be(f,...g)}function pe(y){const f="INTERNAL ASSERTION FAILED: "+y;throw nt(f),new Error(f)}function q(y,f){y||pe(f)}const Q=new Map;function ne(y){q(y instanceof Function,"Expected a class definition");let f=Q.get(y);return f?(q(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Q.set(y,f),f)}function Ne(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(f,g){this.shortDelay=f,this.longDelay=g,q(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Vt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pn(y,f){q(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class qt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Sr=new sn(3e4,6e4);function At(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function on(y,f,g,w){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,c.Z)(function*(y,f,g,w,S={}){return _i(y,S,(0,c.Z)(function*(){let O={},G={};w&&("GET"===f?G=w:O={body:JSON.stringify(w)});const ue=(0,N.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),qt.fetch()(vi(y,y.config.apiHost,g,ue),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function _i(y,f,g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,c.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Kt),f);try{const S=new si(y),O=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const G=yield O.json();if("needConfirmation"in G)throw oi(y,"account-exists-with-different-credential",G);if(O.ok&&!("errorMessage"in G))return G;{const ue=O.ok?G.errorMessage:G.error.message,[Fe,Ke]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw oi(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Fe)throw oi(y,"email-already-in-use",G);if("USER_DISABLED"===Fe)throw oi(y,"user-disabled",G);const gt=w[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ce(y,gt,Ke);Te(y,gt)}}catch(S){if(S instanceof N.ZR)throw S;Te(y,"network-request-failed")}})).apply(this,arguments)}function Br(y,f,g,w){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,c.Z)(function*(y,f,g,w,S={}){const O=yield on(y,f,g,w,S);return"mfaPendingCredential"in O&&Te(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function vi(y,f,g,w){const S=`${f}${g}?${w}`;return y.config.emulator?pn(y.config,S):`${y.config.apiScheme}://${S}`}class si{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),Sr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function oi(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const S=_e(y,f,w);return S.customData._tokenResponse=g,S}function We(){return(We=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function _r(y,f){return ds.apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Kn(y,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Mi(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function dn(){return(dn=(0,c.Z)(function*(y,f=!1){const g=(0,N.m9)(y),w=yield g.getIdToken(f),S=it(w);U(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const O="object"==typeof S.firebase?S.firebase:void 0,G=O?.sign_in_provider;return{claims:S,token:w,authTime:Mi(ht(S.auth_time)),issuedAtTime:Mi(ht(S.iat)),expirationTime:Mi(ht(S.exp)),signInProvider:G||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(y){return 1e3*Number(y)}function it(y){var f;const[g,w,S]=y.split(".");if(void 0===g||void 0===w||void 0===S)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,N.tV)(w);return O?JSON.parse(O):(nt("Failed to decode base64 JWT payload"),null)}catch(O){return nt("Caught error parsing JWT payload as JSON",null===(f=O)||void 0===f?void 0:f.toString()),null}}function hr(y,f){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof N.ZR&&jr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function jr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Dt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,c.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class hs{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mi(this.lastLoginAt),this.creationTime=Mi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qt(y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,c.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),S=yield hr(y,Kn(g,{idToken:w}));U(S?.users.length,g,"internal-error");const O=S.users[0];y._notifyReloadListener(O);const G=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?Je(O.providerUserInfo):[],ue=xr(y.providerData,G),gt=!!y.isAnonymous&&!(y.email&&O.passwordHash||ue?.length),pt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ue,metadata:new hs(O.createdAt,O.lastLoginAt),isAnonymous:gt};Object.assign(y,pt)})).apply(this,arguments)}function Yn(){return(Yn=(0,c.Z)(function*(y){const f=(0,N.m9)(y);yield Qt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function xr(y,f){return[...y.filter(w=>!f.some(S=>S.providerId===w.providerId)),...f]}function Je(y){return y.map(f=>{var{providerId:g}=f,w=(0,le._T)(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Qe(){return(Qe=(0,c.Z)(function*(y,f){const g=yield _i(y,{},(0,c.Z)(function*(){const w=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:O}=y.config,G=vi(y,S,"/v1/token",`key=${O}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",qt.fetch()(G,{method:"POST",headers:ue,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function tn(y){const f=it(y);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,c.Z)(function*(){return U(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,c.Z)(function*(){const{accessToken:S,refreshToken:O,expiresIn:G}=yield function Ie(y,f){return Qe.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(S,O,Number(G))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:S,expirationTime:O}=g,G=new Ct;return w&&(U("string"==typeof w,"internal-error",{appName:f}),G.refreshToken=w),S&&(U("string"==typeof S,"internal-error",{appName:f}),G.accessToken=S),O&&(U("number"==typeof O,"internal-error",{appName:f}),G.expirationTime=O),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return pe("not implemented")}}function yt(y,f){U("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class kt{constructor(f){var{uid:g,auth:w,stsTokenManager:S}=f,O=(0,le._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new hs(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const w=yield hr(g,g.stsTokenManager.getToken(g.auth,f));return U(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function Bn(y){return dn.apply(this,arguments)}(this,f)}reload(){return function Jt(y){return Yn.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new kt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,c.Z)(function*(){let S=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),S=!0),g&&(yield Qt(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield hr(f,function na(y,f){return We.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,S,O,G,ue,Fe,Ke,gt;const pt=null!==(w=g.displayName)&&void 0!==w?w:void 0,gr=null!==(S=g.email)&&void 0!==S?S:void 0,bi=null!==(O=g.phoneNumber)&&void 0!==O?O:void 0,Id=null!==(G=g.photoURL)&&void 0!==G?G:void 0,Gy=null!==(ue=g.tenantId)&&void 0!==ue?ue:void 0,zu=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,Eg=null!==(Ke=g.createdAt)&&void 0!==Ke?Ke:void 0,Df=null!==(gt=g.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:Ig,emailVerified:Tf,isAnonymous:zy,providerData:bg,stsTokenManager:bd}=g;U(Ig&&bd,f,"internal-error");const Sf=Ct.fromJSON(this.name,bd);U("string"==typeof Ig,f,"internal-error"),yt(pt,f.name),yt(gr,f.name),U("boolean"==typeof Tf,f,"internal-error"),U("boolean"==typeof zy,f,"internal-error"),yt(bi,f.name),yt(Id,f.name),yt(Gy,f.name),yt(zu,f.name),yt(Eg,f.name),yt(Df,f.name);const il=new kt({uid:Ig,auth:f,email:gr,emailVerified:Tf,displayName:pt,isAnonymous:zy,photoURL:Id,phoneNumber:bi,tenantId:Gy,stsTokenManager:Sf,createdAt:Eg,lastLoginAt:Df});return bg&&Array.isArray(bg)&&(il.providerData=bg.map(Dg=>Object.assign({},Dg))),zu&&(il._redirectEventId=zu),il}static _fromIdTokenResponse(f,g,w=!1){return(0,c.Z)(function*(){const S=new Ct;S.updateFromServerResponse(g);const O=new kt({uid:g.localId,auth:f,stsTokenManager:S,isAnonymous:w});return yield Qt(O),O})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,w){var S=this;return(0,c.Z)(function*(){S.storage[g]=w})()}_get(g){var w=this;return(0,c.Z)(function*(){const S=w.storage[g];return void 0===S?null:S})()}_remove(g){var w=this;return(0,c.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function Z(y,f,g){return`firebase:${y}:${f}:${g}`}class ve{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:S,name:O}=this.auth;this.fullUserKey=Z(this.userKey,S.apiKey,O),this.fullPersistenceKey=Z("persistence",S.apiKey,O),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?kt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,c.Z)(function*(){if(!g.length)return new ve(ne(L),f,w);const S=(yield Promise.all(g.map(function(){var Ke=(0,c.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let O=S[0]||ne(L);const G=Z(w,f.config.apiKey,f.name);let ue=null;for(const Ke of g)try{const gt=yield Ke._get(G);if(gt){const pt=kt._fromJSON(f,gt);Ke!==O&&(ue=pt),O=Ke;break}}catch{}const Fe=S.filter(Ke=>Ke._shouldAllowMigration);return O._shouldAllowMigration&&Fe.length?(O=Fe[0],ue&&(yield O._set(G,ue.toJSON())),yield Promise.all(g.map(function(){var Ke=(0,c.Z)(function*(gt){if(gt!==O)try{yield gt._remove(G)}catch{}});return function(gt){return Ke.apply(this,arguments)}}())),new ve(O,f,w)):new ve(O,f,w)})()}}function Y(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ln(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(He(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ve(f))return"Blackberry";if($e(f))return"Webos";if(at(f))return"Safari";if((f.includes("chrome/")||Zt(f))&&!f.includes("edge/"))return"Chrome";if(Gt(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function He(y=(0,N.z$)()){return/firefox\//i.test(y)}function at(y=(0,N.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Zt(y=(0,N.z$)()){return/crios\//i.test(y)}function ln(y=(0,N.z$)()){return/iemobile/i.test(y)}function Gt(y=(0,N.z$)()){return/android/i.test(y)}function Ve(y=(0,N.z$)()){return/blackberry/i.test(y)}function $e(y=(0,N.z$)()){return/webos/i.test(y)}function Lt(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Vs(y=(0,N.z$)()){return Lt(y)||Gt(y)||$e(y)||Ve(y)||/windows phone/i.test(y)||ln(y)}function fs(y,f=[]){let g;switch(y){case"Browser":g=Y((0,N.z$)());break;case"Worker":g=`${Y((0,N.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}class po{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const w=O=>new Promise((G,ue)=>{try{G(f(O))}catch(Fe){ue(Fe)}});w.onAbort=g,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,c.Z)(function*(){var w;if(g.auth.currentUser===f)return;const S=[];try{for(const O of g.queue)yield O(f),O.onAbort&&S.push(O.onAbort)}catch(O){S.reverse();for(const G of S)try{G()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=O)||void 0===w?void 0:w.message})}})()}}class Rt{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Us(this),this.idTokenSubscription=new Us(this),this.beforeStateQueue=new po(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=ne(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var S,O;if(!w._deleted&&(w.persistenceManager=yield ve.create(w,f),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var w;const S=yield g.assertedPersistence.getCurrentUser();let O=S,G=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ue=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Fe=O?._redirectEventId,Ke=yield g.tryRedirectSignIn(f);(!ue||ue===Fe)&&Ke?.user&&(O=Ke.user,G=!0)}if(!O)return g.directlySetCurrentUser(null);if(!O._redirectEventId){if(G)try{yield g.beforeStateQueue.runMiddleware(O)}catch(ue){O=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ue))}return O?g.reloadAndSetCurrentUserOrClear(O):g.directlySetCurrentUser(null)}return U(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===O._redirectEventId?g.directlySetCurrentUser(O):g.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){var w;try{yield Qt(f)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const w=f?(0,N.m9)(f):null;return w&&U(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f,g=!1){var w=this;return(0,c.Z)(function*(){if(!w._deleted)return f&&U(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,c.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(ne(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,c.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(g);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&ne(f)||g._popupRedirectResolver;U(w,g,"argument-error"),g.redirectPersistenceManager=yield ve.create(g,[ne(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var w,S;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,S){if(this._deleted)return()=>{};const O="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return U(G,this,"internal-error"),G.then(()=>O(this.currentUser)),"function"==typeof g?f.addObserver(g,w,S):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=fs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function Cn(y){return(0,N.m9)(y)}class Us{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function ps(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class fr{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return pe("not implemented")}_getIdTokenResponse(f){return pe("not implemented")}_linkToIdToken(f,g){return pe("not implemented")}_getReauthenticationResolver(f){return pe("not implemented")}}function Hn(y,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:resetPassword",At(y,f))})).apply(this,arguments)}function an(y,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function yc(y,f){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:update",At(y,f))})).apply(this,arguments)}function Hr(){return(Hr=(0,c.Z)(function*(y,f){return Br(y,"POST","/v1/accounts:signInWithPassword",At(y,f))})).apply(this,arguments)}function ms(y,f){return wi.apply(this,arguments)}function wi(){return(wi=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:sendOobCode",At(y,f))})).apply(this,arguments)}function mn(y,f){return _c.apply(this,arguments)}function _c(){return(_c=(0,c.Z)(function*(y,f){return ms(y,f)})).apply(this,arguments)}function sr(y,f){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,c.Z)(function*(y,f){return ms(y,f)})).apply(this,arguments)}function ou(y,f){return sa.apply(this,arguments)}function sa(){return(sa=(0,c.Z)(function*(y,f){return ms(y,f)})).apply(this,arguments)}function vc(y,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,c.Z)(function*(y,f){return ms(y,f)})).apply(this,arguments)}function Gl(){return(Gl=(0,c.Z)(function*(y,f){return Br(y,"POST","/v1/accounts:signInWithEmailLink",At(y,f))})).apply(this,arguments)}function wc(){return(wc=(0,c.Z)(function*(y,f){return Br(y,"POST","/v1/accounts:signInWithEmailLink",At(y,f))})).apply(this,arguments)}class Cc extends fr{constructor(f,g,w,S=null){super("password",w),this._email=f,this._password=g,this._tenantId=S}static _fromEmailAndPassword(f,g){return new Cc(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new Cc(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function ia(y,f){return Hr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Hh(y,f){return Gl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,c.Z)(function*(){switch(w.signInMethod){case"password":return an(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function zl(y,f){return wc.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Jn(y,f){return ql.apply(this,arguments)}function ql(){return(ql=(0,c.Z)(function*(y,f){return Br(y,"POST","/v1/accounts:signInWithIdp",At(y,f))})).apply(this,arguments)}class Gi extends fr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Gi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:S}=g,O=(0,le._T)(g,["providerId","signInMethod"]);if(!w||!S)return null;const G=new Gi(w,S);return G.idToken=O.idToken||void 0,G.accessToken=O.accessToken||void 0,G.secret=O.secret,G.nonce=O.nonce,G.pendingToken=O.pendingToken||null,G}_getIdTokenResponse(f){return Jn(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Jn(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Jn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,N.xO)(g)}return f}}function ng(y,f){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:sendVerificationCode",At(y,f))})).apply(this,arguments)}function ys(){return(ys=(0,c.Z)(function*(y,f){return Br(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,f))})).apply(this,arguments)}function Wl(){return(Wl=(0,c.Z)(function*(y,f){const g=yield Br(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,f));if(g.temporaryProof)throw oi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const rg={USER_NOT_FOUND:"user-not-found"};function Kl(){return(Kl=(0,c.Z)(function*(y,f){return Br(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),rg)})).apply(this,arguments)}class _s extends fr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new _s({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new _s({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function oa(y,f){return ys.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Gh(y,f){return Wl.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ig(y,f){return Kl.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:S}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:O}=f;return w||g||S||O?new _s({verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:O}):null}}class au{constructor(f){var g,w,S,O,G,ue;const Fe=(0,N.zd)((0,N.pd)(f)),Ke=null!==(g=Fe.apiKey)&&void 0!==g?g:null,gt=null!==(w=Fe.oobCode)&&void 0!==w?w:null,pt=function Yl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);U(Ke&&gt&&pt,"argument-error"),this.apiKey=Ke,this.operation=pt,this.code=gt,this.continueUrl=null!==(O=Fe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(G=Fe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ue=Fe.tenantId)&&void 0!==ue?ue:null}static parseLink(f){const g=function Ql(y){const f=(0,N.zd)((0,N.pd)(y)).link,g=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,w=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(w?(0,N.zd)((0,N.pd)(w)).link:null)||w||g||f||y}(f);try{return new au(g)}catch{return null}}}let Ni=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return Cc._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const S=au.parseLink(w);return U(S,"argument-error"),Cc._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ki{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class zi extends ki{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class js extends zi{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return U("providerId"in g&&"signInMethod"in g,"argument-error"),Gi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return js.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return js.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:O,nonce:G,providerId:ue}=f;if(!w&&!S&&!g&&!O||!ue)return null;try{return new js(ue)._credential({idToken:g,accessToken:w,nonce:G,pendingToken:O})}catch{return null}}}let aa=(()=>{class y extends zi{constructor(){super("facebook.com")}static credential(g){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),uu=(()=>{class y extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:S}=g;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ec=(()=>{class y extends zi{constructor(){super("github.com")}static credential(g){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ua extends fr{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Jn(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Jn(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Jn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:S,pendingToken:O}=g;return w&&S&&O&&w===S?new ua(w,O):null}static _create(f,g){return new ua(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ui extends ki{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ui.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ui.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=ua.fromJSON(f);return U(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return ua._create(w,g)}catch{return null}}}let Gr=(()=>{class y extends zi{constructor(){super("twitter.com")}static credential(g,w){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=g;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function go(y,f){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,c.Z)(function*(y,f){return Br(y,"POST","/v1/accounts:signUp",At(y,f))})).apply(this,arguments)}class pr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,S=!1){return(0,c.Z)(function*(){const O=yield kt._fromIdTokenResponse(f,w,S),G=Zh(w);return new pr({user:O,providerId:G,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const S=Zh(w);return new pr({user:f,providerId:S,_tokenResponse:w,operationType:g})})()}}function Zh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function An(){return(An=(0,c.Z)(function*(y){var f;const g=Cn(y);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new pr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield go(g,{returnSecureToken:!0}),S=yield pr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class cu extends N.ZR{constructor(f,g,w,S){var O;super(g.code,g.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,S){return new cu(f,g,w,S)}}function Kh(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?cu._fromErrorAndOperation(y,O,f,w):O})}function ci(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function lu(){return(lu=(0,c.Z)(function*(y,f){const g=(0,N.m9)(y);yield zt(!0,g,f);const{providerUserInfo:w}=yield _r(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),S=ci(w||[]);return g.providerData=g.providerData.filter(O=>S.has(O.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function $s(y,f){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,c.Z)(function*(y,f,g=!1){const w=yield hr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return pr._forOperation(y,"link",w)})).apply(this,arguments)}function zt(y,f,g){return du.apply(this,arguments)}function du(){return(du=(0,c.Z)(function*(y,f,g){yield Qt(f);const S=!1===y?"provider-already-linked":"no-such-provider";U(ci(f.providerData).has(g)===y,f.auth,S)})).apply(this,arguments)}function Hs(y,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,c.Z)(function*(y,f,g=!1){var w;const{auth:S}=y,O="reauthenticate";try{const G=yield hr(y,Kh(S,O,f,y),g);U(G.idToken,S,"internal-error");const ue=it(G.idToken);U(ue,S,"internal-error");const{sub:Fe}=ue;return U(y.uid===Fe,S,"user-mismatch"),pr._forOperation(y,O,G)}catch(G){throw"auth/user-not-found"===(null===(w=G)||void 0===w?void 0:w.code)&&Te(S,"user-mismatch"),G}})).apply(this,arguments)}function Ci(y,f){return fu.apply(this,arguments)}function fu(){return(fu=(0,c.Z)(function*(y,f,g=!1){const w="signIn",S=yield Kh(y,w,f),O=yield pr._fromIdTokenResponse(y,w,S);return g||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function bn(y,f){return It.apply(this,arguments)}function It(){return(It=(0,c.Z)(function*(y,f){return Ci(Cn(y),f)})).apply(this,arguments)}function pu(y,f){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,c.Z)(function*(y,f){const g=(0,N.m9)(y);return yield zt(!1,g,f.providerId),$s(g,f)})).apply(this,arguments)}function gu(y,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,c.Z)(function*(y,f){return Hs((0,N.m9)(y),f)})).apply(this,arguments)}function Ic(y,f){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,c.Z)(function*(y,f){return Br(y,"POST","/v1/accounts:signInWithCustomToken",At(y,f))})).apply(this,arguments)}function ca(){return(ca=(0,c.Z)(function*(y,f){const g=Cn(y),w=yield Ic(g,{token:f,returnSecureToken:!0}),S=yield pr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class be{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?jt._fromServerResponse(f,g):Te(f,"internal-error")}}class jt extends be{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new jt(g)}}function yu(y,f,g){var w;U((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(U(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(U(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function xn(){return(xn=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y),S={requestType:"PASSWORD_RESET",email:f};g&&yu(w,S,g),yield sr(w,S)})).apply(this,arguments)}function mo(){return(mo=(0,c.Z)(function*(y,f,g){yield Hn((0,N.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(y,f){yield yc((0,N.m9)(y),{oobCode:f})})).apply(this,arguments)}function da(y,f){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,c.Z)(function*(y,f){const g=(0,N.m9)(y),w=yield Hn(g,{oobCode:f}),S=w.requestType;switch(U(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,g,"internal-error");default:U(w.email,g,"internal-error")}let O=null;return w.mfaInfo&&(O=be._fromServerResponse(Cn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:S}})).apply(this,arguments)}function Xl(){return(Xl=(0,c.Z)(function*(y,f){const{data:g}=yield da((0,N.m9)(y),f);return g.email})).apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(y,f,g){const w=Cn(y),S=yield go(w,{returnSecureToken:!0,email:f,password:g}),O=yield pr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function Gs(){return(Gs=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y),S={requestType:"EMAIL_SIGNIN",email:f};U(g.handleCodeInApp,w,"argument-error"),g&&yu(w,S,g),yield ou(w,S)})).apply(this,arguments)}function fa(){return(fa=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y),S=Ni.credentialWithLink(f,g||Ne());return U(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),bn(w,S)})).apply(this,arguments)}function og(y,f){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:createAuthUri",At(y,f))})).apply(this,arguments)}function pa(){return(pa=(0,c.Z)(function*(y,f){const w={identifier:f,continueUri:lt()?Ne():"http://localhost"},{signinMethods:S}=yield og((0,N.m9)(y),w);return S||[]})).apply(this,arguments)}function ga(){return(ga=(0,c.Z)(function*(y,f){const g=(0,N.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&yu(g.auth,S,f);const{email:O}=yield mn(g.auth,S);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function Cu(){return(Cu=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&yu(w.auth,O,g);const{email:G}=yield vc(w.auth,O);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function Eu(y,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,c.Z)(function*(y,f){return on(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Nc(){return(Nc=(0,c.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,N.m9)(y),O={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},G=yield hr(w,Eu(w.auth,O));w.displayName=G.displayName||null,w.photoURL=G.photoUrl||null;const ue=w.providerData.find(({providerId:Fe})=>"password"===Fe);ue&&(ue.displayName=w.displayName,ue.photoURL=w.photoURL),yield w._updateTokensIfNecessary(G)})).apply(this,arguments)}function qs(y,f,g){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,c.Z)(function*(y,f,g){const{auth:w}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(O.email=f),g&&(O.password=g);const G=yield hr(y,an(w,O));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class zr{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class yn extends zr{constructor(f,g,w,S){super(f,g,w),this.username=S}}class kc extends zr{constructor(f,g){super(f,"facebook.com",g)}}class Rc extends yn{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Qh extends zr{constructor(f,g){super(f,"google.com",g)}}class Fc extends yn{constructor(f,g,w){super(f,"twitter.com",g,w)}}function bu(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Xn(y){var f,g;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const G=null===(g=null===(f=it(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new zr(O,"anonymous"!==G&&"custom"!==G?G:null)}if(!w)return null;switch(w){case"facebook.com":return new kc(O,S);case"github.com":return new Rc(O,S);case"google.com":return new Qh(O,S);case"twitter.com":return new Fc(O,S,y.screenName||null);case"custom":case"anonymous":return new zr(O,null);default:return new zr(O,w,S)}}(g)}class Ws{constructor(f,g,w){this.type=f,this.credential=g,this.auth=w}static _fromIdtoken(f,g){return new Ws("enroll",f,g)}static _fromMfaPendingCredential(f){return new Ws("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ws._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return Ws._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Tu{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=Cn(f),S=g.customData._serverResponse,O=(S.mfaInfo||[]).map(ue=>be._fromServerResponse(w,ue));U(S.mfaPendingCredential,w,"internal-error");const G=Ws._fromMfaPendingCredential(S.mfaPendingCredential);return new Tu(G,O,function(){var ue=(0,c.Z)(function*(Fe){const Ke=yield Fe._process(w,G);delete S.mfaInfo,delete S.mfaPendingCredential;const gt=Object.assign(Object.assign({},S),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(g.operationType){case"signIn":const pt=yield pr._fromIdTokenResponse(w,g.operationType,gt);return yield w._updateCurrentUser(pt.user),pt;case"reauthenticate":return U(g.user,w,"internal-error"),pr._forOperation(g.user,g.operationType,gt);default:Te(w,"internal-error")}});return function(Fe){return ue.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function Su(y,f){return on(y,"POST","/v2/accounts/mfaEnrollment:start",At(y,f))}class Jh{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>be._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Jh(f)}getSession(){var f=this;return(0,c.Z)(function*(){return Ws._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var w=this;return(0,c.Z)(function*(){const S=f,O=yield w.getSession(),G=yield hr(w.user,S._process(w.user.auth,O,g));return yield w.user._updateTokensIfNecessary(G),w.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){var w;const S="string"==typeof f?f:f.uid,O=yield g.user.getIdToken(),G=yield hr(g.user,function id(y,f){return on(y,"POST","/v2/accounts/mfaEnrollment:withdraw",At(y,f))}(g.user.auth,{idToken:O,mfaEnrollmentId:S}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ue})=>ue!==S),yield g.user._updateTokensIfNecessary(G);try{yield g.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(w=ue)||void 0===w?void 0:w.code))throw ue}})()}}const vo=new WeakMap,Ks="__sak";class xu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ks,"1"),this.storage.removeItem(Ks),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ya=(()=>{class y extends xu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ma(){const y=(0,N.z$)();return at(y)||Lt(y)}()&&function gn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),O=this.localCache[w];S!==O&&g(w,O,S)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ue,Fe,Ke)=>{this.notifyListeners(ue,Ke)});const S=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(S);if(g.newValue!==ue)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!w)return}const O=()=>{const ue=this.storage.getItem(S);!w&&this.localCache[S]===ue||this.notifyListeners(S,ue)},G=this.storage.getItem(S);!function Qn(){return(0,N.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?O():setTimeout(O,10)}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const O of Array.from(S))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var S=()=>super._set,O=this;return(0,c.Z)(function*(){yield S().call(O,g,w),O.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,S=this;return(0,c.Z)(function*(){const O=yield w().call(S,g);return S.localCache[g]=JSON.stringify(O),O})()}_remove(g){var w=()=>super._remove,S=this;return(0,c.Z)(function*(){yield w().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),Fi=(()=>{class y extends xu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let ad=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(O=>O.isListeningto(g));if(w)return w;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,c.Z)(function*(){const S=g,{eventId:O,eventType:G,data:ue}=S.data,Fe=w.handlersMap[G];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:O,eventType:G});const Ke=Array.from(Fe).map(function(){var pt=(0,c.Z)(function*(gr){return gr(S.origin,ue)});return function(gr){return pt.apply(this,arguments)}}()),gt=yield function va(y){return Promise.all(y.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Ke);S.ports[0].postMessage({status:"done",eventId:O,eventType:G,response:gt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function wa(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class Lc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var S=this;return(0,c.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let G,ue;return new Promise((Fe,Ke)=>{const gt=wa("",20);O.port1.start();const pt=setTimeout(()=>{Ke(new Error("unsupported_event"))},w);ue={messageChannel:O,onMessage(gr){const bi=gr;if(bi.data.eventId===gt)switch(bi.data.status){case"ack":clearTimeout(pt),G=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Fe(bi.data.response);break;default:clearTimeout(pt),clearTimeout(G),Ke(new Error("invalid_response"))}}},S.handlers.add(ue),O.port1.addEventListener("message",ue.onMessage),S.target.postMessage({eventType:f,eventId:gt,data:g},[O.port2])}).finally(()=>{ue&&S.removeMessageHandler(ue)})})()}}function Rn(){return window}function Mu(){return typeof Rn().WorkerGlobalScope<"u"&&"function"==typeof Rn().importScripts}function Ca(){return(Ca=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Cs="firebaseLocalStorageDb",Es="firebaseLocalStorage",Vc="fbase_key";class Qs{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ea(y,f){return y.transaction([Es],f?"readwrite":"readonly").objectStore(Es)}function Co(){const y=indexedDB.open(Cs,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Es,{keyPath:Vc})}catch(S){g(S)}}),y.addEventListener("success",(0,c.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Es)?f(w):(w.close(),yield function cd(){const y=indexedDB.deleteDatabase(Cs);return new Qs(y).toPromise()}(),f(yield Co()))}))})}function Yi(y,f,g){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,c.Z)(function*(y,f,g){const w=Ea(y,!0).put({[Vc]:f,value:g});return new Qs(w).toPromise()})).apply(this,arguments)}function Ia(){return(Ia=(0,c.Z)(function*(y,f){const g=Ea(y,!1).get(f),w=yield new Qs(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Js(y,f){const g=Ea(y,!0).delete(f);return new Qs(g).toPromise()}const Eo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield Co()),g.db})()}_withRetries(g){var w=this;return(0,c.Z)(function*(){let S=0;for(;;)try{const O=yield w._openDb();return yield g(O)}catch(O){if(S++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return Mu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=ad._getInstance(function Pu(){return Mu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,c.Z)(function*(S,O){return{keyProcessed:(yield g._poll()).includes(O.key)}});return function(S,O){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,c.Z)(function*(S,O){return["keyChanged"]});return function(S,O){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var w,S;if(g.activeServiceWorker=yield function Ys(){return Ca.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Lc(g.activeServiceWorker);const O=yield g.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=O[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,c.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ou(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Co();return yield Yi(g,Ks,"1"),yield Js(g,Ks),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,c.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var S=this;return(0,c.Z)(function*(){return S._withPendingWrite((0,c.Z)(function*(){return yield S._withRetries(O=>Yi(O,g,w)),S.localCache[g]=w,S.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,c.Z)(function*(){const S=yield w._withRetries(O=>function Nu(y,f){return Ia.apply(this,arguments)}(O,g));return w.localCache[g]=S,S})()}_remove(g){var w=this;return(0,c.Z)(function*(){return w._withPendingWrite((0,c.Z)(function*(){return yield w._withRetries(S=>Js(S,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const w=yield g._withRetries(G=>{const ue=Ea(G,!1).getAll();return new Qs(ue).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const S=[],O=new Set;for(const{fbase_key:G,value:ue}of w)O.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(ue)&&(g.notifyListeners(G,ue),S.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!O.has(G)&&(g.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const O of Array.from(S))O(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Io(y,f){return on(y,"POST","/v2/accounts/mfaSignIn:start",At(y,f))}function Is(){return(Is=(0,c.Z)(function*(y){return(yield on(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Do(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=S=>{const O=_e("internal-error");O.customData=S,g(O)},w.type="text/javascript",w.charset="UTF-8",function bo(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function Fu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ba=1e12;class hn{constructor(f){this.auth=f,this.counter=ba,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new ag(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||ba;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ba))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var w;return null===(w=g._widgets.get(f||ba))||void 0===w||w.execute(),""})()}}class ag{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;U(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vy(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ug=Fu("rcb"),wy=new sn(3e4,6e4);class Xh{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Rn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return U(function aw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Rn().grecaptcha):new Promise((w,S)=>{const O=Rn().setTimeout(()=>{S(_e(f,"network-request-failed"))},wy.get());Rn()[ug]=()=>{Rn().clearTimeout(O),delete Rn()[ug];const ue=Rn().grecaptcha;if(!ue)return void S(_e(f,"internal-error"));const Fe=ue.render;ue.render=(Ke,gt)=>{const pt=Fe(Ke,gt);return this.counter++,pt},this.hostLanguage=g,w(ue)},Do(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:ug,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(O),S(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=Rn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jc{load(f){return(0,c.Z)(function*(){return new hn(f)})()}clearedOneInstance(){}}const Ey="recaptcha",Iy={theme:"light",type:"image"};class ar{constructor(f,g=Object.assign({},Iy),w){this.parameters=g,this.type=Ey,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jc:new Xh,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(O=>{const G=ue=>{!ue||(f.tokenChangeListeners.delete(G),O(ue))};f.tokenChangeListeners.add(G),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=Rn()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){U(lt()&&!Mu(),f.auth,"internal-error"),yield function bs(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function qr(y){return Is.apply(this,arguments)}(f.auth);U(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xt{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=_s._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Zr(){return(Zr=(0,c.Z)(function*(y,f,g){const w=Cn(y),S=yield _n(w,f,(0,N.m9)(g));return new Xt(S,O=>bn(w,O))})).apply(this,arguments)}function Wr(){return(Wr=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y);yield zt(!1,w,"phone");const S=yield _n(w.auth,f,(0,N.m9)(g));return new Xt(S,O=>pu(w,O))})).apply(this,arguments)}function Pn(){return(Pn=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y),S=yield _n(w.auth,f,(0,N.m9)(g));return new Xt(S,O=>gu(w,O))})).apply(this,arguments)}function _n(y,f,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,c.Z)(function*(y,f,g){var w;const S=yield g.verify();try{let O;if(U("string"==typeof S,y,"argument-error"),U(g.type===Ey,y,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const G=O.session;if("phoneNumber"in O)return U("enroll"===G.type,y,"internal-error"),(yield Su(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===G.type,y,"internal-error");const ue=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return U(ue,y,"missing-multi-factor-info"),(yield Io(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield ng(y,{phoneNumber:O.phoneNumber,recaptchaToken:S});return G}}finally{g._reset()}})).apply(this,arguments)}function Lu(){return(Lu=(0,c.Z)(function*(y,f){yield $s((0,N.m9)(y),f)})).apply(this,arguments)}let Da=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Cn(g)}verifyPhoneNumber(g,w){return _n(this.auth,g,(0,N.m9)(w))}static credential(g,w){return _s._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:S}=g;return w&&S?_s._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Pr(y,f){return f?ne(f):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class $c extends fr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Jn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Jn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Jn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Kr(y){return Ci(y.auth,new $c(y),y.bypassAuthState)}function Ta(y){const{auth:f,user:g}=y;return U(g,f,"internal-error"),Hs(g,new $c(y),y.bypassAuthState)}function Ds(y){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,c.Z)(function*(y){const{auth:f,user:g}=y;return U(g,f,"internal-error"),$s(g,new $c(y),y.bypassAuthState)})).apply(this,arguments)}class So{constructor(f,g,w,S,O=!1){this.auth=f,this.resolver=w,this.user=S,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(w,S){f.pendingPromise={resolve:w,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(w,S){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:O,tenantId:G,error:ue,type:Fe}=f;if(ue)return void g.reject(ue);const Ke={auth:g.auth,requestUri:w,sessionId:S,tenantId:G||void 0,postBody:O||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Ke))}catch(gt){g.reject(gt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Kr;case"linkViaPopup":case"linkViaRedirect":return Ds;case"reauthViaPopup":case"reauthViaRedirect":return Ta;default:Te(this.auth,"internal-error")}}resolve(f){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ao=new sn(2e3,1e4);function Uu(){return(Uu=(0,c.Z)(function*(y,f,g){const w=Cn(y);Ue(y,f,ki);const S=Pr(w,g);return new eo(w,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function ld(){return(ld=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y);Ue(w.auth,f,ki);const S=Pr(w.auth,g);return new eo(w.auth,"reauthViaPopup",f,S,w).executeNotNull()})).apply(this,arguments)}function xo(){return(xo=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y);Ue(w.auth,f,ki);const S=Pr(w.auth,g);return new eo(w.auth,"linkViaPopup",f,S,w).executeNotNull()})).apply(this,arguments)}let eo=(()=>{class y extends So{constructor(g,w,S,O,G){super(g,w,O,G),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const w=yield g.execute();return U(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,c.Z)(function*(){q(1===g.filter.length,"Popup operations only handle one event");const w=wa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ao.get())};g()}}return y.currentPopupAction=null,y})();const Nr=new Map;class Dn extends So{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let w=Nr.get(g.auth._key());if(!w){try{const O=(yield function Mo(y,f){return Ii.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(O)}catch(S){w=()=>Promise.reject(S)}Nr.set(g.auth._key(),w)}return g.bypassAuthState||Nr.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const S=yield w.auth._redirectUserForId(f.eventId);if(S)return w.user=S,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Ii(){return(Ii=(0,c.Z)(function*(y,f){const g=Gc(f),w=Xi(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(g));return yield w._remove(g),S})).apply(this,arguments)}function Oo(y,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,c.Z)(function*(y,f){return Xi(y)._set(Gc(f),"true")})).apply(this,arguments)}function to(y,f){Nr.set(y._key(),f)}function Xi(y){return ne(y._redirectPersistence)}function Gc(y){return Z("pendingRedirect",y.config.apiKey,y.name)}function b(){return(b=(0,c.Z)(function*(y,f,g){const w=Cn(y);Ue(y,f,ki);const S=Pr(w,g);return yield Oo(S,w),S._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y);Ue(w.auth,f,ki);const S=Pr(w.auth,g);yield Oo(S,w.auth);const O=yield ct(w);return S._openRedirect(w.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function De(){return(De=(0,c.Z)(function*(y,f,g){const w=(0,N.m9)(y);Ue(w.auth,f,ki);const S=Pr(w.auth,g);yield zt(!1,w,f.providerId),yield Oo(S,w.auth);const O=yield ct(w);return S._openRedirect(w.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function dt(){return(dt=(0,c.Z)(function*(y,f){return yield Cn(y)._initializationPromise,_t(y,f,!1)})).apply(this,arguments)}function _t(y,f){return St.apply(this,arguments)}function St(){return(St=(0,c.Z)(function*(y,f,g=!1){const w=Cn(y),S=Pr(w,f),G=yield new Dn(w,S,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield w._persistUserIfCurrent(G.user),yield w._setRedirectUser(null,f)),G})).apply(this,arguments)}function ct(y){return vn.apply(this,arguments)}function vn(){return(vn=(0,c.Z)(function*(y){const f=wa(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Po{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Aa(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return no(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!no(f)){const S=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,S))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ts(f))}saveEventToCache(f){this.cachedEventUids.add(Ts(f)),this.lastProcessedEventTime=Date.now()}}function Ts(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function no({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function ro(y){return io.apply(this,arguments)}function io(){return(io=(0,c.Z)(function*(y,f={}){return on(y,"GET","/v1/projects",f)})).apply(this,arguments)}const No=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ko=/^https?/;function dg(){return(dg=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield ro(y);for(const g of f)try{if(by(g))return}catch{}Te(y,"unauthorized-domain")})).apply(this,arguments)}function by(y){const f=Ne(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===w}if(!ko.test(g))return!1;if(No.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Dy=new sn(3e4,6e4);function hg(){const y=Rn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let qc=null;function Zc(y){return qc=qc||function zc(y){return new Promise((f,g)=>{var w,S,O;function G(){hg(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{hg(),g(_e(y,"network-request-failed"))},timeout:Dy.get()})}if(null!==(S=null===(w=Rn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(O=Rn().gapi)||void 0===O||!O.load){const ue=Fu("iframefcb");return Rn()[ue]=()=>{gapi.load?G():g(_e(y,"network-request-failed"))},Do(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Fe=>g(Fe))}G()}}).catch(f=>{throw qc=null,f})}(y),qc}const fg=new sn(5e3,15e3),Ty={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pg(y){const f=y.config;U(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?pn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},S=rf.get(y.config.apiHost);S&&(w.eid=S);const O=y._getFrameworks();return O.length&&(w.fw=O.join(",")),`${g}?${(0,N.xO)(w).slice(1)}`}function kr(){return kr=(0,c.Z)(function*(y){const f=yield Zc(y),g=Rn().gapi;return U(g,y,"internal-error"),f.open({where:document.body,url:pg(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ty,dontclear:!0},w=>new Promise(function(){var S=(0,c.Z)(function*(O,G){yield w.restyle({setHideOnLeave:!1});const ue=_e(y,"network-request-failed"),Fe=Rn().setTimeout(()=>{G(ue)},fg.get());function Ke(){Rn().clearTimeout(Fe),O(w)}w.ping(Ke).then(Ke,()=>{G(ue)})});return function(O,G){return S.apply(this,arguments)}}()))}),kr.apply(this,arguments)}const sf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class so{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function es(y,f,g,w,S,O){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:S};if(f instanceof ki){f.setDefaultLanguage(y.languageCode),G.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(G.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Ke]of Object.entries(O||{}))G[Fe]=Ke}if(f instanceof zi){const Fe=f.getScopes().filter(Ke=>""!==Ke);Fe.length>0&&(G.scopes=Fe.join(","))}y.tenantId&&(G.tid=y.tenantId);const ue=G;for(const Fe of Object.keys(ue))void 0===ue[Fe]&&delete ue[Fe];return`${function xy({config:y}){return y.emulator?pn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(ue).slice(1)}`}const Ma="webStorageSupport";class ts extends class mg{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ts(f)}_finalizeEnroll(f,g,w){return function Au(y,f){return on(y,"POST","/v2/accounts/mfaEnrollment:finalize",At(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Ru(y,f){return on(y,"POST","/v2/accounts/mfaSignIn:finalize",At(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bu=(()=>{class y{constructor(){}static assertion(g){return ts._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var lf="@firebase/auth",yg="0.20.11";class My{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var S;f((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fo(){return window}function ao(){return(ao=(0,c.Z)(function*(y,f,g){var w;const{BuildInfo:S}=Fo();q(f.sessionId,"AuthEvent did not contain a session ID");const O=yield dd(f.sessionId),G={};return Lt()?G.ibi=S.packageName:Gt()?G.apn=S.packageName:Te(y,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=O,es(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,G)})).apply(this,arguments)}function Kc(){return(Kc=(0,c.Z)(function*(y){const{BuildInfo:f}=Fo(),g={};Lt()?g.iosBundleId=f.packageName:Gt()?g.androidPackageName=f.packageName:Te(y,"operation-not-supported-in-this-environment"),yield ro(y,g)})).apply(this,arguments)}function Yc(){return(Yc=(0,c.Z)(function*(y,f,g){const{cordova:w}=Fo();let S=()=>{};try{yield new Promise((O,G)=>{let ue=null;function Fe(){var pt;O();const gr=null===(pt=w.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof gr&&gr(),"function"==typeof g?.close&&g.close()}function Ke(){ue||(ue=window.setTimeout(()=>{G(_e(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&Ke()}f.addPassiveListener(Fe),document.addEventListener("resume",Ke,!1),Gt()&&document.addEventListener("visibilitychange",gt,!1),S=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",gt,!1),ue&&window.clearTimeout(ue)}})}finally{S()}})).apply(this,arguments)}function dd(y){return ju.apply(this,arguments)}function ju(){return(ju=(0,c.Z)(function*(y){const f=di(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function di(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}(0,N.Pz)("authIdTokenMaxAge"),function Oy(y){(0,se._registerComponent)(new ae.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:O,authDomain:G}=w.options;return((ue,Fe)=>{U(O&&!O.includes(":"),"invalid-api-key",{appName:ue.name}),U(!G?.includes(":"),"argument-error",{appName:ue.name});const Ke={apiKey:O,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fs(y)},gt=new Rt(ue,Fe,Ke);return function ke(y,f){const g=f?.persistence||[],w=(Array.isArray(g)?g:[g]).map(ne);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,f?.popupRedirectResolver)}(gt,g),gt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ae.wA("auth-internal",f=>{const g=Cn(f.getProvider("auth").getImmediate());return new My(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(lf,yg,function df(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(lf,yg,"esm2017")}("Browser");class mf extends Po{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function hd(y){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,c.Z)(function*(y){const f=yield yf()._get(Na(y));return f&&(yield yf()._remove(Na(y))),f})).apply(this,arguments)}function Pa(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function yf(){return ne(ya)}function Na(y){return Z("authEvent",y.config.apiKey,y.name)}function pd(y){if(!y?.includes("?"))return{};const[f,...g]=y.split("?");return(0,N.zd)(g.join("?"))}function Vy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function gd(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Lo(y=(0,N.z$)()){return!("file:"!==gd()&&"ionic:"!==gd()&&"capacitor:"!==gd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function md(){try{const y=self.localStorage,f=wa();if(y)return y.setItem(f,"1"),y.removeItem(f),!function $u(y=(0,N.z$)()){return function Jc(){return(0,N.w1)()&&11===document?.documentMode}()||function Ra(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch{return Xc()&&(0,N.hl)()}return!1}function Xc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hu(){return(function pw(){return"http:"===gd()||"https:"===gd()}()||(0,N.ru)()||Lo())&&!function ka(){return(0,N.b$)()||(0,N.UG)()}()&&md()&&!Xc()}function el(){return Lo()&&typeof document<"u"}function yd(){return(yd=(0,c.Z)(function*(){return!!el()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Er={LOCAL:"local",NONE:"none",SESSION:"session"},As=U,Fa="persistence";function Gu(y){return tl.apply(this,arguments)}function tl(){return(tl=(0,c.Z)(function*(y){yield y._initializationPromise;const f=Vo(),g=Z(Fa,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Vo(){var y;try{return(null===(y=function _d(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const La=U;class Ir{constructor(){this.browserResolver=ne(class gg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fi,this._completeRedirectFn=_t,this._overrideRedirectResult=to}_openPopup(f,g,w,S){var O=this;return(0,c.Z)(function*(){var G;q(null===(G=O.eventManagers[f._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ue=es(f,g,w,Ne(),S);return function af(y,f,g,w=500,S=600){const O=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-w)/2,0).toString();let ue="";const Fe=Object.assign(Object.assign({},sf),{width:w.toString(),height:S.toString(),top:O,left:G}),Ke=(0,N.z$)().toLowerCase();g&&(ue=Zt(Ke)?"_blank":g),He(Ke)&&(f=f||"http://localhost",Fe.scrollbars="yes");const gt=Object.entries(Fe).reduce((gr,[bi,Id])=>`${gr}${bi}=${Id},`,"");if(function $r(y=(0,N.z$)()){var f;return Lt(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ke)&&"_self"!==ue)return function oo(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",ue),new so(null);const pt=window.open(f||"",ue,gt);U(pt,y,"popup-blocked");try{pt.focus()}catch{}return new so(pt)}(f,ue,wa())})()}_openRedirect(f,g,w,S){var O=this;return(0,c.Z)(function*(){return yield O._originValidation(f),function Ei(y){Rn().location.href=y}(es(f,g,w,Ne(),S)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:S,promise:O}=this.eventManagers[g];return S?Promise.resolve(S):(q(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const w=yield function Ro(y){return kr.apply(this,arguments)}(f),S=new Po(f);return w.register("authEvent",O=>(U(O?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:S},g.iframes[f._key()]=w,S})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ma,{type:Ma},S=>{var O;const G=null===(O=S?.[0])||void 0===O?void 0:O[Ma];void 0!==G&&g(!!G),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function tf(y){return dg.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Vs()||at()||Lt()}}),this.cordovaResolver=ne(class vg{constructor(){this._redirectPersistence=Fi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_t,this._overrideRedirectResult=to}_initialize(f){var g=this;return(0,c.Z)(function*(){const w=f._key();let S=g.eventManagers.get(w);return S||(S=new mf(f),g.eventManagers.set(w,S),g.attachCallbackListeners(f,S)),S})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,S){var O=this;return(0,c.Z)(function*(){!function Ry(y){var f,g,w,S,O,G,ue,Fe,Ke,gt;const pt=Fo();U("function"==typeof(null===(f=pt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(g=pt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(O=null===(S=null===(w=pt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Fe=null===(ue=null===(G=pt?.cordova)||void 0===G?void 0:G.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(gt=null===(Ke=pt?.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const G=yield O._initialize(f);yield G.initialized(),G.resetRedirect(),function Hc(){Nr.clear()}(),yield O._originValidation(f);const ue=function lw(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Pa(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(f,w,S);yield function dw(y,f){return yf()._set(Na(y),f)}(f,ue);const Fe=yield function Ss(y,f,g){return ao.apply(this,arguments)}(f,ue,g),Ke=yield function gf(y){const{cordova:f}=Fo();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let S=null;w?f.plugins.browsertab.openUrl(y):S=f.InAppBrowser.open(y,function ir(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Fe);return function _g(y,f,g){return Yc.apply(this,arguments)}(f,G,Ke)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function pf(y){return Kc.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:S,BuildInfo:O}=Fo(),G=setTimeout((0,c.Z)(function*(){yield hd(f),g.onEvent(Vy())}),500),ue=function(){var gt=(0,c.Z)(function*(pt){clearTimeout(G);const gr=yield hd(f);let bi=null;gr&&pt?.url&&(bi=function fd(y,f){var g,w;const S=function cr(y){const f=pd(y),g=f.link?decodeURIComponent(f.link):void 0,w=pd(g).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return pd(S).link||S||w||g||y}(f);if(S.includes("/__/auth/callback")){const O=pd(S),G=O.firebaseError?function Fy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ue=null===(w=null===(g=G?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Fe=ue?_e(ue):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(gr,pt.url)),g.onEvent(bi||Vy())});return function(gr){return gt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ue);const Fe=S,Ke=`${O.packageName.toLowerCase()}://`;Fo().handleOpenURL=function(){var gt=(0,c.Z)(function*(pt){if(pt.toLowerCase().startsWith(Ke)&&ue({url:pt}),"function"==typeof Fe)try{Fe(pt)}catch(gr){console.error(gr)}});return function(pt){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Fi,this._completeRedirectFn=_t,this._overrideRedirectResult=to}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,S){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,g,w,S)})()}_openRedirect(f,g,w,S){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,g,w,S)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return el()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return La(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function _f(){return yd.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function vf(y){return y.unwrap()}function wd(y){return wf(y)}function wf(y){const{_tokenResponse:f}=y instanceof N.ZR?y.customData:y;if(!f)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Da.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=uu;break;case"facebook.com":w=aa;break;case"github.com":w=Ec;break;case"twitter.com":w=Gr;break;default:const{oauthIdToken:S,oauthAccessToken:O,oauthTokenSecret:G,pendingToken:ue,nonce:Fe}=f;return O||G||S||ue?ue?g.startsWith("saml.")?ua._create(g,ue):Gi._fromParams({providerId:g,signInMethod:g,pendingToken:ue,idToken:S,accessToken:O}):new js(g).credential({idToken:S,accessToken:O,rawNonce:Fe}):null}return y instanceof N.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function er(y,f){return f.catch(g=>{throw g instanceof N.ZR&&function jy(y,f){var g,w;const S=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=f)||void 0===w?void 0:w.code))f.resolver=new $y(y,function On(y,f){var g;const w=(0,N.m9)(y),S=f;return U(f.customData.operationType,w,"argument-error"),U(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Tu._fromError(w,S)}(y,f));else if(S){const O=wf(f),G=f;O&&(G.credential=O,G.tenantId=S.tenantId||void 0,G.email=S.email||void 0,G.phoneNumber=S.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:wd(g),additionalUserInfo:bu(g),user:Uo.getOrCreate(S)}})}function Cf(y,f){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,c.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>er(y,g.confirm(w))}})).apply(this,arguments)}class $y{constructor(f,g){this.resolver=g,this.auth=function nl(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return er(vf(this.auth),this.resolver.resolveSignIn(f))}}class Uo{constructor(f){this._delegate=f,this.multiFactor=function wo(y){const f=(0,N.m9)(y);return vo.has(f)||vo.set(f,Jh._fromUser(f)),vo.get(f)}(f)}static getOrCreate(f){return Uo.USER_MAP.has(f)||Uo.USER_MAP.set(f,new Uo(f)),Uo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return er(g.auth,pu(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,c.Z)(function*(){return Cf(w.auth,function un(y,f,g){return Wr.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return er(g.auth,function ef(y,f,g){return xo.apply(this,arguments)}(g._delegate,f,Ir))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Gu(Cn(g.auth)),function K(y,f,g){return function ie(y,f,g){return De.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ir)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return er(g.auth,gu(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Cf(this.auth,function Ji(y,f,g){return Pn.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return er(this.auth,function cg(y,f,g){return ld.apply(this,arguments)}(this._delegate,f,Ir))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Gu(Cn(g.auth)),function D(y,f,g){return function x(y,f,g){return F.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ir)})()}sendEmailVerification(f){return function xc(y,f){return ga.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function Or(y,f){return lu.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function ed(y,f){return qs((0,N.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function zs(y,f){return qs((0,N.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ft(y,f){return Lu.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Pc(y,f){return Nc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Mc(y,f,g){return Cu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Uo.USER_MAP=new WeakMap;const Va=U;let Ef=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Va(S,"invalid-api-key",{appName:g.name}),Va(S,"invalid-api-key",{appName:g.name});const O=typeof window<"u"?Ir:void 0;this._delegate=w.initialize({options:{persistence:If(S,g.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Uo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function su(y,f,g){const w=Cn(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const S=!!g?.disableWarnings,O=Pi(f),{host:G,port:ue}=function $n(y){const f=Pi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const O=S[1];return{host:O,port:ps(w.substr(O.length+1))}}{const[O,G]=w.split(":");return{host:O,port:ps(G)}}}(f);w.config.emulator={url:`${O}//${G}${null===ue?"":`:${ue}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:G,port:ue,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function gs(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function li(y,f){return la.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return da(this._delegate,g)}confirmPasswordReset(g,w){return function vu(y,f,g){return mo.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var S=this;return(0,c.Z)(function*(){return er(S._delegate,function ha(y,f,g){return Mn.apply(this,arguments)}(S._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function wu(y,f){return pa.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Ki(y,f){return"EMAIL_SIGNIN"===au.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){Va(Hu(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function je(y,f){return dt.apply(this,arguments)}(g._delegate,Ir);return w?er(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function fw(y,f){Cn(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,S){const{next:O,error:G,complete:ue}=Cg(g,w,S);return this._delegate.onAuthStateChanged(O,G,ue)}onIdTokenChanged(g,w,S){const{next:O,error:G,complete:ue}=Cg(g,w,S);return this._delegate.onIdTokenChanged(O,G,ue)}sendSignInLinkToEmail(g,w){return function Sc(y,f,g){return Gs.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function _u(y,f,g){return xn.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,c.Z)(function*(){let S;switch(function gw(y,f){As(Object.values(Er).includes(f),y,"invalid-persistence-type"),(0,N.b$)()?As(f!==Er.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?As(f===Er.NONE,y,"unsupported-persistence-type"):Xc()?As(f===Er.NONE||f===Er.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):As(f===Er.NONE||md(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Er.SESSION:S=Fi;break;case Er.LOCAL:S=(yield ne(Eo)._isAvailable())?Eo:ya;break;case Er.NONE:S=L;break;default:return Te("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return er(this._delegate,function Wh(y){return An.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return er(this._delegate,bn(this._delegate,g))}signInWithCustomToken(g){return er(this._delegate,function bc(y,f){return ca.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return er(this._delegate,function Ri(y,f,g){return bn((0,N.m9)(y),Ni.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return er(this._delegate,function sg(y,f,g){return fa.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Cf(this._delegate,function tt(y,f,g){return Zr.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,c.Z)(function*(){return Va(Hu(),w._delegate,"operation-not-supported-in-this-environment"),er(w._delegate,function Li(y,f,g){return Uu.apply(this,arguments)}(w._delegate,g,Ir))})()}signInWithRedirect(g){var w=this;return(0,c.Z)(function*(){return Va(Hu(),w._delegate,"operation-not-supported-in-this-environment"),yield Gu(w._delegate),function Fn(y,f,g){return function lg(y,f,g){return b.apply(this,arguments)}(y,f,g)}(w._delegate,g,Ir)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Tc(y,f){return Xl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Er,y})();function Cg(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const S=w;return{next:G=>S(G&&Uo.getOrCreate(G)),error:f,complete:g}}function If(y,f){const g=function vd(y,f){const g=Vo();if(!g)return[];const w=Z(Fa,y,f);switch(g.getItem(w)){case Er.NONE:return[L];case Er.LOCAL:return[Eo,Fi];case Er.SESSION:return[Fi];default:return[]}}(y,f);if(typeof self<"u"&&!g.includes(Eo)&&g.push(Eo),typeof window<"u")for(const w of[ya,Fi])g.includes(w)||g.push(w);return g.includes(L)||g.push(L),g}class Ed{constructor(){this.providerId="phone",this._delegate=new Da(vf(J.Z.auth()))}static credential(f,g){return Da.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ed.PHONE_SIGN_IN_METHOD=Da.PHONE_SIGN_IN_METHOD,Ed.PROVIDER_ID=Da.PROVIDER_ID;const Hy=U;class bf{constructor(f,g,w=J.Z.app()){var S;Hy(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new ar(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function mw(y){y.INTERNAL.registerComponent(new ae.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Ef(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ni,FacebookAuthProvider:aa,GithubAuthProvider:Ec,GoogleAuthProvider:uu,OAuthProvider:js,SAMLAuthProvider:ui,PhoneAuthProvider:Ed,PhoneMultiFactorGenerator:Bu,RecaptchaVerifier:bf,TwitterAuthProvider:Gr,Auth:Ef,AuthCredential:fr,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(J.Z)},9751:(ot,Ee,R)=>{R.d(Ee,{y:()=>de});var c=R(930),J=R(727),N=R(8822),se=R(9635),re=R(2416),le=R(576),ae=R(2806);let de=(()=>{class W{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const we=new W;return we.source=this,we.operator=Ae,we}subscribe(Ae,we,et){const ge=function j(W){return W&&W instanceof c.Lv||function B(W){return W&&(0,le.m)(W.next)&&(0,le.m)(W.error)&&(0,le.m)(W.complete)}(W)&&(0,J.Nn)(W)}(Ae)?Ae:new c.Hp(Ae,we,et);return(0,ae.x)(()=>{const{operator:fe,source:Ye}=this;ge.add(fe?fe.call(ge,Ye):Ye?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(we){Ae.error(we)}}forEach(Ae,we){return new(we=he(we))((et,ge)=>{const fe=new c.Hp({next:Ye=>{try{Ae(Ye)}catch(nt){ge(nt),fe.unsubscribe()}},error:ge,complete:et});this.subscribe(fe)})}_subscribe(Ae){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Ae)}[N.L](){return this}pipe(...Ae){return(0,se.U)(Ae)(this)}toPromise(Ae){return new(Ae=he(Ae))((we,et)=>{let ge;this.subscribe(fe=>ge=fe,fe=>et(fe),()=>we(ge))})}}return W.create=Le=>new W(Le),W})();function he(W){var Le;return null!==(Le=W??re.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ot,Ee,R)=>{R.d(Ee,{x:()=>ae});var c=R(9751),J=R(727);const se=(0,R(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=R(8737),le=R(2806);let ae=(()=>{class he extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const W=new de(this,this);return W.operator=j,W}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(j)}})}error(j){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:W}=this;for(;W.length;)W.shift().error(j)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:W,isStopped:Le,observers:Ae}=this;return W||Le?J.Lc:(this.currentObservers=null,Ae.push(j),new J.w0(()=>{this.currentObservers=null,(0,re.P)(Ae,j)}))}_checkFinalizedStatuses(j){const{hasError:W,thrownError:Le,isStopped:Ae}=this;W?j.error(Le):Ae&&j.complete()}asObservable(){const j=new c.y;return j.source=this,j}}return he.create=(B,j)=>new de(B,j),he})();class de extends ae{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===W||W.call(j,B)}error(B){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===W||W.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,W;return null!==(W=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==W?W:J.Lc}}},930:(ot,Ee,R)=>{R.d(Ee,{Hp:()=>et,Lv:()=>W});var c=R(576),J=R(727),N=R(2416),se=R(7849),re=R(5032);const le=he("C",void 0,void 0);function he(Te,_e,Ce){return{kind:Te,value:_e,error:Ce}}var B=R(3410),j=R(2806);class W extends J.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,J.Nn)(_e)&&_e.add(this)):this.destination=nt}static create(_e,Ce,Ue){return new et(_e,Ce,Ue)}next(_e){this.isStopped?Ye(function de(Te){return he("N",Te,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ye(function ae(Te){return he("E",void 0,Te)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ye(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Ae(Te,_e){return Le.call(Te,_e)}class we{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(_e)}catch(Ue){ge(Ue)}}error(_e){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(_e)}catch(Ue){ge(Ue)}else ge(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ce){ge(Ce)}}}class et extends W{constructor(_e,Ce,Ue){let Be;if(super(),(0,c.m)(_e)||!_e)Be={next:_e??void 0,error:Ce??void 0,complete:Ue??void 0};else{let U;this&&N.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),Be={next:_e.next&&Ae(_e.next,U),error:_e.error&&Ae(_e.error,U),complete:_e.complete&&Ae(_e.complete,U)}):Be=_e}this.destination=new we(Be)}}function ge(Te){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Te):(0,se.h)(Te)}function Ye(Te,_e){const{onStoppedNotification:Ce}=N.v;Ce&&B.z.setTimeout(()=>Ce(Te,_e))}const nt={closed:!0,next:re.Z,error:function fe(Te){throw Te},complete:re.Z}},727:(ot,Ee,R)=>{R.d(Ee,{Lc:()=>le,w0:()=>re,Nn:()=>ae});var c=R(576);const N=(0,R(3888).d)(he=>function(j){he(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((W,Le)=>`${Le+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=R(8737);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ae of j)Ae.remove(this);else j.remove(this);const{initialTeardown:W}=this;if((0,c.m)(W))try{W()}catch(Ae){B=Ae instanceof N?Ae.errors:[Ae]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Ae of Le)try{de(Ae)}catch(we){B=B??[],we instanceof N?B=[...B,...we.errors]:B.push(we)}}if(B)throw new N(B)}}add(B){var j;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,se.P)(j,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const le=re.EMPTY;function ae(he){return he instanceof re||he&&"closed"in he&&(0,c.m)(he.remove)&&(0,c.m)(he.add)&&(0,c.m)(he.unsubscribe)}function de(he){(0,c.m)(he)?he():he.unsubscribe()}},2416:(ot,Ee,R)=>{R.d(Ee,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Ee,R)=>{R.d(Ee,{E:()=>J});const J=new(R(9751).y)(re=>re.complete())},8996:(ot,Ee,R)=>{R.d(Ee,{D:()=>_e});var c=R(8421),J=R(5363),N=R(9468),le=R(9751),de=R(2202),he=R(576),B=R(9672);function W(Ce,Ue){if(!Ce)throw new Error("Iterable cannot be null");return new le.y(Be=>{(0,B.f)(Be,Ue,()=>{const U=Ce[Symbol.asyncIterator]();(0,B.f)(Be,Ue,()=>{U.next().then(pe=>{pe.done?Be.complete():Be.next(pe.value)})},0,!0)})})}var Le=R(3670),Ae=R(8239),we=R(1144),et=R(6495),ge=R(2206),fe=R(4532),Ye=R(3260);function _e(Ce,Ue){return Ue?function Te(Ce,Ue){if(null!=Ce){if((0,Le.c)(Ce))return function se(Ce,Ue){return(0,c.Xf)(Ce).pipe((0,N.R)(Ue),(0,J.Q)(Ue))}(Ce,Ue);if((0,we.z)(Ce))return function ae(Ce,Ue){return new le.y(Be=>{let U=0;return Ue.schedule(function(){U===Ce.length?Be.complete():(Be.next(Ce[U++]),Be.closed||this.schedule())})})}(Ce,Ue);if((0,Ae.t)(Ce))return function re(Ce,Ue){return(0,c.Xf)(Ce).pipe((0,N.R)(Ue),(0,J.Q)(Ue))}(Ce,Ue);if((0,ge.D)(Ce))return W(Ce,Ue);if((0,et.T)(Ce))return function j(Ce,Ue){return new le.y(Be=>{let U;return(0,B.f)(Be,Ue,()=>{U=Ce[de.h](),(0,B.f)(Be,Ue,()=>{let pe,q;try{({value:pe,done:q}=U.next())}catch(Q){return void Be.error(Q)}q?Be.complete():Be.next(pe)},0,!0)}),()=>(0,he.m)(U?.return)&&U.return()})}(Ce,Ue);if((0,Ye.L)(Ce))return function nt(Ce,Ue){return W((0,Ye.Q)(Ce),Ue)}(Ce,Ue)}throw(0,fe.z)(Ce)}(Ce,Ue):(0,c.Xf)(Ce)}},8421:(ot,Ee,R)=>{R.d(Ee,{Xf:()=>Le});var c=R(655),J=R(1144),N=R(8239),se=R(9751),re=R(3670),le=R(2206),ae=R(4532),de=R(6495),he=R(3260),B=R(576),j=R(7849),W=R(8822);function Le(Te){if(Te instanceof se.y)return Te;if(null!=Te){if((0,re.c)(Te))return function Ae(Te){return new se.y(_e=>{const Ce=Te[W.L]();if((0,B.m)(Ce.subscribe))return Ce.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,J.z)(Te))return function we(Te){return new se.y(_e=>{for(let Ce=0;Ce<Te.length&&!_e.closed;Ce++)_e.next(Te[Ce]);_e.complete()})}(Te);if((0,N.t)(Te))return function et(Te){return new se.y(_e=>{Te.then(Ce=>{_e.closed||(_e.next(Ce),_e.complete())},Ce=>_e.error(Ce)).then(null,j.h)})}(Te);if((0,le.D)(Te))return fe(Te);if((0,de.T)(Te))return function ge(Te){return new se.y(_e=>{for(const Ce of Te)if(_e.next(Ce),_e.closed)return;_e.complete()})}(Te);if((0,he.L)(Te))return function Ye(Te){return fe((0,he.Q)(Te))}(Te)}throw(0,ae.z)(Te)}function fe(Te){return new se.y(_e=>{(function nt(Te,_e){var Ce,Ue,Be,U;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,c.KL)(Te);!(Ue=yield Ce.next()).done;)if(_e.next(Ue.value),_e.closed)return}catch(pe){Be={error:pe}}finally{try{Ue&&!Ue.done&&(U=Ce.return)&&(yield U.call(Ce))}finally{if(Be)throw Be.error}}_e.complete()})})(Te,_e).catch(Ce=>_e.error(Ce))})}},6451:(ot,Ee,R)=>{R.d(Ee,{T:()=>le});var c=R(8189),J=R(8421),N=R(515),se=R(7669),re=R(8996);function le(...ae){const de=(0,se.yG)(ae),he=(0,se._6)(ae,1/0),B=ae;return B.length?1===B.length?(0,J.Xf)(B[0]):(0,c.J)(he)((0,re.D)(B,de)):N.E}},5403:(ot,Ee,R)=>{R.d(Ee,{x:()=>J});var c=R(930);function J(se,re,le,ae,de){return new N(se,re,le,ae,de)}class N extends c.Lv{constructor(re,le,ae,de,he,B){super(re),this.onFinalize=he,this.shouldUnsubscribe=B,this._next=le?function(j){try{le(j)}catch(W){re.error(W)}}:super._next,this._error=de?function(j){try{de(j)}catch(W){re.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ot,Ee,R)=>{R.d(Ee,{U:()=>N});var c=R(4482),J=R(5403);function N(se,re){return(0,c.e)((le,ae)=>{let de=0;le.subscribe((0,J.x)(ae,he=>{ae.next(se.call(re,he,de++))}))})}},8189:(ot,Ee,R)=>{R.d(Ee,{J:()=>N});var c=R(5577),J=R(4671);function N(se=1/0){return(0,c.z)(J.y,se)}},5577:(ot,Ee,R)=>{R.d(Ee,{z:()=>de});var c=R(4004),J=R(8421),N=R(4482),se=R(9672),re=R(5403),ae=R(576);function de(he,B,j=1/0){return(0,ae.m)(B)?de((W,Le)=>(0,c.U)((Ae,we)=>B(W,Ae,Le,we))((0,J.Xf)(he(W,Le))),j):("number"==typeof B&&(j=B),(0,N.e)((W,Le)=>function le(he,B,j,W,Le,Ae,we,et){const ge=[];let fe=0,Ye=0,nt=!1;const Te=()=>{nt&&!ge.length&&!fe&&B.complete()},_e=Ue=>fe<W?Ce(Ue):ge.push(Ue),Ce=Ue=>{Ae&&B.next(Ue),fe++;let Be=!1;(0,J.Xf)(j(Ue,Ye++)).subscribe((0,re.x)(B,U=>{Le?.(U),Ae?_e(U):B.next(U)},()=>{Be=!0},void 0,()=>{if(Be)try{for(fe--;ge.length&&fe<W;){const U=ge.shift();we?(0,se.f)(B,we,()=>Ce(U)):Ce(U)}Te()}catch(U){B.error(U)}}))};return he.subscribe((0,re.x)(B,_e,()=>{nt=!0,Te()})),()=>{et?.()}}(W,Le,he,j)))}},5363:(ot,Ee,R)=>{R.d(Ee,{Q:()=>se});var c=R(9672),J=R(4482),N=R(5403);function se(re,le=0){return(0,J.e)((ae,de)=>{ae.subscribe((0,N.x)(de,he=>(0,c.f)(de,re,()=>de.next(he),le),()=>(0,c.f)(de,re,()=>de.complete(),le),he=>(0,c.f)(de,re,()=>de.error(he),le)))})}},3099:(ot,Ee,R)=>{R.d(Ee,{B:()=>re});var c=R(8421),J=R(7579),N=R(930),se=R(4482);function re(ae={}){const{connector:de=(()=>new J.x),resetOnError:he=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=ae;return W=>{let Le,Ae,we,et=0,ge=!1,fe=!1;const Ye=()=>{Ae?.unsubscribe(),Ae=void 0},nt=()=>{Ye(),Le=we=void 0,ge=fe=!1},Te=()=>{const _e=Le;nt(),_e?.unsubscribe()};return(0,se.e)((_e,Ce)=>{et++,!fe&&!ge&&Ye();const Ue=we=we??de();Ce.add(()=>{et--,0===et&&!fe&&!ge&&(Ae=le(Te,j))}),Ue.subscribe(Ce),!Le&&et>0&&(Le=new N.Hp({next:Be=>Ue.next(Be),error:Be=>{fe=!0,Ye(),Ae=le(nt,he,Be),Ue.error(Be)},complete:()=>{ge=!0,Ye(),Ae=le(nt,B),Ue.complete()}}),(0,c.Xf)(_e).subscribe(Le))})(W)}}function le(ae,de,...he){if(!0===de)return void ae();if(!1===de)return;const B=new N.Hp({next:()=>{B.unsubscribe(),ae()}});return de(...he).subscribe(B)}},9468:(ot,Ee,R)=>{R.d(Ee,{R:()=>J});var c=R(4482);function J(N,se=0){return(0,c.e)((re,le)=>{le.add(N.schedule(()=>re.subscribe(le),se))})}},8505:(ot,Ee,R)=>{R.d(Ee,{b:()=>re});var c=R(576),J=R(4482),N=R(5403),se=R(4671);function re(le,ae,de){const he=(0,c.m)(le)||ae||de?{next:le,error:ae,complete:de}:le;return he?(0,J.e)((B,j)=>{var W;null===(W=he.subscribe)||void 0===W||W.call(he);let Le=!0;B.subscribe((0,N.x)(j,Ae=>{var we;null===(we=he.next)||void 0===we||we.call(he,Ae),j.next(Ae)},()=>{var Ae;Le=!1,null===(Ae=he.complete)||void 0===Ae||Ae.call(he),j.complete()},Ae=>{var we;Le=!1,null===(we=he.error)||void 0===we||we.call(he,Ae),j.error(Ae)},()=>{var Ae,we;Le&&(null===(Ae=he.unsubscribe)||void 0===Ae||Ae.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):se.y}},4408:(ot,Ee,R)=>{R.d(Ee,{o:()=>re});var c=R(727);class J extends c.w0{constructor(ae,de){super()}schedule(ae,de=0){return this}}const N={setInterval(le,ae,...de){const{delegate:he}=N;return he?.setInterval?he.setInterval(le,ae,...de):setInterval(le,ae,...de)},clearInterval(le){const{delegate:ae}=N;return(ae?.clearInterval||clearInterval)(le)},delegate:void 0};var se=R(8737);class re extends J{constructor(ae,de){super(ae,de),this.scheduler=ae,this.work=de,this.pending=!1}schedule(ae,de=0){var he;if(this.closed)return this;this.state=ae;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,de)),this.pending=!0,this.delay=de,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(j,this.id,de),this}requestAsyncId(ae,de,he=0){return N.setInterval(ae.flush.bind(ae,this),he)}recycleAsyncId(ae,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;null!=de&&N.clearInterval(de)}execute(ae,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ae,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,de){let B,he=!1;try{this.work(ae)}catch(j){he=!0,B=j||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ae,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=ae&&(this.id=this.recycleAsyncId(de,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Ee,R)=>{R.d(Ee,{v:()=>N});var c=R(6063);class J{constructor(re,le=J.now){this.schedulerActionCtor=re,this.now=le}schedule(re,le=0,ae){return new this.schedulerActionCtor(this,re).schedule(ae,le)}}J.now=c.l.now;class N extends J{constructor(re,le=J.now){super(re,le),this.actions=[],this._active=!1}flush(re){const{actions:le}=this;if(this._active)return void le.push(re);let ae;this._active=!0;do{if(ae=re.execute(re.state,re.delay))break}while(re=le.shift());if(this._active=!1,ae){for(;re=le.shift();)re.unsubscribe();throw ae}}}},4986:(ot,Ee,R)=>{R.d(Ee,{z:()=>N});var c=R(4408);const N=new(R(7565).v)(c.o)},6063:(ot,Ee,R)=>{R.d(Ee,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ot,Ee,R)=>{R.d(Ee,{z:()=>c});const c={setTimeout(J,N,...se){const{delegate:re}=c;return re?.setTimeout?re.setTimeout(J,N,...se):setTimeout(J,N,...se)},clearTimeout(J){const{delegate:N}=c;return(N?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(ot,Ee,R)=>{R.d(Ee,{h:()=>J});const J=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Ee,R)=>{R.d(Ee,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Ee,R)=>{R.d(Ee,{_6:()=>le,jO:()=>se,yG:()=>re});var c=R(576);function N(ae){return ae[ae.length-1]}function se(ae){return(0,c.m)(N(ae))?ae.pop():void 0}function re(ae){return function J(ae){return ae&&(0,c.m)(ae.schedule)}(N(ae))?ae.pop():void 0}function le(ae,de){return"number"==typeof N(ae)?ae.pop():de}},8737:(ot,Ee,R)=>{function c(J,N){if(J){const se=J.indexOf(N);0<=se&&J.splice(se,1)}}R.d(Ee,{P:()=>c})},3888:(ot,Ee,R)=>{function c(J){const se=J(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}R.d(Ee,{d:()=>c})},2806:(ot,Ee,R)=>{R.d(Ee,{O:()=>se,x:()=>N});var c=R(2416);let J=null;function N(re){if(c.v.useDeprecatedSynchronousErrorHandling){const le=!J;if(le&&(J={errorThrown:!1,error:null}),re(),le){const{errorThrown:ae,error:de}=J;if(J=null,ae)throw de}}else re()}function se(re){c.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},9672:(ot,Ee,R)=>{function c(J,N,se,re=0,le=!1){const ae=N.schedule(function(){se(),le?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(ae),!le)return ae}R.d(Ee,{f:()=>c})},4671:(ot,Ee,R)=>{function c(J){return J}R.d(Ee,{y:()=>c})},1144:(ot,Ee,R)=>{R.d(Ee,{z:()=>c});const c=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(ot,Ee,R)=>{R.d(Ee,{D:()=>J});var c=R(576);function J(N){return Symbol.asyncIterator&&(0,c.m)(N?.[Symbol.asyncIterator])}},576:(ot,Ee,R)=>{function c(J){return"function"==typeof J}R.d(Ee,{m:()=>c})},3670:(ot,Ee,R)=>{R.d(Ee,{c:()=>N});var c=R(8822),J=R(576);function N(se){return(0,J.m)(se[c.L])}},6495:(ot,Ee,R)=>{R.d(Ee,{T:()=>N});var c=R(2202),J=R(576);function N(se){return(0,J.m)(se?.[c.h])}},8239:(ot,Ee,R)=>{R.d(Ee,{t:()=>J});var c=R(576);function J(N){return(0,c.m)(N?.then)}},3260:(ot,Ee,R)=>{R.d(Ee,{L:()=>se,Q:()=>N});var c=R(655),J=R(576);function N(re){return(0,c.FC)(this,arguments,function*(){const ae=re.getReader();try{for(;;){const{value:de,done:he}=yield(0,c.qq)(ae.read());if(he)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(de)}}finally{ae.releaseLock()}})}function se(re){return(0,J.m)(re?.getReader)}},4482:(ot,Ee,R)=>{R.d(Ee,{A:()=>J,e:()=>N});var c=R(576);function J(se){return(0,c.m)(se?.lift)}function N(se){return re=>{if(J(re))return re.lift(function(le){try{return se(le,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ot,Ee,R)=>{function c(){}R.d(Ee,{Z:()=>c})},9635:(ot,Ee,R)=>{R.d(Ee,{U:()=>N,z:()=>J});var c=R(4671);function J(...se){return N(se)}function N(se){return 0===se.length?c.y:1===se.length?se[0]:function(le){return se.reduce((ae,de)=>de(ae),le)}}},7849:(ot,Ee,R)=>{R.d(Ee,{h:()=>N});var c=R(2416),J=R(3410);function N(se){J.z.setTimeout(()=>{const{onUnhandledError:re}=c.v;if(!re)throw se;re(se)})}},4532:(ot,Ee,R)=>{function c(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Ee,{z:()=>c})},655:(ot,Ee,R)=>{function se(q,Q){var ne={};for(var te in q)Object.prototype.hasOwnProperty.call(q,te)&&Q.indexOf(te)<0&&(ne[te]=q[te]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(te=Object.getOwnPropertySymbols(q);ke<te.length;ke++)Q.indexOf(te[ke])<0&&Object.prototype.propertyIsEnumerable.call(q,te[ke])&&(ne[te[ke]]=q[te[ke]])}return ne}function de(q,Q,ne,te){return new(ne||(ne=Promise))(function(Ne,lt){function Wt(sn){try{Ze(te.next(sn))}catch(pn){lt(pn)}}function Vt(sn){try{Ze(te.throw(sn))}catch(pn){lt(pn)}}function Ze(sn){sn.done?Ne(sn.value):function ke(Ne){return Ne instanceof ne?Ne:new ne(function(lt){lt(Ne)})}(sn.value).then(Wt,Vt)}Ze((te=te.apply(q,Q||[])).next())})}function ge(q){return this instanceof ge?(this.v=q,this):new ge(q)}function fe(q,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,te=ne.apply(q,Q||[]),Ne=[];return ke={},lt("next"),lt("throw"),lt("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function lt(qt){te[qt]&&(ke[qt]=function(Kt){return new Promise(function(Sr,At){Ne.push([qt,Kt,Sr,At])>1||Wt(qt,Kt)})})}function Wt(qt,Kt){try{!function Vt(qt){qt.value instanceof ge?Promise.resolve(qt.value.v).then(Ze,sn):pn(Ne[0][2],qt)}(te[qt](Kt))}catch(Sr){pn(Ne[0][3],Sr)}}function Ze(qt){Wt("next",qt)}function sn(qt){Wt("throw",qt)}function pn(qt,Kt){qt(Kt),Ne.shift(),Ne.length&&Wt(Ne[0][0],Ne[0][1])}}function nt(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=q[Symbol.asyncIterator];return Q?Q.call(q):(q=function W(q){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&q[Q],te=0;if(ne)return ne.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&te>=q.length&&(q=void 0),{value:q&&q[te++],done:!q}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(Ne){ne[Ne]=q[Ne]&&function(lt){return new Promise(function(Wt,Vt){!function ke(Ne,lt,Wt,Vt){Promise.resolve(Vt).then(function(Ze){Ne({value:Ze,done:Wt})},lt)}(Wt,Vt,(lt=q[Ne](lt)).done,lt.value)})}}}R.d(Ee,{FC:()=>fe,KL:()=>nt,_T:()=>se,mG:()=>de,qq:()=>ge})},4650:(ot,Ee,R)=>{R.d(Ee,{$8M:()=>Ru,$Z:()=>g_,AFp:()=>f0,ALo:()=>GE,AaK:()=>de,Akn:()=>os,AsE:()=>hm,BQk:()=>vl,CHM:()=>yu,CRH:()=>WE,CZH:()=>uc,CqO:()=>J_,D6c:()=>Lp,EJc:()=>xp,EpF:()=>Y_,F4k:()=>VC,FYo:()=>S,FiY:()=>je,G48:()=>DT,Gf:()=>wh,GfV:()=>Fe,Gpc:()=>j,JOm:()=>jo,KtG:()=>_u,LFG:()=>Fn,LSH:()=>vg,Lbi:()=>ni,Lck:()=>nr,MAs:()=>W_,MMx:()=>Om,NdJ:()=>X_,O4$:()=>kc,OlP:()=>hn,Oqu:()=>dm,PXZ:()=>dI,Q6J:()=>im,QGY:()=>Q_,QP$:()=>Zt,Qsj:()=>O,R0b:()=>ks,RDi:()=>pg,Rgc:()=>Oe,SBq:()=>f,Sil:()=>ri,Suo:()=>Yt,TTD:()=>zi,TgZ:()=>sm,Tol:()=>zC,Udp:()=>Cl,W1O:()=>KE,X6Q:()=>Np,XFs:()=>We,Xpm:()=>Ie,Xts:()=>ka,Y36:()=>dl,YKP:()=>ME,YNc:()=>rm,Yjl:()=>ve,Yz7:()=>Kt,Z0I:()=>Hi,ZZ4:()=>Ll,_Bn:()=>mh,_UZ:()=>am,_Vd:()=>rl,_c5:()=>M0,_uU:()=>El,aQg:()=>yr,c2e:()=>sI,cJS:()=>At,cg1:()=>wv,dDg:()=>Si,dqk:()=>tn,eFA:()=>Nl,ekj:()=>iv,eoX:()=>Mp,evT:()=>xw,f3M:()=>b,g9A:()=>p0,h0i:()=>Wo,hGG:()=>AI,hij:()=>ih,iGM:()=>Et,ifc:()=>it,ip1:()=>Ap,jDz:()=>Bv,kL8:()=>Cv,lG2:()=>Z,lcZ:()=>zE,lnq:()=>uv,lqb:()=>Ir,lri:()=>Hm,n5z:()=>Qi,oAB:()=>kt,oJD:()=>pd,oxw:()=>$C,q4F:()=>Ke,qLn:()=>xf,qOj:()=>B_,qZA:()=>om,rWj:()=>Pl,sBO:()=>gI,sIi:()=>Kf,s_b:()=>wt,soG:()=>Bm,tb:()=>g0,tp0:()=>_t,uIk:()=>z_,vHH:()=>we,vpe:()=>ti,wAp:()=>vt,xi3:()=>Qv,xp6:()=>kg,ynx:()=>K_,z2F:()=>Km,zSh:()=>Gu,zs3:()=>ll});var c=R(7579),J=R(727),N=R(9751),se=R(6451),re=R(3099);function le(i){for(let o in i)if(i[o]===le)return o;throw Error("Could not find renamed property on target object.")}function ae(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=le({__forward_ref__:le});function j(i){return i.__forward_ref__=j,i.toString=function(){return de(this())},i}function W(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class we extends Error{constructor(o,a){super(function et(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,o){throw new we(-201,!1)}function Vt(i,o){null==i&&function Ze(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function At(i){return{providers:i.providers||[],imports:i.imports||[]}}function on(i){return _i(i,vi)||_i(i,oi)}function Hi(i){return null!==on(i)}function _i(i,o){return i.hasOwnProperty(o)?i[o]:null}function Ls(i){return i&&(i.hasOwnProperty(si)||i.hasOwnProperty(na))?i[si]:null}const vi=le({\u0275prov:le}),si=le({\u0275inj:le}),oi=le({ngInjectableDef:le}),na=le({ngInjectorDef:le});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let _r;function Kn(i){const o=_r;return _r=i,o}function ai(i,o,a){const l=on(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&We.Optional?null:void 0!==o?o:void _e(de(i))}function kn(i){return{toString:i}.toString()}var Bn=(()=>((Bn=Bn||{})[Bn.OnPush=0]="OnPush",Bn[Bn.Default=1]="Default",Bn))(),it=(()=>{return(i=it||(it={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",it;var i})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},Dt=[],hs=le({\u0275cmp:le}),Qt=le({\u0275dir:le}),Oi=le({\u0275pipe:le}),Jt=le({\u0275mod:le}),Yn=le({\u0275fac:le}),xr=le({__NG_ELEMENT_ID__:le});let Je=0;function Ie(i){return kn(()=>{const a=!0===i.standalone,l={},h={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Bn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||it.Emulated,id:"c"+Je++,styles:i.styles||Dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,_=i.features;return h.inputs=L(i.inputs,l),h.outputs=L(i.outputs),_&&_.forEach(C=>C(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ct).filter(yt):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(at).filter(yt):null,h})}function Ct(i){return Y(i)||He(i)}function yt(i){return null!==i}function kt(i){return kn(()=>({type:i.type,bootstrap:i.bootstrap||Dt,declarations:i.declarations||Dt,imports:i.imports||Dt,exports:i.exports||Dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,o){if(null==i)return jr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=l,o&&(o[h]=p)}return a}const Z=Ie;function ve(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Y(i){return i[hs]||null}function He(i){return i[Qt]||null}function at(i){return i[Oi]||null}function Zt(i){const o=Y(i)||He(i)||at(i);return null!==o&&o.standalone}function ln(i,o){const a=i[Jt]||null;if(!a&&!0===o)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function sr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Mr(i){return Array.isArray(i)&&!0===i[1]}function ou(i){return 0!=(8&i.flags)}function sa(i){return 2==(2&i.flags)}function vc(i){return 1==(1&i.flags)}function vr(i){return null!==i.template}function Hh(i){return 0!=(256&i[2])}function Ni(i,o){return i.hasOwnProperty(Yn)?i[Yn]:null}class ki{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function zi(){return js}function js(i){return i.type.prototype.ngOnChanges&&(i.setInput=uu),aa}function aa(){const i=qh(this),o=i?.current;if(o){const a=i.previous;if(a===jr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function uu(i,o,a,l){const h=qh(i)||function ua(i,o){return i[Ec]=o}(i,{previous:jr,current:null}),p=h.current||(h.current={}),_=h.previous,C=this.declaredInputs[a],I=_[C];p[C]=new ki(I&&I.currentValue,o,_===jr),i[l]=o}zi.ngInherit=!0;const Ec="__ngSimpleChanges__";function qh(i){return i[Ec]||null}function An(i){for(;Array.isArray(i);)i=i[0];return i}function ci(i,o){return An(o[i])}function Or(i,o){return An(o[i.index])}function $s(i,o){return i.data[o]}function Zi(i,o){return i[o]}function zt(i,o){const a=o[i];return sr(a)?a:a[0]}function Hs(i){return 64==(64&i[2])}function Ci(i,o){return null==o?null:i[o]}function fu(i){i[18]=0}function bn(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const It={lFrame:Pc(null),bindingsEnabled:!0};function Wi(){return It.bindingsEnabled}function be(){return It.lFrame.lView}function jt(){return It.lFrame.tView}function yu(i){return It.lFrame.contextLView=i,i[8]}function _u(i){return It.lFrame.contextLView=null,i}function xn(){let i=vu();for(;null!==i&&64===i.type;)i=i.parent;return i}function vu(){return It.lFrame.currentTNode}function li(i,o){const a=It.lFrame;a.currentTNode=i,a.isParent=o}function la(){return It.lFrame.isParent}function da(){It.lFrame.isParent=!1}function Mn(){const i=It.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Ri(){return It.lFrame.bindingIndex}function Gs(){return It.lFrame.bindingIndex++}function Ki(i){const o=It.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function og(i,o){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,wu(o)}function wu(i){It.lFrame.currentDirectiveIndex=i}function xc(){return It.lFrame.currentQueryIndex}function ga(i){It.lFrame.currentQueryIndex=i}function Mc(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Cu(i,o,a){if(a&We.SkipSelf){let h=o,p=i;for(;!(h=h.parent,null!==h||a&We.Host||(h=Mc(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,i=p}const l=It.lFrame=Oc();return l.currentTNode=o,l.lView=i,!0}function Eu(i){const o=Oc(),a=i[1];It.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Oc(){const i=It.lFrame,o=null===i?null:i.child;return null===o?Pc(i):o}function Pc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Nc(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ed=Nc;function zs(){const i=Nc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Xn(){return It.lFrame.selectedIndex}function zr(i){It.lFrame.selectedIndex=i}function yn(){const i=It.lFrame;return $s(i.tView,i.selectedIndex)}function kc(){It.lFrame.currentNamespace="svg"}function Du(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),C&&((i.contentHooks||(i.contentHooks=[])).push(a,C),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,C)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Zs(i,o,a){_o(i,o,3,a)}function yo(i,o,a,l){(3&i[2])===a&&_o(i,o,a,l)}function nd(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function _o(i,o,a,l){const p=l??-1,_=o.length-1;let C=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=l&&C>=l)break}else o[I]<0&&(i[18]+=65536),(C<p||-1==p)&&(rd(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function rd(i,o,a,l){const h=a[l]<0,p=a[l+1],C=i[h?-a[l]:a[l]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class ws{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function wo(i,o,a){let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const p=a[l++],_=a[l++],C=a[l++];i.setAttribute(o,_,C,p)}else{const p=h,_=a[++l];xu(p)?i.setProperty(o,p,_):i.setAttribute(o,p,_),l++}}return l}function Ks(i){return 3===i||4===i||6===i}function xu(i){return 64===i.charCodeAt(0)}function ma(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||sd(i,a,h,null,-1===a||2===a?o[++l]:null)}}return i}function sd(i,o,a,l,h){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const C=i[p++];if("number"==typeof C){if(C===o){_=-1;break}if(C>o){_=p-1;break}}}for(;p<i.length;){const C=i[p];if("number"==typeof C)break;if(C===a){if(null===l)return void(null!==h&&(i[p+1]=h));if(l===i[p+1])return void(i[p+2]=h)}p++,null!==l&&p++,null!==h&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==h&&i.splice(p++,0,h)}function od(i){return-1!==i}function or(i){return 32767&i}function _a(i,o){let a=function ya(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Fi=!0;function va(i){const o=Fi;return Fi=i,o}let Rn=0;const Ei={};function Ys(i,o){const a=Ou(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,Ca(l.data,i),Ca(o,null),Ca(l.blueprint,null));const h=Pu(i,o),p=i.injectorIndex;if(od(h)){const _=or(h),C=_a(h,o),I=C[1].data;for(let T=0;T<8;T++)o[p+T]=C[_+T]|I[_+T]}return o[p+8]=h,p}function Ca(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Ou(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Pu(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){if(l=Io(h),null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Cs(i,o,a){!function Mu(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(xr)&&(l=a[xr]),null==l&&(l=a[xr]=Rn++);const h=255&l;o.data[i+(h>>5)]|=1<<h}(i,o,a)}function Es(i,o,a){if(a&We.Optional||void 0!==i)return i;_e()}function Vc(i,o,a,l){if(a&We.Optional&&void 0===l&&(l=null),0==(a&(We.Self|We.Host))){const h=i[9],p=Kn(void 0);try{return h?h.get(o,l,a&We.Optional):ai(o,l,a&We.Optional)}finally{Kn(p)}}return Es(l,0,a)}function Qs(i,o,a,l=We.Default,h){if(null!==i){if(1024&o[2]){const _=function Eo(i,o,a,l,h){let p=i,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const C=Ea(p,_,a,l|We.Self,Ei);if(C!==Ei)return C;let I=p.parent;if(!I){const T=_[21];if(T){const M=T.get(a,Ei,l);if(M!==Ei)return M}I=Io(_),_=_[15]}p=I}return h}(i,o,a,l,Ei);if(_!==Ei)return _}const p=Ea(i,o,a,l,Ei);if(p!==Ei)return p}return Vc(o,a,l,h)}function Ea(i,o,a,l,h){const p=function Uc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(xr)?i[xr]:void 0;return"number"==typeof o?o>=0?255&o:Bc:o}(a);if("function"==typeof p){if(!Cu(o,i,l))return l&We.Host?Es(h,0,l):Vc(o,a,l,h);try{const _=p(l);if(null!=_||l&We.Optional)return _;_e()}finally{ed()}}else if("number"==typeof p){let _=null,C=Ou(i,o),I=-1,T=l&We.Host?o[16][6]:null;for((-1===C||l&We.SkipSelf)&&(I=-1===C?Pu(i,o):o[C+8],-1!==I&&Ia(l,!1)?(_=o[1],C=or(I),o=_a(I,o)):C=-1);-1!==C;){const M=o[1];if(Nu(p,C,M.data)){const k=cd(C,o,a,_,l,T);if(k!==Ei)return k}I=o[C+8],-1!==I&&Ia(l,o[1].data[C+8]===T)&&Nu(p,C,o)?(_=M,C=or(I),o=_a(I,o)):C=-1}}return h}function cd(i,o,a,l,h,p){const _=o[1],C=_.data[i+8],M=Co(C,_,a,null==l?sa(C)&&Fi:l!=_&&0!=(3&C.type),h&We.Host&&p===C);return null!==M?Yi(o,_,M,C):Ei}function Co(i,o,a,l,h){const p=i.providerIndexes,_=o.data,C=1048575&p,I=i.directiveStart,M=p>>20,$=h?C+M:i.directiveEnd;for(let X=l?C:C+M;X<$;X++){const me=_[X];if(X<I&&a===me||X>=I&&me.type===a)return X}if(h){const X=_[I];if(X&&vr(X)&&X.type===a)return I}return null}function Yi(i,o,a,l){let h=i[a];const p=o.data;if(function Ws(i){return i instanceof ws}(h)){const _=h;_.resolving&&function Ye(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(p[a]));const C=va(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Kn(_.injectImpl):null;Cu(i,l,We.Default);try{h=i[a]=_.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function td(i,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(l){const _=js(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==I&&Kn(I),va(C),_.resolving=!1,ed()}}return h}function Nu(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Ia(i,o){return!(i&We.Self||i&We.Host&&o)}class Js{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Qs(this._tNode,this._lView,o,l,a)}}function Bc(){return new Js(xn(),be())}function Qi(i){return kn(()=>{const o=i.prototype.constructor,a=o[Yn]||ku(o),l=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==l;){const p=h[Yn]||ku(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function ku(i){return Le(i)?()=>{const o=ku(W(i));return o&&o()}:Ni(i)}function Io(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Ru(i){return function ud(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const p=a[h];if(Ks(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(xn(),i)}const Is="__parameters__";function To(i,o,a){return kn(()=>{const l=function Fu(i){return function(...a){if(i){const l=i(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...p){if(this instanceof h)return l.apply(this,p),this;const _=new h(...p);return C.annotation=_,C;function C(I,T,M){const k=I.hasOwnProperty(Is)?I[Is]:Object.defineProperty(I,Is,{value:[]})[Is];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(_),I}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class hn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function un(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),un(l,o)):o!==i&&o.push(l)}return o}function Wr(i,o){i.forEach(a=>Array.isArray(a)?Wr(a,o):o(a))}function Ji(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Pn(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Kr(i,o,a){let l=Ds(i,o);return l>=0?i[1|l]=a:(l=~l,function Lu(i,o,a,l){let h=i.length;if(h==o)i.push(a,l);else if(1===h)i.push(l,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Ta(i,o){const a=Ds(i,o);if(a>=0)return i[1|a]}function Ds(i,o){return function So(i,o,a){let l=0,h=i.length>>a;for(;h!==l;){const p=l+(h-l>>1),_=i[p<<a];if(o===_)return p<<a;_>o?h=p:l=p+1}return~(h<<a)}(i,o,1)}const Nr={},Dn="__NG_DI_FLAG__",Mo="ngTempTokenPath",Oo=/\n/gm,Hc="__source";let to;function Xi(i){const o=to;return to=i,o}function Gc(i,o=We.Default){if(void 0===to)throw new we(-203,!1);return null===to?ai(i,void 0,o):to.get(i,o&We.Optional?null:void 0,o)}function Fn(i,o=We.Default){return(function ds(){return _r}()||Gc)(W(i),o)}function b(i,o=We.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Fn(i,o)}function D(i){const o=[];for(let a=0;a<i.length;a++){const l=W(i[a]);if(Array.isArray(l)){if(0===l.length)throw new we(900,!1);let h,p=We.Default;for(let _=0;_<l.length;_++){const C=l[_],I=F(C);"number"==typeof I?-1===I?h=C.token:p|=I:h=C}o.push(Fn(h,p))}else o.push(Fn(l))}return o}function x(i,o){return i[Dn]=o,i.prototype[Dn]=o,i}function F(i){return i[Dn]}const je=x(To("Optional"),8),_t=x(To("SkipSelf"),4);let rf,kr,so;function pg(i){rf=i}function xa(i){return function sf(){if(void 0===kr&&(kr=null,tn.trustedTypes))try{kr=tn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return kr}()?.createHTML(i)||i}function oo(i){return function af(){if(void 0===so&&(so=null,tn.trustedTypes))try{so=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return so}()?.createHTML(i)||i}class es{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ts(i){return i instanceof es?i.changingThisBreaksApplicationSecurity:i}function Bu(i,o){const a=function lf(i){return i instanceof es&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}class ff{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(xa(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class Ny{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=xa(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=xa(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let h=a.length-1;0<h;h--){const _=a.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Fo=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Wc(i){return(i=String(i)).match(Fo)?i:"unsafe:"+i}function Ss(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function ao(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const pf=Ss("area,br,col,hr,img,wbr"),Kc=Ss("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gf=Ss("rp,rt"),dd=ao(pf,ao(Kc,Ss("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ao(gf,Ss("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ao(gf,Kc)),ju=Ss("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mf=ao(ju,Ss("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ss("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lw=Ss("script,style,template");class dw{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!dd.hasOwnProperty(a))return this.sanitizedSomething=!0,!lw.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let h=0;h<l.length;h++){const p=l.item(h),_=p.name,C=_.toLowerCase();if(!mf.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=p.value;ju[C]&&(I=Wc(I)),this.buf.push(" ",_,'="',fd(I),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();dd.hasOwnProperty(a)&&!pf.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(fd(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const hd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qc=/([^\#-~ |!])/g;function fd(i){return i.replace(/&/g,"&amp;").replace(hd,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Qc,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Pa;function Na(i){return"content"in i&&function Fy(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var cr=(()=>((cr=cr||{})[cr.NONE=0]="NONE",cr[cr.HTML=1]="HTML",cr[cr.STYLE=2]="STYLE",cr[cr.SCRIPT=3]="SCRIPT",cr[cr.URL=4]="URL",cr[cr.RESOURCE_URL=5]="RESOURCE_URL",cr))();function pd(i){const o=Lo();return o?oo(o.sanitize(cr.HTML,i)||""):Bu(i,"HTML")?oo(ts(i)):function yf(i,o){let a=null;try{Pa=Pa||function hf(i){const o=new Ny(i);return function ky(){try{return!!(new window.DOMParser).parseFromString(xa(""),"text/html")}catch{return!1}}()?new ff(o):o}(i);let l=o?String(o):"";a=Pa.getInertBodyElement(l);let h=5,p=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=p,p=a.innerHTML,a=Pa.getInertBodyElement(l)}while(l!==p);return xa((new dw).sanitizeChildren(Na(a)||a))}finally{if(a){const l=Na(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}(function Ro(){return void 0!==rf?rf:typeof document<"u"?document:void 0}(),ge(i))}function vg(i){const o=Lo();return o?o.sanitize(cr.URL,i)||"":Bu(i,"URL")?ts(i):Wc(ge(i))}function Lo(){const i=be();return i&&i[12]}const ka=new hn("ENVIRONMENT_INITIALIZER"),Jc=new hn("INJECTOR",-1),Ra=new hn("INJECTOR_DEF_TYPES");class $u{get(o,a=Nr){if(a===Nr){const l=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw l.name="NullInjectorError",l}return a}}function md(...i){return{\u0275providers:Xc(0,i)}}function Xc(i,...o){const a=[],l=new Set;let h;return Wr(o,p=>{const _=p;el(_,a,[],l)&&(h||(h=[]),h.push(_))}),void 0!==h&&Hu(h,a),a}function Hu(i,o){for(let a=0;a<i.length;a++){const{providers:h}=i[a];Wr(h,p=>{o.push(p)})}}function el(i,o,a,l){if(!(i=W(i)))return!1;let h=null,p=Ls(i);const _=!p&&Y(i);if(p||_){if(_&&!_.standalone)return!1;h=i}else{const I=i.ngModule;if(p=Ls(I),!p)return!1;h=I}const C=l.has(h);if(_){if(C)return!1;if(l.add(h),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of I)el(T,o,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let T;l.add(h);try{Wr(p.imports,M=>{el(M,o,a,l)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Hu(T,o)}if(!C){const T=Ni(h)||(()=>new h);o.push({provide:h,useFactory:T,deps:Dt},{provide:Ra,useValue:h,multi:!0},{provide:ka,useValue:()=>Fn(h),multi:!0})}const I=p.providers;null==I||C||Wr(I,M=>{o.push(M)})}}return h!==i&&void 0!==i.providers}const yd=le({provide:String,useValue:le});function _d(i){return null!==i&&"object"==typeof i&&yd in i}function Fa(i){return"function"==typeof i}const Gu=new hn("Set Injector scope."),tl={},vd={};let Vo;function La(){return void 0===Vo&&(Vo=new $u),Vo}class Ir{}class vf extends Ir{constructor(o,a,l,h){super(),this.parent=a,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Va(o,_=>this.processProvider(_)),this.records.set(Jc,er(void 0,this)),h.has("environment")&&this.records.set(Ir,er(void 0,this));const p=this.records.get(Gu);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Ra.multi,Dt,We.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Xi(this),l=Kn(void 0);try{return o()}finally{Xi(a),Kn(l)}}get(o,a=Nr,l=We.Default){this.assertNotDestroyed();const h=Xi(this),p=Kn(void 0);try{if(!(l&We.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function $y(i){return"function"==typeof i||"object"==typeof i&&i instanceof hn}(o)&&on(o);C=I&&this.injectableDefInScope(I)?er(nl(o),tl):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(l&We.Self?La():this.parent).get(o,a=l&We.Optional&&a===Nr?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Mo]=_[Mo]||[]).unshift(de(o)),h)throw _;return function K(i,o,a,l){const h=i[Mo];throw o[Hc]&&h.unshift(o[Hc]),i.message=function ie(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=de(o);if(Array.isArray(o))h=o.map(de).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let C=o[_];p.push(_+":"+("string"==typeof C?JSON.stringify(C):de(C)))}h=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${i.replace(Oo,"\n  ")}`}("\n"+i.message,h,a,l),i.ngTokenPath=h,i[Mo]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{Kn(p),Xi(h)}}resolveInjectorInitializers(){const o=Xi(this),a=Kn(void 0);try{const l=this.get(ka.multi,Dt,We.Self);for(const h of l)h()}finally{Xi(o),Kn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(de(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(o){let a=Fa(o=W(o))?o:W(o&&o.provide);const l=function jy(i){return _d(i)?er(void 0,i.useValue):er(wf(i),tl)}(o);if(Fa(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=er(void 0,tl,!0),h.factory=()=>D(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===tl&&(a.value=vd,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Cd(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function nl(i){const o=on(i),a=null!==o?o.factory:Ni(i);if(null!==a)return a;if(i instanceof hn)throw new we(204,!1);if(i instanceof Function)return function wd(i){const o=i.length;if(o>0)throw function _n(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new we(204,!1);const a=function Ar(i){const o=i&&(i[vi]||i[oi]);if(o){const a=function Br(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function wf(i,o,a){let l;if(Fa(i)){const h=W(i);return Ni(h)||nl(h)}if(_d(i))l=()=>W(i.useValue);else if(function As(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...D(i.deps||[]));else if(function Er(i){return!(!i||!i.useExisting)}(i))l=()=>Fn(W(i.useExisting));else{const h=W(i&&(i.useClass||i.provide));if(!function Cf(i){return!!i.deps}(i))return Ni(h)||nl(h);l=()=>new h(...D(i.deps))}return l}function er(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Uo(i){return!!i.\u0275providers}function Va(i,o){for(const a of i)Array.isArray(a)?Va(a,o):Uo(a)?Va(a.\u0275providers,o):o(a)}class Cg{}class bf{resolveComponentFactory(o){throw function If(i){const o=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let rl=(()=>{class i{}return i.NULL=new bf,i})();function mw(){return y(xn(),be())}function y(i,o){return new f(Or(i,o))}let f=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=mw,i})();function g(i){return i instanceof f?i.nativeElement:i}class S{}let O=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function G(){const i=be(),a=zt(xn().index,i);return(sr(a)?a:i)[11]}(),i})(),ue=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class Fe{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ke=new Fe("14.2.7"),gt={};function Tg(i){return i.ngOriginalError}class xf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Tg(o);for(;a&&Tg(a);)a=Tg(a);return a||null}}const Ky=new Map;let vw=0;const Qy="__ngContext__";function Yr(i,o){sr(o)?(i[Qy]=o[20],function Yy(i){Ky.set(i[20],i)}(o)):i[Qy]=o}function xw(i){return i.ownerDocument}function Bo(i){return i instanceof Function?i():i}var jo=(()=>((jo=jo||{})[jo.Important=1]="Important",jo[jo.DashCase=2]="DashCase",jo))();function Og(i,o){return undefined(i,o)}function Sd(i){const o=i[3];return Mr(o)?o[3]:o}function Nw(i){return ns(i[13])}function En(i){return ns(i[4])}function ns(i){for(;null!==i&&!Mr(i);)i=i[4];return i}function Ua(i,o,a,l,h){if(null!=l){let p,_=!1;Mr(l)?p=l:sr(l)&&(_=!0,l=l[0]);const C=An(l);0===i&&null!==a?null==h?t_(o,a,C):$o(o,a,C,h||null,!0):1===i&&null!==a?$o(o,a,C,h||null,!0):2===i?function al(i,o,a){const l=uo(i,o);l&&function ja(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,C,_):3===i&&o.destroyNode(C),null!=p&&function Bw(i,o,a,l,h){const p=a[7];p!==An(a)&&Ua(o,i,l,p,h);for(let C=10;C<a.length;C++){const I=a[C];kf(I[1],I,i,o,l,p)}}(o,i,p,a,h)}}function Jy(i,o,a){return i.createElement(o,a)}function Ad(i,o){const a=i[9],l=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,bn(h,-1)),a.splice(l,1)}function Ba(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const h=l[17];null!==h&&h!==i&&Ad(h,l),o>0&&(i[a-1][4]=l[4]);const p=Pn(i,10+o);!function Rw(i,o){kf(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function e_(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&kf(i,o,a,3,null,null),function Xy(i){let o=i[13];if(!o)return Pf(i[1],i);for(;o;){let a=null;if(sr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)sr(o)&&Pf(o[1],o),o=o[3];null===o&&(o=i),sr(o)&&Pf(o[1],o),a=o&&o[4]}o=a}}(o)}}function Pf(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Gn(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof ws)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const C=h[p[_]],I=p[_+1];try{I.call(C)}finally{}}else try{p.call(h)}finally{}}}}(i,o),function Lw(i,o){const a=i.cleanup,l=o[7];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],C="function"==typeof _?_(o):An(o[_]),I=l[h=a[p+2]],T=a[p+3];"boolean"==typeof T?C.removeEventListener(a[p],I,T):T>=0?l[h=T]():l[h=-T].unsubscribe(),p+=2}else{const _=l[h=a[p+1]];a[p].call(_)}if(null!==l){for(let p=h+1;p<l.length;p++)(0,l[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Mr(o[3])){a!==o[3]&&Ad(a,o);const l=o[19];null!==l&&l.detachView(i)}!function wb(i){Ky.delete(i[20])}(o)}}function xd(i,o,a){return function Nf(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=i.data[l.directiveStart].encapsulation;if(h===it.None||h===it.Emulated)return null}return Or(l,a)}(i,o.parent,a)}function $o(i,o,a,l,h){i.insertBefore(o,a,l,h)}function t_(i,o,a){i.appendChild(o,a)}function Vw(i,o,a,l,h){null!==l?$o(i,o,a,l,h):t_(i,o,a)}function uo(i,o){return i.parentNode(o)}let n_=function Pg(i,o,a){return 40&i.type?Or(i,a):null};function Od(i,o,a,l){const h=xd(i,l,o),p=o[11],C=function Md(i,o,a){return n_(i,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let I=0;I<a.length;I++)Vw(p,h,a[I],C,!1);else Vw(p,h,a,C,!1)}function Ut(i,o){if(null!==o){const a=o.type;if(3&a)return Or(o,i);if(4&a)return i_(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Ut(i,l);{const h=i[o.index];return Mr(h)?i_(-1,h):An(h)}}if(32&a)return Og(o,i)()||An(i[o.index]);{const l=Pd(i,o);return null!==l?Array.isArray(l)?l[0]:Ut(Sd(i[16]),l):Ut(i,o.next)}}return null}function Pd(i,o){return null!==o?i[16][6].projection[o.projection]:null}function i_(i,o){const a=10+i+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return Ut(l,h)}return o[7]}function s_(i,o,a,l,h,p,_){for(;null!=a;){const C=l[a.index],I=a.type;if(_&&0===o&&(C&&Yr(An(C),l),a.flags|=4),64!=(64&a.flags))if(8&I)s_(i,o,a.child,l,h,p,!1),Ua(o,i,h,C,p);else if(32&I){const T=Og(a,l);let M;for(;M=T();)Ua(o,i,h,M,p);Ua(o,i,h,C,p)}else 16&I?o_(i,o,l,a,h,p):Ua(o,i,h,C,p);a=_?a.projectionNext:a.next}}function kf(i,o,a,l,h,p){s_(a,l,i.firstChild,o,h,p,!1)}function o_(i,o,a,l,h,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Ua(o,i,h,I[T],p);else s_(i,o,I,_[3],h,p,!0)}function Ob(i,o,a){i.setAttribute(o,"style",a)}function br(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function $a(i,o,a){let l=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const p=o.length;if(h+p===l||i.charCodeAt(h+p)<=32)return h}a=h+1}}const Hw="ng-template";function Pb(i,o,a){let l=0;for(;l<i.length;){let h=i[l++];if(a&&"class"===h){if(h=i[l],-1!==$a(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<i.length&&"string"==typeof(h=i[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function a_(i){return 4===i.type&&i.value!==Hw}function Gw(i,o,a){return o===(4!==i.type||a?i.value:Hw)}function Nb(i,o,a){let l=4;const h=i.attrs||[],p=function Ng(i){for(let o=0;o<i.length;o++)if(Ks(i[o]))return o;return i.length}(h);let _=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!Gw(i,I,a)||""===I&&1===o.length){if(xs(l))return!1;_=!0}}else{const T=8&l?I:o[++C];if(8&l&&null!==i.attrs){if(!Pb(i.attrs,T,a)){if(xs(l))return!1;_=!0}continue}const k=kb(8&l?"class":I,h,a_(i),a);if(-1===k){if(xs(l))return!1;_=!0;continue}if(""!==T){let $;$=k>p?"":h[k+1].toLowerCase();const X=8&l?$:null;if(X&&-1!==$a(X,T,0)||2&l&&T!==$){if(xs(l))return!1;_=!0}}}}else{if(!_&&!xs(l)&&!xs(I))return!1;if(_&&xs(I))continue;_=!1,l=I|1&l}}return xs(l)||_}function xs(i){return 0==(1&i)}function kb(i,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let p=!1;for(;h<o.length;){const _=o[h];if(_===i)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function ul(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function u_(i,o,a=!1){for(let l=0;l<o.length;l++)if(Nb(i,o[l],a))return!0;return!1}function Nd(i,o){return i?":not("+o.trim()+")":o}function Rb(i){let o=i[0],a=1,l=2,h="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const C=i[++a];h+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&l?h+="."+_:4&l&&(h+=" "+_);else""!==h&&!xs(_)&&(o+=Nd(p,h),h=""),l=_,p=p||!xs(l);a++}return""!==h&&(o+=Nd(p,h)),o}const xt={};function kg(i){qw(jt(),be(),Xn()+i,!1)}function qw(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&Zs(o,p,a)}else{const p=i.preOrderHooks;null!==p&&yo(o,p,0,a)}zr(a)}function Kw(i,o=null,a=null,l){const h=Yw(i,o,a,l);return h.resolveInjectorInitializers(),h}function Yw(i,o=null,a=null,l,h=new Set){const p=[a||Dt,md(i)];return l=l||("object"==typeof i?void 0:de(i)),new vf(p,o||La(),l||null,h)}let ll=(()=>{class i{static create(a,l){if(Array.isArray(a))return Kw({name:""},l,a,"");{const h=a.name??"";return Kw({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Nr,i.NULL=new $u,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>Fn(Jc)}),i.__NG_ELEMENT_ID__=-1,i})();function dl(i,o=We.Default){const a=be();return null===a?Fn(i,o):Qs(xn(),a,W(i),o)}function g_(){throw new Error("invalid")}function Vd(i,o){return i<<17|o<<2}function Jr(i){return i>>17&32767}function m_(i){return 2|i}function Ha(i){return(131068&i)>>2}function y_(i,o){return-131069&i|o<<2}function __(i){return 1|i}function Wb(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];ga(h),_.contentQueries(2,o[p],p)}}}function jd(i,o,a,l,h,p,_,C,I,T,M){const k=o.blueprint.slice();return k[0]=h,k[2]=76|l,(null!==M||i&&1024&i[2])&&(k[2]|=1024),fu(k),k[3]=k[15]=i,k[8]=a,k[10]=_||i&&i[10],k[11]=C||i&&i[11],k[12]=I||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=p,k[20]=function vb(){return vw++}(),k[21]=M,k[16]=2==o.type?i[16]:k,k}function $d(i,o,a,l,h){let p=i.data[o];if(null===p)p=function D_(i,o,a,l,h){const p=vu(),_=la(),I=i.data[o]=function Yb(i,o,a,l,h,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,l,h);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,o,a,l,h),function sg(){return It.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=h;const _=function mo(){const i=It.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return li(p,!0),p}function Hd(i,o,a,l){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function Gf(i,o,a){Eu(o);try{const l=i.viewQuery;null!==l&&Kd(1,l,a);const h=i.template;null!==h&&T_(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Wb(i,o),i.staticViewQueries&&Kd(2,i.viewQuery,a);const p=i.components;null!==p&&function ux(i,o){for(let a=0;a<o.length;a++)aD(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,zs()}}function Ti(i,o,a,l){const h=o[2];if(128!=(128&h)){Eu(o);try{fu(o),function Sc(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&T_(i,o,a,2,l);const _=3==(3&h);if(_){const T=i.preOrderCheckHooks;null!==T&&Zs(o,T,null)}else{const T=i.preOrderHooks;null!==T&&yo(o,T,0,null),nd(o,0)}if(function Yg(i){for(let o=Nw(i);null!==o;o=En(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],p=h[3];0==(512&h[2])&&bn(p,1),h[2]|=512}}}(o),function k_(i){for(let o=Nw(i);null!==o;o=En(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];Hs(l)&&Ti(h,l,h.template,l[8])}}(o),null!==i.contentQueries&&Wb(i,o),_){const T=i.contentCheckHooks;null!==T&&Zs(o,T)}else{const T=i.contentHooks;null!==T&&yo(o,T,1),nd(o,1)}!function ox(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)zr(~h);else{const p=h,_=a[++l],C=a[++l];og(_,p),C(2,o[p])}}}finally{zr(-1)}}(i,o);const C=i.components;null!==C&&function ax(i,o){for(let a=0;a<o.length;a++)oD(i,o[a])}(o,C);const I=i.viewQuery;if(null!==I&&Kd(2,I,l),_){const T=i.viewCheckHooks;null!==T&&Zs(o,T)}else{const T=i.viewHooks;null!==T&&yo(o,T,2),nd(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,bn(o[3],-1))}finally{zs()}}}function T_(i,o,a,l,h){const p=Xn(),_=2&l;try{zr(-1),_&&o.length>22&&qw(i,o,22,!1),a(l,h)}finally{zr(p)}}function Gd(i,o,a){if(ou(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function S_(i,o,a){!Wi()||(function O_(i,o,a,l){const h=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Ys(a,o),Yr(l,o);const _=a.initialInputs;for(let C=h;C<p;C++){const I=i.data[C],T=vr(I);T&&iD(o,a,I);const M=Yi(o,i,C,a);Yr(M,o),null!==_&&CC(0,C-h,M,I,0,_),T&&(zt(a.index,o)[8]=M)}}(i,o,a,Or(a,o)),128==(128&a.flags)&&function Kg(i,o,a){const l=a.directiveStart,h=a.directiveEnd,p=a.index,_=function Ac(){return It.lFrame.currentDirectiveIndex}();try{zr(p);for(let C=l;C<h;C++){const I=i.data[C],T=o[C];wu(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&fl(I,T)}}finally{zr(-1),wu(_)}}(i,o,a))}function A_(i,o,a=Or){const l=o.localNames;if(null!==l){let h=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],C=-1===_?a(o,i):i[_];i[h++]=C}}}function x_(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=zd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function zd(i,o,a,l,h,p,_,C,I,T){const M=22+l,k=M+h,$=function Kb(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:xt);return a}(M,k),X="function"==typeof T?T():T;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:C,declTNode:o,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:X,incompleteFirstPass:!1}}function Zd(i,o,a,l){const h=Yd(o);null===a?h.push(l):(h.push(a),i.firstCreatePass&&L_(i).push(l,h.length-1))}function mC(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const h=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function Wd(i,o){const l=o.directiveEnd,h=i.data,p=o.attrs,_=[];let C=null,I=null;for(let T=o.directiveStart;T<l;T++){const M=h[T],k=M.inputs,$=null===p||a_(o)?null:sD(k,p);_.push($),C=mC(k,T,C),I=mC(M.outputs,T,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=C,o.outputs=I}function yC(i,o){const a=zt(o,i);16&a[2]||(a[2]|=32)}function M_(i,o,a,l){let h=!1;if(Wi()){const p=function tD(i,o,a){const l=i.directiveRegistry;let h=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];u_(a,_.selectors,!1)&&(h||(h=[]),Cs(Ys(a,o),i,_.type),vr(_)?(_C(i,a),h.unshift(_)):h.push(_))}return h}(i,o,a),_=null===l?null:{"":-1};if(null!==p){h=!0,vC(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const k=p[M];k.providersResolver&&k.providersResolver(k)}let C=!1,I=!1,T=Hd(i,o,p.length,null);for(let M=0;M<p.length;M++){const k=p[M];a.mergedAttrs=ma(a.mergedAttrs,k.hostAttrs),wC(i,a,o,T,k),rD(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const $=k.type.prototype;!C&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),C=!0),!I&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}Wd(i,a)}_&&function nD(i,o,a){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new we(-301,!1);l.push(o[h],p)}}}(a,l,_)}return a.mergedAttrs=ma(a.mergedAttrs,a.attrs),h}function Xb(i,o,a,l,h,p){const _=p.hostBindings;if(_){let C=i.hostBindingOpCodes;null===C&&(C=i.hostBindingOpCodes=[]);const I=~o.index;(function eD(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(C)!=I&&C.push(I),C.push(l,h,_)}}function fl(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function _C(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function rD(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;vr(o)&&(a[""]=i)}}function vC(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function wC(i,o,a,l,h){i.data[l]=h;const p=h.factory||(h.factory=Ni(h.type)),_=new ws(p,vr(h),dl);i.blueprint[l]=_,a[l]=_,Xb(i,o,0,l,Hd(i,a,h.hostVars,xt),h)}function iD(i,o,a){const l=Or(o,i),h=x_(a),p=i[10],_=pl(i,jd(i,h,null,a.onPush?32:16,l,o,p,p.createRenderer(l,a),null,null,null));i[o.index]=_}function zo(i,o,a,l,h,p){const _=Or(i,o);!function P_(i,o,a,l,h,p,_){if(null==p)i.removeAttribute(o,h,a);else{const C=null==_?ge(p):_(p,l||"",h);i.setAttribute(o,h,C,a)}}(o[11],_,p,i.value,a,l,h)}function CC(i,o,a,l,h,p){const _=p[o];if(null!==_){const C=l.setInput;for(let I=0;I<_.length;){const T=_[I++],M=_[I++],k=_[I++];null!==C?l.setInput(a,k,T,M):a[M]=k}}}function sD(i,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function N_(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function oD(i,o){const a=zt(o,i);if(Hs(a)){const l=a[1];48&a[2]?Ti(l,a,l.template,a[8]):a[5]>0&&R_(a)}}function R_(i){for(let l=Nw(i);null!==l;l=En(l))for(let h=10;h<l.length;h++){const p=l[h];if(Hs(p))if(512&p[2]){const _=p[1];Ti(_,p,_.template,p[8])}else p[5]>0&&R_(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=zt(a[l],i);Hs(h)&&h[5]>0&&R_(h)}}function aD(i,o){const a=zt(o,i),l=a[1];(function uD(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Gf(l,a,a[8])}function pl(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Qg(i){for(;i;){i[2]|=32;const o=Sd(i);if(Hh(i)&&!o)return i;i=o}return null}function qf(i,o,a,l=!0){const h=o[10];h.begin&&h.begin();try{Ti(i,o,i.template,a)}catch(_){throw l&&bC(o,_),_}finally{h.end&&h.end()}}function Kd(i,o,a){ga(0),o(i,a)}function Yd(i){return i[7]||(i[7]=[])}function L_(i){return i.cleanup||(i.cleanup=[])}function bC(i,o){const a=i[9],l=a?a.get(xf,null):null;l&&l.handleError(o)}function V_(i,o,a,l,h){for(let p=0;p<a.length;){const _=a[p++],C=a[p++],I=o[_],T=i.data[_];null!==T.setInput?T.setInput(I,h,l,C):I[C]=h}}function qa(i,o,a){const l=ci(o,i);!function kw(i,o,a){i.setValue(o,a)}(i[11],l,a)}function Jg(i,o,a){let l=a?i.styles:null,h=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const C=o[_];"number"==typeof C?p=C:1==p?h=he(h,C):2==p&&(l=he(l,C+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=h:i.classesWithoutHost=h}function gl(i,o,a,l,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(An(p)),Mr(p))for(let C=10;C<p.length;C++){const I=p[C],T=I[1].firstChild;null!==T&&gl(I[1],I,T,l)}const _=a.type;if(8&_)gl(i,o,a.child,l);else if(32&_){const C=Og(a,o);let I;for(;I=C();)l.push(I)}else if(16&_){const C=Pd(o,a);if(Array.isArray(C))l.push(...C);else{const I=Sd(o[16]);gl(I[1],I,C,l,!0)}}a=h?a.projectionNext:a.next}return l}class Zf{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return gl(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Mr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Ba(o,l),Pn(a,l))}this._attachedToViewContainer=!1}e_(this._lView[1],this._lView)}onDestroy(o){Zd(this._lView[1],this._lView,null,o)}markForCheck(){Qg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){qf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ab(i,o){kf(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=o}}class lD extends Zf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;qf(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class U_ extends rl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Y(o);return new Wf(a,this.ngModule)}}function DC(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class hD{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const h=this.injector.get(o,gt,l);return h!==gt||a===gt?h:this.parentInjector.get(o,a,l)}}class Wf extends Cg{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function cl(i){return i.map(Rb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return DC(this.componentDef.inputs)}get outputs(){return DC(this.componentDef.outputs)}create(o,a,l,h){let p=(h=h||this.ngModule)instanceof Ir?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new hD(o,p):o,C=_.get(S,null);if(null===C)throw new we(407,!1);const I=_.get(ue,null),T=C.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=l?function qd(i,o,a){return i.selectRootElement(o,a===it.ShadowDom)}(T,l,this.componentDef.encapsulation):Jy(C.createRenderer(null,this.componentDef),M,function dD(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),$=this.componentDef.onPush?288:272,X=zd(0,null,null,1,0,null,null,null,null,null),me=jd(null,X,null,$,null,null,C,T,I,_,null);let Re,ze;Eu(me);try{const rt=function AC(i,o,a,l,h,p){const _=a[1];a[22]=i;const I=$d(_,22,2,"#host",null),T=I.mergedAttrs=o.hostAttrs;null!==T&&(Jg(I,T,!0),null!==i&&(wo(h,i,T),null!==I.classes&&br(h,i,I.classes),null!==I.styles&&Ob(h,i,I.styles)));const M=l.createRenderer(i,o),k=jd(a,x_(o),null,o.onPush?32:16,a[22],I,l,M,p||null,null,null);return _.firstCreatePass&&(Cs(Ys(I,a),_,o.type),_C(_,I),vC(I,a.length,1)),pl(a,k),a[22]=k}(k,this.componentDef,me,C,T);if(k)if(l)wo(T,k,["ng-version",Ke.full]);else{const{attrs:mt,classes:Se}=function Fb(i){const o=[],a=[];let l=1,h=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===h?""!==p&&o.push(p,i[++l]):8===h&&a.push(p);else{if(!xs(h))break;h=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);mt&&wo(T,k,mt),Se&&Se.length>0&&br(T,k,Se.join(" "))}if(ze=$s(X,22),void 0!==a){const mt=ze.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const bt=a[Se];mt.push(null!=bt?Array.from(bt):null)}}Re=function xC(i,o,a,l){const h=a[1],p=function Jb(i,o,a){const l=xn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),wC(i,l,o,Hd(i,o,1,null),a),Wd(i,l));const h=Yi(o,i,l.directiveStart,l);Yr(h,o);const p=Or(l,o);return p&&Yr(p,o),h}(h,a,o);if(i[8]=a[8]=p,null!==l)for(const C of l)C(p,o);if(o.contentQueries){const C=xn();o.contentQueries(1,p,C.directiveStart)}const _=xn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(zr(_.index),Xb(a[1],_,0,_.directiveStart,_.directiveEnd,o),fl(o,p)),p}(rt,this.componentDef,me,[MC]),Gf(X,me,null)}finally{zs()}return new SC(this.componentType,Re,y(ze,me),me,ze)}}class SC extends class Ef{}{constructor(o,a,l,h,p){super(),this.location=l,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new lD(h),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){const p=this._rootLView;V_(p[1],p,h,o,a),yC(p,this._tNode.index)}}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function MC(){const i=xn();Du(be()[1],i)}function B_(i){let o=function OC(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let h;if(vr(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new we(903,!1);h=o.\u0275dir}if(h){if(a){l.push(h);const _=i;_.inputs=j_(i.inputs),_.declaredInputs=j_(i.declaredInputs),_.outputs=j_(i.outputs);const C=h.hostBindings;C&&PC(i,C);const I=h.viewQuery,T=h.contentQueries;if(I&&gD(i,I),T&&mD(i,T),ae(i.inputs,h.inputs),ae(i.declaredInputs,h.declaredInputs),ae(i.outputs,h.outputs),vr(h)&&h.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const C=p[_];C&&C.ngInherit&&C(i),C===B_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function pD(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const h=i[l];h.hostVars=o+=h.hostVars,h.hostAttrs=ma(h.hostAttrs,a=ma(a,h.hostAttrs))}}(l)}function j_(i){return i===jr?{}:i===Dt?[]:i}function gD(i,o){const a=i.viewQuery;i.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function mD(i,o){const a=i.contentQueries;i.contentQueries=a?(l,h,p)=>{o(l,h,p),a(l,h,p)}:o}function PC(i,o){const a=i.hostBindings;i.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let H_=null;function ml(){if(!H_){const i=tn.Symbol;if(i&&i.iterator)H_=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(H_=l)}}}return H_}function Kf(i){return!!em(i)&&(Array.isArray(i)||!(i instanceof Map)&&ml()in i)}function em(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ms(i,o,a){return i[o]=a}function hi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function qo(i,o,a,l){const h=hi(i,o,a);return hi(i,o+1,l)||h}function z_(i,o,a,l){const h=be();return hi(h,Gs(),o)&&(jt(),zo(yn(),h,i,o,a,l)),z_}function tr(i,o,a,l,h,p,_,C){const T=function tm(i,o,a,l,h){const p=qo(i,o,a,l);return hi(i,o+2,h)||p}(i,Ri(),a,h,_);return Ki(3),T?o+ge(a)+l+ge(h)+p+ge(_)+C:xt}function rm(i,o,a,l,h,p,_,C){const I=be(),T=jt(),M=i+22,k=T.firstCreatePass?function th(i,o,a,l,h,p,_,C,I){const T=o.consts,M=$d(o,i,4,_||null,Ci(T,C));M_(o,a,M,Ci(T,I)),Du(o,M);const k=M.tViews=zd(2,M,l,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,T,I,o,a,l,h,p,_):T.data[M];li(k,!1);const $=I[11].createComment("");Od(T,I,$,k),Yr($,I),pl(I,I[M]=N_($,I,$,k)),vc(k)&&S_(T,I,k),null!=_&&A_(I,k,C)}function W_(i){return Zi(function Tc(){return It.lFrame.contextLView}(),22+i)}function im(i,o,a){const l=be();return hi(l,Gs(),o)&&function rs(i,o,a,l,h,p,_,C){const I=Or(o,a);let M,T=o.inputs;!C&&null!=T&&(M=T[l])?(V_(i,a,M,l,h),sa(o)&&yC(a,o.index)):3&o.type&&(l=function zf(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=_?_(h,o.value||"",l):h,p.setProperty(I,l,h))}(jt(),yn(),l,i,o,l[11],a,!1),im}function Jf(i,o,a,l,h){const _=h?"class":"style";V_(i,a,o.inputs[_],_,l)}function sm(i,o,a,l){const h=be(),p=jt(),_=22+i,C=h[11],I=h[_]=Jy(C,o,function bu(){return It.lFrame.currentNamespace}()),T=p.firstCreatePass?function CD(i,o,a,l,h,p,_){const C=o.consts,T=$d(o,i,2,h,Ci(C,p));return M_(o,a,T,Ci(C,_)),null!==T.attrs&&Jg(T,T.attrs,!1),null!==T.mergedAttrs&&Jg(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,h,0,o,a,l):p.data[_];li(T,!0);const M=T.mergedAttrs;null!==M&&wo(C,I,M);const k=T.classes;null!==k&&br(C,I,k);const $=T.styles;return null!==$&&Ob(C,I,$),64!=(64&T.flags)&&Od(p,h,I,T),0===function gu(){return It.lFrame.elementDepthCount}()&&Yr(I,h),function mu(){It.lFrame.elementDepthCount++}(),vc(T)&&(S_(p,h,T),Gd(p,T,h)),null!==l&&A_(h,T),sm}function om(){let i=xn();la()?da():(i=i.parent,li(i,!1));const o=i;!function Ic(){It.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(Du(a,i),ou(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Au(i){return 0!=(16&i.flags)}(o)&&Jf(a,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function id(i){return 0!=(32&i.flags)}(o)&&Jf(a,o,be(),o.stylesWithoutHost,!1),om}function am(i,o,a,l){return sm(i,o,a,l),om(),am}function K_(i,o,a){const l=be(),h=jt(),p=i+22,_=h.firstCreatePass?function ED(i,o,a,l,h){const p=o.consts,_=Ci(p,l),C=$d(o,i,8,"ng-container",_);return null!==_&&Jg(C,_,!0),M_(o,a,C,Ci(p,h)),null!==o.queries&&o.queries.elementStart(o,C),C}(p,h,l,o,a):h.data[p];li(_,!0);const C=l[p]=l[11].createComment("");return Od(h,l,C,_),Yr(C,l),vc(_)&&(S_(h,l,_),Gd(h,_,l)),null!=a&&A_(l,_),K_}function vl(){let i=xn();const o=jt();return la()?da():(i=i.parent,li(i,!1)),o.firstCreatePass&&(Du(o,i),ou(i)&&o.queries.elementEnd(i)),vl}function Y_(){return be()}function Q_(i){return!!i&&"function"==typeof i.then}function VC(i){return!!i&&"function"==typeof i.subscribe}const J_=VC;function X_(i,o,a,l){const h=be(),p=jt(),_=xn();return function BC(i,o,a,l,h,p,_,C){const I=vc(l),M=i.firstCreatePass&&L_(i),k=o[8],$=Yd(o);let X=!0;if(3&l.type||C){const ze=Or(l,o),rt=C?C(ze):ze,mt=$.length,Se=C?cn=>C(An(cn[l.index])):l.index;let bt=null;if(!C&&I&&(bt=function bD(i,o,a,l){const h=i.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===a&&h[p+1]===l){const C=o[7],I=h[p+2];return C.length>I?C[I]:null}"string"==typeof _&&(p+=2)}return null}(i,o,h,l.index)),null!==bt)(bt.__ngLastListenerFn__||bt).__ngNextListenerFn__=p,bt.__ngLastListenerFn__=p,X=!1;else{p=ev(l,o,k,p,!1);const cn=a.listen(rt,h,p);$.push(p,cn),M&&M.push(h,Se,mt,mt+1)}}else p=ev(l,o,k,p,!1);const me=l.outputs;let Re;if(X&&null!==me&&(Re=me[h])){const ze=Re.length;if(ze)for(let rt=0;rt<ze;rt+=2){const Un=o[Re[rt]][Re[rt+1]].subscribe(p),Vl=$.length;$.push(p,Un),M&&M.push(h,l.index,Vl,-(Vl+1))}}}(p,h,h[11],_,i,o,0,l),X_}function jC(i,o,a,l){try{return!1!==a(l)}catch(h){return bC(i,h),!1}}function ev(i,o,a,l,h){return function p(_){if(_===Function)return l;Qg(2&i.flags?zt(i.index,o):o);let I=jC(o,0,l,_),T=p.__ngNextListenerFn__;for(;T;)I=jC(o,0,T,_)&&I,T=T.__ngNextListenerFn__;return h&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function $C(i=1){return function qs(i){return(It.lFrame.contextLView=function Iu(i,o){for(;i>0;)o=o[15],i--;return o}(i,It.lFrame.contextLView))[8]}(i)}function GC(i,o,a,l,h){const p=i[a+1],_=null===o;let C=l?Jr(p):Ha(p),I=!1;for(;0!==C&&(!1===I||_);){const M=i[C+1];xD(i[C],o)&&(I=!0,i[C+1]=l?__(M):m_(M)),C=l?Jr(M):Ha(M)}I&&(i[a+1]=l?m_(p):__(p))}function xD(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Ds(i,o)>=0}const fn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function MD(i){return i.substring(fn.key,fn.keyEnd)}function OD(i){return i.substring(fn.value,fn.valueEnd)}function Yu(i,o){const a=fn.textEnd;return a===o?-1:(o=fn.keyEnd=function Ka(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,fn.key=o,a),nh(i,o,a))}function Wa(i,o){const a=fn.textEnd;let l=fn.key=nh(i,o,a);return a===l?-1:(l=fn.keyEnd=function ut(i,o,a){let l;for(;o<a&&(45===(l=i.charCodeAt(o))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)o++;return o}(i,l,a),l=cm(i,l,a),l=fn.value=nh(i,l,a),l=fn.valueEnd=function Mt(i,o,a){let l=-1,h=-1,p=-1,_=o,C=_;for(;_<a;){const I=i.charCodeAt(_++);if(59===I)return C;34===I||39===I?C=_=ep(i,I,_,a):o===_-4&&85===p&&82===h&&76===l&&40===I?C=_=ep(i,41,_,a):I>32&&(C=_),p=h,h=l,l=-33&I}return C}(i,l,a),cm(i,l,a))}function nn(i){fn.key=0,fn.keyEnd=0,fn.value=0,fn.valueEnd=0,fn.textEnd=i.length}function nh(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function cm(i,o,a,l){return(o=nh(i,o,a))<a&&o++,o}function ep(i,o,a,l){let h=-1,p=a;for(;p<l;){const _=i.charCodeAt(p++);if(_==o&&92!==h)return p;h=92==_&&92===h?0:_}throw new Error}function Cl(i,o,a){return Tn(i,o,a,!1),Cl}function iv(i,o){return Tn(i,o,null,!0),iv}function os(i){Ui(ov,PD,i,!1)}function PD(i,o){for(let a=function um(i){return nn(i),Wa(i,nh(i,0,fn.textEnd))}(o);a>=0;a=Wa(o,a))ov(i,MD(o),OD(o))}function zC(i){Ui(Kr,Zo,i,!0)}function Zo(i,o){for(let a=function ye(i){return nn(i),Yu(i,nh(i,0,fn.textEnd))}(o);a>=0;a=Yu(o,a))Kr(i,MD(o),!0)}function Tn(i,o,a,l){const h=be(),p=jt(),_=Ki(2);p.firstUpdatePass&&Ya(p,i,_,l),o!==xt&&hi(h,_,o)&&np(p,p.data[Xn()],h,h[11],i,h[_+1]=function kD(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=de(ts(i)))),i}(o,a),l,_)}function Ui(i,o,a,l){const h=jt(),p=Ki(2);h.firstUpdatePass&&Ya(h,null,p,l);const _=be();if(a!==xt&&hi(_,p,a)){const C=h.data[Xn()];if(WC(C,l)&&!Rr(h,p)){let I=l?C.classesWithoutHost:C.stylesWithoutHost;null!==I&&(a=he(I,a||"")),Jf(h,C,_,a,l)}else!function av(i,o,a,l,h,p,_,C){h===xt&&(h=Dt);let I=0,T=0,M=0<h.length?h[0]:null,k=0<p.length?p[0]:null;for(;null!==M||null!==k;){const $=I<h.length?h[I+1]:void 0,X=T<p.length?p[T+1]:void 0;let Re,me=null;M===k?(I+=2,T+=2,$!==X&&(me=k,Re=X)):null===k||null!==M&&M<k?(I+=2,me=M):(T+=2,me=k,Re=X),null!==me&&np(i,o,a,l,me,Re,_,C),M=I<h.length?h[I]:null,k=T<p.length?p[T]:null}}(h,C,_,_[11],_[p+1],_[p+1]=function lm(i,o,a){if(null==a||""===a)return Dt;const l=[],h=ts(a);if(Array.isArray(h))for(let p=0;p<h.length;p++)i(l,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&i(l,p,h[p]);else"string"==typeof h&&o(l,h);return l}(i,o,a),l,p)}}function Rr(i,o){return o>=i.expandoStartIndex}function Ya(i,o,a,l){const h=i.data;if(null===h[a+1]){const p=h[Xn()],_=Rr(i,a);WC(p,l)&&null===o&&!_&&(o=!1),o=function ND(i,o,a,l){const h=function pa(i){const o=It.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=tp(a=Fr(null,i,o,a,l),o.attrs,l),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==h)if(a=Fr(h,i,o,a,l),null===p){let I=function qC(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ha(l))return i[Jr(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=Fr(null,i,o,I[1],l),I=tp(I,o.attrs,l),function sv(i,o,a,l){i[Jr(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else p=function ZC(i,o,a){let l;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)l=tp(l,i[p].hostAttrs,a);return tp(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,l),function fi(i,o,a,l,h,p){let _=p?o.classBindings:o.styleBindings,C=Jr(_),I=Ha(_);i[l]=a;let M,T=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||Ds(k,M)>0)&&(T=!0)}else M=a;if(h)if(0!==I){const $=Jr(i[C+1]);i[l+1]=Vd($,C),0!==$&&(i[$+1]=y_(i[$+1],l)),i[C+1]=function sC(i,o){return 131071&i|o<<17}(i[C+1],l)}else i[l+1]=Vd(C,0),0!==C&&(i[C+1]=y_(i[C+1],l)),C=l;else i[l+1]=Vd(I,0),0===C?C=l:i[I+1]=y_(i[I+1],l),I=l;T&&(i[l+1]=m_(i[l+1])),GC(i,M,l,!0),GC(i,M,l,!1),function nv(i,o,a,l,h){const p=h?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Ds(p,o)>=0&&(a[l+1]=__(a[l+1]))}(o,M,i,l,p),_=Vd(C,I),p?o.classBindings=_:o.styleBindings=_}(h,p,o,a,_,l)}}function Fr(i,o,a,l,h){let p=null;const _=a.directiveEnd;let C=a.directiveStylingLast;for(-1===C?C=a.directiveStart:C++;C<_&&(p=o[C],l=tp(l,p.hostAttrs,h),p!==i);)C++;return null!==i&&(a.directiveStylingLast=C),l}function tp(i,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Kr(i,_,!!a||o[++p]))}return void 0===i?null:i}function ov(i,o,a){Kr(i,o,ts(a))}function np(i,o,a,l,h,p,_,C){if(!(3&o.type))return;const I=i.data,T=I[C+1];rh(function oC(i){return 1==(1&i)}(T)?co(I,o,a,h,Ha(T),_):void 0)||(rh(p)||function jf(i){return 2==(2&i)}(T)&&(p=co(I,null,a,h,C,_)),function jw(i,o,a,l,h){if(o)h?i.addClass(a,l):i.removeClass(a,l);else{let p=-1===l.indexOf("-")?void 0:jo.DashCase;null==h?i.removeStyle(a,l,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=jo.Important),i.setStyle(a,l,h,p))}}(l,_,ci(Xn(),a),h,p))}function co(i,o,a,l,h,p){const _=null===o;let C;for(;h>0;){const I=i[h],T=Array.isArray(I),M=T?I[1]:I,k=null===M;let $=a[h+1];$===xt&&($=k?Dt:void 0);let X=k?Ta($,l):M===l?$:void 0;if(T&&!rh(X)&&(X=Ta(I,l)),rh(X)&&(C=X,_))return C;const me=i[h+1];h=_?Jr(me):Ha(me)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(C=Ta(I,l))}return C}function rh(i){return void 0!==i}function WC(i,o){return 0!=(i.flags&(o?16:32))}function El(i,o=""){const a=be(),l=jt(),h=i+22,p=l.firstCreatePass?$d(l,h,1,o,null):l.data[h],_=a[h]=function sl(i,o){return i.createText(o)}(a[11],o);Od(l,a,_,p),li(p,!1)}function dm(i){return ih("",i,""),dm}function ih(i,o,a){const l=be(),h=function Jd(i,o,a,l){return hi(i,Gs(),a)?o+ge(a)+l:xt}(l,i,o,a);return h!==xt&&qa(l,Xn(),h),ih}function hm(i,o,a,l,h){const p=be(),_=function yl(i,o,a,l,h,p){const C=qo(i,Ri(),a,h);return Ki(2),C?o+ge(a)+l+ge(h)+p:xt}(p,i,o,a,l,h);return _!==xt&&qa(p,Xn(),_),hm}function uv(i,o,a,l,h,p,_){const C=be(),I=tr(C,i,o,a,l,h,p,_);return I!==xt&&qa(C,Xn(),I),uv}const Qa=void 0;var ei=["en",[["a","p"],["AM","PM"],Qa],[["AM","PM"],Qa,Qa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qa,"{1} 'at' {0}",Qa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Lr(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Ja={};function wv(i){const o=function Ev(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=rE(o);if(a)return a;const l=o.split("-")[0];if(a=rE(l),a)return a;if("en"===l)return ei;throw new we(701,!1)}function Cv(i){return wv(i)[vt.PluralCase]}function rE(i){return i in Ja||(Ja[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),Ja[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Il="en-US";let iE=Il;function Lv(i,o,a,l,h){if(i=W(i),Array.isArray(i))for(let p=0;p<i.length;p++)Lv(i[p],o,a,l,h);else{const p=jt(),_=be();let C=Fa(i)?i:W(i.provide),I=wf(i);const T=xn(),M=1048575&T.providerIndexes,k=T.directiveStart,$=T.providerIndexes>>20;if(Fa(i)||!i.multi){const X=new ws(I,h,dl),me=gh(C,o,h?M:M+$,k);-1===me?(Cs(Ys(T,_),p,C),Vv(p,i,o.length),o.push(C),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(X),_.push(X)):(a[me]=X,_[me]=X)}else{const X=gh(C,o,M+$,k),me=gh(C,o,M,M+$),Re=X>=0&&a[X],ze=me>=0&&a[me];if(h&&!ze||!h&&!Re){Cs(Ys(T,_),p,C);const rt=function xE(i,o,a,l,h){const p=new ws(i,a,dl);return p.multi=[],p.index=o,p.componentProviders=0,AE(p,h,l&&!a),p}(h?Mm:pp,a.length,h,l,I);!h&&ze&&(a[me].providerFactory=rt),Vv(p,i,o.length,0),o.push(C),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(rt),_.push(rt)}else Vv(p,i,X>-1?X:me,AE(a[h?me:X],I,!h&&l));!h&&l&&ze&&a[me].componentProviders++}}}function Vv(i,o,a,l){const h=Fa(o),p=function gw(i){return!!i.useClass}(o);if(h||p){const I=(p?W(o.useClass):o).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,I]):T[M+1].push(l,I)}else T.push(a,I)}}}function AE(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function gh(i,o,a,l){for(let h=a;h<l;h++)if(o[h]===i)return h;return-1}function pp(i,o,a,l){return gp(this.multi,[])}function Mm(i,o,a,l){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=Yi(a,a[1],this.providerFactory.index,l);p=C.slice(0,_),gp(h,p);for(let I=_;I<C.length;I++)p.push(C[I])}else p=[],gp(h,p);return p}function gp(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function mh(i,o=[]){return a=>{a.providersResolver=(l,h)=>function Fv(i,o,a){const l=jt();if(l.firstCreatePass){const h=vr(i);Lv(a,l.data,l.blueprint,h,!0),Lv(o,l.data,l.blueprint,h,!1)}}(l,h?h(i):i,o)}}class Wo{}class ME{}function nr(i,o){return new OE(i,o??null)}class OE extends Wo{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new U_(this);const l=ln(o);this._bootstrapComponents=Bo(l.bootstrap),this._r3Injector=Yw(o,a,[{provide:Wo,useValue:this},{provide:rl,useValue:this.componentFactoryResolver}],de(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Uv extends ME{constructor(o){super(),this.moduleType=o}create(o){return new OE(this.moduleType,o)}}class eT extends Wo{constructor(o,a,l){super(),this.componentFactoryResolver=new U_(this),this.instance=null;const h=new vf([...o,{provide:Wo,useValue:this},{provide:rl,useValue:this.componentFactoryResolver}],a||La(),l,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Om(i,o,a=null){return new eT(i,o,a).injector}let PE=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=Xc(0,a.type),h=l.length>0?Om([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Kt({token:i,providedIn:"environment",factory:()=>new i(Fn(Ir))}),i})();function Bv(i){i.getStandaloneInjector=o=>o.get(PE).getOrCreateStandaloneInjector(i)}function ec(i,o){const a=i[o];return a===xt?void 0:a}function GE(i,o){const a=jt();let l;const h=i+22;a.firstCreatePass?(l=function Yv(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const p=l.factory||(l.factory=Ni(l.type)),_=Kn(dl);try{const C=va(!1),I=p();return va(C),function fx(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,be(),h,I),I}finally{Kn(_)}}function zE(i,o,a){const l=i+22,h=be(),p=Zi(h,l);return _h(h,l)?function Bi(i,o,a,l,h,p){const _=o+a;return hi(i,_,h)?Ms(i,_+1,p?l.call(p,h):l(h)):ec(i,_+1)}(h,Mn(),o,p.transform,a,p):p.transform(a)}function Qv(i,o,a,l){const h=i+22,p=be(),_=Zi(p,h);return _h(p,h)?function Wv(i,o,a,l,h,p,_){const C=o+a;return qo(i,C,h,p)?Ms(i,C+2,_?l.call(_,h,p):l(h,p)):ec(i,C+2)}(p,Mn(),o,_.transform,a,l,_):_.transform(a,l)}function _h(i,o){return i[1].data[o].pure}function tc(i){return o=>{setTimeout(i,void 0,o)}}const ti=class Vr extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let h=o,p=a||(()=>null),_=l;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),p=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(p=tc(p),h&&(h=tc(h)),_&&(_=tc(_)));const C=super.subscribe({next:h,error:p,complete:_});return o instanceof J.w0&&o.add(C),C}};function Jv(){return this._results[ml()]()}class Xv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ml(),l=Xv.prototype;l[a]||(l[a]=Jv)}get changes(){return this._changes||(this._changes=new ti)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=un(o);(this._changesDetected=!function Zr(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],p=o[l];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Oe=(()=>{class i{}return i.__NG_ELEMENT_ID__=e0,i})();const lr=Oe,xl=class extends lr{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,h=jd(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(l)),Gf(l,h,o),new Zf(h)}};function e0(){return Xe(xn(),be())}function Xe(i,o){return 4&i.type?new xl(o,i,y(i,o)):null}let wt=(()=>{class i{}return i.__NG_ELEMENT_ID__=oT,i})();function oT(){return t0(xn(),be())}const qe=wt,ce=class extends qe{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const o=Pu(this._hostTNode,this._hostLView);if(od(o)){const a=_a(o,this._hostLView),l=or(o);return new Js(a[1].data[l+8],a)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=xe(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let h,p;"number"==typeof l?h=l:null!=l&&(h=l.index,p=l.injector);const _=o.createEmbeddedView(a||{},p);return this.insert(_,h),_}createComponent(o,a,l,h,p){const _=o&&!function Xt(i){return"function"==typeof i}(o);let C;if(_)C=a;else{const k=a||{};C=k.index,l=k.injector,h=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const I=_?o:new Wf(Y(o)),T=l||this.parentInjector;if(!p&&null==I.ngModule){const $=(_?T:this.parentInjector).get(Ir,null);$&&(p=$)}const M=I.create(T,h,void 0,p);return this.insert(M.hostView,C),M}insert(o,a){const l=o._lView,h=l[1];if(function hu(i){return Mr(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const k=l[3],$=new ce(k,k[6],k[3]);$.detach($.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function Fw(i,o,a,l){const h=10+l,p=a.length;l>0&&(a[h-1][4]=o),l<p-10?(o[4]=a[h],Ji(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function xb(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const C=o[19];null!==C&&C.insertView(i),o[2]|=64}(h,l,_,p);const C=i_(p,_),I=l[11],T=uo(I,_[7]);return null!==T&&function Of(i,o,a,l,h,p){l[0]=h,l[6]=o,kf(i,l,a,1,h,p)}(h,_[6],I,l,T,C),o.attachToViewContainerRef(),Ji(dr(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=xe(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Ba(this._lContainer,a);l&&(Pn(dr(this._lContainer),a),e_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Ba(this._lContainer,a);return l&&null!=Pn(dr(this._lContainer),a)?new Zf(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function xe(i){return i[8]}function dr(i){return i[8]||(i[8]=[])}function t0(i,o){let a;const l=o[i.index];if(Mr(l))a=l;else{let h;if(8&i.type)h=An(l);else{const p=o[11];h=p.createComment("");const _=Or(i,o);$o(p,uo(p,_),h,function Mb(i,o){return i.nextSibling(o)}(p,_),!1)}o[i.index]=a=N_(l,o,h,i),pl(o,a)}return new ce(a,i,o)}class n0{constructor(o){this.queryList=o,this.matches=null}clone(){return new n0(this.queryList)}setDirty(){this.queryList.setDirty()}}class r0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new r0(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==nc(o,a).matches&&this.queries[a].setDirty()}}class s0{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class o0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,h);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new o0(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class qE{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new qE(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const p=l[h];this.matchTNodeWithReadOption(o,a,cT(a,p)),this.matchTNodeWithReadOption(o,a,Co(a,o,p,!1,!1))}else l===Oe?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Co(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===f||h===wt||h===Oe&&4&a.type)this.addMatch(a.index,-2);else{const p=Co(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function cT(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Ot(i,o,a,l){return-1===a?function ZE(i,o){return 11&i.type?y(i,o):4&i.type?Xe(i,o):null}(o,i):-2===a?function vh(i,o,a){return a===f?y(o,i):a===Oe?Xe(o,i):a===wt?t0(o,i):void 0}(i,o,l):Yi(i,i[1],a,o)}function a0(i,o,a,l){const h=o[19].queries[l];if(null===h.matches){const p=i.data,_=a.matches,C=[];for(let I=0;I<_.length;I+=2){const T=_[I];C.push(T<0?null:Ot(o,p[T],_[I+1],a.metadata.read))}h.matches=C}return h.matches}function Sn(i,o,a,l){const h=i.queries.getByIndex(a),p=h.matches;if(null!==p){const _=a0(i,o,h,a);for(let C=0;C<p.length;C+=2){const I=p[C];if(I>0)l.push(_[C/2]);else{const T=p[C+1],M=o[-I];for(let k=10;k<M.length;k++){const $=M[k];$[17]===$[3]&&Sn($[1],$,T,l)}if(null!==M[9]){const k=M[9];for(let $=0;$<k.length;$++){const X=k[$];Sn(X[1],X,T,l)}}}}}return l}function Et(i){const o=be(),a=jt(),l=xc();ga(l+1);const h=nc(a,l);if(i.dirty&&function du(i){return 4==(4&i[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const p=h.crossesNgTemplate?Sn(a,o,l,[]):a0(a,o,h,l);i.reset(p,g),i.notifyOnChanges()}return!0}return!1}function wh(i,o,a){const l=jt();l.firstCreatePass&&(vp(l,new s0(i,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),Ge(l,be(),o)}function Yt(i,o,a,l){const h=jt();if(h.firstCreatePass){const p=xn();vp(h,new s0(o,a,l),p.index),function u0(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}Ge(h,be(),a)}function WE(){return function rr(i,o){return i[19].queries[o].queryList}(be(),xc())}function Ge(i,o,a){const l=new Xv(4==(4&a));Zd(i,o,l,l.destroy),null===o[19]&&(o[19]=new r0),o[19].queries.push(new n0(l))}function vp(i,o,a){null===i.queries&&(i.queries=new o0),i.queries.track(new qE(o,a))}function nc(i,o){return i.queries.getByIndex(o)}function KE(i,o){return Xe(i,o)}function Sp(...i){}const Ap=new hn("Application Initializer");let uc=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Sp,this.reject=Sp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Q_(p))a.push(p);else if(J_(p)){const _=new Promise((C,I)=>{p.subscribe({complete:C,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Fn(Ap,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const f0=new hn("AppId",{providedIn:"root",factory:function iI(){return`${Um()}${Um()}${Um()}`}});function Um(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const p0=new hn("Platform Initializer"),ni=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),g0=new hn("appBootstrapListener");let sI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Bm=new hn("LocaleId",{providedIn:"root",factory:()=>b(Bm,We.Optional|We.SkipSelf)||function Ol(){return typeof $localize<"u"&&$localize.locale||Il}()}),xp=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class oI{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let ri=(()=>{class i{compileModuleSync(a){return new Uv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=Bo(ln(a).declarations).reduce((_,C)=>{const I=Y(C);return I&&_.push(new Wf(I)),_},[]);return new oI(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wT=(()=>Promise.resolve(0))();function Qo(i){typeof Zone>"u"?wT.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ks{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ti(!1),this.onMicrotaskEmpty=new ti(!1),this.onStable=new ti(!1),this.onError=new ti(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Mh(){let i=tn.requestAnimationFrame,o=tn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function cI(i){const o=()=>{!function ru(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,cc(i),i.isCheckStableRunning=!0,jm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),cc(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,p,_,C)=>{try{return v0(i),a.invokeTask(h,p,_,C)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),$m(i)}},onInvoke:(a,l,h,p,_,C,I)=>{try{return v0(i),a.invoke(h,p,_,C,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),$m(i)}},onHasTask:(a,l,h,p)=>{a.hasTask(h,p),l===h&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,cc(i),jm(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,h,p)=>(a.handleError(h,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ks.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(ks.isInAngularZone())throw new we(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,uI,Sp,Sp);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const uI={};function jm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function cc(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function v0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function $m(i){i._nesting--,jm(i)}class w0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ti,this.onMicrotaskEmpty=new ti,this.onStable=new ti,this.onError=new ti}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}const Hm=new hn(""),Pl=new hn("");let Gm,Si=(()=>{class i{constructor(a,l,h){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Gm||(function Op(i){Gm=i}(h),h.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ks.assertNotInAngularZone(),Qo(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qo(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Fn(ks),Fn(Mp),Fn(Pl))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),Mp=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Gm?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Jo=null;const zm=new hn("AllowMultipleToken"),qm=new hn("PlatformDestroyListeners");class dI{constructor(o,a){this.name=o,this.token=a}}function Nl(i,o,a=[]){const l=`Platform: ${o}`,h=new hn(l);return(p=[])=>{let _=Wm();if(!_||_.injector.get(zm,!1)){const C=[...a,...p,{provide:h,useValue:!0}];i?i(C):function Zm(i){if(Jo&&!Jo.get(zm,!1))throw new we(400,!1);Jo=i;const o=i.get(Rl);(function hI(i){const o=i.get(p0,null);o&&o.forEach(a=>a())})(i)}(function C0(i=[],o){return ll.create({name:o,providers:[{provide:Gu,useValue:"platform"},{provide:qm,useValue:new Set([()=>Jo=null])},...i]})}(C,l))}return function kl(i){const o=Wm();if(!o)throw new we(401,!1);return o}()}}function Wm(){return Jo?.get(Rl)??null}let Rl=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const h=function I0(i,o){let a;return a="noop"===i?new w0:("zone.js"===i?void 0:i)||new ks(o),a}(l?.ngZone,function E0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:ks,useValue:h}];return h.run(()=>{const _=ll.create({providers:p,parent:this.injector,name:a.moduleType.name}),C=a.create(_),I=C.injector.get(xf,null);if(!I)throw new we(402,!1);return h.runOutsideAngular(()=>{const T=h.onError.subscribe({next:M=>{I.handleError(M)}});C.onDestroy(()=>{In(this._modules,C),T.unsubscribe()})}),function Ph(i,o,a){try{const l=a();return Q_(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(I,h,()=>{const T=C.injector.get(uc);return T.runInitializers(),T.donePromise.then(()=>(function oh(i){Vt(i,"Expected localeId to be defined"),"string"==typeof i&&(iE=i.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Bm,Il)||Il),this._moduleDoBootstrap(C),C))})})}bootstrapModule(a,l=[]){const h=fI({},l);return function CT(i,o,a){const l=new Uv(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const l=a.injector.get(Km);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(qm,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Fn(ll))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function fI(i,o){return Array.isArray(o)?o.reduce(fI,i):{...i,...o}}let Km=(()=>{class i{constructor(a,l,h){this._zone=a,this._injector=l,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),_=new N.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{ks.assertNotInAngularZone(),Qo(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{ks.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(p,_.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const h=a instanceof Cg;if(!this._injector.get(uc).done)throw!h&&Zt(a),new we(405,false);let _;_=h?a:this._injector.get(rl).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const C=function lI(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Wo),T=_.create(ll.NULL,[],l||_.selector,C),M=T.location.nativeElement,k=T.injector.get(Hm,null);return k?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),In(this.components,T),k?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;In(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(g0,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>In(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Fn(ks),Fn(Ir),Fn(xf))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function In(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let b0=!0,pI=!1;function Np(){return pI=!0,b0}function DT(){if(pI)throw new Error("Cannot enable prod mode after platform setup.");b0=!1}let gI=(()=>{class i{}return i.__NG_ELEMENT_ID__=mI,i})();function mI(i){return function yI(i,o,a){if(sa(i)&&!a){const l=zt(i.index,o);return new Zf(l,l)}return 47&i.type?new Zf(o[16],o):null}(xn(),be(),16==(16&i))}class kh{constructor(){}supports(o){return Kf(o)}create(o){return new CI(o)}}const ey=(i,o)=>o;class CI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ey}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<S0(l,h,p)?a:l,C=S0(_,h,p),I=_.currentIndex;if(_===l)h--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)h++;else{p||(p=[]);const T=C-h,M=I-h;if(T!=M){for(let $=0;$<T;$++){const X=$<p.length?p[$]:p[$]=0,me=X+$;M<=me&&me<T&&(p[$]=X+1)}p[_.previousIndex]=M-T}}C!==I&&o(_,C,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Kf(o))throw new we(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],_=this._trackByFn(C,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,C)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,C),l=!0),a=a._next}else h=0,function Xg(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[ml()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,C=>{_=this._trackByFn(h,C),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,C,_,h)),Object.is(a.item,C)||this._addIdentityChange(a,C)):(a=this._mismatch(a,C,_,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new EI(a,l),p,h),o}_verifyReinsertion(o,a,l,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new bI),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class EI{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class II{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class bI{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new II,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function S0(i,o,a){const l=i.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class A0{constructor(){}supports(o){return o instanceof Map||em(o)}create(){return new AT}}class AT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||em(o)))throw new we(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const l=new xT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class xT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DI(){return new Ll([new kh])}let Ll=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||DI()),deps:[[i,new _t,new je]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new we(901,!1)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:DI}),i})();function TI(){return new yr([new A0])}let yr=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||TI()),deps:[[i,new _t,new je]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new we(901,!1)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:TI}),i})();const M0=Nl(null,"core",[]);let AI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Fn(Km))},i.\u0275mod=kt({type:i}),i.\u0275inj=At({}),i})();function Lp(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,Ee,R)=>{R.d(Ee,{Z:()=>we});var c=R(2090),J=R(4859),N=R(9681),se=R(1877);class re{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,N._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ge,fe=N._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(ge);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ye=nt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,N._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,N._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function he(){const et=function de(et){const ge={},fe={__esModule:!0,initializeApp:function Te(Be,U={}){const pe=N.initializeApp(Be,U);if((0,c.r3)(ge,pe.name))return ge[pe.name];const q=new et(pe,fe);return ge[pe.name]=q,q},app:nt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Be){const U=Be.name,pe=U.replace("-compat","");if(N._registerComponent(Be)&&"PUBLIC"===Be.type){const q=(Q=nt())=>{if("function"!=typeof Q[pe])throw ae.create("invalid-app-argument",{appName:U});return Q[pe]()};void 0!==Be.serviceProps&&(0,c.ZB)(q,Be.serviceProps),fe[pe]=q,et.prototype[pe]=function(...Q){return this._getService.bind(this,U).apply(this,Be.multipleInstances?Q:[])}}return"PUBLIC"===Be.type?fe[pe]:null},removeApp:function Ye(Be){delete ge[Be]},useAsService:function Ue(Be,U){return"serverAuth"===U?null:U},modularAPIs:N}};function nt(Be){if(!(0,c.r3)(ge,Be=Be||N._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Be});return ge[Be]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function _e(){return Object.keys(ge).map(Be=>ge[Be])}}),nt.App=et,fe}(re);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ge(fe){(0,c.ZB)(et,fe)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),et}(),j=new se.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;!function Ae(et){(0,N.registerVersion)("@firebase/app-compat","0.1.39",et)}()},9681:(ot,Ee,R)=>{R.r(Ee),R.d(Ee,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Ls,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>qt,_addOrOverwriteComponent:()=>Kt,_apps:()=>sn,_clearComponents:()=>Hi,_components:()=>pn,_getProvider:()=>At,_registerComponent:()=>Sr,_removeServiceInstance:()=>on,deleteApp:()=>na,getApp:()=>si,getApps:()=>oi,initializeApp:()=>vi,onLog:()=>ds,registerVersion:()=>_r,setLogLevel:()=>Kn});var c=R(5861),J=R(4859),N=R(1877),se=R(2090),re=R(8766);class le{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function ae(Je){return"VERSION"===Je.getComponent()?.type}(Qe)){const Ct=Qe.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(Qe=>Qe).join(" ")}}const de="@firebase/app",B=new N.Yd("@firebase/app"),Vt="[DEFAULT]",Ze={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,pn=new Map;function qt(Je,Ie){try{Je.container.addComponent(Ie)}catch(Qe){B.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Je.name}`,Qe)}}function Kt(Je,Ie){Je.container.addOrOverwriteComponent(Ie)}function Sr(Je){const Ie=Je.name;if(pn.has(Ie))return B.debug(`There were multiple attempts to register component ${Ie}.`),!1;pn.set(Ie,Je);for(const Qe of sn.values())qt(Qe,Je);return!0}function At(Je,Ie){const Qe=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Je.container.getProvider(Ie)}function on(Je,Ie,Qe=Vt){At(Je,Ie).clearInstance(Qe)}function Hi(){pn.clear()}const Ar=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Br{constructor(Ie,Qe,Ct){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}const Ls="9.14.0";function vi(Je,Ie={}){let Qe=Je;"object"!=typeof Ie&&(Ie={name:Ie});const Ct=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},Ie),yt=Ct.name;if("string"!=typeof yt||!yt)throw Ar.create("bad-app-name",{appName:String(yt)});if(Qe||(Qe=(0,se.aH)()),!Qe)throw Ar.create("no-options");const kt=sn.get(yt);if(kt){if((0,se.vZ)(Qe,kt.options)&&(0,se.vZ)(Ct,kt.config))return kt;throw Ar.create("duplicate-app",{appName:yt})}const H=new J.H0(yt);for(const Z of pn.values())H.addComponent(Z);const L=new Br(Qe,Ct,H);return sn.set(yt,L),L}function si(Je=Vt){const Ie=sn.get(Je);if(!Ie&&Je===Vt)return vi();if(!Ie)throw Ar.create("no-app",{appName:Je});return Ie}function oi(){return Array.from(sn.values())}function na(Je){return We.apply(this,arguments)}function We(){return(We=(0,c.Z)(function*(Je){const Ie=Je.name;sn.has(Ie)&&(sn.delete(Ie),yield Promise.all(Je.container.getProviders().map(Qe=>Qe.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function _r(Je,Ie,Qe){var Ct;let yt=null!==(Ct=Ze[Je])&&void 0!==Ct?Ct:Je;Qe&&(yt+=`-${Qe}`);const kt=yt.match(/\s|\//),H=Ie.match(/\s|\//);if(kt||H){const L=[`Unable to register library "${yt}" with version "${Ie}":`];return kt&&L.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),kt&&H&&L.push("and"),H&&L.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void B.warn(L.join(" "))}Sr(new J.wA(`${yt}-version`,()=>({library:yt,version:Ie}),"VERSION"))}function ds(Je,Ie){if(null!==Je&&"function"!=typeof Je)throw Ar.create("invalid-log-argument");(0,N.Am)(Je,Ie)}function Kn(Je){(0,N.Ub)(Je)}const kn="firebase-heartbeat-store";let Bn=null;function dn(){return Bn||(Bn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Je,Ie)=>{0===Ie&&Je.createObjectStore(kn)}}).catch(Je=>{throw Ar.create("idb-open",{originalErrorMessage:Je.message})})),Bn}function it(){return(it=(0,c.Z)(function*(Je){var Ie;try{return(yield dn()).transaction(kn).objectStore(kn).get(jn(Je))}catch(Qe){if(Qe instanceof se.ZR)B.warn(Qe.message);else{const Ct=Ar.create("idb-get",{originalErrorMessage:null===(Ie=Qe)||void 0===Ie?void 0:Ie.message});B.warn(Ct.message)}}})).apply(this,arguments)}function tn(Je,Ie){return hr.apply(this,arguments)}function hr(){return(hr=(0,c.Z)(function*(Je,Ie){var Qe;try{const yt=(yield dn()).transaction(kn,"readwrite");return yield yt.objectStore(kn).put(Ie,jn(Je)),yt.done}catch(Ct){if(Ct instanceof se.ZR)B.warn(Ct.message);else{const yt=Ar.create("idb-set",{originalErrorMessage:null===(Qe=Ct)||void 0===Qe?void 0:Qe.message});B.warn(yt.message)}}})).apply(this,arguments)}function jn(Je){return`${Je.name}!${Je.options.appId}`}class hs{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new Jt(Qe),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Ie=this;return(0,c.Z)(function*(){const Ct=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=Qt();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==yt&&!Ie._heartbeatsCache.heartbeats.some(kt=>kt.date===yt))return Ie._heartbeatsCache.heartbeats.push({date:yt,agent:Ct}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(kt=>{const H=new Date(kt.date).valueOf();return Date.now()-H<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,c.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const Qe=Qt(),{heartbeatsToSend:Ct,unsentEntries:yt}=function Oi(Je,Ie=1024){const Qe=[];let Ct=Je.slice();for(const yt of Je){const kt=Qe.find(H=>H.agent===yt.agent);if(kt){if(kt.dates.push(yt.date),Yn(Qe)>Ie){kt.dates.pop();break}}else if(Qe.push({agent:yt.agent,dates:[yt.date]}),Yn(Qe)>Ie){Qe.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:Ct}}(Ie._heartbeatsCache.heartbeats),kt=(0,se.L)(JSON.stringify({version:2,heartbeats:Ct}));return Ie._heartbeatsCache.lastSentHeartbeatDate=Qe,yt.length>0?(Ie._heartbeatsCache.heartbeats=yt,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),kt})()}}function Qt(){return(new Date).toISOString().substring(0,10)}class Jt{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,c.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function ht(Je){return it.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var Qe=this;return(0,c.Z)(function*(){var Ct;if(yield Qe._canUseIndexedDBPromise){const kt=yield Qe.read();return tn(Qe.app,{lastSentHeartbeatDate:null!==(Ct=Ie.lastSentHeartbeatDate)&&void 0!==Ct?Ct:kt.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var Qe=this;return(0,c.Z)(function*(){var Ct;if(yield Qe._canUseIndexedDBPromise){const kt=yield Qe.read();return tn(Qe.app,{lastSentHeartbeatDate:null!==(Ct=Ie.lastSentHeartbeatDate)&&void 0!==Ct?Ct:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...Ie.heartbeats]})}})()}}function Yn(Je){return(0,se.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function xr(Je){Sr(new J.wA("platform-logger",Ie=>new le(Ie),"PRIVATE")),Sr(new J.wA("heartbeat",Ie=>new hs(Ie),"PRIVATE")),_r(de,"0.8.4",Je),_r(de,"0.8.4","esm2017"),_r("fire-js","")}("")},4859:(ot,Ee,R)=>{R.d(Ee,{H0:()=>de,wA:()=>N});var c=R(5861),J=R(2090);class N{constructor(B,j,W){this.name=B,this.instanceFactory=j,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class re{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const W=new J.BH;if(this.instancesDeferred.set(j,W),this.isInitialized(j)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:j});Le&&W.resolve(Le)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const W=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Ae){if(Le)return null;throw Ae}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ae(he){return"EAGER"===he.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[j,W]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(j);try{const Ae=this.getOrInitializeService({instanceIdentifier:Le});W.resolve(Ae)}catch{}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,c.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...j.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,W=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:W,options:j});for(const[Ae,we]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Ae)&&we.resolve(Le);return Le}onInit(B,j){var W;const Le=this.normalizeInstanceIdentifier(j),Ae=null!==(W=this.onInitCallbacks.get(Le))&&void 0!==W?W:new Set;Ae.add(B),this.onInitCallbacks.set(Le,Ae);const we=this.instances.get(Le);return we&&B(we,Le),()=>{Ae.delete(B)}}invokeOnInitCallbacks(B,j){const W=this.onInitCallbacks.get(j);if(W)for(const Le of W)try{Le(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let W=this.instances.get(B);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(he=B,he===se?void 0:he),options:j}),this.instances.set(B,W),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(W,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,W)}catch{}var he;return W||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new re(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Ee,R)=>{R.d(Ee,{Am:()=>he,Ub:()=>de,Yd:()=>ae,in:()=>J});const c=[];var J=(()=>{return(B=J||(J={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",J;var B})();const N={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},se=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},le=(B,j,...W)=>{if(j<B.logLevel)return;const Le=(new Date).toISOString(),Ae=re[j];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ae](`[${Le}]  ${B.name}:`,...W)};class ae{constructor(j){this.name=j,this._logLevel=se,this._logHandler=le,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in J))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...j),this._logHandler(this,J.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...j),this._logHandler(this,J.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,J.INFO,...j),this._logHandler(this,J.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,J.WARN,...j),this._logHandler(this,J.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...j),this._logHandler(this,J.ERROR,...j)}}function de(B){c.forEach(j=>{j.setLogLevel(B)})}function he(B,j){for(const W of c){let Le=null;j&&j.level&&(Le=N[j.level]),W.userLogHandler=null===B?null:(Ae,we,...et)=>{const ge=et.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Ae.logLevel)&&B({level:J[we].toLowerCase(),message:ge,args:et,type:Ae.name})}}}},8766:(ot,Ee,R)=>{R.d(Ee,{Lj:()=>Te,X3:()=>nt});var c=R(5861);let N,se;const ae=new WeakMap,de=new WeakMap,he=new WeakMap,B=new WeakMap,j=new WeakMap;let Ae={get(U,pe,q){if(U instanceof IDBTransaction){if("done"===pe)return de.get(U);if("objectStoreNames"===pe)return U.objectStoreNames||he.get(U);if("store"===pe)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return fe(U[pe])},set:(U,pe,q)=>(U[pe]=q,!0),has:(U,pe)=>U instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in U};function ge(U){return"function"==typeof U?function et(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...pe){return U.apply(Ye(this),pe),fe(ae.get(this))}:function(...pe){return fe(U.apply(Ye(this),pe))}:function(pe,...q){const Q=U.call(Ye(this),pe,...q);return he.set(Q,pe.sort?pe.sort():[pe]),fe(Q)}}(U):(U instanceof IDBTransaction&&function Le(U){if(de.has(U))return;const pe=new Promise((q,Q)=>{const ne=()=>{U.removeEventListener("complete",te),U.removeEventListener("error",ke),U.removeEventListener("abort",ke)},te=()=>{q(),ne()},ke=()=>{Q(U.error||new DOMException("AbortError","AbortError")),ne()};U.addEventListener("complete",te),U.addEventListener("error",ke),U.addEventListener("abort",ke)});de.set(U,pe)}(U),((U,pe)=>pe.some(q=>U instanceof q))(U,function re(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Ae):U)}function fe(U){if(U instanceof IDBRequest)return function W(U){const pe=new Promise((q,Q)=>{const ne=()=>{U.removeEventListener("success",te),U.removeEventListener("error",ke)},te=()=>{q(fe(U.result)),ne()},ke=()=>{Q(U.error),ne()};U.addEventListener("success",te),U.addEventListener("error",ke)});return pe.then(q=>{q instanceof IDBCursor&&ae.set(q,U)}).catch(()=>{}),j.set(pe,U),pe}(U);if(B.has(U))return B.get(U);const pe=ge(U);return pe!==U&&(B.set(U,pe),j.set(pe,U)),pe}const Ye=U=>j.get(U);function nt(U,pe,{blocked:q,upgrade:Q,blocking:ne,terminated:te}={}){const ke=indexedDB.open(U,pe),Ne=fe(ke);return Q&&ke.addEventListener("upgradeneeded",lt=>{Q(fe(ke.result),lt.oldVersion,lt.newVersion,fe(ke.transaction))}),q&&ke.addEventListener("blocked",()=>q()),Ne.then(lt=>{te&&lt.addEventListener("close",()=>te()),ne&&lt.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Ne}function Te(U,{blocked:pe}={}){const q=indexedDB.deleteDatabase(U);return pe&&q.addEventListener("blocked",()=>pe()),fe(q).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ue=new Map;function Be(U,pe){if(!(U instanceof IDBDatabase)||pe in U||"string"!=typeof pe)return;if(Ue.get(pe))return Ue.get(pe);const q=pe.replace(/FromIndex$/,""),Q=pe!==q,ne=Ce.includes(q);if(!(q in(Q?IDBIndex:IDBObjectStore).prototype)||!ne&&!_e.includes(q))return;const te=function(){var ke=(0,c.Z)(function*(Ne,...lt){const Wt=this.transaction(Ne,ne?"readwrite":"readonly");let Vt=Wt.store;return Q&&(Vt=Vt.index(lt.shift())),(yield Promise.all([Vt[q](...lt),ne&&Wt.done]))[0]});return function(lt){return ke.apply(this,arguments)}}();return Ue.set(pe,te),te}!function we(U){Ae=U(Ae)}(U=>({...U,get:(pe,q,Q)=>Be(pe,q)||U.get(pe,q,Q),has:(pe,q)=>!!Be(pe,q)||U.has(pe,q)}))},5861:(ot,Ee,R)=>{function c(N,se,re,le,ae,de,he){try{var B=N[de](he),j=B.value}catch(W){return void re(W)}B.done?se(j):Promise.resolve(j).then(le,ae)}function J(N){return function(){var se=this,re=arguments;return new Promise(function(le,ae){var de=N.apply(se,re);function he(j){c(de,le,ae,he,B,"next",j)}function B(j){c(de,le,ae,he,B,"throw",j)}he(void 0)})}}R.d(Ee,{Z:()=>J})}},ot=>{ot(ot.s=1185)}]);